<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.17">
<meta name="author" content="Community and Dmitry Rakovets">
<title>Interview - Questions</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/*! Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment the following line when using as a custom stylesheet */
/* @import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700"; */
html{font-family:sans-serif;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
b,strong{font-weight:bold}
abbr{font-size:.9em}
abbr[title]{cursor:help;border-bottom:1px dotted #dddddf;text-decoration:none}
dfn{font-style:italic}
hr{height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type=button],input[type=reset],input[type=submit]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type=checkbox],input[type=radio]{padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,::before,::after{box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;line-height:1;position:relative;cursor:auto;-moz-tab-size:4;-o-tab-size:4;tab-size:4;word-wrap:anywhere;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:1px solid #dedede;word-wrap:normal}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre).nobreak{word-wrap:normal}
:not(pre).nowrap{white-space:nowrap}
:not(pre).pre-wrap{white-space:pre-wrap}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;border-radius:3px;box-shadow:0 1px 0 rgba(0,0,0,.2),inset 0 0 0 .1em #fff;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin:0 auto;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:flex;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border:1px solid #e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:none;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:hsla(0,0%,100%,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details{margin-left:1.25rem}
details>summary{cursor:pointer;display:block;position:relative;line-height:1.6;margin-bottom:.625rem;outline:none;-webkit-tap-highlight-color:transparent}
details>summary::-webkit-details-marker{display:none}
details>summary::before{content:"";border:solid transparent;border-left:solid;border-width:.3em 0 .3em .5em;position:absolute;top:.5em;left:-1.25rem;transform:translateX(15%)}
details[open]>summary::before{border:solid transparent;border-top:solid;border-width:.5em .3em 0;transform:translateY(15%)}
details>summary::after{content:"";width:1.25rem;height:1em;position:absolute;top:.3em;left:-1.25rem}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class=paragraph]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6);word-wrap:anywhere}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border:1px solid #e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border:1px solid #dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{border-radius:4px;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class=highlight],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos,pre.pygments .linenos{border-right:1px solid;opacity:.35;padding-right:.5em;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}
pre.pygments span.linenos{display:inline-block;margin-right:.75em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans-serif;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;font-size:.85rem;text-align:left;margin-right:0}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:1.25em;word-wrap:anywhere}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>*>tr>*{border-width:1px}
table.grid-cols>*>tr>*{border-width:0 1px}
table.grid-rows>*>tr>*{border-width:1px 0}
table.frame-all{border-width:1px}
table.frame-ends{border-width:1px 0}
table.frame-sides{border-width:0 1px}
table.frame-none>colgroup+*>:first-child>*,table.frame-sides>colgroup+*>:first-child>*{border-top-width:0}
table.frame-none>:last-child>:last-child>*,table.frame-sides>:last-child>:last-child>*{border-bottom-width:0}
table.frame-none>*>tr>:first-child,table.frame-ends>*>tr>:first-child{border-left-width:0}
table.frame-none>*>tr>:last-child,table.frame-ends>*>tr>:last-child{border-right-width:0}
table.stripes-all>*>tr,table.stripes-odd>*>tr:nth-of-type(odd),table.stripes-even>*>tr:nth-of-type(even),table.stripes-hover>*>tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
li>p:empty:only-child::before{content:"";display:inline-block}
ul.checklist>li>p:first-child{margin-left:-1em}
ul.checklist>li>p:first-child>.fa-square-o:first-child,ul.checklist>li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist>li>p:first-child>input[type=checkbox]:first-child{margin-right:.25em}
ul.inline{display:flex;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
td.hdlist2{word-wrap:anywhere}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:4px solid #fff;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);border-radius:50%;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt,summary{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt,summary{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]{border-bottom:1px dotted}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#header,#content,#footnotes,#footer{max-width:none}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media amzn-kf8,print{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
<style>
pre.rouge table td { padding: 5px; }
pre.rouge table pre { margin: 0; }
pre.rouge .cm {
  color: #999988;
  font-style: italic;
}
pre.rouge .cp {
  color: #999999;
  font-weight: bold;
}
pre.rouge .c1 {
  color: #999988;
  font-style: italic;
}
pre.rouge .cs {
  color: #999999;
  font-weight: bold;
  font-style: italic;
}
pre.rouge .c, pre.rouge .ch, pre.rouge .cd, pre.rouge .cpf {
  color: #999988;
  font-style: italic;
}
pre.rouge .err {
  color: #a61717;
  background-color: #e3d2d2;
}
pre.rouge .gd {
  color: #000000;
  background-color: #ffdddd;
}
pre.rouge .ge {
  color: #000000;
  font-style: italic;
}
pre.rouge .gr {
  color: #aa0000;
}
pre.rouge .gh {
  color: #999999;
}
pre.rouge .gi {
  color: #000000;
  background-color: #ddffdd;
}
pre.rouge .go {
  color: #888888;
}
pre.rouge .gp {
  color: #555555;
}
pre.rouge .gs {
  font-weight: bold;
}
pre.rouge .gu {
  color: #aaaaaa;
}
pre.rouge .gt {
  color: #aa0000;
}
pre.rouge .kc {
  color: #000000;
  font-weight: bold;
}
pre.rouge .kd {
  color: #000000;
  font-weight: bold;
}
pre.rouge .kn {
  color: #000000;
  font-weight: bold;
}
pre.rouge .kp {
  color: #000000;
  font-weight: bold;
}
pre.rouge .kr {
  color: #000000;
  font-weight: bold;
}
pre.rouge .kt {
  color: #445588;
  font-weight: bold;
}
pre.rouge .k, pre.rouge .kv {
  color: #000000;
  font-weight: bold;
}
pre.rouge .mf {
  color: #009999;
}
pre.rouge .mh {
  color: #009999;
}
pre.rouge .il {
  color: #009999;
}
pre.rouge .mi {
  color: #009999;
}
pre.rouge .mo {
  color: #009999;
}
pre.rouge .m, pre.rouge .mb, pre.rouge .mx {
  color: #009999;
}
pre.rouge .sa {
  color: #000000;
  font-weight: bold;
}
pre.rouge .sb {
  color: #d14;
}
pre.rouge .sc {
  color: #d14;
}
pre.rouge .sd {
  color: #d14;
}
pre.rouge .s2 {
  color: #d14;
}
pre.rouge .se {
  color: #d14;
}
pre.rouge .sh {
  color: #d14;
}
pre.rouge .si {
  color: #d14;
}
pre.rouge .sx {
  color: #d14;
}
pre.rouge .sr {
  color: #009926;
}
pre.rouge .s1 {
  color: #d14;
}
pre.rouge .ss {
  color: #990073;
}
pre.rouge .s, pre.rouge .dl {
  color: #d14;
}
pre.rouge .na {
  color: #008080;
}
pre.rouge .bp {
  color: #999999;
}
pre.rouge .nb {
  color: #0086B3;
}
pre.rouge .nc {
  color: #445588;
  font-weight: bold;
}
pre.rouge .no {
  color: #008080;
}
pre.rouge .nd {
  color: #3c5d5d;
  font-weight: bold;
}
pre.rouge .ni {
  color: #800080;
}
pre.rouge .ne {
  color: #990000;
  font-weight: bold;
}
pre.rouge .nf, pre.rouge .fm {
  color: #990000;
  font-weight: bold;
}
pre.rouge .nl {
  color: #990000;
  font-weight: bold;
}
pre.rouge .nn {
  color: #555555;
}
pre.rouge .nt {
  color: #000080;
}
pre.rouge .vc {
  color: #008080;
}
pre.rouge .vg {
  color: #008080;
}
pre.rouge .vi {
  color: #008080;
}
pre.rouge .nv, pre.rouge .vm {
  color: #008080;
}
pre.rouge .ow {
  color: #000000;
  font-weight: bold;
}
pre.rouge .o {
  color: #000000;
  font-weight: bold;
}
pre.rouge .w {
  color: #bbbbbb;
}
pre.rouge {
  background-color: #f8f8f8;
}
</style>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-K65X7WESXG"></script>
<script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-K65X7WESXG');
</script>
<script>
    //Get the button
    let mybutton = document.getElementById("btn-back-to-top");

    // When the user scrolls down 20px from the top of the document, show the button
    window.onscroll = function () {
        if (mybutton === null) {
            mybutton = document.getElementById("btn-back-to-top");
            // When the user clicks on the button, scroll to the top of the document
            mybutton.addEventListener("click", backToTop);
            mybutton.addEventListener("touchend", backToTop);
        }
        scrollFunction();
    };

    function scrollFunction() {
        if (
            document.body.scrollTop > 20 ||
            document.documentElement.scrollTop > 20
        ) {
            mybutton.style.display = "block";
        } else {
            mybutton.style.display = "none";
        }
    }

    function backToTop() {
        document.body.scrollTop = 0;
        document.documentElement.scrollTop = 0;
    }
</script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.2/css/all.min.css"/>
<style>
    #btn-back-to-top {
        position: fixed;
        bottom: 20px;
        right: 20px;
        display: none;
        z-index: 100;
    }

    #btn-back-to-main {
        position: fixed;
        top: 20px;
        right: 20px;
        z-index: 100;
        background-color: #ff5555;
    }

    .btn {
        width: 50px;
        height: 50px;
        background-color: #5AF;
        border-radius: 50%;
        border: 0;
        font-size: 150%;
    }
</style>
<a href="/#_тестовые_задания">
    <button type="button" class="btn" id="btn-back-to-main">
        <i class="fa-solid fa-house"></i>
    </button>
</a>
<button type="button" class="btn" id="btn-back-to-top">
    <i class="fa-solid fa-angle-up"></i>
</button>

</head>
<body class="article toc2 toc-left">
<div id="header">
<h1>Interview - Questions</h1>
<div class="details">
<span id="author" class="author">Community and Dmitry Rakovets</span><br>
</div>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_многопоточность">1. Многопоточность</a></li>
<li><a href="#_java_core">2. Java Core</a></li>
<li><a href="#_основы_css">3. Основы CSS</a></li>
<li><a href="#_базы_данных">4. Базы данных</a></li>
<li><a href="#_основы_html">5. Основы HTML</a></li>
<li><a href="#_потоки_вводавывода_в_java">6. Потоки ввода/вывода в Java</a></li>
<li><a href="#_java_8">7. Java 8</a></li>
<li><a href="#_java_collections_framework">8. Java Collections Framework</a></li>
<li><a href="#_источник">9. Источник</a></li>
<li><a href="#_jdbc">10. JDBC</a></li>
<li><a href="#_журналирование">11. Журналирование</a></li>
<li><a href="#_ооп">12. ООП</a></li>
<li><a href="#_сериализация">13. Сериализация</a></li>
<li><a href="#_servlets_jsp_jstl">14. Servlets, JSP, JSTL</a></li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>Используемые ресурсы</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://github.com/enhorse/java-interview" class="bare">https://github.com/enhorse/java-interview</a></p>
</li>
<li>
<p><a href="https://jsehelper.blogspot.com/p/welcome.html" class="bare">https://jsehelper.blogspot.com/p/welcome.html</a></p>
</li>
<li>
<p><a href="https://javastudy.ru/reference/interview/" class="bare">https://javastudy.ru/reference/interview/</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_многопоточность">1. Многопоточность</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="#Расскажите-о-модели-памяти-java">Расскажите о модели памяти Java?</a></p>
</li>
<li>
<p><a href="#Что-такое-потокобезопасность">Что такое «потокобезопасность»?</a></p>
</li>
<li>
<p><a href="#В-чём-разница-между-конкуренцией-и-параллелизмом">В чём разница между <em>«конкуренцией»</em> и <em>«параллелизмом»</em>?</a></p>
</li>
<li>
<p><a href="#Что-такое-кооперативная-многозадачность-Какой-тип-многозадачности-использует-java-Чем-обусловлен-этот-выбор">Что такое <em>«кооперативная многозадачность»</em>? Какой тип многозадачности использует Java? Чем обусловлен этот выбор?</a></p>
</li>
<li>
<p><a href="#Что-такое-ordering-as-if-serial-semantics-sequential-consistency-visibility-atomicity-happens-before-mutual-exclusion-safe-publication">Что такое <em>ordering</em>, <em>as-if-serial semantics</em>, <em>sequential consistency</em>, <em>visibility</em>, <em>atomicity</em>, <em>happens-before</em>, <em>mutual exclusion</em>, <em>safe publication</em>?</a></p>
</li>
<li>
<p><a href="#Чем-отличается-процесс-от-потока">Чем отличается процесс от потока?</a></p>
</li>
<li>
<p><a href="#Что-такое-зелёные-потоки-и-есть-ли-они-в-java">Что такое <em>«зелёные потоки»</em> и есть ли они в Java?</a></p>
</li>
<li>
<p><a href="#Каким-образом-можно-создать-поток">Каким образом можно создать поток?</a></p>
</li>
<li>
<p><a href="#Чем-различаются-thread-и-runnable">Чем различаются <code>Thread</code> и <code>Runnable</code>?</a></p>
</li>
<li>
<p><a href="#В-чём-заключается-разница-между-методами-start-и-run">В чём заключается разница между методами <code>start()</code> и <code>run()</code>?</a></p>
</li>
<li>
<p><a href="#Как-принудительно-запустить-поток">Как принудительно запустить поток?</a></p>
</li>
<li>
<p><a href="#Что-такое-монитор-в-java">Что такое <em>«монитор»</em> в Java?</a></p>
</li>
<li>
<p><a href="#Дайте-определение-понятию-синхронизация">Дайте определение понятию «синхронизация».</a></p>
</li>
<li>
<p><a href="#Какие-существуют-способы-синхронизации-в-java">Какие существуют способы синхронизации в Java?</a></p>
</li>
<li>
<p><a href="#В-каких-состояниях-может-находиться-поток">В каких состояниях может находиться поток?</a></p>
</li>
<li>
<p><a href="#Можно-ли-создавать-новые-экземпляры-класса-пока-выполняется-static-synchronized-метод">Можно ли создавать новые экземпляры класса, пока выполняется <code>static synchronized</code> метод?</a></p>
</li>
<li>
<p><a href="#Зачем-может-быть-нужен-private-мьютекс">Зачем может быть нужен <code>private</code> мьютекс?</a></p>
</li>
<li>
<p><a href="#Как-работают-методы-wait-и-notifynotifyall">Как работают методы <code>wait()</code> и <code>notify()</code>/<code>notifyAll()</code>?</a></p>
</li>
<li>
<p><a href="#В-чем-разница-между-notify-и-notifyall">В чем разница между <code>notify()</code> и <code>notifyAll()</code>?</a></p>
</li>
<li>
<p><a href="#Почему-методы-wait-и-notify-вызываются-только-в-синхронизированном-блоке">Почему методы <code>wait()</code> и <code>notify()</code> вызываются только в синхронизированном блоке?</a></p>
</li>
<li>
<p><a href="#Чем-отличается-работа-метода-wait-с-параметром-и-без-параметра">Чем отличается работа метода <code>wait()</code> с параметром и без параметра?</a></p>
</li>
<li>
<p><a href="#Чем-отличаются-методы-threadsleep-и-threadyield">Чем отличаются методы <code>Thread.sleep()</code> и <code>Thread.yield()</code>?</a></p>
</li>
<li>
<p><a href="#Как-работает-метод-threadjoin">Как работает метод <code>Thread.join()</code>?</a></p>
</li>
<li>
<p><a href="#Что-такое-deadlock">Что такое <em>deadlock</em>?</a></p>
</li>
<li>
<p><a href="#Что-такое-livelock">Что такое <em>livelock</em>?</a></p>
</li>
<li>
<p><a href="#Как-проверить-удерживает-ли-поток-монитор-определённого-ресурса">Как проверить, удерживает ли поток монитор определённого ресурса?</a></p>
</li>
<li>
<p><a href="#На-каком-объекте-происходит-синхронизация-при-вызове-static-synchronized-метода">На каком объекте происходит синхронизация при вызове <code>static synchronized</code> метода?</a></p>
</li>
<li>
<p><a href="#Для-чего-используется-ключевое-слово-volatile-synchronized-transient-native">Для чего используется ключевое слово <code>volatile</code>, <code>synchronized</code>, <code>transient</code>, <code>native</code>?</a></p>
</li>
<li>
<p><a href="#В-чём-различия-между-volatile-и-atomic-переменными">В чём различия между <code>volatile</code> и <em>Atomic</em> переменными?</a></p>
</li>
<li>
<p>&lt;&#8592;В-чём-заключаются-различия-между-javautilconcurrentatomiccompareandswap-и-javautilconcurrentatomicweakcompareandswap,В чём заключаются различия между <code>java.util.concurrent.Atomic*.compareAndSwap()</code> и <code>java.util.concurrent.Atomic*.weakCompareAndSwap()</code>.&gt;&gt;</p>
</li>
<li>
<p><a href="#Что-значит-приоритет-потока">Что значит <em>«приоритет потока»</em>?</a></p>
</li>
<li>
<p><a href="#Что-такое-потоки-демоны">Что такое <em>«потоки-демоны»</em>?</a></p>
</li>
<li>
<p><a href="#Можно-ли-сделать-основной-поток-программы-демоном">Можно ли сделать основной поток программы демоном?</a></p>
</li>
<li>
<p><a href="#Что-значит-усыпить-поток">Что значит <em>«усыпить»</em> поток?</a></p>
</li>
<li>
<p><a href="#Чем-отличаются-два-интерфейса-runnable-и-callable">Чем отличаются два интерфейса <code>Runnable</code> и <code>Callable</code>?</a></p>
</li>
<li>
<p><a href="#Что-такое-futuretask">Что такое <code>FutureTask</code>?</a></p>
</li>
<li>
<p><a href="#В-чем-заключаются-различия-между-cyclicbarrier-и-countdownlatch">В чем заключаются различия между <code>CyclicBarrier</code> и <code>CountDownLatch</code>?</a></p>
</li>
<li>
<p><a href="#Что-такое-race-condition">Что такое <em>race condition</em>?</a></p>
</li>
<li>
<p><a href="#Существует-ли-способ-решения-проблемы-race-condition">Существует ли способ решения проблемы <em>race condition</em>?</a></p>
</li>
<li>
<p><a href="#Как-остановить-поток">Как остановить поток?</a></p>
</li>
<li>
<p><a href="#Почему-не-рекомендуется-использовать-метод-threadstop">Почему не рекомендуется использовать метод <code>Thread.stop()</code>?</a></p>
</li>
<li>
<p><a href="#Что-происходит-когда-в-потоке-выбрасывается-исключение">Что происходит, когда в потоке выбрасывается исключение?</a></p>
</li>
<li>
<p><a href="#В-чем-разница-между-interrupted-и-isinterrupted">В чем разница между <code>interrupted()</code> и <code>isInterrupted()</code>?</a></p>
</li>
<li>
<p><a href="#Что-такое-пул-потоков">Что такое <em>«пул потоков»</em>?</a></p>
</li>
<li>
<p><a href="#Какого-размера-должен-быть-пул-потоков">Какого размера должен быть пул потоков?</a></p>
</li>
<li>
<p><a href="#Что-будет-если-очередь-пула-потоков-уже-заполнена-но-подаётся-новая-задача">Что будет, если очередь пула потоков уже заполнена, но подаётся новая задача?</a></p>
</li>
<li>
<p><a href="#В-чём-заключается-различие-между-методами-submit-и-execute-у-пула-потоков">В чём заключается различие между методами <code>submit()</code> и <code>execute()</code> у пула потоков?</a></p>
</li>
<li>
<p><a href="#В-чем-заключаются-различия-между-cтеком-stack-и-кучей-heap-с-точки-зрения-многопоточности">В чем заключаются различия между cтеком (stack) и кучей (heap) с точки зрения многопоточности?</a></p>
</li>
<li>
<p><a href="#Как-поделиться-данными-между-двумя-потоками">Как поделиться данными между двумя потоками?</a></p>
</li>
<li>
<p><a href="#Какой-параметр-запуска-jvm-используется-для-контроля-размера-стека-потока">Какой параметр запуска JVM используется для контроля размера стека потока?</a></p>
</li>
<li>
<p><a href="#Как-получить-дамп-потока">Как получить дамп потока?</a></p>
</li>
<li>
<p><a href="#Что-такое-threadlocal-переменная">Что такое <em>ThreadLocal-переменная</em>?</a></p>
</li>
<li>
<p><a href="#Назовите-различия-между-synchronized-и-reentrantlock">Назовите различия между <code>synchronized</code> и <code>ReentrantLock</code>?</a></p>
</li>
<li>
<p><a href="#Что-такое-readwritelock">Что такое <code>ReadWriteLock</code>?</a></p>
</li>
<li>
<p><a href="#Что-такое-блокирующий-метод">Что такое <em>«блокирующий метод»</em>?</a></p>
</li>
<li>
<p><a href="#Что-такое-фреймворк-forkjoin">Что такое <em>«фреймворк Fork/Join»</em>?</a></p>
</li>
<li>
<p><a href="#Что-такое-semaphore">Что такое <code>Semaphore</code>?</a></p>
</li>
<li>
<p><a href="#Что-такое-double-checked-locking-singleton">Что такое <em>double checked locking Singleton</em>?</a></p>
</li>
<li>
<p><a href="#Как-создать-потокобезопасный-singleton">Как создать потокобезопасный Singleton?</a></p>
</li>
<li>
<p><a href="#Чем-полезны-неизменяемые-объекты">Чем полезны неизменяемые объекты?</a></p>
</li>
<li>
<p><a href="#Что-такое-busy-spin">Что такое <em>busy spin</em>?</a></p>
</li>
<li>
<p><a href="#Перечислите-принципы-которым-вы-следуете-в-многопоточном-программировании">Перечислите принципы, которым вы следуете в многопоточном программировании?</a></p>
</li>
<li>
<p><a href="#Какое-из-следующих-утверждений-о-потоках-неверно">Какое из следующих утверждений о потоках неверно?</a></p>
</li>
<li>
<p><a href="#Даны-3-потока-Т1-Т2-и-Т3-Как-реализовать-выполнение-в-последовательности-Т1-Т2-Т3">Даны 3 потока Т1, Т2 и Т3? Как реализовать выполнение в последовательности Т1, Т2, Т3?</a></p>
</li>
<li>
<p><a href="Напишите-минимальный-неблокирующий-стек-всего-два-метода&.html#8212;&#8203;push-и-pop">Напишите минимальный неблокирующий стек (всего два метода&#8201;&#8212;&#8201;<code>push()</code> и <code>pop()</code>).</a></p>
</li>
<li>
<p><a href="Напишите-минимальный-неблокирующий-стек-всего-два-метода&.html#8212;&#8203;push-и-pop-с-использованием-semaphore">Напишите минимальный неблокирующий стек (всего два метода&#8201;&#8212;&#8201;<code>push()</code> и <code>pop()</code>) с использованием <code>Semaphore</code>.</a></p>
</li>
<li>
<p><a href="Напишите-минимальный-неблокирующий-arraylist-всего-четыре-метода&.html#8212;&#8203;add-get-remove-size">Напишите минимальный неблокирующий ArrayList (всего четыре метода&#8201;&#8212;&#8201;<code>add()</code>, <code>get()</code>, <code>remove()</code>, <code>size()</code>).</a></p>
</li>
<li>
<p><a href="#Напишите-потокобезопасную-реализацию-класса-с-неблокирующим-методом-biginteger-next-который-возвращает-элементы-последовательности-1-2-4-8-16-">Напишите потокобезопасную реализацию класса с неблокирующим методом <code>BigInteger next()</code>, который возвращает элементы последовательности: <code>[1, 2, 4, 8, 16, ...]</code>.</a></p>
</li>
<li>
<p><a href="#Напишите-простейший-многопоточный-ограниченный-буфер-с-использованием-synchronized">Напишите простейший многопоточный ограниченный буфер с использованием <code>synchronized</code>.</a></p>
</li>
<li>
<p><a href="#Напишите-простейший-многопоточный-ограниченный-буфер-с-использованием-reentrantlock">Напишите простейший многопоточный ограниченный буфер с использованием <code>ReentrantLock</code>.</a></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_расскажите_о_модели_памяти_java">1.1. Расскажите о модели памяти Java?</h3>
<div class="paragraph">
<p><strong>Модель памяти Java (Java Memory Model, JMM)</strong> описывает поведение потоков в среде исполнения Java. Это часть семантики языка Java, набор правил, описывающий выполнение многопоточных программ и правил, по которым потоки могут взаимодействовать друг с другом посредством основной памяти.</p>
</div>
<div class="paragraph">
<p>Формально модель памяти определяет набор действий межпоточного взаимодействия (эти действия включают в себя, в частности, чтение и запись переменной, захват и освобождений монитора, чтение и запись volatile переменной, запуск нового потока), а также модель памяти определяет отношение между этими действиями -<em>happens-before</em> - абстракции обозначающей, что если операция <em>X</em> связана отношением happens-before с операцией <em>Y</em>, то весь код следуемый за операцией <em>Y</em>, выполняемый в одном потоке, видит все изменения, сделанные другим потоком, до операции <em>X</em>.</p>
</div>
<div class="paragraph">
<p>Существует несколько основных правил для отношения happens-before:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>В рамках одного потока любая операция happens-before любой операцией, следующей за ней в исходном коде;</p>
</li>
<li>
<p>Освобождение монитора (unlock) happens-before захват того же монитора (lock);</p>
</li>
<li>
<p>Выход из <code>synchronized</code> блока/метода happens-before вход в <code>synchronized</code> блок/метод на том же мониторе;</p>
</li>
<li>
<p>Запись <code>volatile</code> поля happens-before чтение того же самого <code>volatile</code> поля;</p>
</li>
<li>
<p>Завершение метода <code>run()</code> экземпляра класса <code>Thread</code> happens-before выход из метода <code>join()</code> или возвращение <code>false</code> методом <code>isAlive()</code> экземпляром того же потока;</p>
</li>
<li>
<p>Вызов метода <code>start()</code> экземпляра класса <code>Thread</code> happens-before начало метода <code>run()</code> экземпляра того же потока;</p>
</li>
<li>
<p>Завершение конструктора happens-before начало метода <code>finalize()</code> этого класса;</p>
</li>
<li>
<p>Вызов метода <code>interrupt()</code> на потоке happens-before обнаружению потоком факта, что данный метод был вызван либо путем выбрасывания исключения <code>InterruptedException</code>, либо с помощью методов <code>isInterrupted()</code> или <code>interrupted()</code>.</p>
</li>
<li>
<p>Связь happens-before транзитивна, т.е. если <em>X</em> happens-before <em>Y</em>, а <em>Y</em> happens-before <em>Z</em>, то <em>X</em> happens-before <em>Z</em>.</p>
</li>
<li>
<p>Освобождение/захват монитора и запись/чтение в <code>volatile</code> переменную связаны отношением happens-before, только если операции проводятся над одним и тем же экземпляром объекта.</p>
</li>
<li>
<p>В отношении happens-before участвуют только два потока, о поведении остальных потоков ничего сказать нельзя, пока в каждом из них не наступит отношение happens-before с другим потоком.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Можно выделить несколько основных областей, имеющих отношение к модели памяти:</p>
</div>
<div class="paragraph">
<p><em>Видимость (visibility)</em>. Один поток может в какой-то момент временно сохранить значение некоторых полей не в основную память, а в регистры или локальный кэш процессора, таким образом второй поток, выполняемый на другом процессоре, читая из основной памяти, может не увидеть последних изменений поля. И наоборот, если поток на протяжении какого-то времени работает с регистрами и локальными кэшами, читая данные оттуда, он может сразу не увидеть изменений, сделанных другим потоком в основную память.</p>
</div>
<div class="paragraph">
<p>К вопросу видимости имеют отношение следующие ключевые слов языка Java: <code>synchronized</code>, <code>volatile</code>, <code>final</code>.</p>
</div>
<div class="paragraph">
<p>С точки зрения Java все переменные (за исключением локальных переменных, объявленных внутри метода) хранятся в главной памяти, которая доступна всем потокам, кроме этого, каждый поток имеет локальную&#8212;&#8203;рабочую&#8212;&#8203;память, где он хранит копии переменных, с которыми он работает, и при выполнении программы поток работает только с этими копиями. Надо отметить, что это описание не требование к реализации, а всего лишь модель, которая объясняет поведение программы, так, в качестве локальной памяти не обязательно выступает кэш память, это могут быть регистры процессора или потоки могут вообще не иметь локальной памяти.</p>
</div>
<div class="paragraph">
<p>При входе в <code>synchronized</code> метод или блок поток обновляет содержимое локальной памяти, а при выходе из <code>synchronized</code> метода или блока поток записывает изменения, сделанные в локальной памяти, в главную. Такое поведение <code>synchronized</code> методов и блоков следует из правил для отношения «происходит раньше»: так как все операции с памятью происходят раньше освобождения монитора и освобождение монитора происходит раньше захвата монитора, то все операции с памятью, которые были сделаны потоком до выхода из <code>synchronized</code> блока должны быть видны любому потоку, который входит в <code>synchronized</code> блок для того же самого монитора. Очень важно, что это правило работает только в том случае, если потоки синхронизируются, используя один и тот же монитор!</p>
</div>
<div class="paragraph">
<p>Что касается <code>volatile</code> переменных, то запись таких переменных производится в основную память, минуя локальную. и чтение <code>volatile</code> переменной производится также из основной памяти, то есть значение переменной не может сохраняться в регистрах или локальной памяти потока и операция чтения этой переменной гарантированно вернёт последнее записанное в неё значение.</p>
</div>
<div class="paragraph">
<p>Также модель памяти определяет дополнительную семантику ключевого слова <code>final</code>, имеющую отношение к видимости: после того как объект был корректно создан, любой поток может видеть значения его <code>final</code> полей без дополнительной синхронизации. «Корректно создан» означает, что ссылка на создающийся объект не должна использоваться до тех пор, пока не завершился конструктор объекта. Наличие такой семантики для ключевого слова <code>final</code> позволяет создание неизменяемых (immutable) объектов, содержащих только <code>final</code> поля, такие объекты могут свободно передаваться между потоками без обеспечения синхронизации при передаче.</p>
</div>
<div class="paragraph">
<p>Есть одна проблема, связанная с <code>final</code> полями: реализация разрешает менять значения таких полей после создания объекта (это может быть сделано, например, с использованием механизма reflection). Если значение <code>final</code> поля&#8212;&#8203;константа, чьё значение известно на момент компиляции, изменения такого поля могут не иметь эффекта, так-как обращения к этой переменной могли быть заменены компилятором на константу. Также спецификация разрешает другие оптимизации, связанные с <code>final</code> полями, например, операции чтения <code>final</code> переменной могут быть переупорядочены с операциями, которые потенциально могут изменить такую переменную. Так что рекомендуется изменять <code>final</code> поля объекта только внутри конструктора, в противном случае поведение не специфицировано.</p>
</div>
<div class="paragraph">
<p><em>Reordering (переупорядочивание)</em>. Для увеличения производительности процессор/компилятор могут переставлять местами некоторые инструкции/операции. Вернее, с точки зрения потока, наблюдающего за выполнением операций в другом потоке, операции могут быть выполнены не в том порядке, в котором они идут в исходном коде. Тот же эффект может наблюдаться, когда один поток кладет результаты первой операции в регистр или локальный кэш, а результат второй операции попадает непосредственно в основную память. Тогда второй поток, обращаясь к основной памяти может сначала увидеть результат второй операции, и только потом первой, когда все регистры или кэши синхронизируются с основной памятью. Еще одна причина reordering, может заключаться в том, что процессор может решить поменять порядок выполнения операций, если, например, сочтет что такая последовательность выполнится быстрее.</p>
</div>
<div class="paragraph">
<p>Вопрос reordering также регулируется набором правил для отношения «происходит раньше» и у этих правил есть следствие, касающееся порядка операций, используемое на практике: операции чтения и записи <code>volatile</code> переменных не могут быть переупорядочены с операциями чтения и записи других <code>volatile</code> и не-<code>volatile</code> переменных. Это следствие делает возможным использование <code>volatile</code> переменной как флага, сигнализирующем об окончании какого-либо действия. В остальном правила, касающиеся порядка выполнения операций, гарантируют упорядоченность операций для конкретного набора случаев (таких как, например, захват и освобождение монитора), во всех остальных случаях оставляя компилятору и процессору полную свободу для оптимизаций.</p>
</div>
<div class="paragraph">
<p><a href="#_многопоточность">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_что_такое_потокобезопасность">1.2. Что такое «потокобезопасность»?</h3>
<div class="paragraph">
<p>Потокобезопасность&#8201;&#8212;&#8201;свойство объекта или кода, которое гарантирует, что при исполнении или использовании несколькими потоками, код будет вести себя, как предполагается. Например потокобезопасный счётчик не пропустит ни один счёт, даже если один и тот же экземпляр этого счётчика будет использоваться несколькими потоками.</p>
</div>
<div class="paragraph">
<p><a href="#_многопоточность">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_в_чём_разница_между_конкуренцией_и_параллелизмом">1.3. В чём разница между <em>«конкуренцией»</em> и <em>«параллелизмом»</em>?</h3>
<div class="paragraph">
<p>Конкуренция&#8201;&#8212;&#8201;это способ одновременного решения множества задач.</p>
</div>
<div class="paragraph">
<p>Признаки:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Наличие нескольких потоков управления (например, <em>Thread</em> в Java, <em>корутина</em> в Kotlin), если поток управления один, то конкурентного выполнения быть не может</p>
</li>
<li>
<p>Недетерминированный результат выполнения. Результат зависит от случайных событий, реализации и того, как была проведена синхронизация. Даже если каждый поток полностью детерминированный, итоговый результат будет недетерминированным</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Параллелизм&#8201;&#8212;&#8201;это способ выполнения разных частей одной задачи.</p>
</div>
<div class="paragraph">
<p>Признаки:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Необязательно имеет несколько потоков управления</p>
</li>
<li>
<p>Может приводить к детерминированному результату, так, например, результат умножения каждого элемента массива на число, не изменится, если умножать его по частям параллельно.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a href="#_многопоточность">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_что_такое_кооперативная_многозадачность_какой_тип_многозадачности_использует_java_чем_обусловлен_этот_выбор">1.4. Что такое <em>«кооперативная многозадачность»</em>? Какой тип многозадачности использует Java? Чем обусловлен этот выбор?</h3>
<div class="paragraph">
<p><strong>Кооперативная многозадачность</strong> - это способ деления процессорного времени между потоками, при котором каждый поток обязан отдавать управление следующему добровольно.</p>
</div>
<div class="paragraph">
<p>Преимущества такого подхода - простота реализации, меньшие накладные расходы на переключение контекста.</p>
</div>
<div class="paragraph">
<p>Недостатки - если один поток завис или ведет себя некорректно, то зависает целиком вся система и другие потоки никогда не получат управление.</p>
</div>
<div class="paragraph">
<p>Java использует <strong>вытесняющую многозадачность</strong>, при которой решение о переключении между потоками процесса принимает операционная система.</p>
</div>
<div class="paragraph">
<p>В отличие от кооперативной многозадачности управление операционной системе передаётся вне зависимости от состояния работающих приложений, благодаря чему, отдельные зависшие потоки процесса, как правило, не «подвешивают» всю систему целиком. За счёт регулярного переключения между задачами также улучшается отзывчивость приложения и повышается оперативность освобождения ресурсов, которые больше не используются.</p>
</div>
<div class="paragraph">
<p>В реализации вытесняющая многозадачность отличается от кооперативной, в частности, тем, что требует обработки системного прерывания от аппаратного таймера.</p>
</div>
<div class="paragraph">
<p><a href="#_многопоточность">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_что_такое_ordering_as_if_serial_semantics_sequential_consistency_visibility_atomicity_happens_before_mutual_exclusion_safe_publication">1.5. Что такое <em>ordering</em>, <em>as-if-serial semantics</em>, <em>sequential consistency</em>, <em>visibility</em>, <em>atomicity</em>, <em>happens-before</em>, <em>mutual exclusion</em>, <em>safe publication</em>?</h3>
<div class="paragraph">
<p><strong>ordering</strong> механизм, который определяет, когда один поток может увидеть <em>out-of-order</em> (неверный) порядок исполнения инструкций другого потока. CPU для повышения производительности может переупорядочивать процессорные инструкции и выполнять их в произвольном порядке  до тех пор пока для потока внутри не будет видно никаких отличий. Гарантия, предоставляемая этим механизмом, называется <strong>as-if-serial semantics</strong>.</p>
</div>
<div class="paragraph">
<p><strong>sequential consistency</strong> - то же что и <em>as-if-serial semantics</em>, гарантия того, что в рамках одного потока побочные эффекты от всех операций будут такие, как будто все операции выполняются последовательно.</p>
</div>
<div class="paragraph">
<p><strong>visibility</strong>  определяет, когда действия в одном потоке становятся видны из другого потока.</p>
</div>
<div class="paragraph">
<p><strong>happens-before</strong> - логическое ограничение на порядок выполнения инструкций программы. Если указывается, что запись в переменную и последующее ее чтение связаны через эту зависимость, то как бы при выполнении не переупорядочивались инструкции, в момент чтения все связанные с процессом записи результаты уже зафиксированы и видны.</p>
</div>
<div class="paragraph">
<p><strong>atomicity</strong>&#8201;&#8212;&#8201;атомарность операций. Атомарная операция выглядит единой и неделимой командой процессора, которая может быть или уже выполненной или ещё невыполненной.</p>
</div>
<div class="paragraph">
<p><strong>mutual exclusion</strong> (взаимоисключающая блокировка, семафор с одним состоянием) - механизм, гарантирующий потоку исключительный доступ к ресурсу. Используется для предотвращения одновременного доступа к общему ресурсу. В каждый момент времени таким ресурсом может владеть только один поток. Простейший пример: <code>synchronized(obj) { … }</code>.</p>
</div>
<div class="paragraph">
<p><strong>safe publication</strong>? - показ объектов другим потокам из текущего, не нарушая ограничений <em>visibility</em>. Способы такой публикации в Java:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>static{}</code> инициализатор;</p>
</li>
<li>
<p><code>volatile</code> переменные;</p>
</li>
<li>
<p><code>atomic</code> переменные;</p>
</li>
<li>
<p>сохранение в разделяемой переменной, корректно защищенной с использованием <code>synchronized()</code>, синхронизаторов или других конструкций, создающих <em>read/write memory barrier</em>;</p>
</li>
<li>
<p><code>final</code> переменные в разделяемом объекте, который был корректно проинициализирован.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a href="#_многопоточность">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_чем_отличается_процесс_от_потока">1.6. Чем отличается процесс от потока?</h3>
<div class="paragraph">
<p><strong>Процесс</strong>&#8201;&#8212;&#8201;экземпляр программы во время выполнения, независимый объект, которому выделены системные ресурсы (например, процессорное время и память). Каждый процесс выполняется в отдельном адресном пространстве: один процесс не может получить доступ к переменным и структурам данных другого. Если процесс хочет получить доступ к чужим ресурсам, необходимо использовать межпроцессное взаимодействие. Это могут быть конвейеры, файлы, каналы связи между компьютерами и многое другое.</p>
</div>
<div class="paragraph">
<p>Для каждого процесса ОС создает так называемое «виртуальное адресное пространство», к которому процесс имеет прямой доступ. Это пространство принадлежит процессу, содержит только его данные и находится в полном его распоряжении. Операционная система же отвечает за то, как виртуальное пространство процесса проецируется на физическую память.</p>
</div>
<div class="paragraph">
<p><strong>Поток</strong>(thread)&#8201;&#8212;&#8201;определенный способ выполнения процесса, определяющий последовательность исполнения кода в процессе. Потоки всегда создаются в контексте какого-либо процесса, и вся их жизнь проходит только в его границах.
Потоки могут исполнять один и тот же код и манипулировать одними и теми же данными, а также совместно использовать описатели объектов ядра, поскольку таблица описателей создается не в отдельных потоках, а в процессах.
Так как потоки расходуют существенно меньше ресурсов, чем процессы, в процессе выполнения работы выгоднее создавать дополнительные потоки и избегать создания новых процессов.</p>
</div>
<div class="paragraph">
<p><a href="#_многопоточность">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_что_такое_зелёные_потоки_и_есть_ли_они_в_java">1.7. Что такое <em>«зелёные потоки»</em> и есть ли они в Java?</h3>
<div class="paragraph">
<p><strong>Зелёные (легковесные) потоки</strong>(green threads) - потоки эмулируемые виртуальной машиной или средой исполнения. Создание зелёного потока не подразумевает под собой создание реального потока ОС.</p>
</div>
<div class="paragraph">
<p>Виртуальная машина Java берёт на себя заботу о переключении между разными green threads, а сама машина работает как один поток ОС. Это даёт несколько преимуществ. Потоки ОС относительно дороги в большинстве POSIX-систем. Кроме того, переключение между native threads гораздо медленнее, чем между green threads.</p>
</div>
<div class="paragraph">
<p>Это всё означает, что в некоторых ситуациях green threads гораздо выгоднее, чем native threads. Система может поддерживать гораздо большее количество green threads, чем потоков OС. Например, гораздо практичнее запускать новый green thread для нового HTTP-соединения к веб-серверу, вместо создания нового native thread.</p>
</div>
<div class="paragraph">
<p>Однако есть и недостатки. Самый большой заключается в том, что вы не можете исполнять два потока одновременно. Поскольку существует только один native thread, только он и вызывается планировщиком ОС. Даже если у вас несколько процессоров и несколько green threads, только один процессор может вызывать green thread. И всё потому, что с точки зрения планировщика заданий ОС всё это выглядит одним потоком.</p>
</div>
<div class="paragraph">
<p>Начиная с версии 1.2 Java поддерживает native threads, и с тех пор они используются по умолчанию.</p>
</div>
<div class="paragraph">
<p><a href="#_многопоточность">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_каким_образом_можно_создать_поток">1.8. Каким образом можно создать поток?</h3>
<div class="ulist">
<ul>
<li>
<p>Создать потомка класса <code>Thread</code> и переопределить его метод <code>run()</code>;</p>
</li>
<li>
<p>Создать объект класса <code>Thread</code>, передав ему в конструкторе экземпляр класса, реализующего интерфейс <code>Runnable</code>. Эти интерфейс содержит метод <code>run()</code>, который будет выполняться в новом потоке. Поток закончит выполнение, когда завершится его метод <code>run()</code>.</p>
</li>
<li>
<p>Вызвать метод <code>submit()</code> у экземпляра класса реализующего интерфейс <code>ExecutorService</code>, передав ему в качестве параметра экземпляр класса реализующего интерфейс <code>Runnable</code> или <code>Callable</code> (содержит метод <code>call()</code>, в котором описывается логика выполнения).</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a href="#_многопоточность">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_чем_различаются_thread_и_runnable">1.9. Чем различаются <code>Thread</code> и <code>Runnable</code>?</h3>
<div class="paragraph">
<p><code>Thread</code> - это класс, некоторая надстройка над физическим потоком.</p>
</div>
<div class="paragraph">
<p><code>Runnable</code> - это интерфейс, представляющий абстракцию над выполняемой задачей.</p>
</div>
<div class="paragraph">
<p>Помимо того, что <code>Runnable</code> помогает разрешить проблему множественного наследования, несомненный плюс от его использования состоит в том, что он позволяет логически отделить логику выполнения задачи от непосредственного управления потоком.</p>
</div>
<div class="paragraph">
<p><a href="#_многопоточность">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_в_чём_заключается_разница_между_методами_start_и_run">1.10. В чём заключается разница между методами <code>start()</code> и <code>run()</code>?</h3>
<div class="paragraph">
<p>Несмотря на то, что <code>start()</code> вызывает метод <code>run()</code> внутри себя, это не то же самое, что просто вызов <code>run()</code>. Если <code>run()</code> вызывается как обычный метод, то он вызывается в том же потоке и никакой новый поток не запускается, как это происходит, в случае, когда вы вызываете метод <code>start()</code>.</p>
</div>
<div class="paragraph">
<p><a href="#_многопоточность">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_как_принудительно_запустить_поток">1.11. Как принудительно запустить поток?</h3>
<div class="paragraph">
<p>Никак. В Java не существует абсолютно никакого способа принудительного запуска потока. Это контролируется JVM и Java не предоставляет никакого API для управления этим процессом.</p>
</div>
<div class="paragraph">
<p><a href="#_многопоточность">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_что_такое_монитор_в_java">1.12. Что такое <em>«монитор»</em> в Java?</h3>
<div class="paragraph">
<p><strong>Монитор</strong>, мьютекс (mutex)&#8201;&#8212;&#8201;это средство обеспечения контроля за доступом к ресурсу. У монитора может быть максимум один владелец в каждый текущий момент времени. Следовательно, если кто-то использует ресурс и захватил монитор для обеспечения единоличного доступа, то другой, желающий использовать тот же ресурс, должен подождать освобождения монитора, захватить его и только потом начать использовать ресурс.</p>
</div>
<div class="paragraph">
<p>Удобно представлять монитор как id захватившего его объекта. Если этот id равен 0&#8201;&#8212;&#8201;ресурс свободен. Если не 0&#8201;&#8212;&#8201;ресурс занят. Можно встать в очередь и ждать его освобождения.</p>
</div>
<div class="paragraph">
<p>В Java у каждого экземпляра объекта есть монитор, который контролируется непосредственно виртуальной машиной. Используется он так: любой нестатический <code>synchronized</code>-метод при своем вызове прежде всего пытается захватить монитор того объекта, у которого он вызван (на который он может сослаться как на <code>this</code>). Если это удалось&#8201;&#8212;&#8201;метод исполняется. Если нет&#8201;&#8212;&#8201;поток останавливается и ждет, пока монитор будет отпущен.</p>
</div>
<div class="paragraph">
<p><a href="#_многопоточность">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_дайте_определение_понятию_синхронизация">1.13. Дайте определение понятию «синхронизация».</h3>
<div class="paragraph">
<p>Синхронизация - это процесс, который позволяет выполнять потоки параллельно.</p>
</div>
<div class="paragraph">
<p>В Java все объекты имеют одну блокировку, благодаря которой только один поток одновременно может получить доступ к критическому коду в объекте. Такая синхронизация помогает предотвратить повреждение состояния объекта. Если поток получил блокировку, ни один другой поток не может войти в синхронизированный код, пока блокировка не будет снята. Когда поток, владеющий блокировкой, выходит из синхронизированного кода, блокировка снимается. Теперь другой поток может получить блокировку объекта и выполнить синхронизированный код. Если поток пытается получить блокировку объекта, когда другой поток владеет блокировкой, поток переходит в состояние Блокировки до тех пор, пока блокировка не снимется.</p>
</div>
<div class="paragraph">
<p><a href="#_многопоточность">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_какие_существуют_способы_синхронизации_в_java">1.14. Какие существуют способы синхронизации в Java?</h3>
<div class="ulist">
<ul>
<li>
<p><strong>Системная синхронизация с использованием <code>wait()</code>/<code>notify()</code></strong>. Поток, который ждет выполнения каких-либо условий, вызывает у этого объекта метод <code>wait()</code>, предварительно захватив его монитор. На этом его работа приостанавливается. Другой поток может вызвать на этом же самом объекте метод <code>notify()</code> (опять же, предварительно захватив монитор объекта), в результате чего, ждущий на объекте поток «просыпается» и продолжает свое выполнение. В обоих случаях монитор надо захватывать в явном виде, через <code>synchronized</code>-блок, потому как методы <code>wait()</code>/<code>notify()</code> не синхронизированы!</p>
</li>
<li>
<p><strong>Системная синхронизация с использованием <code>join()</code></strong>. Метод <code>join()</code>, вызванный у экземпляра класса <code>Thread</code>, позволяет текущему потоку остановиться до того момента, как поток, связанный с этим экземпляром, закончит работу.</p>
</li>
<li>
<p><strong>Использование классов из пакета <code>java.util.concurrent</code></strong>, который предоставляет набор классов для организации межпоточного взаимодействия. Примеры таких классов - <code>Lock</code>, <code>Semaphore</code> и пр.. Концепция данного подхода заключается в использовании атомарных операций и переменных.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a href="#_многопоточность">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_в_каких_состояниях_может_находиться_поток">1.15. В каких состояниях может находиться поток?</h3>
<div class="paragraph">
<p>Потоки могут находиться в одном из следующих состояний:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Новый (New)</strong>. После создания экземпляра потока, он находится в состоянии Новый до тех пор, пока не вызван метод <code>start()</code>. В этом состоянии поток не считается живым.</p>
</li>
<li>
<p><strong>Работоспособный (Runnable)</strong>. Поток переходит в состояние Работоспособный, когда вызывается метод <code>start()</code>. Поток может перейти в это состояние также из состояния Работающий или из состояния Блокирован. Когда поток находится в этом состоянии, он считается живым.</p>
</li>
<li>
<p><strong>Работающий (Running)</strong>. Поток переходит из состояния Работоспособный в состояние Работающий, когда Планировщик потоков выбирает его как работающий в данный момент.</p>
</li>
<li>
<p><strong>Живой, но не работоспособный (Alive, but not runnable)</strong>. Поток может быть живым, но не работоспособным по нескольким причинам:</p>
<div class="ulist">
<ul>
<li>
<p><strong>Ожидание (Waiting)</strong>. Поток переходит в состояние Ожидания, вызывая метод <code>wait()</code>. Вызов <code>notify()</code> или <code>notifyAll()</code> может перевести поток из состояния Ожидания в состояние Работоспособный.</p>
</li>
<li>
<p><strong>Сон (Sleeping)</strong>. Метод <code>sleep()</code> переводит поток в состояние Сна на заданный промежуток времени в миллисекундах.</p>
</li>
<li>
<p><strong>Блокировка (Blocked)</strong>. Поток может перейти в это состояние, в ожидании ресурса, такого как ввод/вывод или из-за блокировки другого объекта. В этом случае поток переходит в состояние Работоспособный, когда ресурс становится доступен.</p>
</li>
<li>
<p><strong>Мёртвый (Dead)</strong>. Поток считается мёртвым, когда его метод <code>run()</code> полностью выполнен. Мёртвый поток не может перейти ни в какое другое состояние, даже если для него вызван метод <code>start()</code>.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p><a href="#_многопоточность">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_можно_ли_создавать_новые_экземпляры_класса_пока_выполняется_static_synchronized_метод">1.16. Можно ли создавать новые экземпляры класса, пока выполняется <code>static synchronized</code> метод?</h3>
<div class="paragraph">
<p>Да, можно создавать новые экземпляры класса, так как статические поля не принадлежат к экземплярам класса.</p>
</div>
<div class="paragraph">
<p><a href="#_многопоточность">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_зачем_может_быть_нужен_private_мьютекс">1.17. Зачем может быть нужен <code>private</code> мьютекс?</h3>
<div class="paragraph">
<p>Объект для синхронизации делается <code>private</code>, чтобы сторонний код не мог на него синхронизироваться и случайно получить взаимную блокировку.</p>
</div>
<div class="paragraph">
<p><a href="#_многопоточность">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_как_работают_методы_wait_и_notifynotifyall">1.18. Как работают методы <code>wait()</code> и <code>notify()</code>/<code>notifyAll()</code>?</h3>
<div class="paragraph">
<p>Эти методы определены у класса <code>Object</code> и предназначены для взаимодействия потоков между собой при межпоточной синхронизации.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>wait()</code>: освобождает монитор и переводит вызывающий поток в состояние ожидания до тех пор, пока другой поток не вызовет метод <code>notify()</code>/<code>notifyAll()</code>;</p>
</li>
<li>
<p><code>notify()</code>: продолжает работу потока, у которого ранее был вызван метод <code>wait()</code>;</p>
</li>
<li>
<p><code>notifyAll()</code>: возобновляет работу всех потоков, у которых ранее был вызван метод <code>wait()</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Когда вызван метод <code>wait()</code>, поток освобождает блокировку на объекте и переходит из состояния Работающий (Running) в состояние Ожидания (Waiting). Метод <code>notify()</code> подаёт сигнал одному из потоков, ожидающих на объекте, чтобы перейти в состояние Работоспособный (Runnable). При этом невозможно определить, какой из ожидающих потоков должен стать работоспособным. Метод <code>notifyAll()</code> заставляет все ожидающие потоки для объекта вернуться в состояние Работоспособный (Runnable). Если ни один поток не находится в ожидании на методе <code>wait()</code>, то при вызове <code>notify()</code> или <code>notifyAll()</code> ничего не происходит.</p>
</div>
<div class="paragraph">
<p>Поток может вызвать методы <code>wait()</code> или <code>notify()</code> для определённого объекта, только если он в данный момент имеет блокировку на этот объект. <code>wait()</code>, <code>notify()</code> и <code>notifyAll()</code> должны вызываться только из синхронизированного кода.</p>
</div>
<div class="paragraph">
<p><a href="#_многопоточность">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_в_чем_разница_между_notify_и_notifyall">1.19. В чем разница между <code>notify()</code> и <code>notifyAll()</code>?</h3>
<div class="paragraph">
<p>Дело в том, что «висеть» на методе <code>wait()</code> одного монитора могут сразу несколько потоков. При вызове <code>notify()</code> только один из них выходит из <code>wait()</code> и пытается захватить монитор, а затем продолжает работу со следующего после <code>wait()</code> оператора. Какой из них выйдет - заранее неизвестно. А при вызове <code>notifyAll()</code>, все висящие на <code>wait()</code> потоки выходят из <code>wait()</code>, и все они пытаются захватить монитор. Понятно, что в любой момент времени монитор может быть захвачен только одним потоком, а остальные ждут своей очереди. Порядок очереди определяется планировщиком потоков Java.</p>
</div>
<div class="paragraph">
<p><a href="#_многопоточность">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_почему_методы_wait_и_notify_вызываются_только_в_синхронизированном_блоке">1.20. Почему методы <code>wait()</code> и <code>notify()</code> вызываются только в синхронизированном блоке?</h3>
<div class="paragraph">
<p>Монитор надо захватывать в явном виде (через <code>synchronized</code>-блок), потому что методы <code>wait()</code> и <code>notify()</code> не синхронизированы.</p>
</div>
<div class="paragraph">
<p><a href="#_многопоточность">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_чем_отличается_работа_метода_wait_с_параметром_и_без_параметра">1.21. Чем отличается работа метода <code>wait()</code> с параметром и без параметра?</h3>
<div class="paragraph">
<p><code>wait()</code></p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>без параметров</strong> освобождает монитор и переводит вызывающий поток в состояние ожидания до тех пор, пока другой поток не вызовет метод <code>notify()</code>/<code>notifyAll()</code>,</p>
</li>
<li>
<p><strong>с параметрами</strong> заставит поток ожидать заданное количество времени или вызова <code>notify()</code>/<code>notifyAll()</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a href="#_многопоточность">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_чем_отличаются_методы_thread_sleep_и_thread_yield">1.22. Чем отличаются методы <code>Thread.sleep()</code> и <code>Thread.yield()</code>?</h3>
<div class="paragraph">
<p>Метод <code>yield()</code> служит причиной того, что поток переходит из состояния работающий (running) в состояние работоспособный (runnable), давая возможность другим потокам активизироваться. Но следующий выбранный для запуска поток может и не быть другим.</p>
</div>
<div class="paragraph">
<p>Метод <code>sleep()</code> вызывает засыпание текущего потока на заданное время, состояние изменяется с работающий (running) на ожидающий (waiting).</p>
</div>
<div class="paragraph">
<p><a href="#_многопоточность">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_как_работает_метод_thread_join">1.23. Как работает метод <code>Thread.join()</code>?</h3>
<div class="paragraph">
<p>Когда поток вызывает <code>join()</code> для другого потока, текущий работающий поток будет ждать, пока другой поток, к которому он присоединяется, не будет завершён:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="kt">void</span> <span class="nf">join</span><span class="o">()</span>
<span class="kt">void</span> <span class="nf">join</span><span class="o">(</span><span class="kt">long</span> <span class="n">millis</span><span class="o">)</span>
<span class="kt">void</span> <span class="nf">join</span><span class="o">(</span><span class="kt">long</span> <span class="n">millis</span><span class="o">,</span> <span class="kt">int</span> <span class="n">nanos</span><span class="o">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><a href="#_многопоточность">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_что_такое_deadlock">1.24. Что такое <em>deadlock</em>?</h3>
<div class="paragraph">
<p><strong>Взаимная блокировка (deadlock)</strong> - явление, при котором все потоки находятся в режиме ожидания. Происходит, когда достигаются состояния:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>взаимного исключения: по крайней мере один ресурс занят в режиме неделимости и, следовательно, только один поток может использовать ресурс в любой данный момент времени.</p>
</li>
<li>
<p>удержания и ожидания: поток удерживает как минимум один ресурс и запрашивает дополнительные ресурсов, которые удерживаются другими потоками.</p>
</li>
<li>
<p>отсутствия предочистки: операционная система не переназначивает ресурсы: если они уже заняты, они должны отдаваться удерживающим потокам сразу же.</p>
</li>
<li>
<p>цикличного ожидания: поток ждёт освобождения ресурса, другим потоком, который в свою очередь ждёт освобождения ресурса заблокированного первым потоком.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Простейший способ избежать взаимной блокировки&#8201;&#8212;&#8201;не допускать цикличного ожидания. Этого можно достичь, получая мониторы разделяемых ресурсов в определённом порядке и освобождая их в обратном порядке.</p>
</div>
<div class="paragraph">
<p><a href="#_многопоточность">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_что_такое_livelock">1.25. Что такое <em>livelock</em>?</h3>
<div class="paragraph">
<p><em>livelock</em>&#8201;&#8212;&#8201;тип взаимной блокировки, при котором несколько потоков выполняют бесполезную работу, попадая в зацикленность при попытке получения каких-либо ресурсов. При этом их состояния постоянно изменяются в зависимости друг от друга. Фактической ошибки не возникает, но КПД системы падает до 0. Часто возникает в результате попыток предотвращения deadlock.</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>Реальный пример livelock,&#8201;&#8212;&#8201;когда два человека встречаются в узком коридоре и каждый, пытаясь быть вежливым, отходит в сторону, и так они бесконечно двигаются из стороны в сторону, абсолютно не продвигаясь в нужном им направлении.</p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p><a href="#_многопоточность">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_как_проверить_удерживает_ли_поток_монитор_определённого_ресурса">1.26. Как проверить, удерживает ли поток монитор определённого ресурса?</h3>
<div class="paragraph">
<p>Метод <code>Thread.holdsLock(lock)</code> возвращает <code>true</code>, когда текущий поток удерживает монитор у определённого объекта.</p>
</div>
<div class="paragraph">
<p><a href="#_многопоточность">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_на_каком_объекте_происходит_синхронизация_при_вызове_static_synchronized_метода">1.27. На каком объекте происходит синхронизация при вызове <code>static synchronized</code> метода?</h3>
<div class="paragraph">
<p>У синхронизированного статического метода нет доступа к <code>this</code>, но есть доступ к объекту класса <code>Class</code>, он присутствует в единственном экземпляре и именно он выступает в качестве монитора для синхронизации статических методов. Таким образом, следующая конструкция:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">SomeClass</span> <span class="o">{</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kd">synchronized</span> <span class="kt">void</span> <span class="nf">someMethod</span><span class="o">()</span> <span class="o">{</span>
        <span class="c1">//code</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>эквивалентна такой:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">SomeClass</span> <span class="o">{</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">someMethod</span><span class="o">(){</span>
        <span class="kd">synchronized</span><span class="o">(</span><span class="nc">SomeClass</span><span class="o">.</span><span class="na">class</span><span class="o">){</span>
            <span class="c1">//code</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><a href="#_многопоточность">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_для_чего_используется_ключевое_слово_volatile_synchronized_transient_native">1.28. Для чего используется ключевое слово <code>volatile</code>, <code>synchronized</code>, <code>transient</code>, <code>native</code>?</h3>
<div class="paragraph">
<p><strong><code>volatile</code></strong> - этот модификатор вынуждает потоки отключить оптимизацию доступа и использовать единственный экземпляр переменной. Если переменная примитивного типа&#8201;&#8212;&#8201;этого будет достаточно для обеспечения потокобезопасности. Если же переменная является ссылкой на объект&#8201;&#8212;&#8201;синхронизировано будет исключительно значение этой ссылки. Все же данные, содержащиеся в объекте, синхронизированы не будут!</p>
</div>
<div class="paragraph">
<p><strong><code>synchronized</code></strong> - это зарезервированное слово позволяет добиваться синхронизации в помеченных им методах или блоках кода.</p>
</div>
<div class="paragraph">
<p>Ключевые слова <code>transient</code> и <code>native</code> к многопоточности никакого отношения не имеют, первое используется для указания полей класса, которые не нужно сериализовать, а второе - сигнализирует о том, что метод реализован в платформо-зависимом коде.</p>
</div>
<div class="paragraph">
<p><a href="#_многопоточность">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_в_чём_различия_между_volatile_и_atomic_переменными">1.29. В чём различия между <code>volatile</code> и <em>Atomic</em> переменными?</h3>
<div class="paragraph">
<p><code>volatile</code> принуждает использовать единственный экземпляр переменной, но не гарантирует атомарность. Например, операция <code>count++</code> не станет атомарной просто потому, что <code>count</code> объявлена <code>volatile</code>. C другой стороны <code>class AtomicInteger</code> предоставляет атомарный метод для выполнения таких комплексных операций атомарно, например <code>getAndIncrement()</code>&#8201;&#8212;&#8201;атомарная замена оператора инкремента, его можно использовать, чтобы атомарно увеличить текущее значение на один. Похожим образом сконструированы атомарные версии и для других типов данных.</p>
</div>
<div class="paragraph">
<p><a href="#_многопоточность">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_в_чём_заключаются_различия_между_java_util_concurrent_atomic_compareandswap_и_java_util_concurrent_atomic_weakcompareandswap">1.30. В чём заключаются различия между <code>java.util.concurrent.Atomic*.compareAndSwap()</code> и <code>java.util.concurrent.Atomic*.weakCompareAndSwap()</code>.</h3>
<div class="ulist">
<ul>
<li>
<p><code>weakCompareAndSwap()</code> не создает <em>memory barrier</em> и не дает гарантии <em>happens-before</em>;</p>
</li>
<li>
<p><code>weakCompareAndSwap()</code> сильно зависит от кэша/CPU, и может возвращать <code>false</code> без видимых причин;</p>
</li>
<li>
<p><code>weakCompareAndSwap()</code>, более легкая, но поддерживаемая далеко не всеми архитектурами и не всегда эффективная операция.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a href="#_многопоточность">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_что_значит_приоритет_потока">1.31. Что значит <em>«приоритет потока»</em>?</h3>
<div class="paragraph">
<p>Приоритеты потоков используются планировщиком потоков для принятия решений о том, когда какому из потоков будет разрешено работать. Теоретически высокоприоритетные потоки получают больше времени процессора, чем низкоприоритетные. Практически объем времени процессора, который получает поток, часто зависит от нескольких факторов помимо его приоритета.</p>
</div>
<div class="paragraph">
<p>Чтобы установить приоритет потока, используется метод класса <code>Thread</code>: <code>final void setPriority(int level)</code>. Значение <code>level</code> изменяется в пределах от <code>Thread.MIN_PRIORITY = 1</code> до <code>Thread.MAX_PRIORITY = 10</code>. Приоритет по умолчанию - <code>Thread.NORM_PRlORITY = 5</code>.</p>
</div>
<div class="paragraph">
<p>Получить текущее значение приоритета потока можно вызвав метод: <code>final int getPriority()</code> у экземпляра класса <code>Thread</code>.</p>
</div>
<div class="paragraph">
<p><a href="#_многопоточность">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_что_такое_потоки_демоны">1.32. Что такое <em>«потоки-демоны»</em>?</h3>
<div class="paragraph">
<p>Потоки-демоны работают в фоновом режиме вместе с программой, но не являются неотъемлемой частью программы. Если какой-либо процесс может выполняться на фоне работы основных потоков выполнения и его деятельность заключается в обслуживании основных потоков приложения, то такой процесс может быть запущен как поток-демон с помощью метода <code>setDaemon(boolean value)</code>, вызванного у потока до его запуска. Метод <code>boolean isDaemon()</code> позволяет определить, является ли указанный поток демоном или нет. Базовое свойство потоков-демонов заключается в возможности основного потока приложения завершить выполнение потока-демона (в отличие от обычных потоков) с окончанием кода метода <code>main()</code>, не обращая внимания на то, что поток-демон еще работает.</p>
</div>
<div class="paragraph">
<p><a href="#_многопоточность">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_можно_ли_сделать_основной_поток_программы_демоном">1.33. Можно ли сделать основной поток программы демоном?</h3>
<div class="paragraph">
<p>Нет. Потоки-демоны позволяют описывать фоновые процессы, которые нужны только для обслуживания основных потоков выполнения и не могут существовать без них.</p>
</div>
<div class="paragraph">
<p><a href="#_многопоточность">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_что_значит_усыпить_поток">1.34. Что значит <em>«усыпить»</em> поток?</h3>
<div class="paragraph">
<p>Это значит приостановить его на определенный промежуток времени, вызвав в ходе его выполнения статический метод <code>Thread.sleep()</code> передав в качестве параметра необходимое количество времени в  миллисекундах. До истечения этого времени поток может быть выведен из состояния ожидания вызовом <code>interrupt()</code> с выбрасыванием <code>InterruptedException</code>.</p>
</div>
<div class="paragraph">
<p><a href="#_многопоточность">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_чем_отличаются_два_интерфейса_runnable_и_callable">1.35. Чем отличаются два интерфейса <code>Runnable</code> и <code>Callable</code>?</h3>
<div class="ulist">
<ul>
<li>
<p>Интерфейс <code>Runnable</code> появился в Java 1.0, а интерфейс <code>Callable</code> был введен в Java 5.0 в составе библиотеки <code>java.util.concurrent</code>;</p>
</li>
<li>
<p>Классы, реализующие интерфейс <code>Runnable</code> для выполнения задачи должны реализовывать метод <code>run()</code>. Классы, реализующие интерфейс <code>Callable</code> - метод <code>call()</code>;</p>
</li>
<li>
<p>Метод <code>Runnable.run()</code> не возвращает никакого значения, <code>Callable.call()</code> возвращает объект <code>Future</code>, который может содержать результат вычислений;</p>
</li>
<li>
<p>Метод <code>run()</code> не может выбрасывать проверяемые исключения, в то время как метод <code>call()</code> может.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a href="#_многопоточность">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_что_такое_futuretask">1.36. Что такое <code>FutureTask</code>?</h3>
<div class="paragraph">
<p><code>FutureTask</code> представляет собой отменяемое асинхронное вычисление в параллельном Java приложении. Этот класс предоставляет базовую реализацию <code>Future</code>, с методами для запуска и остановки вычисления, методами для запроса состояния вычисления и извлечения результатов. Результат может быть получен только когда вычисление завершено, метод получения будет заблокирован, если вычисление ещё не завершено. Объекты <code>FutureTask</code> могут быть использованы для обёртки объектов <code>Callable</code> и <code>Runnable</code>. Так как <code>FutureTask</code> реализует <code>Runnable</code>, его можно передать в <code>Executor</code> на выполнение.</p>
</div>
<div class="paragraph">
<p><a href="#_многопоточность">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_в_чем_заключаются_различия_между_cyclicbarrier_и_countdownlatch">1.37. В чем заключаются различия между <code>CyclicBarrier</code> и <code>CountDownLatch</code>?</h3>
<div class="paragraph">
<p><code>CountDownLatch</code> (замок с обратным отсчетом) предоставляет возможность любому количеству потоков в блоке кода ожидать до тех пор, пока не завершится определенное количество операций, выполняющихся в других потоках, перед тем как они будут «отпущены», чтобы продолжить свою деятельность. В конструктор <code>CountDownLatch(int count)</code> обязательно передается количество операций, которое должно быть выполнено, чтобы замок «отпустил» заблокированные потоки.</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>Примером <code>CountDownLatch</code> из жизни может служить сбор экскурсионной группы: пока не наберется определенное количество человек, экскурсия не начнется.</p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p><code>CyclicBarrier</code> реализует шаблон синхронизации «Барьер». Циклический барьер является точкой синхронизации, в которой указанное количество параллельных потоков встречается и блокируется. Как только все потоки прибыли, выполняется опционное действие (или не выполняется, если барьер был инициализирован без него), и, после того, как оно выполнено, барьер ломается и ожидающие потоки «освобождаются». В конструкторы барьера <code>CyclicBarrier(int parties)</code> и <code>CyclicBarrier(int parties, Runnable barrierAction)</code> обязательно передается количество сторон, которые должны «встретиться», и, опционально, действие, которое должно произойти, когда стороны встретились, но перед тем когда они будут «отпущены».</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p><code>CyclicBarrier</code> является альтернативой метода <code>join()</code>, который «собирает» потоки только после того, как они выполнились.</p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p><code>CyclicBarrier</code> похож на <code>CountDownLatch</code>, но главное различие между ними в том, что использовать «замок» можно лишь единожды - после того, как его счётчик достигнет нуля, а «барьер» можно использовать неоднократно, даже после того, как он «сломается».</p>
</div>
<div class="paragraph">
<p><a href="#_многопоточность">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_что_такое_race_condition">1.38. Что такое <em>race condition</em>?</h3>
<div class="paragraph">
<p><strong>Состояние гонки</strong> (race condition) - ошибка проектирования многопоточной системы или приложения, при которой эта работа напрямую зависит от того, в каком порядке выполняются потоки. Состояние гонки возникает, когда поток, который должен исполнится в начале, проиграл гонку и первым исполняется другой поток: поведение кода изменяется, из-за чего возникают недетерменированные ошибки.</p>
</div>
<div class="paragraph">
<p><a href="#_многопоточность">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_существует_ли_способ_решения_проблемы_race_condition">1.39. Существует ли способ решения проблемы <em>race condition</em>?</h3>
<div class="paragraph">
<p>Распространённые способы решения:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Использование локальной копии</strong>&#8201;&#8212;&#8201;копирование разделяемой переменной в локальную переменную потока. Этот способ работает только тогда, когда переменная одна и копирование производится атомарно (за одну машинную команду), использование <code>volatile</code>.</p>
</li>
<li>
<p><strong>Синхронизация</strong> - операции над разделяемым ресурсом происходят в синхронизированном блоке (при использовании ключевого слова <code>synchronized</code>).</p>
</li>
<li>
<p><strong>Комбинирование методов</strong> - вышеперечисленные способы можно комбинировать, копируя «опасные» переменные в синхронизированном блоке. С одной стороны, это снимает ограничение на атомарность, с другой&#8201;&#8212;&#8201;позволяет избавиться от слишком больших синхронизированных блоков.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Очевидных способов выявления и исправления состояний гонки не существует. Лучший способ избавиться от гонок&#8201;&#8212;&#8201;правильное проектирование многозадачной системы.</p>
</div>
<div class="paragraph">
<p><a href="#_многопоточность">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_как_остановить_поток">1.40. Как остановить поток?</h3>
<div class="paragraph">
<p>На данный момент в Java принят уведомительный порядок остановки потока (хотя JDK 1.0 и имеет несколько управляющих выполнением потока методов, например <code>stop()</code>, <code>suspend()</code> и <code>resume()</code> - в следующих версиях JDK все они были помечены как <code>deprecated</code> из-за потенциальных угроз взаимной блокировки).</p>
</div>
<div class="paragraph">
<p>Для корректной остановки потока можно использовать метод класса <code>Thread</code> - <code>interrupt()</code>. Этот метод выставляет некоторый внутренний флаг-статус прерывания. В дальнейшем состояние этого флага можно проверить с помощью метода <code>isInterrupted()</code> или <code>Thread.interrupted()</code> (для текущего потока). Метод <code>interrupt()</code> также способен вывести поток из состояния ожидания или спячки. Т.е. если у потока были вызваны методы <code>sleep()</code> или <code>wait()</code>&#8201;&#8212;&#8201;текущее состояние прервется и будет выброшено исключение <code>InterruptedException</code>. Флаг в этом случае не выставляется.</p>
</div>
<div class="paragraph">
<p>Схема действия при этом получается следующей:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Реализовать поток.</p>
</li>
<li>
<p>В потоке периодически проводить проверку статуса прерывания через вызов <code>isInterrupted()</code>.</p>
</li>
<li>
<p>Если состояние флага изменилось или было выброшено исключение во время ожидания/спячки, следовательно поток пытаются остановить извне.</p>
</li>
<li>
<p>Принять решение&#8201;&#8212;&#8201;продолжить работу (если по каким-то причинам остановиться невозможно) или освободить заблокированные потоком ресурсы и закончить выполнение.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Возможная проблема, которая присутствует в этом подходе&#8201;&#8212;&#8201;блокировки на потоковом вводе-выводе. Если поток заблокирован на чтении данных - вызов <code>interrupt()</code> из этого состояния его не выведет. Решения тут различаются в зависимости от типа источника данных. Если чтение идет из файла&#8201;&#8212;&#8201;долговременная блокировка крайне маловероятна и тогда можно просто дождаться выхода из метода <code>read()</code>. Если же чтение каким-то образом связано с сетью&#8201;&#8212;&#8201;стоит использовать неблокирующий ввод-вывод из Java NIO.</p>
</div>
<div class="paragraph">
<p>Второй вариант реализации метода остановки (а также и приостановки)&#8201;&#8212;&#8201;сделать собственный аналог <code>interrupt()</code>. Т.е. объявить в классе потока флаги&#8201;&#8212;&#8201;на остановку и/или приостановку и выставлять их путем вызова заранее определённых методов извне. Методика действия при этом остаётся прежней&#8201;&#8212;&#8201;проверять установку флагов и принимать решения при их изменении. Недостатки такого подхода. Во-первых, потоки в состоянии ожидания таким способом не «оживить». Во-вторых, выставление флага одним потоком совсем не означает, что второй поток тут же его увидит. Для увеличения производительности виртуальная машина использует кеш данных потока, в результате чего обновление переменной у второго потока может произойти через неопределенный промежуток времени (хотя допустимым решением будет объявить переменную-флаг как <code>volatile</code>).</p>
</div>
<div class="paragraph">
<p><a href="#_многопоточность">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_почему_не_рекомендуется_использовать_метод_thread_stop">1.41. Почему не рекомендуется использовать метод <code>Thread.stop()</code>?</h3>
<div class="paragraph">
<p>При принудительной остановке (приостановке) потока, <code>stop()</code> прерывает поток в недетерменированном месте выполнения, в результате становится совершенно непонятно, что делать с принадлежащими ему ресурсами. Поток может открыть сетевое соединение - что в таком случае делать с данными, которые еще не вычитаны? Где гарантия, что после дальнейшего запуска потока (в случае приостановки) он сможет их дочитать? Если поток блокировал разделяемый ресурс, то как снять эту блокировку и не переведёт ли принудительное снятие к нарушению консистентности системы? То же самое можно расширить и на случай соединения с базой данных: если поток остановят посередине транзакции, то кто ее будет закрывать? Кто и как будет разблокировать ресурсы?</p>
</div>
<div class="paragraph">
<p><a href="#_многопоточность">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_что_происходит_когда_в_потоке_выбрасывается_исключение">1.42. Что происходит, когда в потоке выбрасывается исключение?</h3>
<div class="ulist">
<ul>
<li>
<p>Если исключение не поймано&#8201;&#8212;&#8201;поток «умирает» (переходит в состяние мёртв (dead)).</p>
</li>
<li>
<p>Если установлен обработчик непойманных исключений, то он возьмёт управление на себя. <code>Thread.UncaughtExceptionHandler</code>&#8201;&#8212;&#8201;интерфейс, определённый как вложенный интерфейс для других обработчиков, вызываемых, когда поток внезапно останавливается из-за непойманного исключения. В случае, если поток собирается остановиться из-за непойманного исключения, JVM проверяет его на наличие <code>UncaughtExceptionHandler</code>, используя <code>Thread.getUncaughtExceptionHandler()</code>, и если такой обработчик найдет, то вызовет у него метод <code>uncaughtException()</code>, передав этот поток и исключение в виде аргументов.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a href="#_многопоточность">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_в_чем_разница_между_interrupted_и_isinterrupted">1.43. В чем разница между <code>interrupted()</code> и <code>isInterrupted()</code>?</h3>
<div class="paragraph">
<p>Механизм прерывания работы потока в Java реализован с использованием внутреннего флага, известного как статус прерывания. Прерывание потока вызовом <code>Thread.interrupt()</code> устанавливает этот флаг. Методы <code>Thread.interrupted()</code> и <code>isInterrupted()</code> позволяют проверить, является ли поток прерванным.</p>
</div>
<div class="paragraph">
<p>Когда прерванный поток проверяет статус прерывания, вызывая статический метод <code>Thread.interrupted()</code>, статус прерывания сбрасывается.</p>
</div>
<div class="paragraph">
<p>Нестатический метод <code>isInterrupted()</code> используется одним потоком для проверки статуса прерывания у другого потока, не изменяя флаг прерывания.</p>
</div>
<div class="paragraph">
<p><a href="#_многопоточность">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_что_такое_пул_потоков">1.44. Что такое <em>«пул потоков»</em>?</h3>
<div class="paragraph">
<p>Создание потока является затратной по времени и ресурсам операцией. Количество потоков, которое может быть запущено в рамках одного процесса также ограниченно. Чтобы избежать этих проблем и в целом управлять множеством потоков более эффективно в Java был реализован механизм пула потоков (thread pool), который создаётся во время запуска приложения и в дальнейшем потоки для обработки запросов берутся и переиспользуются уже из него. Таким образом, появляется возможность не терять потоки, сбалансировать приложение по количеству потоков и частоте их создания.</p>
</div>
<div class="paragraph">
<p>Начиная с Java 1.5 Java API предоставляет фреймворк <code>Executor</code>, который позволяет создавать различные типы пула потоков:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>Executor</code> - упрощенный интерфейс пула, содержит один метод для передачи задачи на выполнение;</p>
</li>
<li>
<p><code>ExecutorService</code> - расширенный интерфейс пула, с возможностью завершения всех потоков;</p>
</li>
<li>
<p><code>AbstractExecutorService</code> - базовый класс пула, реализующий интерфейс <code>ExecutorService</code>;</p>
</li>
<li>
<p><code>Executors</code> - фабрика объектов связанных с пулом потоков, в том числе позволяет создать основные типы пулов;</p>
</li>
<li>
<p><code>ThreadPoolExecutor</code> - пул потоков с гибкой настройкой, может служить базовым классом для нестандартных пулов;</p>
</li>
<li>
<p><code>ForkJoinPool</code> - пул для выполнения задач типа <code>ForkJoinTask</code>;</p>
</li>
<li>
<p>&#8230;&#8203; и другие.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Методы <code>Executors</code> для создания пулов:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>newCachedThreadPool()</code> - если есть свободный поток, то задача выполняется в нем, иначе добавляется новый поток в пул. Потоки не используемые больше минуты завершаются и удалются и кэша. Размер пула неограничен. Предназначен для выполнения множество небольших асинхронных задач;</p>
</li>
<li>
<p><code>newCachedThreadPool(ThreadFactory threadFactory)</code> - аналогично предыдущему, но с собственной фабрикой потоков;</p>
</li>
<li>
<p><code>newFixedThreadPool(int nThreads)</code> - создает пул на указанное число потоков. Если новые задачи добавлены, когда все потоки активны, то они будут сохранены в очереди для выполнения позже. Если один из потоков завершился из-за ошибки, на его место будет запущен другой поток. Потоки живут до тех пор, пока пул не будет закрыт явно методом <code>shutdown()</code>.</p>
</li>
<li>
<p><code>newFixedThreadPool(int nThreads, ThreadFactory threadFactory)</code> - аналогично предыдущему, но с собственной фабрикой потоков;</p>
</li>
<li>
<p><code>newSingleThreadScheduledExecutor()</code> - однопотоковый пул с возможностью выполнять задачу через указанное время или выполнять периодически. Если поток был завершен из-за каких-либо ошибок, то для выполнения следующей задачи будет создан новый поток.</p>
</li>
<li>
<p><code>newSingleThreadScheduledExecutor(ThreadFactory threadFactory)</code> - аналогично предыдущему, но с собственной фабрикой потоков;</p>
</li>
<li>
<p><code>newScheduledThreadPool(int corePoolSize)</code> - пул для выполнения задач через указанное время или переодически;</p>
</li>
<li>
<p><code>newScheduledThreadPool(int corePoolSize, ThreadFactory threadFactory)</code> - аналогично предыдущему, но с собственной фабрикой потоков;</p>
</li>
<li>
<p><code>unconfigurableExecutorService(ExecutorService executor)</code> - обертка на пул, запрещающая изменять его конфигурацию;</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a href="#_многопоточность">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_какого_размера_должен_быть_пул_потоков">1.45. Какого размера должен быть пул потоков?</h3>
<div class="paragraph">
<p>Настраивая размер пула потоков, важно избежать двух ошибок: слишком мало потоков (очередь на выполнение будет расти, потребляя много памяти) или слишком много потоков (замедление работы всей систему из-за частых переключений контекста).</p>
</div>
<div class="paragraph">
<p>Оптимальный размер пула потоков зависит от количества доступных процессоров и природы задач в рабочей очереди. На N-процессорной системе для рабочей очереди, которая будет выполнять исключительно задачи с ограничением по скорости вычислений, можно достигнуть максимального использования CPU с пулом потоков, в котором содержится N или N+1 поток.
Для задач, которые могут ждать осуществления I/O (ввода - вывода) - например, задачи, считывающей HTTP-запрос из сокета&#8201;&#8212;&#8201;может понадобиться увеличение размера пула свыше количества доступных процессоров, потому, что не все потоки будут работать все время. Используя профилирование, можно оценить отношение времени ожидания (<code>WT</code>) ко времени обработки (<code>ST</code>) для типичного запроса. Если назвать это соотношение <code>WT/ST</code>, то для N-процессорной системе понадобится примерно <code>N*(1 + WT/ST)</code> потоков для полной загруженности процессоров.</p>
</div>
<div class="paragraph">
<p>Использование процессора&#8201;&#8212;&#8201;не единственный фактор, важный при настройке размера пула потоков. По мере возрастания пула потоков, можно столкнуться с ограничениями планировщика, доступной памяти, или других системных ресурсов, таких, как количество сокетов, дескрипторы открытого файла, или каналы связи базы данных.</p>
</div>
<div class="paragraph">
<p><a href="#_многопоточность">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_что_будет_если_очередь_пула_потоков_уже_заполнена_но_подаётся_новая_задача">1.46. Что будет, если очередь пула потоков уже заполнена, но подаётся новая задача?</h3>
<div class="paragraph">
<p>Если очередь пула потоков заполнилась, то поданная задача будет «отклонена». Например - метод <code>submit()</code> у <code>ThreadPoolExecutor</code> выкидывает <code>RejectedExecutionException</code>, после которого вызывается <code>RejectedExecutionHandler</code>.</p>
</div>
<div class="paragraph">
<p><a href="#_многопоточность">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_в_чём_заключается_различие_между_методами_submit_и_execute_у_пула_потоков">1.47. В чём заключается различие между методами <code>submit()</code> и <code>execute()</code> у пула потоков?</h3>
<div class="paragraph">
<p>Оба метода являются способами подачи задачи в пул потоков, но между ними есть небольшая разница.</p>
</div>
<div class="paragraph">
<p><code>execute(Runnable command)</code> определён в интерфейсе <code>Executor</code> и выполняет поданную задачу и ничего не возвращает.</p>
</div>
<div class="paragraph">
<p><code>submit()</code>&#8201;&#8212;&#8201;перегруженный метод, определённый в интерфейсе <code>ExecutorService</code>. Способен принимать задачи типов <code>Runnable</code> и <code>Callable</code> и возвращать объект <code>Future</code>, который можно использовать для контроля и управления процессом выполнения, получения его результата.</p>
</div>
<div class="paragraph">
<p><a href="#_многопоточность">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_в_чем_заключаются_различия_между_cтеком_stack_и_кучей_heap_с_точки_зрения_многопоточности">1.48. В чем заключаются различия между cтеком (stack) и кучей (heap) с точки зрения многопоточности?</h3>
<div class="paragraph">
<p><strong>Cтек</strong>&#8201;&#8212;&#8201;участок памяти, тесно связанный с потоками. У каждого потока есть свой стек, которые хранит локальные переменные, параметры методов и стек вызовов. Переменная, хранящаяся в стеке одного потока, не видна для другого.</p>
</div>
<div class="paragraph">
<p><strong>Куча</strong>&#8201;&#8212;&#8201;общий участок памяти, который делится между всеми потоками. Объекты, неважно локальные или любого другого уровня, создаются в куче. Для улучшения производительности, поток обычно кэширует значения из кучи в свой стек, в этом случае для того, чтобы указать потоку, что переменную следует читать из кучи используется ключевое слово <code>volatile</code>.</p>
</div>
<div class="paragraph">
<p><a href="#_многопоточность">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_как_поделиться_данными_между_двумя_потоками">1.49. Как поделиться данными между двумя потоками?</h3>
<div class="paragraph">
<p>Данными между потоками возможно делиться, используя общий объект или параллельные структуры данных, например <code>BlockingQueue</code>.</p>
</div>
<div class="paragraph">
<p><a href="#_многопоточность">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_какой_параметр_запуска_jvm_используется_для_контроля_размера_стека_потока">1.50. Какой параметр запуска JVM используется для контроля размера стека потока?</h3>
<div class="paragraph">
<p><code>-Xss</code></p>
</div>
<div class="paragraph">
<p><a href="#_многопоточность">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_как_получить_дамп_потока">1.51. Как получить дамп потока?</h3>
<div class="paragraph">
<p>Среды исполнения Java на основе HotSpot генерируют только дамп в формате HPROF. В распоряжении разработчика имеется несколько интерактивных методов генерации дампов и один метод генерации дампов на основе событий.</p>
</div>
<div class="paragraph">
<p>Интерактивные методы:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Использование <kbd>Ctrl+Break</kbd>: если для исполняющегося приложения установлена опция командной строки <code>-XX:+HeapDumpOnCtrlBreak</code>, то дамп формата HPROF генерируется вместе с дампом потока при наступлении события <code>Ctrl+Break</code> или <code>SIGQUIT</code> (обычно генерируется с помощью <em>kill -3</em>), которое инициируется посредством консоли. Эта опция может быть недоступна в некоторых версиях. В этом случае можно попытаться использовать следующую опцию:
<code>-Xrunhprof:format=b,file=heapdump.hprof</code></p>
</li>
<li>
<p>Использование инструмента <em>jmap</em>: утилита <em>jmap</em>, поставляемая в составе каталога <code>/bin/</code> комплекта JDK, позволяет запрашивать дамп HPROF из исполняющегося процесса.</p>
</li>
<li>
<p>Использование операционной системы: Для создания файла ядра можно воспользоваться неразрушающей командой <em>gcore</em> или разрушающими командами <em>kill -6</em> или <em>kill -11</em>. Затем извлечь дамп кучи из файла ядра с помощью утилиты <em>jmap</em>.</p>
</li>
<li>
<p>Использование инструмента <em>JConsole</em>. Операция <code>dumpHeap</code> предоставляется в <em>JConsole</em> как MBean-компонент <code>HotSpotDiagnostic</code>. Эта операция запрашивает генерацию дампа в формате HPROF.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Метод на основе событий:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Событие <code>OutOfMemoryError</code>: Если для исполняющегося приложения установлена опция командной строки <code>-XX:+HeapDumpOnOutOfMemoryError</code>, то при возникновении ошибки <code>OutOfMemoryError</code> генерируется дамп формата HPROF. Это идеальный метод для «production» систем, поскольку он практически обязателен для диагностирования проблем памяти и не сопровождается постоянными накладными расходами с точки зрения производительности. В старых выпусках сред исполнения Java на базе HotSpot для этого события не устанавливается предельное количество дампов кучи в пересчете на одну JVM; в более новых выпусках допускается не более одного дампа кучи для этого события на каждый запуск JVM.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a href="#_многопоточность">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_что_такое_threadlocal_переменная">1.52. Что такое <em>ThreadLocal-переменная</em>?</h3>
<div class="paragraph">
<p><code>ThreadLocal</code> - класс, позволяющий имея одну переменную, иметь различное её значение для каждого из потоков.</p>
</div>
<div class="paragraph">
<p>У каждого потока - т.е. экземпляра класса <code>Thread</code> - есть ассоциированная с ним таблица <em>ThreadLocal-переменных</em>. Ключами таблицы являются cсылки на объекты класса <code>ThreadLocal</code>, а значениями - ссылки на объекты, «захваченные» ThreadLocal-переменными, т.е. ThreadLocal-переменные отличаются от обычных переменных тем, что у каждого потока свой собственный, индивидуально инициализируемый экземпляр переменной. Доступ к значению можно получить через методы <code>get()</code> или <code>set()</code>.</p>
</div>
<div class="paragraph">
<p>Например, если мы объявим ThreadLocal-переменную: <code>ThreadLocal&lt;Object&gt; locals = new ThreadLocal&lt;Object&gt;();</code>. А затем, в потоке, сделаем <code>locals.set(myObject)</code>, то ключом таблицы будет ссылка на объект <code>locals</code>, а значением - ссылка на объект <code>myObject</code>. При этом для другого потока существует возможность «положить» внутрь <code>locals</code> другое значение.</p>
</div>
<div class="paragraph">
<p>Следует обратить внимание, что <code>ThreadLocal</code> изолирует именно ссылки на объекты, а не сами объекты. Если изолированные внутри потоков ссылки ведут на один и тот же объект, то возможны коллизии.</p>
</div>
<div class="paragraph">
<p>Так же важно отметить, что т.к. ThreadLocal-переменные изолированы в потоках, то инициализация такой переменной должна происходить в том же потоке, в котором она будет использоваться. Ошибкой является инициализация такой переменной (вызов метода <code>set()</code>) в главном потоке приложения, потому как в данном случае значение, переданное в методе <code>set()</code>, будет «захвачено» для главного потока, и при вызове метода <code>get()</code> в целевом потоке будет возвращен <code>null</code>.</p>
</div>
<div class="paragraph">
<p><a href="#_многопоточность">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_назовите_различия_между_synchronized_и_reentrantlock">1.53. Назовите различия между <code>synchronized</code> и <code>ReentrantLock</code>?</h3>
<div class="paragraph">
<p>В Java 5 появился интерфейс <code>Lock</code> предоставляющий возможности более эффективного и тонкого контроля блокировки ресурсов. <code>ReentrantLock</code>&#8201;&#8212;&#8201;распространённая реализация <code>Lock</code>, которая предоставляет <code>Lock</code> с таким же базовым поведением и семантикой, как у <code>synchronized</code>, но расширенными возможностями, такими как опрос о блокировании (lock polling), ожидание блокирования заданной длительности и прерываемое ожидание блокировки. Кроме того, он предлагает гораздо более высокую эффективность функционирования в условиях жесткой <em>состязательности</em>.</p>
</div>
<div class="paragraph">
<p>Что понимается под блокировкой с повторным входом (reentrant)? Просто то, что есть подсчет сбора данных, связанный с блокировкой, и если поток, который удерживает блокировку, снова ее получает, данные отражают увеличение, и тогда для реального разблокирования нужно два раза снять блокировку. Это аналогично семантике synchronized; если поток входит в синхронный блок, защищенный монитором, который уже принадлежит потоку, потоку будет разрешено дальнейшее функционирование, и блокировка не будет снята, когда поток выйдет из второго (или последующего) блока synchronized, она будет снята только когда он выйдет из первого блока synchronized, в который он вошел под защитой монитора.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="nc">Lock</span> <span class="n">lock</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ReentrantLock</span><span class="o">();</span>

<span class="n">lock</span><span class="o">.</span><span class="na">lock</span><span class="o">();</span>
<span class="k">try</span> <span class="o">{</span>
  <span class="c1">// update object state</span>
<span class="o">}</span>
<span class="k">finally</span> <span class="o">{</span>
  <span class="n">lock</span><span class="o">.</span><span class="na">unlock</span><span class="o">();</span>
<span class="o">}</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Реализация <code>ReentrantLock</code> гораздо более масштабируема в условиях состязательности, чем реализация <code>synchronized</code>. Это значит, что когда много потоков соперничают за право получения блокировки, общая пропускная способность обычно лучше у <code>ReentrantLock</code>, чем у <code>synchronized</code>. JVM требуется меньше времени на установление очередности потоков и больше времени на непосредственно выполнение.</p>
</li>
<li>
<p>У <code>ReentrantLock</code> (как и у других реализаций <code>Lock</code>) блокировка должна обязательно сниматься в <code>finally</code> блоке (иначе, если бы защищенный код выбросил исключение, блокировка не была бы снята). Используя синхронизацию, JVM гарантирует, что блокировка автоматически снимаются.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Резюмируя, можно сказать, что когда состязания за блокировку нет либо оно очень мало, то <code>synchronized</code> возможно будет быстрее. Если присутствует заметное состязание за доступ к ресурсу, то скорее всего <code>ReentrantLock</code> даст некое преимущество.</p>
</div>
<div class="paragraph">
<p><a href="#_многопоточность">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_что_такое_readwritelock">1.54. Что такое <code>ReadWriteLock</code>?</h3>
<div class="paragraph">
<p><code>ReadWriteLock</code>&#8201;&#8212;&#8201;это интерфейс расширяющий базовый интерфейс <code>Lock</code>. Используется для улучшения производительности в многопоточном процессе и оперирует парой связанных блокировок (одна - для операций чтения, другая - для записи). Блокировка чтения может удерживаться одновременно несколькими читающими потоками, до тех пор, пока не появится записывающий. Блокировка записи является эксклюзивеной.</p>
</div>
<div class="paragraph">
<p>Существует реализующий интерфейс <code>ReadWriteLock</code> класс <code>ReentrantReadWriteLock</code>, который поддерживает до 65535 блокировок записи и до стольки же блокировок чтения.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="nc">ReadWriteLock</span> <span class="n">rwLock</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ReentrantReadWriteLock</span><span class="o">();</span>
<span class="nc">Lock</span> <span class="n">rLock</span> <span class="o">=</span> <span class="n">rwLock</span><span class="o">.</span><span class="na">readLock</span><span class="o">();</span>
<span class="nc">Lock</span> <span class="n">wLock</span> <span class="o">=</span> <span class="n">rwLock</span><span class="o">.</span><span class="na">writeLock</span><span class="o">();</span>

<span class="n">wLock</span><span class="o">.</span><span class="na">lock</span><span class="o">();</span>
<span class="k">try</span> <span class="o">{</span>
    <span class="c1">// exclusive write</span>
<span class="o">}</span> <span class="k">finally</span> <span class="o">{</span>
    <span class="n">wLock</span><span class="o">.</span><span class="na">unlock</span><span class="o">();</span>
<span class="o">}</span>

<span class="n">rLock</span><span class="o">.</span><span class="na">lock</span><span class="o">();</span>
<span class="k">try</span> <span class="o">{</span>
    <span class="c1">// shared reading</span>
<span class="o">}</span> <span class="k">finally</span> <span class="o">{</span>
    <span class="n">rLock</span><span class="o">.</span><span class="na">unlock</span><span class="o">();</span>
<span class="o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><a href="#_многопоточность">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_что_такое_блокирующий_метод">1.55. Что такое <em>«блокирующий метод»</em>?</h3>
<div class="paragraph">
<p><strong>Блокирующий метод</strong>&#8201;&#8212;&#8201;метод, который блокируется, до тех пор, пока задание не выполнится, например метод <code>accept()</code> у <code>ServerSocket</code> блокируется в ожидании подключения клиента. Здесь блокирование означает, что контроль не вернётся к вызывающему методу до тех пор, пока не выполнится задание. Так же существуют асинхронные или неблокирующиеся методы, которые могут завершится до выполнения задачи.</p>
</div>
<div class="paragraph">
<p><a href="#_многопоточность">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_что_такое_фреймворк_forkjoin">1.56. Что такое <em>«фреймворк Fork/Join»</em>?</h3>
<div class="paragraph">
<p>Фреймворк Fork/Join, представленный в JDK 7, - это набор классов и интерфейсов позволяющих использовать преимущества многопроцессорной архитектуры современных компьютеров. Он разработан для выполнения задач, которые можно рекурсивно разбить на маленькие подзадачи, которые можно решать параллельно.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Этап Fork: большая задача разделяется на несколько меньших подзадач, которые в свою очередь также разбиваются на меньшие. И так до тех пор, пока задача не становится тривиальной и решаемой последовательным способом.</p>
</li>
<li>
<p>Этап Join: далее (опционально) идёт процесс «свёртки» - решения подзадач некоторым образом объединяются пока не получится решение всей задачи.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Решение всех подзадач (в т.ч. и само разбиение на подзадачи) происходит параллельно.</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>Для решения некоторых задач этап Join не требуется. Например, для параллельного QuickSort&#8201;&#8212;&#8201;массив рекурсивно делится на всё меньшие и меньшие диапазоны, пока не вырождается в тривиальный случай из 1 элемента. Хотя в некотором смысле Join будет необходим и тут, т.к. всё равно остаётся необходимость дождаться пока не закончится выполнение всех подзадач.</p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p>Ещё одно замечательное преимущество этого фреймворка заключается в том, что он использует work-stealing алгоритм: потоки, которые завершили выполнение собственных подзадач, могут «украсть» подзадачи у других потоков, которые всё ещё заняты.</p>
</div>
<div class="paragraph">
<p><a href="#_многопоточность">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_что_такое_semaphore">1.57. Что такое <code>Semaphore</code>?</h3>
<div class="paragraph">
<p>Semaphore&#8201;&#8212;&#8201;это новый тип синхронизатора: семафор со счётчиком, реализующий шаблон синхронизации Семафор. Доступ управляется с помощью счётчика: изначальное значение счётчика задаётся в конструкторе при создании синхронизатора, когда поток заходит в заданный блок кода, то значение счётчика уменьшается на единицу, когда поток его покидает, то увеличивается. Если значение счётчика равно нулю, то текущий поток блокируется, пока кто-нибудь не выйдет из защищаемого блока. Semaphore используется для защиты дорогих ресурсов, которые доступны в ограниченном количестве, например подключение к базе данных в пуле.</p>
</div>
<div class="paragraph">
<p><a href="#_многопоточность">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_что_такое_double_checked_locking_singleton">1.58. Что такое <em>double checked locking Singleton</em>?</h3>
<div class="paragraph">
<p><strong>double checked locking Singleton</strong> - это один из способов создания потокобезопасного класса реализующего шаблон Одиночка. Данный метод пытается оптимизировать производительность, блокируясь только случае, когда экземпляр одиночки создаётся впервые.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="kd">class</span> <span class="nc">DoubleCheckedLockingSingleton</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">volatile</span> <span class="nc">DoubleCheckedLockingSingleton</span> <span class="n">instance</span><span class="o">;</span>

    <span class="kd">static</span> <span class="nc">DoubleCheckedLockingSingleton</span> <span class="nf">getInstance</span><span class="o">()</span> <span class="o">{</span>
        <span class="nc">DoubleCheckedLockingSingleton</span> <span class="n">current</span> <span class="o">=</span> <span class="n">instance</span><span class="o">;</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">current</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
            <span class="kd">synchronized</span> <span class="o">(</span><span class="nc">DoubleCheckedLockingSingleton</span><span class="o">.</span><span class="na">class</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">current</span> <span class="o">=</span> <span class="n">instance</span><span class="o">;</span>

                <span class="k">if</span> <span class="o">(</span><span class="n">current</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
                    <span class="n">instance</span> <span class="o">=</span> <span class="n">current</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">DoubleCheckedLockingSingleton</span><span class="o">();</span>
                <span class="o">}</span>
            <span class="o">}</span>
        <span class="o">}</span>
        <span class="k">return</span> <span class="n">current</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Следует заметить, что требование <code>volatile</code> обязательно. Проблема Double Checked Lock заключается в модели памяти Java, точнее в порядке создания объектов, когда возможна ситуация, при которой другой поток может получить и начать использовать (на основании условия, что указатель не нулевой) не полностью сконструированный объект. Хотя эта проблема была частично решена в JDK 1.5, однако рекомендация использовать <code>volatile</code> для Double Cheсked Lock остаётся в силе.</p>
</div>
<div class="paragraph">
<p><a href="#_многопоточность">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_как_создать_потокобезопасный_singleton">1.59. Как создать потокобезопасный Singleton?</h3>
<div class="ulist">
<ul>
<li>
<p><strong>Static field</strong></p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Singleton</span> <span class="o">{</span>
	<span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="nc">Singleton</span> <span class="no">INSTANCE</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Singleton</span><span class="o">();</span>
<span class="o">}</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Enum</strong></p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="kd">public</span> <span class="kd">enum</span> <span class="nc">Singleton</span> <span class="o">{</span>
	<span class="no">INSTANCE</span><span class="o">;</span>
<span class="o">}</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Synchronized Accessor</strong></p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Singleton</span> <span class="o">{</span>
	<span class="kd">private</span> <span class="kd">static</span> <span class="nc">Singleton</span> <span class="n">instance</span><span class="o">;</span>

	<span class="kd">public</span> <span class="kd">static</span> <span class="kd">synchronized</span> <span class="nc">Singleton</span> <span class="nf">getInstance</span><span class="o">()</span> <span class="o">{</span>
		<span class="k">if</span> <span class="o">(</span><span class="n">instance</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
			<span class="n">instance</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Singleton</span><span class="o">();</span>
		<span class="o">}</span>
		<span class="k">return</span> <span class="n">instance</span><span class="o">;</span>
	<span class="o">}</span>
<span class="o">}</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Double Checked Locking &amp; <code>volatile</code></strong></p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Singleton</span> <span class="o">{</span>
        <span class="kd">private</span> <span class="kd">static</span> <span class="kd">volatile</span> <span class="nc">Singleton</span> <span class="n">instance</span><span class="o">;</span>

        <span class="kd">public</span> <span class="kd">static</span> <span class="nc">Singleton</span> <span class="nf">getInstance</span><span class="o">()</span> <span class="o">{</span>
		<span class="nc">Singleton</span> <span class="n">localInstance</span> <span class="o">=</span> <span class="n">instance</span><span class="o">;</span>
		<span class="k">if</span> <span class="o">(</span><span class="n">localInstance</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
			<span class="kd">synchronized</span> <span class="o">(</span><span class="nc">Singleton</span><span class="o">.</span><span class="na">class</span><span class="o">)</span> <span class="o">{</span>
				<span class="n">localInstance</span> <span class="o">=</span> <span class="n">instance</span><span class="o">;</span>
				<span class="k">if</span> <span class="o">(</span><span class="n">localInstance</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
					<span class="n">instance</span> <span class="o">=</span> <span class="n">localInstance</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Singleton</span><span class="o">();</span>
				<span class="o">}</span>
			<span class="o">}</span>
		<span class="o">}</span>
		<span class="k">return</span> <span class="n">localInstance</span><span class="o">;</span>
	<span class="o">}</span>
<span class="o">}</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>On Demand Holder Idiom</strong></p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Singleton</span> <span class="o">{</span>

	<span class="kd">public</span> <span class="kd">static</span> <span class="kd">class</span> <span class="nc">SingletonHolder</span> <span class="o">{</span>
		<span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="nc">Singleton</span> <span class="no">HOLDER_INSTANCE</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Singleton</span><span class="o">();</span>
	<span class="o">}</span>

	<span class="kd">public</span> <span class="kd">static</span> <span class="nc">Singleton</span> <span class="nf">getInstance</span><span class="o">()</span> <span class="o">{</span>
		<span class="k">return</span> <span class="nc">SingletonHolder</span><span class="o">.</span><span class="na">HOLDER_INSTANCE</span><span class="o">;</span>
	<span class="o">}</span>
<span class="o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><a href="#_многопоточность">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_чем_полезны_неизменяемые_объекты">1.60. Чем полезны неизменяемые объекты?</h3>
<div class="paragraph">
<p>Неизменяемость (immutability) помогает облегчить написание многопоточного кода. Неизменяемый объект может быть использован без какой-либо синхронизации. К сожалению, в Java нет аннотации <code>@Immutable</code>, которая делает объект неизменяемым, для этого разработчикам нужно самим создавать класс с необходимыми характеристиками. Для этого необходимо следовать некоторым общим принципам: инициализация всех полей только в конструкторе, отсутствие методов <code>setX()</code> вносящих изменения в поля класса, отсутствие утечек ссылки, организация отдельного хранилища копий изменяемых объектов и т.д.</p>
</div>
<div class="paragraph">
<p><a href="#_многопоточность">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_что_такое_busy_spin">1.61. Что такое <em>busy spin</em>?</h3>
<div class="paragraph">
<p><strong>busy spin</strong>&#8201;&#8212;&#8201;это техника, которую программисты используют, чтобы заставить поток ожидать при определённом условии. В отличие от традиционных методов <code>wait()</code>, <code>sleep()</code> или <code>yield()</code>, которые подразумевают уступку процессорного времени, этот метод вместо уступки выполняет пустой цикл. Это необходимо, для того, чтобы сохранить кэш процессора, т.к. в многоядерных системах, существует вероятность, что приостановленный поток продолжит своё выполнение уже на другом ядре, а это повлечет за собой перестройку состояния процессорного кэша, которая является достаточно затратной процедурой.</p>
</div>
<div class="paragraph">
<p><a href="#_многопоточность">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_перечислите_принципы_которым_вы_следуете_в_многопоточном_программировании">1.62. Перечислите принципы, которым вы следуете в многопоточном программировании?</h3>
<div class="paragraph">
<p>При написании многопоточных программ следует придерживаться определённых правил, которые помогают обеспечить достойную производительность приложения в сочетании с удобной отладкой и простотой дальнейшей поддержки кода.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Всегда давайте значимые имена своим потокам. Процесс отладки, нахождения ошибок или отслеживание исключения в многопоточном коде&#8201;&#8212;&#8201;довольно сложная задача. <code>OrderProcessor</code>, <code>QuoteProcessor</code> или <code>TradeProcessor</code> намного информативнее, чем <code>Thread1</code>, <code>Thread2</code> и <code>Thread3</code>. Имя должно отражать задачу, выполняемую данным потоком.</p>
</li>
<li>
<p>Избегайте блокировок или старайтесь уменьшить масштабы синхронизации. Блокировка затратна, а переключение контекста ещё более ресурсоёмко. Пытайтесь избегать синхронизации и блокировки насколько это возможно, и организуйте критическую секцию в минимально необходимом объёме. Поэтому синхронизированный блок всегда предпочительней синхронизированного метода, дополнительно наделяя возможностью абсолютного контроля над масштабом блокировки.</p>
</li>
<li>
<p>Обрабатывайте прерывание потока с особой тщательностью. Нет ничего хуже оставшегося заблокированным ресурса или системы в неконстистентном, по причине неподтверждённой транзакции, состоянии.</p>
</li>
<li>
<p>Помните об обработке исключений. Выброшенные <code>InterruptedException</code> должны быть адекватно обработаны, а не просто подавлены. Так же не стоит пренебрегать <code>Thread.UncaughtExceptionHandler</code>. При использовании пула потоков необходимо помнить, что он зачастую просто «проглатывает» исключения. Так, если вы отправили на выполнение <code>Runnable</code> нужно обязательно поместить код выполнения задачи внутрь блока <code>try-catch</code>. Если в очередь пула помещается <code>Callable</code>, необходимо удостоверится, что результат выполнения всегда изымается помощью блокирующего <code>get()</code>, чтобы в случае возникновения существовала возможнотсь заново выбросить произошедшее исключение.</p>
</li>
<li>
<p>Между синхронизаторами и <code>wait()</code> и <code>notify()</code> следует выбирать синхронизаторы. Во-первых, синхронизаторы, типа <code>CountDownLatch</code>, <code>Semaphore</code>, <code>CyclicBarrier</code> или <code>Exchanger</code> упрощают написание кода. Очень сложно реализовывать комплексный управляющий поток, используя <code>wait()</code> и <code>notify()</code>. Во-вторых, эти классы написаны и поддерживаются настоящими мастерами своего дела и есть шанс, что в последующих версиях JDK они будут оптимизированы изнутри или заменены более производительной внешней реализацией.</p>
</li>
<li>
<p>Почти всегда использование Concurrent сollection выгоднее использования Synchronized сollection, т.к. первые более современны (используют все доступные на момент их написания новшества языка) и масштабируемы, чем их синхронизированые аналоги.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a href="#_многопоточность">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_какое_из_следующих_утверждений_о_потоках_неверно">1.63. Какое из следующих утверждений о потоках неверно?</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Если метод <code>start()</code> вызывается дважды для одного и того же объекта <code>Thread</code>, во время выполнения генерируется исключение.</p>
</li>
<li>
<p>Порядок, в котором запускались потоки, может не совпадать с порядком их фактического выполнения.</p>
</li>
<li>
<p>Если метод <code>run()</code> вызывается напрямую для объекта <code>Thread</code>, во время выполнения генерируется исключение.</p>
</li>
<li>
<p>Если метод <code>sleep()</code> вызывается для потока, во время выполнения синхронизированного кода, блокировка не снимается.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Правильный ответ: 3. Если метод <code>run()</code> вызывается напрямую для объекта <code>Thread</code>, во время выполнения исключение не генерируется. Однако, код, написанный в методе <code>run()</code> будет выполняться текущим, а не новым потоком. Таким образом, правильный способ запустить поток&#8201;&#8212;&#8201;это вызов метода <code>start()</code>, который приводит к выполнению метода <code>run()</code> новым потоком.</p>
</div>
<div class="paragraph">
<p>Вызов метода <code>start()</code> дважды для одного и того же объекта <code>Thread</code> приведёт к генерированию исключения <code>IllegalThreadStateException</code> во время выполнения, следовательно, утверждение 1 верно. Утверждение 2 верно, так как порядок, в котором выполняются потоки, определяется Планировщиком потоков, независимо от того, какой поток запущен первым. Утверждение 4 верно, так как поток не освободит блокировки, которые он держит, когда он переходит в состояние Ожидания.</p>
</div>
<div class="paragraph">
<p><a href="#_многопоточность">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_даны_3_потока_т1_т2_и_т3_как_реализовать_выполнение_в_последовательности_т1_т2_т3">1.64. Даны 3 потока Т1, Т2 и Т3? Как реализовать выполнение в последовательности Т1, Т2, Т3?</h3>
<div class="paragraph">
<p>Такой последовательности выполнения можно достичь многими способами, например просто воспользоваться методом <code>join()</code>, чтобы запустить поток в момент, когда другой уже закончит своё выполнение. Для реализации заданной последовательности, нужно запустить последний поток первым, и затем вызывать метод <code>join()</code> в обратном порядке, то есть Т3 вызывает <code>Т2.join</code>, а Т2 вызывает <code>Т1.join</code>, таким образом Т1 закончит выполнение первым, а Т3 последним.</p>
</div>
<div class="paragraph">
<p><a href="#_многопоточность">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_напишите_минимальный_неблокирующий_стек_всего_два_методаpush_и_pop">1.65. Напишите минимальный неблокирующий стек (всего два метода&#8201;&#8212;&#8201;<code>push()</code> и <code>pop()</code>).</h3>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="kd">class</span> <span class="nc">NonBlockingStack</span><span class="o">&lt;</span><span class="no">T</span><span class="o">&gt;</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="nc">AtomicReference</span><span class="o">&lt;</span><span class="nc">Element</span><span class="o">&gt;</span> <span class="n">head</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">AtomicReference</span><span class="o">&lt;&gt;(</span><span class="kc">null</span><span class="o">);</span>

    <span class="nc">NonBlockingStack</span><span class="o">&lt;</span><span class="no">T</span><span class="o">&gt;</span> <span class="nf">push</span><span class="o">(</span><span class="kd">final</span> <span class="no">T</span> <span class="n">value</span><span class="o">)</span> <span class="o">{</span>
        <span class="kd">final</span> <span class="nc">Element</span> <span class="n">current</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Element</span><span class="o">();</span>
        <span class="n">current</span><span class="o">.</span><span class="na">value</span> <span class="o">=</span> <span class="n">value</span><span class="o">;</span>
        <span class="nc">Element</span> <span class="n">recent</span><span class="o">;</span>
        <span class="k">do</span> <span class="o">{</span>
            <span class="n">recent</span> <span class="o">=</span> <span class="n">head</span><span class="o">.</span><span class="na">get</span><span class="o">();</span>
            <span class="n">current</span><span class="o">.</span><span class="na">previous</span> <span class="o">=</span> <span class="n">recent</span><span class="o">;</span>
        <span class="o">}</span> <span class="k">while</span> <span class="o">(!</span><span class="n">head</span><span class="o">.</span><span class="na">compareAndSet</span><span class="o">(</span><span class="n">recent</span><span class="o">,</span> <span class="n">current</span><span class="o">));</span>
        <span class="k">return</span> <span class="k">this</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="no">T</span> <span class="nf">pop</span><span class="o">()</span> <span class="o">{</span>
        <span class="nc">Element</span> <span class="n">result</span><span class="o">;</span>
        <span class="nc">Element</span> <span class="n">previous</span><span class="o">;</span>
        <span class="k">do</span> <span class="o">{</span>
            <span class="n">result</span> <span class="o">=</span> <span class="n">head</span><span class="o">.</span><span class="na">get</span><span class="o">();</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">result</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
                <span class="k">return</span> <span class="kc">null</span><span class="o">;</span>
            <span class="o">}</span>
            <span class="n">previous</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="na">previous</span><span class="o">;</span>
        <span class="o">}</span> <span class="k">while</span> <span class="o">(!</span><span class="n">head</span><span class="o">.</span><span class="na">compareAndSet</span><span class="o">(</span><span class="n">result</span><span class="o">,</span> <span class="n">previous</span><span class="o">));</span>
        <span class="k">return</span> <span class="n">result</span><span class="o">.</span><span class="na">value</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">private</span> <span class="kd">class</span> <span class="nc">Element</span> <span class="o">{</span>
        <span class="kd">private</span> <span class="no">T</span> <span class="n">value</span><span class="o">;</span>
        <span class="kd">private</span> <span class="nc">Element</span> <span class="n">previous</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><a href="#_многопоточность">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_напишите_минимальный_неблокирующий_стек_всего_два_методаpush_и_pop_с_использованием_semaphore">1.66. Напишите минимальный неблокирующий стек (всего два метода&#8201;&#8212;&#8201;<code>push()</code> и <code>pop()</code>) с использованием <code>Semaphore</code>.</h3>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="kd">class</span> <span class="nc">SemaphoreStack</span><span class="o">&lt;</span><span class="no">T</span><span class="o">&gt;</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="nc">Semaphore</span> <span class="n">semaphore</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Semaphore</span><span class="o">(</span><span class="mi">1</span><span class="o">);</span>
    <span class="kd">private</span> <span class="nc">Node</span><span class="o">&lt;</span><span class="no">T</span><span class="o">&gt;</span> <span class="n">head</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>

    <span class="nc">SemaphoreStack</span><span class="o">&lt;</span><span class="no">T</span><span class="o">&gt;</span> <span class="nf">push</span><span class="o">(</span><span class="no">T</span> <span class="n">value</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">semaphore</span><span class="o">.</span><span class="na">acquireUninterruptibly</span><span class="o">();</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="n">head</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Node</span><span class="o">&lt;&gt;(</span><span class="n">value</span><span class="o">,</span> <span class="n">head</span><span class="o">);</span>
        <span class="o">}</span> <span class="k">finally</span> <span class="o">{</span>
            <span class="n">semaphore</span><span class="o">.</span><span class="na">release</span><span class="o">();</span>
        <span class="o">}</span>

        <span class="k">return</span> <span class="k">this</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="no">T</span> <span class="nf">pop</span><span class="o">()</span> <span class="o">{</span>
        <span class="n">semaphore</span><span class="o">.</span><span class="na">acquireUninterruptibly</span><span class="o">();</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="nc">Node</span><span class="o">&lt;</span><span class="no">T</span><span class="o">&gt;</span> <span class="n">current</span> <span class="o">=</span> <span class="n">head</span><span class="o">;</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">current</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">head</span> <span class="o">=</span> <span class="n">head</span><span class="o">.</span><span class="na">next</span><span class="o">;</span>
                <span class="k">return</span> <span class="n">current</span><span class="o">.</span><span class="na">value</span><span class="o">;</span>
            <span class="o">}</span>
            <span class="k">return</span> <span class="kc">null</span><span class="o">;</span>
        <span class="o">}</span> <span class="k">finally</span> <span class="o">{</span>
            <span class="n">semaphore</span><span class="o">.</span><span class="na">release</span><span class="o">();</span>
        <span class="o">}</span>
    <span class="o">}</span>

    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">class</span> <span class="nc">Node</span><span class="o">&lt;</span><span class="no">E</span><span class="o">&gt;</span> <span class="o">{</span>
        <span class="kd">private</span> <span class="kd">final</span> <span class="no">E</span> <span class="n">value</span><span class="o">;</span>
        <span class="kd">private</span> <span class="kd">final</span> <span class="nc">Node</span><span class="o">&lt;</span><span class="no">E</span><span class="o">&gt;</span> <span class="n">next</span><span class="o">;</span>

        <span class="kd">private</span> <span class="nf">Node</span><span class="o">(</span><span class="no">E</span> <span class="n">value</span><span class="o">,</span> <span class="nc">Node</span><span class="o">&lt;</span><span class="no">E</span><span class="o">&gt;</span> <span class="n">next</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">this</span><span class="o">.</span><span class="na">value</span> <span class="o">=</span> <span class="n">value</span><span class="o">;</span>
            <span class="k">this</span><span class="o">.</span><span class="na">next</span> <span class="o">=</span> <span class="n">next</span><span class="o">;</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><a href="#_многопоточность">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_напишите_минимальный_неблокирующий_arraylist_всего_четыре_методаadd_get_remove_size">1.67. Напишите минимальный неблокирующий ArrayList (всего четыре метода&#8201;&#8212;&#8201;<code>add()</code>, <code>get()</code>, <code>remove()</code>, <code>size()</code>).</h3>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="kd">class</span> <span class="nc">NonBlockingArrayList</span><span class="o">&lt;</span><span class="no">T</span><span class="o">&gt;</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="kd">volatile</span> <span class="nc">Object</span><span class="o">[]</span> <span class="n">content</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Object</span><span class="o">[</span><span class="mi">0</span><span class="o">];</span>

    <span class="nc">NonBlockingArrayList</span><span class="o">&lt;</span><span class="no">T</span><span class="o">&gt;</span> <span class="nf">add</span><span class="o">(</span><span class="no">T</span> <span class="n">item</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="nf">add</span><span class="o">(</span><span class="n">content</span><span class="o">.</span><span class="na">length</span><span class="o">,</span> <span class="n">item</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="nc">NonBlockingArrayList</span><span class="o">&lt;</span><span class="no">T</span><span class="o">&gt;</span> <span class="nf">add</span><span class="o">(</span><span class="kt">int</span> <span class="n">index</span><span class="o">,</span> <span class="no">T</span> <span class="n">item</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">index</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">throw</span> <span class="k">new</span> <span class="nf">IllegalArgumentException</span><span class="o">();</span>
        <span class="o">}</span>
        <span class="kt">boolean</span> <span class="n">needsModification</span> <span class="o">=</span> <span class="n">index</span> <span class="o">&gt;</span> <span class="n">content</span><span class="o">.</span><span class="na">length</span> <span class="o">-</span> <span class="mi">1</span><span class="o">;</span>
        <span class="k">if</span> <span class="o">(!</span><span class="n">needsModification</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">item</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">needsModification</span> <span class="o">=</span> <span class="n">content</span><span class="o">[</span><span class="n">index</span><span class="o">]</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">;</span>
            <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
                <span class="n">needsModification</span> <span class="o">=</span> <span class="n">item</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">content</span><span class="o">[</span><span class="n">index</span><span class="o">]);</span>
            <span class="o">}</span>
        <span class="o">}</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">needsModification</span><span class="o">)</span> <span class="o">{</span>
            <span class="kd">final</span> <span class="nc">Object</span><span class="o">[]</span> <span class="n">renewed</span> <span class="o">=</span> <span class="nc">Arrays</span><span class="o">.</span><span class="na">copyOf</span><span class="o">(</span><span class="n">content</span><span class="o">,</span> <span class="nc">Math</span><span class="o">.</span><span class="na">max</span><span class="o">(</span><span class="n">content</span><span class="o">.</span><span class="na">length</span><span class="o">,</span> <span class="n">index</span> <span class="o">+</span> <span class="mi">1</span><span class="o">));</span>
            <span class="n">renewed</span><span class="o">[</span><span class="n">index</span><span class="o">]</span> <span class="o">=</span> <span class="n">item</span><span class="o">;</span>
            <span class="n">content</span> <span class="o">=</span> <span class="n">renewed</span><span class="o">;</span>
        <span class="o">}</span>
        <span class="k">return</span> <span class="k">this</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="nc">NonBlockingArrayList</span><span class="o">&lt;</span><span class="no">T</span><span class="o">&gt;</span> <span class="nf">remove</span><span class="o">(</span><span class="kt">int</span> <span class="n">index</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">index</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="o">||</span> <span class="n">index</span> <span class="o">&gt;=</span> <span class="n">content</span><span class="o">.</span><span class="na">length</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">throw</span> <span class="k">new</span> <span class="nf">IllegalArgumentException</span><span class="o">();</span>
        <span class="o">}</span>
        <span class="kt">int</span> <span class="n">size</span> <span class="o">=</span> <span class="n">content</span><span class="o">.</span><span class="na">length</span> <span class="o">-</span> <span class="mi">1</span><span class="o">;</span>
        <span class="kd">final</span> <span class="nc">Object</span><span class="o">[]</span> <span class="n">renewed</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Object</span><span class="o">[</span><span class="n">size</span><span class="o">];</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">arraycopy</span><span class="o">(</span><span class="n">content</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="n">renewed</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="n">index</span><span class="o">);</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">index</span> <span class="o">+</span> <span class="mi">1</span> <span class="o">&lt;</span> <span class="n">size</span><span class="o">)</span> <span class="o">{</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">arraycopy</span><span class="o">(</span><span class="n">content</span><span class="o">,</span> <span class="n">index</span> <span class="o">+</span> <span class="mi">1</span><span class="o">,</span> <span class="n">renewed</span><span class="o">,</span> <span class="n">index</span><span class="o">,</span> <span class="n">size</span> <span class="o">-</span> <span class="n">index</span><span class="o">);</span>
        <span class="o">}</span>
        <span class="n">content</span> <span class="o">=</span> <span class="n">renewed</span><span class="o">;</span>
        <span class="k">return</span> <span class="k">this</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="no">T</span> <span class="nf">get</span><span class="o">(</span><span class="kt">int</span> <span class="n">index</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="o">(</span><span class="no">T</span><span class="o">)</span> <span class="n">content</span><span class="o">[</span><span class="n">index</span><span class="o">];</span>
    <span class="o">}</span>

    <span class="kt">int</span> <span class="nf">size</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">content</span><span class="o">.</span><span class="na">length</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><a href="#_многопоточность">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_напишите_потокобезопасную_реализацию_класса_с_неблокирующим_методом_biginteger_next_который_возвращает_элементы_последовательности_1_2_4_8_16">1.68. Напишите потокобезопасную реализацию класса с неблокирующим методом <code>BigInteger next()</code>, который возвращает элементы последовательности: <code>[1, 2, 4, 8, 16, ...]</code>.</h3>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="kd">class</span> <span class="nc">PowerOfTwo</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="nc">AtomicReference</span><span class="o">&lt;</span><span class="nc">BigInteger</span><span class="o">&gt;</span> <span class="n">current</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">AtomicReference</span><span class="o">&lt;&gt;(</span><span class="kc">null</span><span class="o">);</span>

    <span class="nc">BigInteger</span> <span class="nf">next</span><span class="o">()</span> <span class="o">{</span>
        <span class="nc">BigInteger</span> <span class="n">recent</span><span class="o">,</span> <span class="n">next</span><span class="o">;</span>
        <span class="k">do</span> <span class="o">{</span>
            <span class="n">recent</span> <span class="o">=</span> <span class="n">current</span><span class="o">.</span><span class="na">get</span><span class="o">();</span>
            <span class="n">next</span> <span class="o">=</span> <span class="o">(</span><span class="n">recent</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">?</span> <span class="nc">BigInteger</span><span class="o">.</span><span class="na">valueOf</span><span class="o">(</span><span class="mi">1</span><span class="o">)</span> <span class="o">:</span> <span class="n">recent</span><span class="o">.</span><span class="na">shiftLeft</span><span class="o">(</span><span class="mi">1</span><span class="o">);</span>
        <span class="o">}</span> <span class="k">while</span> <span class="o">(!</span><span class="n">current</span><span class="o">.</span><span class="na">compareAndSet</span><span class="o">(</span><span class="n">recent</span><span class="o">,</span> <span class="n">next</span><span class="o">));</span>
        <span class="k">return</span> <span class="n">next</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><a href="#_многопоточность">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_напишите_простейший_многопоточный_ограниченный_буфер_с_использованием_synchronized">1.69. Напишите простейший многопоточный ограниченный буфер с использованием <code>synchronized</code>.</h3>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="kd">class</span> <span class="nc">QueueSynchronized</span><span class="o">&lt;</span><span class="no">T</span><span class="o">&gt;</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="kd">volatile</span> <span class="kt">int</span> <span class="n">size</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="nc">Object</span><span class="o">[]</span> <span class="n">content</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="kt">int</span> <span class="n">capacity</span><span class="o">;</span>

    <span class="kd">private</span> <span class="kt">int</span> <span class="n">out</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kt">int</span> <span class="n">in</span><span class="o">;</span>

    <span class="kd">private</span> <span class="kd">final</span> <span class="nc">Object</span> <span class="n">isEmpty</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Object</span><span class="o">();</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="nc">Object</span> <span class="n">isFull</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Object</span><span class="o">();</span>

    <span class="nc">QueueSynchronized</span><span class="o">(</span><span class="kd">final</span> <span class="kt">int</span> <span class="n">capacity</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">capacity</span> <span class="o">=</span> <span class="n">capacity</span><span class="o">;</span>
        <span class="n">content</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Object</span><span class="o">[</span><span class="k">this</span><span class="o">.</span><span class="na">capacity</span><span class="o">];</span>
        <span class="n">out</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
        <span class="n">in</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
        <span class="n">size</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">private</span> <span class="kt">int</span> <span class="nf">cycleInc</span><span class="o">(</span><span class="kt">int</span> <span class="n">index</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="o">(++</span><span class="n">index</span> <span class="o">==</span> <span class="n">capacity</span><span class="o">)</span>
                <span class="o">?</span> <span class="mi">0</span>
                <span class="o">:</span> <span class="n">index</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="nd">@SuppressWarnings</span><span class="o">(</span><span class="s">"unchecked"</span><span class="o">)</span>
    <span class="no">T</span> <span class="nf">get</span><span class="o">()</span> <span class="kd">throws</span> <span class="nc">InterruptedException</span> <span class="o">{</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">size</span> <span class="o">==</span> <span class="mi">0</span><span class="o">)</span> <span class="o">{</span>
            <span class="kd">synchronized</span> <span class="o">(</span><span class="n">isEmpty</span><span class="o">)</span> <span class="o">{</span>
                <span class="k">while</span> <span class="o">(</span><span class="n">size</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="o">)</span> <span class="o">{</span>
                    <span class="n">isEmpty</span><span class="o">.</span><span class="na">wait</span><span class="o">();</span>
                <span class="o">}</span>
            <span class="o">}</span>
        <span class="o">}</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="kd">synchronized</span> <span class="o">(</span><span class="k">this</span><span class="o">)</span> <span class="o">{</span>
                <span class="kd">final</span> <span class="nc">Object</span> <span class="n">value</span> <span class="o">=</span> <span class="n">content</span><span class="o">[</span><span class="n">out</span><span class="o">];</span>
                <span class="n">content</span><span class="o">[</span><span class="n">out</span><span class="o">]</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
                <span class="k">if</span> <span class="o">(</span><span class="n">size</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="o">)</span> <span class="o">{</span>
                    <span class="n">out</span> <span class="o">=</span> <span class="n">cycleInc</span><span class="o">(</span><span class="n">out</span><span class="o">);</span>
                <span class="o">}</span>
                <span class="n">size</span><span class="o">--;</span>
                <span class="k">return</span> <span class="o">(</span><span class="no">T</span><span class="o">)</span> <span class="n">value</span><span class="o">;</span>
            <span class="o">}</span>
        <span class="o">}</span> <span class="k">finally</span> <span class="o">{</span>
            <span class="kd">synchronized</span> <span class="o">(</span><span class="n">isFull</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">isFull</span><span class="o">.</span><span class="na">notify</span><span class="o">();</span>
            <span class="o">}</span>
        <span class="o">}</span>
    <span class="o">}</span>

    <span class="nc">QueueSynchronized</span><span class="o">&lt;</span><span class="no">T</span><span class="o">&gt;</span> <span class="nf">put</span><span class="o">(</span><span class="no">T</span> <span class="n">value</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">InterruptedException</span> <span class="o">{</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">size</span> <span class="o">==</span> <span class="n">capacity</span><span class="o">)</span> <span class="o">{</span>
            <span class="kd">synchronized</span> <span class="o">(</span><span class="n">isFull</span><span class="o">)</span> <span class="o">{</span>
                <span class="k">while</span> <span class="o">(</span><span class="n">size</span> <span class="o">==</span> <span class="n">capacity</span><span class="o">)</span> <span class="o">{</span>
                    <span class="n">isFull</span><span class="o">.</span><span class="na">wait</span><span class="o">();</span>
                <span class="o">}</span>
            <span class="o">}</span>
        <span class="o">}</span>
        <span class="kd">synchronized</span> <span class="o">(</span><span class="k">this</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">size</span> <span class="o">==</span> <span class="mi">0</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">content</span><span class="o">[</span><span class="n">in</span><span class="o">]</span> <span class="o">=</span> <span class="n">value</span><span class="o">;</span>
            <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
                <span class="n">in</span> <span class="o">=</span> <span class="n">cycleInc</span><span class="o">(</span><span class="n">in</span><span class="o">);</span>
                <span class="n">content</span><span class="o">[</span><span class="n">in</span><span class="o">]</span> <span class="o">=</span> <span class="n">value</span><span class="o">;</span>
            <span class="o">}</span>
            <span class="n">size</span><span class="o">++;</span>
        <span class="o">}</span>
        <span class="kd">synchronized</span> <span class="o">(</span><span class="n">isEmpty</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">isEmpty</span><span class="o">.</span><span class="na">notify</span><span class="o">();</span>
        <span class="o">}</span>
        <span class="k">return</span> <span class="k">this</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><a href="#_многопоточность">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_напишите_простейший_многопоточный_ограниченный_буфер_с_использованием_reentrantlock">1.70. Напишите простейший многопоточный ограниченный буфер с использованием <code>ReentrantLock</code>.</h3>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="kd">class</span> <span class="nc">QueueReentrantLock</span><span class="o">&lt;</span><span class="no">T</span><span class="o">&gt;</span> <span class="o">{</span>

    <span class="kd">private</span> <span class="kd">volatile</span> <span class="kt">int</span> <span class="n">size</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="nc">Object</span><span class="o">[]</span> <span class="n">content</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="kt">int</span> <span class="n">capacity</span><span class="o">;</span>

    <span class="kd">private</span> <span class="kt">int</span> <span class="n">out</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kt">int</span> <span class="n">in</span><span class="o">;</span>

    <span class="kd">private</span> <span class="kd">final</span> <span class="nc">ReentrantLock</span> <span class="n">lock</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ReentrantLock</span><span class="o">();</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="nc">Condition</span> <span class="n">isEmpty</span> <span class="o">=</span> <span class="n">lock</span><span class="o">.</span><span class="na">newCondition</span><span class="o">();</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="nc">Condition</span> <span class="n">isFull</span> <span class="o">=</span> <span class="n">lock</span><span class="o">.</span><span class="na">newCondition</span><span class="o">();</span>

    <span class="nc">QueueReentrantLock</span><span class="o">(</span><span class="kt">int</span> <span class="n">capacity</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="n">lock</span><span class="o">.</span><span class="na">lock</span><span class="o">();</span>
            <span class="k">this</span><span class="o">.</span><span class="na">capacity</span> <span class="o">=</span> <span class="n">capacity</span><span class="o">;</span>
            <span class="n">content</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Object</span><span class="o">[</span><span class="n">capacity</span><span class="o">];</span>
            <span class="n">out</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
            <span class="n">in</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
        <span class="o">}</span> <span class="k">finally</span> <span class="o">{</span>
            <span class="n">lock</span><span class="o">.</span><span class="na">unlock</span><span class="o">();</span>
        <span class="o">}</span>
    <span class="o">}</span>

    <span class="kd">private</span> <span class="kt">int</span> <span class="nf">cycleInc</span><span class="o">(</span><span class="kt">int</span> <span class="n">index</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="o">(++</span><span class="n">index</span> <span class="o">==</span> <span class="n">capacity</span><span class="o">)</span>
                <span class="o">?</span> <span class="mi">0</span>
                <span class="o">:</span> <span class="n">index</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="nd">@SuppressWarnings</span><span class="o">(</span><span class="s">"unchecked"</span><span class="o">)</span>
    <span class="no">T</span> <span class="nf">get</span><span class="o">()</span> <span class="kd">throws</span> <span class="nc">InterruptedException</span> <span class="o">{</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="n">lock</span><span class="o">.</span><span class="na">lockInterruptibly</span><span class="o">();</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">size</span> <span class="o">==</span> <span class="mi">0</span><span class="o">)</span> <span class="o">{</span>
                <span class="k">while</span> <span class="o">(</span><span class="n">size</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="o">)</span> <span class="o">{</span>
                    <span class="n">isEmpty</span><span class="o">.</span><span class="na">await</span><span class="o">();</span>
                <span class="o">}</span>
            <span class="o">}</span>
            <span class="kd">final</span> <span class="nc">Object</span> <span class="n">value</span> <span class="o">=</span> <span class="n">content</span><span class="o">[</span><span class="n">out</span><span class="o">];</span>
            <span class="n">content</span><span class="o">[</span><span class="n">out</span><span class="o">]</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">size</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">out</span> <span class="o">=</span> <span class="n">cycleInc</span><span class="o">(</span><span class="n">out</span><span class="o">);</span>
            <span class="o">}</span>
            <span class="n">size</span><span class="o">--;</span>
            <span class="n">isFull</span><span class="o">.</span><span class="na">signal</span><span class="o">();</span>
            <span class="k">return</span> <span class="o">(</span><span class="no">T</span><span class="o">)</span> <span class="n">value</span><span class="o">;</span>
        <span class="o">}</span> <span class="k">finally</span> <span class="o">{</span>
            <span class="n">lock</span><span class="o">.</span><span class="na">unlock</span><span class="o">();</span>
        <span class="o">}</span>
    <span class="o">}</span>

    <span class="nc">QueueReentrantLock</span><span class="o">&lt;</span><span class="no">T</span><span class="o">&gt;</span> <span class="nf">put</span><span class="o">(</span><span class="no">T</span> <span class="n">value</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">InterruptedException</span> <span class="o">{</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="n">lock</span><span class="o">.</span><span class="na">lockInterruptibly</span><span class="o">();</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">size</span> <span class="o">==</span> <span class="n">capacity</span><span class="o">)</span> <span class="o">{</span>
                <span class="k">while</span> <span class="o">(</span><span class="n">size</span> <span class="o">==</span> <span class="n">capacity</span><span class="o">)</span> <span class="o">{</span>
                    <span class="n">isFull</span><span class="o">.</span><span class="na">await</span><span class="o">();</span>
                <span class="o">}</span>
            <span class="o">}</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">size</span> <span class="o">==</span> <span class="mi">0</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">content</span><span class="o">[</span><span class="n">in</span><span class="o">]</span> <span class="o">=</span> <span class="n">value</span><span class="o">;</span>
            <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
                <span class="n">in</span> <span class="o">=</span> <span class="n">cycleInc</span><span class="o">(</span><span class="n">in</span><span class="o">);</span>
                <span class="n">content</span><span class="o">[</span><span class="n">in</span><span class="o">]</span> <span class="o">=</span> <span class="n">value</span><span class="o">;</span>
            <span class="o">}</span>
            <span class="n">size</span><span class="o">++;</span>
            <span class="n">isEmpty</span><span class="o">.</span><span class="na">signal</span><span class="o">();</span>
        <span class="o">}</span> <span class="k">finally</span> <span class="o">{</span>
            <span class="n">lock</span><span class="o">.</span><span class="na">unlock</span><span class="o">();</span>
        <span class="o">}</span>
        <span class="k">return</span> <span class="k">this</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><a href="#_многопоточность">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_источники">1.71. Источники</h3>
<div class="ulist">
<ul>
<li>
<p><a href="https://habrahabr.ru/post/164487/">Хабрахабр - Многопоточность в Java</a></p>
</li>
<li>
<p><a href="https://www.ibm.com/developerworks/ru/library/l-java_universe_multithreading_tasks/">IBM DeveloperWorks - Выполнение задач в многопоточном режиме</a></p>
</li>
<li>
<p><a href="http://www.skipy.ru/technics/synchronization.html">Записки трезвого практика</a></p>
</li>
<li>
<p><a href="https://www.ibm.com/developerworks/ru/edu/j-scjp/section8.html">IBM DeveloperWorks - SCJP</a></p>
</li>
<li>
<p><a href="http://info.javarush.ru/KapChook/2015/02/15/Перевод-Топ-50-интервью-вопросов-по-нитям-Часть-1-.html">JavaRush</a></p>
</li>
<li>
<p><a href="https://habrahabr.ru/post/277669/">Хабрахабр - Справочник по синхронизаторам <code>java.util.concurrent.*</code></a></p>
</li>
<li>
<p><a href="http://samolisov.blogspot.ru/2011/04/threadlocal.html">Блог сурового челябинского программиста</a></p>
</li>
<li>
<p><a href="http://www.ibm.com/developerworks/ru/library/j-jtp10264/">IBM DeveloperWorks - Более гибкая, масштабируемая блокировка в JDK 5.0</a></p>
</li>
<li>
<p><a href="https://habrahabr.ru/post/129494/">Хабрахабр - Правильный Singleton в Java</a></p>
</li>
<li>
<p><a href="http://www.duct-tape-architect.ru/?p=294#3%5F%5F171_187%5F%5F_Java_HotSpot_JVM6">duct-tape-architect.ru</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a href="README.html">Вопросы для собеседования</a></p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_java_core">2. Java Core</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="#Чем-различаются-jre-jvm-и-jdk">Чем различаются JRE, JVM и JDK?</a></p>
</li>
<li>
<p><a href="#Какие-существуют-модификаторы-доступа">Какие существуют модификаторы доступа?</a></p>
</li>
<li>
<p><a href="#О-чем-говорит-ключевое-слово-final">О чем говорит ключевое слово <code>final</code>?</a></p>
</li>
<li>
<p><a href="#Какими-значениями-инициализируются-переменные-по-умолчанию">Какими значениями инициализируются переменные по умолчанию?</a></p>
</li>
<li>
<p><a href="#Что-вы-знаете-о-функции-main">Что вы знаете о функции <code>main()</code>?</a></p>
</li>
<li>
<p><a href="#Какие-логические-операции-и-операторы-вы-знаете">Какие логические операции и операторы вы знаете?</a></p>
</li>
<li>
<p><a href="#Что-такое-тернарный-оператор-выбора">Что такое тернарный оператор выбора?</a></p>
</li>
<li>
<p><a href="#Какие-побитовые-операции-вы-знаете">Какие побитовые операции вы знаете?</a></p>
</li>
<li>
<p><a href="#Где-и-для-чего-используется-модификатор-abstract">Где и для чего используется модификатор <code>abstract</code>?</a></p>
</li>
<li>
<p><a href="#Дайте-определение-понятию-интерфейс-Какие-модификаторы-по-умолчанию-имеют-поля-и-методы-интерфейсов">Дайте определение понятию <em>«интерфейс»</em>. Какие модификаторы по умолчанию имеют поля и методы интерфейсов?</a></p>
</li>
<li>
<p><a href="#Чем-абстрактный-класс-отличается-от-интерфейса-В-каких-случаях-следует-использовать-абстрактный-класс-а-в-каких-интерфейс">Чем абстрактный класс отличается от интерфейса? В каких случаях следует использовать абстрактный класс, а в каких интерфейс?</a></p>
</li>
<li>
<p><a href="#Почему-в-некоторых-интерфейсах-вообще-не-определяют-методов">Почему в некоторых интерфейсах вообще не определяют методов?</a></p>
</li>
<li>
<p><a href="#Почему-нельзя-объявить-метод-интерфейса-с-модификатором-final">Почему нельзя объявить метод интерфейса с модификатором <code>final</code>?</a></p>
</li>
<li>
<p><a href="#Что-имеет-более-высокий-уровень-абстракции---класс-абстрактный-класс-или-интерфейс">Что имеет более высокий уровень абстракции - <em>класс</em>, <em>абстрактный класс</em> или <em>интерфейс</em>?</a></p>
</li>
<li>
<p><a href="#Может-ли-объект-получить-доступ-к-члену-класса-объявленному-как-private-Если-да-то-каким-образом">Может ли объект получить доступ к члену класса, объявленному как <code>private</code>? Если да, то каким образом?</a></p>
</li>
<li>
<p><a href="#Каков-порядок-вызова-конструкторов-и-блоков-инициализации-с-учётом-иерархии-классов">Каков порядок вызова конструкторов и блоков инициализации с учётом иерархии классов?</a></p>
</li>
<li>
<p><a href="#Зачем-нужны-и-какие-бывают-блоки-инициализации">Зачем нужны и какие бывают блоки инициализации?</a></p>
</li>
<li>
<p><a href="#К-каким-конструкциям-java-применим-модификатор-static">К каким конструкциям Java применим модификатор <code>static</code>?</a></p>
</li>
<li>
<p><a href="#Для-чего-в-java-используются-статические-блоки-инициализации">Для чего в Java используются статические блоки инициализации?</a></p>
</li>
<li>
<p><a href="#Что-произойдёт-если-в-блоке-инициализации-возникнет-исключительная-ситуация">Что произойдёт, если в блоке инициализации возникнет исключительная ситуация?</a></p>
</li>
<li>
<p><a href="#Какое-исключение-выбрасывается-при-возникновении-ошибки-в-блоке-инициализации-класса">Какое исключение выбрасывается при возникновении ошибки в блоке инициализации класса?</a></p>
</li>
<li>
<p><a href="#Может-ли-статический-метод-быть-переопределён-или-перегружен">Может ли статический метод быть переопределён или перегружен?</a></p>
</li>
<li>
<p><a href="#Могут-ли-нестатические-методы-перегрузить-статические">Могут ли нестатические методы перегрузить статические?</a></p>
</li>
<li>
<p><a href="#Можно-ли-сузить-уровень-доступатип-возвращаемого-значения-при-переопределении-метода">Можно ли сузить уровень доступа/тип возвращаемого значения при переопределении метода?</a></p>
</li>
<li>
<p><a href="#Возможно-ли-при-переопределении-метода-изменить-модификатор-доступа-возвращаемый-тип-тип-аргумента-или-их-количество-имена-аргументов-или-их-порядок-убирать-добавлять-изменять-порядок-следования-элементов-секции-throws">Возможно ли при переопределении метода изменить: модификатор доступа, возвращаемый тип, тип аргумента или их количество, имена аргументов или их порядок; убирать, добавлять, изменять порядок следования элементов секции <code>throws</code>?</a></p>
</li>
<li>
<p><a href="#Как-получить-доступ-к-переопределенным-методам-родительского-класса">Как получить доступ к переопределенным методам родительского класса?</a></p>
</li>
<li>
<p><a href="#Можно-ли-объявить-метод-абстрактным-и-статическим-одновременно">Можно ли объявить метод абстрактным и статическим одновременно?</a></p>
</li>
<li>
<p><a href="#В-чем-разница-между-членом-экземпляра-класса-и-статическим-членом-класса">В чем разница между членом экземпляра класса и статическим членом класса?</a></p>
</li>
<li>
<p><a href="#Где-разрешена-инициализация-статическихнестатических-полей">Где разрешена инициализация статических/нестатических полей?</a></p>
</li>
<li>
<p><a href="#Какие-типы-классов-бывают-в-java">Какие типы классов бывают в java?</a></p>
</li>
<li>
<p><a href="#Расскажите-про-вложенные-классы-В-каких-случаях-они-применяются">Расскажите про вложенные классы. В каких случаях они применяются?</a></p>
</li>
<li>
<p><a href="#Что-такое-статический-класс">Что такое <em>«статический класс»</em>?</a></p>
</li>
<li>
<p><a href="#Какие-существуют-особенности-использования-вложенных-классов-статических-и-внутренних-В-чем-заключается-разница-между-ними">Какие существуют особенности использования вложенных классов: статических и внутренних? В чем заключается разница между ними?</a></p>
</li>
<li>
<p><a href="#Что-такое-локальный-класс-Каковы-его-особенности">Что такое <em>«локальный класс»</em>? Каковы его особенности?</a></p>
</li>
<li>
<p><a href="#Что-такое-анонимные-классы-Где-они-применяются">Что такое <em>«анонимные классы»</em>? Где они применяются?</a></p>
</li>
<li>
<p><a href="#Каким-образом-из-вложенного-класса-получить-доступ-к-полю-внешнего-класса">Каким образом из вложенного класса получить доступ к полю внешнего класса?</a></p>
</li>
<li>
<p><a href="#Для-чего-используется-оператор-assert">Для чего используется оператор <code>assert</code>?</a></p>
</li>
<li>
<p><a href="#Что-такое-heap-и-stack-память-в-java-Какая-разница-между-ними">Что такое <em>Heap</em> и <em>Stack</em> память в Java? Какая разница между ними?</a></p>
</li>
<li>
<p><a href="#Верно-ли-утверждение-что-примитивные-типы-данных-всегда-хранятся-в-стеке-а-экземпляры-ссылочных-типов-данных-в-куче">Верно ли утверждение, что примитивные типы данных всегда хранятся в стеке, а экземпляры ссылочных типов данных в куче?</a></p>
</li>
<li>
<p><a href="#Каким-образом-передаются-переменные-в-методы-по-значению-или-по-ссылке">Каким образом передаются переменные в методы, по значению или по ссылке?</a></p>
</li>
<li>
<p><a href="#Для-чего-нужен-сборщик-мусора">Для чего нужен сборщик мусора?</a></p>
</li>
<li>
<p><a href="#Как-работает-сборщик-мусора">Как работает сборщик мусора?</a></p>
</li>
<li>
<p><a href="#Какие-разновидности-сборщиков-мусора-реализованы-в-виртуальной-машине-hotspot">Какие разновидности сборщиков мусора реализованы в виртуальной машине HotSpot?</a></p>
</li>
<li>
<p><a href="#Опишите-алгоритм-работы-какого-нибудь-сборщика-мусора-реализованного-в-виртуальной-машине-hotspot">Опишите алгоритм работы какого-нибудь сборщика мусора, реализованного в виртуальной машине HotSpot.</a></p>
</li>
<li>
<p><a href="#Что-такое-пул-строк">Что такое «пул строк»?</a></p>
</li>
<li>
<p><a href="#Что-такое-finalize-Зачем-он-нужен">Что такое <code>finalize()</code>? Зачем он нужен?</a></p>
</li>
<li>
<p><a href="#Что-произойдет-со-сборщиком-мусора-если-выполнение-метода-finalize-требует-ощутимо-много-времени-или-в-процессе-выполнения-будет-выброшено-исключение">Что произойдет со сборщиком мусора, если выполнение метода <code>finalize()</code> требует ощутимо много времени, или в процессе выполнения будет выброшено исключение?</a></p>
</li>
<li>
<p><a href="#Чем-отличаются-final-finally-и-finalize">Чем отличаются <code>final</code>, <code>finally</code> и <code>finalize()</code>?</a></p>
</li>
<li>
<p><a href="#Расскажите-про-приведение-типов-Что-такое-понижение-и-повышение-типа">Расскажите про приведение типов. Что такое понижение и повышение типа?</a></p>
</li>
<li>
<p><a href="#Когда-в-приложении-может-быть-выброшено-исключение-classcastexception">Когда в приложении может быть выброшено исключение <code>ClassCastException</code>?</a></p>
</li>
<li>
<p><a href="#Что-такое-литералы">Что такое литералы?</a></p>
</li>
<li>
<p><a href="#Что-такое-autoboxing-автоупаковка-в-java-и-каковы-правила-упаковки-примитивных-типов-в-классы-обертки">Что такое <em>autoboxing («автоупаковка»)</em> в Java и каковы правила упаковки примитивных типов в классы-обертки?</a></p>
</li>
<li>
<p><a href="#Какие-есть-особенности-класса-string">Какие есть особенности класса <code>String</code>?</a></p>
</li>
<li>
<p><a href="#Почему-string-неизменяемый-и-финализированный-класс">Почему <code>String</code> неизменяемый и финализированный класс?</a></p>
</li>
<li>
<p><a href="#Почему-char-предпочтительнее-string-для-хранения-пароля">Почему <code>char[]</code> предпочтительнее <code>String</code> для хранения пароля?</a></p>
</li>
<li>
<p><a href="#Почему-строка-является-популярным-ключом-в-hashmap-в-java">Почему строка является популярным ключом в <code>HashMap</code> в Java?</a></p>
</li>
<li>
<p><a href="#Что-делает-метод-intern-в-классе-string">Что делает метод <code>intern()</code> в классе <code>String</code>?.</a></p>
</li>
<li>
<p><a href="#Можно-ли-использовать-строки-в-конструкции-switch">Можно ли использовать строки в конструкции <code>switch</code>?</a></p>
</li>
<li>
<p><a href="#Какая-основная-разница-между-string-stringbuffer-stringbuilder">Какая основная разница между <code>String</code>, <code>StringBuffer</code>, <code>StringBuilder</code>?</a></p>
</li>
<li>
<p><a href="#Что-такое-класс-object-Какие-в-нем-есть-методы">Что такое класс <code>Object</code>? Какие в нем есть методы?</a></p>
</li>
<li>
<p><a href="#Дайте-определение-понятию-конструктор">Дайте определение понятию «конструктор».</a></p>
</li>
<li>
<p><a href="#Что-такое-конструктор-по-умолчанию">Что такое <em>«конструктор по умолчанию»</em>?</a></p>
</li>
<li>
<p><a href="#Чем-отличаются-конструктор-по-умолчанию-конструктор-копирования-и-конструктор-с-параметрами">Чем отличаются конструктор по-умолчанию, конструктор копирования и конструктор с параметрами?</a></p>
</li>
<li>
<p><a href="#Где-и-как-вы-можете-использовать-приватный-конструктор">Где и как вы можете использовать приватный конструктор?</a></p>
</li>
<li>
<p><a href="#Расскажите-про-классы-загрузчики-и-про-динамическую-загрузку-классов">Расскажите про классы-загрузчики и про динамическую загрузку классов.</a></p>
</li>
<li>
<p><a href="#Что-такое-reflection">Что такое <em>Reflection</em>?</a></p>
</li>
<li>
<p><a href="#Зачем-нужен-equals-Чем-он-отличается-от-операции-">Зачем нужен <code>equals()</code>. Чем он отличается от операции <code>==</code>?</a></p>
</li>
<li>
<p><a href="#Если-вы-хотите-переопределить-equals-какие-условия-должны-выполняться">Если вы хотите переопределить <code>equals()</code>, какие условия должны выполняться?</a></p>
</li>
<li>
<p><a href="#Какими-свойствами-обладает-порождаемое-equals-отношение-эквивалентности">Какими свойствами обладает порождаемое <code>equals()</code> отношение эквивалентности?</a></p>
</li>
<li>
<p><a href="#Правила-переопределения-метода-objectequals">Правила переопределения метода <code>Object.equals()</code>.</a></p>
</li>
<li>
<p><a href="#Какая-связь-между-hashcode-и-equals">Какая связь между <code>hashCode()</code> и <code>equals()</code>?</a></p>
</li>
<li>
<p><a href="#Если-equals-переопределен-есть-ли-какие-либо-другие-методы-которые-следует-переопределить">Если <code>equals()</code> переопределен, есть ли какие-либо другие методы, которые следует переопределить?</a></p>
</li>
<li>
<p><a href="#Что-будет-если-переопределить-equals-не-переопределяя-hashcode-Какие-могут-возникнуть-проблемы">Что будет, если переопределить <code>equals()</code> не переопределяя <code>hashCode()</code>? Какие могут возникнуть проблемы?</a></p>
</li>
<li>
<p><a href="#Каким-образом-реализованы-методы-hashcode-и-equals-в-классе-object">Каким образом реализованы методы <code>hashCode()</code> и <code>equals()</code> в классе <code>Object</code>?</a></p>
</li>
<li>
<p><a href="#Для-чего-нужен-метод-hashcode">Для чего нужен метод <code>hashCode()</code>?</a></p>
</li>
<li>
<p><a href="#Каковы-правила-переопределения-метода-objecthashcode">Каковы правила переопределения метода <code>Object.hashCode()</code>?</a></p>
</li>
<li>
<p><a href="#Есть-ли-какие-либо-рекомендации-о-том-какие-поля-следует-использовать-при-подсчете-hashcode">Есть ли какие-либо рекомендации о том, какие поля следует использовать при подсчете <code>hashCode()</code>?</a></p>
</li>
<li>
<p><a href="#Могут-ли-у-разных-объектов-быть-одинаковые-hashcode">Могут ли у разных объектов быть одинаковые <code>hashCode()</code>?</a></p>
</li>
<li>
<p><a href="Если-у-класса-pointint-x-y-реализовать-метод-equalsobject-that-return-thisx&.html#8212;&#8203;thatx&#8212;&#8203;thisy&#8212;&#8203;thaty-но-сделать-хэш-код-в-виде-int-hashcode-return-x-то-будут-ли-корректно-такие-точки-помещаться-и-извлекаться-из-hashset">Если у класса <code>Point{int x, y;}</code> реализовать метод <code>equals(Object that) {(return this.x == that.x &amp;&amp; this.y == that.y)}</code>, но сделать хэш код в виде <code>int hashCode() {return x;}</code>, то будут ли корректно такие точки помещаться и извлекаться из <code>HashSet</code>?</a></p>
</li>
<li>
<p><a href="Могут-ли-у-разных-объектов-ref0&.html#8212;&#8203;ref1-быть-ref0equalsref1&#8212;&#8203;true">Могут ли у разных объектов <code>(ref0 != ref1)</code> быть <code>ref0.equals(ref1) == true</code>?</a></p>
</li>
<li>
<p><a href="Могут-ли-у-разных-ссылок-на-один-объект-ref0&.html#8212;&#8203;ref1-быть-ref0equalsref1&#8212;&#8203;false">Могут ли у разных ссылок на один объект <code>(ref0 == ref1)</code> быть <code>ref0.equals(ref1) == false</code>?</a></p>
</li>
<li>
<p><a href="Можно-ли-так-реализовать-метод-equalsobject-that-return-thishashcode&.html#8212;&#8203;thathashcode">Можно ли так реализовать метод <code>equals(Object that) {return this.hashCode() == that.hashCode()}</code>?</a></p>
</li>
<li>
<p><a href="В-equals-требуется-проверять-что-аргумент-equalsobject-that-такого-же-типа-что-и-сам-объект-В-чем-разница-между-thisgetclass&.html#8212;&#8203;thatgetclass-и-that-instanceof-myclass">В <code>equals()</code> требуется проверять, что аргумент <code>equals(Object that)</code> такого же типа что и сам объект. В чем разница между <code>this.getClass() == that.getClass()</code> и <code>that instanceof MyClass</code>?</a></p>
</li>
<li>
<p><a href="Можно-ли-реализовать-метод-equals-класса-myclass-вот-так-class-myclass-public-boolean-equalsmyclass-that-return-this&.html#8212;&#8203;that">Можно ли реализовать метод <code>equals()</code> класса <code>MyClass</code> вот так: <code>class MyClass {public boolean equals(MyClass that) {return this == that;}}</code>?</a></p>
</li>
<li>
<p><a href="Есть-класс-pointint-x-y-Почему-хэш-код-в-виде-31&.html#8212;&#8203;x&#8212;&#8203;y-предпочтительнее-чем-x&#8212;&#8203;y">Есть класс <code>Point{int x, y;}</code>. Почему хэш код в виде <code>31 * x + y</code> предпочтительнее чем <code>x + y</code>?</a></p>
</li>
<li>
<p><a href="#Расскажите-про-клонирование-объектов">Расскажите про клонирование объектов.</a></p>
</li>
<li>
<p><a href="#В-чем-отличие-между-поверхностным-и-глубоким-клонированием">В чем отличие между <em>поверхностным</em> и <em>глубоким</em> клонированием?</a></p>
</li>
<li>
<p><a href="#Какой-способ-клонирования-предпочтительней">Какой способ клонирования предпочтительней?</a></p>
</li>
<li>
<p><a href="#Почему-метод-clone-объявлен-в-классе-object-а-не-в-интерфейсе-cloneable">Почему метод <code>clone()</code> объявлен в классе <code>Object</code>, а не в интерфейсе <code>Cloneable</code>?</a></p>
</li>
<li>
<p><a href="#Опишите-иерархию-исключений">Опишите иерархию исключений.</a></p>
</li>
<li>
<p><a href="#Какие-виды-исключений-в-java-вы-знаете-чем-они-отличаются">Какие виды исключений в Java вы знаете, чем они отличаются?</a></p>
</li>
<li>
<p><a href="#Что-такое-checked-и-unchecked-exception">Что такое <em>checked</em> и <em>unchecked exception</em>?</a></p>
</li>
<li>
<p><a href="#Какой-оператор-позволяет-принудительно-выбросить-исключение">Какой оператор позволяет принудительно выбросить исключение?</a></p>
</li>
<li>
<p><a href="#О-чем-говорит-ключевое-слово-throws">О чем говорит ключевое слово <code>throws</code>?</a></p>
</li>
<li>
<p><a href="#Как-написать-собственное-пользовательское-исключение">Как написать собственное («пользовательское») исключение?</a></p>
</li>
<li>
<p><a href="#Какие-существуют-unchecked-exception">Какие существуют <em>unchecked exception</em>?</a></p>
</li>
<li>
<p><a href="#Что-представляет-из-себя-ошибки-класса-error">Что представляет из себя ошибки класса <code>Error</code>?</a></p>
</li>
<li>
<p><a href="#Что-вы-знаете-о-outofmemoryerror">Что вы знаете о <code>OutOfMemoryError</code>?</a></p>
</li>
<li>
<p><a href="#Опишите-работу-блока-try-catch-finally">Опишите работу блока <em>try-catch-finally</em>.</a></p>
</li>
<li>
<p><a href="#Что-такое-механизм-try-with-resources">Что такое механизм <em>try-with-resources</em>?</a></p>
</li>
<li>
<p><a href="#Возможно-ли-использование-блока-try-finally-без-catch">Возможно ли использование блока <em>try-finally</em> (без <code>catch</code>)?</a></p>
</li>
<li>
<p><a href="#Может-ли-один-блок-catch-отлавливать-сразу-несколько-исключений">Может ли один блок <code>catch</code> отлавливать сразу несколько исключений?</a></p>
</li>
<li>
<p><a href="#Всегда-ли-исполняется-блок-finally">Всегда ли исполняется блок <code>finally</code>?</a></p>
</li>
<li>
<p><a href="#Существуют-ли-ситуации-когда-блок-finally-не-будет-выполнен">Существуют ли ситуации, когда блок <code>finally</code> не будет выполнен?</a></p>
</li>
<li>
<p><a href="#Может-ли-метод-main-выбросить-исключение-во-вне-и-если-да-то-где-будет-происходить-обработка-данного-исключения">Может ли метод <em>main()</em> выбросить исключение во вне и если да, то где будет происходить обработка данного исключения?</a></p>
</li>
<li>
<p><a href="#Предположим-есть-метод-который-может-выбросить-ioexception-и-filenotfoundexception-в-какой-последовательности-должны-идти-блоки-catch-Сколько-блоков-catch-будет-выполнено">Предположим, есть метод, который может выбросить <code>IOException</code> и <code>FileNotFoundException</code> в какой последовательности должны идти блоки <code>catch</code>? Сколько блоков <code>catch</code> будет выполнено?</a></p>
</li>
<li>
<p><a href="#Что-такое-generics">Что такое <em>generics</em>?</a></p>
</li>
<li>
<p><a href="#Что-такое-интернационализация-локализация">Что такое <em>«интернационализация»</em>, <em>«локализация»</em>?</a></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_чем_различаются_jre_jvm_и_jdk">2.1. Чем различаются JRE, JVM и JDK?</h3>
<div class="paragraph">
<p><strong>JVM</strong>, Java Virtual Machine (Виртуальная машина Java)&#8201;&#8212;&#8201;основная часть среды времени исполнения Java (JRE). Виртуальная машина Java исполняет байт-код Java, предварительно созданный из исходного текста Java-программы компилятором Java. JVM может также использоваться для выполнения программ, написанных на других языках программирования.</p>
</div>
<div class="paragraph">
<p><strong>JRE</strong>, Java Runtime Environment (Среда времени выполнения Java) - минимально-необходимая реализация виртуальной машины для исполнения Java-приложений. Состоит из JVM и стандартного набора библиотек классов Java.</p>
</div>
<div class="paragraph">
<p><strong>JDK</strong>, Java Development Kit (Комплект разработки на Java) - JRE и набор инструментов разработчика приложений на языке Java, включающий в себя компилятор Java, стандартные библиотеки классов Java, примеры, документацию, различные утилиты.</p>
</div>
<div class="paragraph">
<p>Коротко: <strong>JDK</strong> - среда для разработки программ на Java, включающая в себя <strong>JRE</strong> - среду для обеспечения запуска Java программ, которая в свою очередь содержит <strong>JVM</strong> - интерпретатор кода Java программ.</p>
</div>
<div class="paragraph">
<p><a href="#java-core">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_какие_существуют_модификаторы_доступа">2.2. Какие существуют модификаторы доступа?</h3>
<div class="paragraph">
<p><strong>private</strong> (приватный): члены класса доступны только внутри класса. Для обозначения используется служебное слово <code>private</code>.</p>
</div>
<div class="paragraph">
<p><strong>default</strong>, package-private, package level (доступ на уровне пакета): видимость класса/членов класса только внутри пакета. Является модификатором доступа по умолчанию - специальное
обозначение не требуется.</p>
</div>
<div class="paragraph">
<p><strong>protected</strong> (защищённый): члены класса доступны внутри пакета и в наследниках. Для обозначения используется служебное слово <code>protected</code>.</p>
</div>
<div class="paragraph">
<p><strong>public</strong> (публичный): класс/члены класса доступны всем. Для обозначения используется служебное слово <code>public</code>.</p>
</div>
<div class="paragraph">
<p>Последовательность модификаторов по возрастанию уровня закрытости: public, protected, default, private.</p>
</div>
<div class="paragraph">
<p>Во время наследования возможно изменения модификаторов доступа в сторону большей видимости (для поддержания соответствия <em>принципу подстановки Барбары Лисков</em>).</p>
</div>
<div class="paragraph">
<p><a href="#java-core">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_о_чем_говорит_ключевое_слово_final">2.3. О чем говорит ключевое слово <code>final</code>?</h3>
<div class="paragraph">
<p>Модификатор <code>final</code> может применяться к переменным, параметрам методов, полям и методам класса или самим классам.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Класс не может иметь наследников;</p>
</li>
<li>
<p>Метод не может быть переопределен в классах наследниках;</p>
</li>
<li>
<p>Поле не может изменить свое значение после инициализации;</p>
</li>
<li>
<p>Параметры методов не могут изменять своё значение внутри метода;</p>
</li>
<li>
<p>Локальные переменные не могут быть изменены после присвоения им значения.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a href="#java-core">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_какими_значениями_инициализируются_переменные_по_умолчанию">2.4. Какими значениями инициализируются переменные по умолчанию?</h3>
<div class="ulist">
<ul>
<li>
<p>Числа инициализируются <code>0</code> или <code>0.0</code>;</p>
</li>
<li>
<p><code>char</code>&#8201;&#8212;&#8201;<code>\u0000</code>;</p>
</li>
<li>
<p><code>boolean</code>&#8201;&#8212;&#8201;<code>false</code>;</p>
</li>
<li>
<p>Объекты (в том числе <code>String</code>)&#8201;&#8212;&#8201;<code>null</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a href="#java-core">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_что_вы_знаете_о_функции_main">2.5. Что вы знаете о функции <code>main()</code>?</h3>
<div class="paragraph">
<p>Метод <code>main()</code>&#8201;&#8212;&#8201;точка входа в программу. В приложении может быть несколько таких методов. Если метод отсутствует, то компиляция возможна, но при запуске будет получена ошибка <em>`Error: Main method not found`</em>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><a href="#java-core">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_какие_логические_операции_и_операторы_вы_знаете">2.6. Какие логические операции и операторы вы знаете?</h3>
<div class="ulist">
<ul>
<li>
<p><code>&amp;</code>: Логическое <em>AND</em> (И);</p>
</li>
<li>
<p><code>&amp;&amp;</code>: Сокращённое <em>AND</em>;</p>
</li>
<li>
<p><code>|</code>: Логическое <em>OR</em> (ИЛИ);</p>
</li>
<li>
<p><code>||</code>: Сокращённое <em>OR</em>;</p>
</li>
<li>
<p><code>^</code>: Логическое <em>XOR</em> (исключающее <em>OR</em> (ИЛИ));</p>
</li>
<li>
<p><code>!</code>: Логическое унарное <em>NOT</em> (НЕ);</p>
</li>
<li>
<p><code>&amp;=</code>: <em>AND</em> с присваиванием;</p>
</li>
<li>
<p><code>|=</code>: <em>OR</em> с присваиванием;</p>
</li>
<li>
<p><code>^=</code>: <em>XOR</em> с присваиванием;</p>
</li>
<li>
<p><code>==</code>: Равно;</p>
</li>
<li>
<p><code>!=</code>: Не равно;</p>
</li>
<li>
<p><code>?:</code>: Тернарный (троичный) условный оператор.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a href="#java-core">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_что_такое_тернарный_оператор_выбора">2.7. Что такое тернарный оператор выбора?</h3>
<div class="paragraph">
<p>Тернарный условный оператор <code>?:</code> - оператор, которым можно заменить некоторые конструкции операторов <code>if-then-else</code>.</p>
</div>
<div class="paragraph">
<p>Выражение записывается в следующей форме:</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>условие ? выражение1 : выражение2</p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p>Если <code>условие</code> выполняется, то вычисляется <code>выражение1</code> и его результат становится результатом выполнения всего оператора. Если же <code>условие</code> равно <code>false</code>, то вычисляется <code>выражение2</code> и его значение становится результатом работы оператора. Оба операнда <code>выражение1</code> и <code>выражение2</code> должны возвращать значение одинакового (или совместимого) типа.</p>
</div>
<div class="paragraph">
<p><a href="#java-core">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_какие_побитовые_операции_вы_знаете">2.8. Какие побитовые операции вы знаете?</h3>
<div class="ulist">
<ul>
<li>
<p><code>~</code>: Побитовый унарный оператор NOT;</p>
</li>
<li>
<p><code>&amp;</code>: Побитовый AND;</p>
</li>
<li>
<p><code>&amp;=</code>: Побитовый AND с присваиванием;</p>
</li>
<li>
<p><code>|</code>: Побитовый OR;</p>
</li>
<li>
<p><code>|=</code>: Побитовый OR с присваиванием;</p>
</li>
<li>
<p><code>^</code>: Побитовый исключающее XOR;</p>
</li>
<li>
<p><code>^=</code>: Побитовый исключающее XOR с присваиванием;</p>
</li>
<li>
<p><code>&gt;&gt;</code>: Сдвиг вправо (деление на 2 в степени сдвига);</p>
</li>
<li>
<p><code>&gt;&gt;=</code>: Сдвиг вправо с присваиванием;</p>
</li>
<li>
<p><code>&gt;&gt;&gt;</code>: Сдвиг вправо без учёта знака;</p>
</li>
<li>
<p><code>&gt;&gt;&gt;=</code>: Сдвиг вправо без учёта знака с присваиванием;</p>
</li>
<li>
<p><code>&lt;&lt;</code>: Сдвиг влево (умножение на 2 в степени сдвига);</p>
</li>
<li>
<p><code>&lt;&lt;=</code>: Сдвиг влево с присваиванием.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a href="#java-core">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_где_и_для_чего_используется_модификатор_abstract">2.9. Где и для чего используется модификатор <code>abstract</code>?</h3>
<div class="paragraph">
<p>Класс, помеченный модификатором <code>abstract</code>, называется абстрактным классом. Такие классы могут выступать только предками для других классов. Создавать экземпляры самого абстрактного класса не разрешается. При этом наследниками абстрактного класса могут быть как другие абстрактные классы, так и классы, допускающие создание объектов.</p>
</div>
<div class="paragraph">
<p>Метод, помеченный ключевым словом <code>abstract</code> - абстрактный метод, т.е. метод, который не имеет реализации. Если в классе присутствует хотя бы один абстрактный метод, то весь класс должен быть объявлен абстрактным.</p>
</div>
<div class="paragraph">
<p>Использование абстрактных классов и методов позволяет описать некий шаблон объекта, который должен быть реализован в других классах. В них же самих описывается лишь некое общее для всех потомков поведение.</p>
</div>
<div class="paragraph">
<p><a href="#java-core">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_дайте_определение_понятию_интерфейс_какие_модификаторы_по_умолчанию_имеют_поля_и_методы_интерфейсов">2.10. Дайте определение понятию <em>«интерфейс»</em>. Какие модификаторы по умолчанию имеют поля и методы интерфейсов?</h3>
<div class="paragraph">
<p>Ключевое слово <code>interface</code> используется для создания полностью абстрактных классов. Основное предназначение интерфейса - определять каким образом мы можем использовать класс, который его реализует. Создатель интерфейса определяет имена методов, списки аргументов и типы возвращаемых значений, но не реализует их поведение. Все методы неявно объявляются как <code>public</code>.</p>
</div>
<div class="paragraph">
<p>Начиная с Java 8 в интерфейсах разрешается размещать реализацию методов по умолчанию <code>default</code> и статических <code>static</code> методов.</p>
</div>
<div class="paragraph">
<p>Интерфейс также может содержать и поля. В этом случае они автоматически являются публичными <code>public</code>, статическими <code>static</code> и неизменяемыми <code>final</code>.</p>
</div>
<div class="paragraph">
<p><a href="#java-core">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_чем_абстрактный_класс_отличается_от_интерфейса_в_каких_случаях_следует_использовать_абстрактный_класс_а_в_каких_интерфейс">2.11. Чем абстрактный класс отличается от интерфейса? В каких случаях следует использовать абстрактный класс, а в каких интерфейс?</h3>
<div class="ulist">
<ul>
<li>
<p>В Java класс может одновременно реализовать несколько интерфейсов, но наследоваться только от одного класса.</p>
</li>
<li>
<p>Абстрактные классы используются только тогда, когда присутствует тип отношений «is a» (является). Интерфейсы могут реализоваться классами, которые не связаны друг с другом.</p>
</li>
<li>
<p>Абстрактный класс - средство, позволяющее избежать написания повторяющегося кода, инструмент для частичной реализации поведения. Интерфейс - это средство выражения семантики класса, контракт, описывающий возможности. Все методы интерфейса неявно объявляются как <code>public abstract</code> или (начиная с Java 8) <code>default</code> - методами с реализацией по-умолчанию, а поля - <code>public static final</code>.</p>
</li>
<li>
<p>Интерфейсы позволяют создавать структуры типов без иерархии.</p>
</li>
<li>
<p>Наследуясь от абстрактного, класс «растворяет» собственную индивидуальность. Реализуя интерфейс, он расширяет собственную функциональность.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Абстрактные классы содержат частичную реализацию, которая дополняется или расширяется в подклассах. При этом все подклассы схожи между собой в части реализации, унаследованной от абстрактного класса, и отличаются лишь в части собственной реализации абстрактных методов родителя. Поэтому абстрактные классы применяются в случае построения иерархии однотипных, очень похожих друг на друга классов. В этом случае наследование от абстрактного класса, реализующего поведение объекта по умолчанию может быть полезно, так как позволяет избежать написания повторяющегося кода. Во всех остальных случаях лучше использовать интерфейсы.</p>
</div>
<div class="paragraph">
<p><a href="#java-core">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_почему_в_некоторых_интерфейсах_вообще_не_определяют_методов">2.12. Почему в некоторых интерфейсах вообще не определяют методов?</h3>
<div class="paragraph">
<p>Это так называемые <em>маркерные интерфейсы</em>. Они просто указывают что класс относится к определенному типу. Примером может послужить интерфейс <code>Clonable</code>, который указывает на то, что класс поддерживает механизм клонирования.</p>
</div>
<div class="paragraph">
<p><a href="#java-core">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_почему_нельзя_объявить_метод_интерфейса_с_модификатором_final">2.13. Почему нельзя объявить метод интерфейса с модификатором <code>final</code>?</h3>
<div class="paragraph">
<p>В случае интерфейсов указание модификатора <code>final</code> бессмысленно, т.к. все методы интерфейсов неявно объявляются как абстрактные, т.е. их невозможно выполнить, не реализовав где-то еще, а этого нельзя будет сделать, если у метода идентификатор <code>final</code>.</p>
</div>
<div class="paragraph">
<p><a href="#java-core">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_что_имеет_более_высокий_уровень_абстракции_класс_абстрактный_класс_или_интерфейс">2.14. Что имеет более высокий уровень абстракции - <em>класс</em>, <em>абстрактный класс</em> или <em>интерфейс</em>?</h3>
<div class="paragraph">
<p>Интерфейс.</p>
</div>
<div class="paragraph">
<p><a href="#java-core">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_может_ли_объект_получить_доступ_к_члену_класса_объявленному_как_private_если_да_то_каким_образом">2.15. Может ли объект получить доступ к члену класса, объявленному как <code>private</code>? Если да, то каким образом?</h3>
<div class="ulist">
<ul>
<li>
<p>Внутри класса доступ к приватной переменной открыт без ограничений;</p>
</li>
<li>
<p>Вложенный класс имеет полный доступ ко всем (в том числе и приватным) членам содержащего его класса;</p>
</li>
<li>
<p>Доступ к приватным переменным извне может быть организован через отличные от приватных методов, которые предоставлены разработчиком класса. Например: <code>getX()</code> и <code>setX()</code>.</p>
</li>
<li>
<p>Через механизм рефлексии (Reflection API):</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="kd">class</span> <span class="nc">Victim</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="kt">int</span> <span class="n">field</span> <span class="o">=</span> <span class="mi">42</span><span class="o">;</span>
<span class="o">}</span>
<span class="c1">//...</span>
<span class="nc">Victim</span> <span class="n">victim</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Victim</span><span class="o">();</span>
<span class="nc">Field</span> <span class="n">field</span> <span class="o">=</span> <span class="nc">Victim</span><span class="o">.</span><span class="na">class</span><span class="o">.</span><span class="na">getDeclaredField</span><span class="o">(</span><span class="s">"field"</span><span class="o">);</span>
<span class="n">field</span><span class="o">.</span><span class="na">setAccessible</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>
<span class="kt">int</span> <span class="n">fieldValue</span> <span class="o">=</span> <span class="o">(</span><span class="kt">int</span><span class="o">)</span> <span class="n">field</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">victim</span><span class="o">);</span>
<span class="c1">//...</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><a href="#java-core">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_каков_порядок_вызова_конструкторов_и_блоков_инициализации_с_учётом_иерархии_классов">2.16. Каков порядок вызова конструкторов и блоков инициализации с учётом иерархии классов?</h3>
<div class="paragraph">
<p>Сначала вызываются все статические блоки в очередности от первого статического блока корневого предка и выше по цепочке иерархии до статических блоков самого класса.</p>
</div>
<div class="paragraph">
<p>Затем вызываются нестатические блоки инициализации корневого предка, конструктор корневого предка и так далее вплоть до нестатических блоков и конструктора самого класса.</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>Parent static block(s) → Child static block(s) → Grandchild static block(s)</p>
</div>
<div class="paragraph">
<p>→ Parent non-static block(s) → Parent constructor →</p>
</div>
<div class="paragraph">
<p>→ Child non-static block(s) → Child constructor →</p>
</div>
<div class="paragraph">
<p>→ Grandchild non-static block(s) → Grandchild constructor</p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p>Пример 1:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">MainClass</span> <span class="o">{</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span> <span class="n">args</span><span class="o">[])</span> <span class="o">{</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="nc">TestClass</span><span class="o">.</span><span class="na">v</span><span class="o">);</span>
        <span class="k">new</span> <span class="nf">TestClass</span><span class="o">().</span><span class="na">a</span><span class="o">();</span>
    <span class="o">}</span>

<span class="o">}</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">TestClass</span> <span class="o">{</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="nc">String</span> <span class="n">v</span> <span class="o">=</span> <span class="s">"Some val"</span><span class="o">;</span>

    <span class="o">{</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"!!! Non-static initializer"</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="kd">static</span> <span class="o">{</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"!!! Static initializer"</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">a</span><span class="o">()</span> <span class="o">{</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"!!! a() called"</span><span class="o">);</span>
    <span class="o">}</span>

<span class="o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Результат выполнения:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>!!! Static initializer
Some val
!!! Non-static initializer
!!! a() called</pre>
</div>
</div>
<div class="paragraph">
<p>Пример 2:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">MainClass</span> <span class="o">{</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span> <span class="n">args</span><span class="o">[])</span> <span class="o">{</span>
        <span class="k">new</span> <span class="nf">TestClass</span><span class="o">().</span><span class="na">a</span><span class="o">();</span>
    <span class="o">}</span>

<span class="o">}</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">TestClass</span> <span class="o">{</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="nc">String</span> <span class="n">v</span> <span class="o">=</span> <span class="s">"Some val"</span><span class="o">;</span>

    <span class="o">{</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"!!! Non-static initializer"</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="kd">static</span> <span class="o">{</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"!!! Static initializer"</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">a</span><span class="o">()</span> <span class="o">{</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"!!! a() called"</span><span class="o">);</span>
    <span class="o">}</span>

<span class="o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Результат выполнения:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>!!! Static initializer
!!! Non-static initializer
!!! a() called</pre>
</div>
</div>
<div class="paragraph">
<p><a href="#java-core">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_зачем_нужны_и_какие_бывают_блоки_инициализации">2.17. Зачем нужны и какие бывают блоки инициализации?</h3>
<div class="paragraph">
<p>Блоки инициализации представляют собой код, заключенный в фигурные скобки и размещаемый внутри класса вне объявления методов или конструкторов.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Существуют статические и нестатические блоки инициализации.</p>
</li>
<li>
<p>Блок инициализации выполняется перед инициализацией класса загрузчиком классов или созданием объекта класса с помощью конструктора.</p>
</li>
<li>
<p>Несколько блоков инициализации выполняются в порядке следования в коде класса.</p>
</li>
<li>
<p>Блок инициализации способен генерировать исключения, если их объявления перечислены в <code>throws</code> всех конструкторов класса.</p>
</li>
<li>
<p>Блок инициализации возможно создать и в анонимном классе.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a href="#java-core">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_к_каким_конструкциям_java_применим_модификатор_static">2.18. К каким конструкциям Java применим модификатор <code>static</code>?</h3>
<div class="ulist">
<ul>
<li>
<p>полям;</p>
</li>
<li>
<p>методам;</p>
</li>
<li>
<p>вложенным классам;</p>
</li>
<li>
<p>блокам инициализации;</p>
</li>
<li>
<p>членам секции <code>import</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a href="#java-core">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_для_чего_в_java_используются_статические_блоки_инициализации">2.19. Для чего в Java используются статические блоки инициализации?</h3>
<div class="paragraph">
<p>Статические блоки инициализация используются для выполнения кода, который должен выполняться один раз при инициализации класса загрузчиком классов, в момент, предшествующий созданию объектов этого класса при помощи конструктора. Такой блок (в отличие от нестатических, принадлежащих конкретном объекту класса) принадлежит только самому классу (объекту метакласса <code>Class</code>).</p>
</div>
<div class="paragraph">
<p><a href="#java-core">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_что_произойдёт_если_в_блоке_инициализации_возникнет_исключительная_ситуация">2.20. Что произойдёт, если в блоке инициализации возникнет исключительная ситуация?</h3>
<div class="paragraph">
<p>Для нестатических блоков инициализации, если выбрасывание исключения прописано явным образом требуется, чтобы объявления этих исключений были перечислены в <code>throws</code> всех конструкторов класса. Иначе будет ошибка компиляции. Для статического блока выбрасывание исключения в явном виде, приводит к ошибке компиляции.</p>
</div>
<div class="paragraph">
<p>В остальных случаях, взаимодействие с исключениями будет проходить так же, как и в любом другом месте. Класс не будет инициализирован, если ошибка происходит в статическом блоке и объект класса не будет создан, если ошибка возникает в нестатическом блоке.</p>
</div>
<div class="paragraph">
<p><a href="#java-core">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_какое_исключение_выбрасывается_при_возникновении_ошибки_в_блоке_инициализации_класса">2.21. Какое исключение выбрасывается при возникновении ошибки в блоке инициализации класса?</h3>
<div class="paragraph">
<p>Если возникшее исключение - наследник <code>RuntimeException</code>:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>для статических блоков инициализации будет выброшено <code>java.lang.ExceptionInInitializerError</code>;</p>
</li>
<li>
<p>для нестатических будет проброшено исключение-источник.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Если возникшее исключение - наследник <code>Error</code>, то в обоих случаях будет выброшено <code>java.lang.Error</code>. Исключение: <code>java.lang.ThreadDeath</code> - смерть потока. В этом случае никакое исключение выброшено не будет.</p>
</div>
<div class="paragraph">
<p><a href="#java-core">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_может_ли_статический_метод_быть_переопределён_или_перегружен">2.22. Может ли статический метод быть переопределён или перегружен?</h3>
<div class="paragraph">
<p>Перегружен - да. Всё работает точно так же, как и с обычными методами - 2 статических метода могут иметь одинаковое имя, если количество их параметров или типов различается.</p>
</div>
<div class="paragraph">
<p>Переопределён - нет. Выбор вызываемого статического метода происходит при раннем связывании (на этапе компиляции, а не выполнения) и выполняться всегда будет родительский метод, хотя синтаксически переопределение статического метода - это вполне корректная языковая конструкция.</p>
</div>
<div class="paragraph">
<p>В целом, к статическим полям и методам рекомендуется обращаться через имя класса, а не объект.</p>
</div>
<div class="paragraph">
<p><a href="#java-core">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_могут_ли_нестатические_методы_перегрузить_статические">2.23. Могут ли нестатические методы перегрузить статические?</h3>
<div class="paragraph">
<p>Да. В итоге получится два разных метода. Статический будет принадлежать классу и будет доступен через его имя, а нестатический будет принадлежать конкретному объекту и доступен через вызов метода этого объекта.</p>
</div>
<div class="paragraph">
<p><a href="#java-core">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_можно_ли_сузить_уровень_доступатип_возвращаемого_значения_при_переопределении_метода">2.24. Можно ли сузить уровень доступа/тип возвращаемого значения при переопределении метода?</h3>
<div class="ulist">
<ul>
<li>
<p>При переопределении метода нельзя сузить модификатор доступа к методу (например с public в MainClass до private в Class extends MainClass).</p>
</li>
<li>
<p>Изменить тип возвращаемого значения при переопределении метода нельзя, будет ошибка attempting to use incompatible return type.</p>
</li>
<li>
<p>Можно сузить возвращаемое значение, если они совместимы.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Например:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Animal</span> <span class="o">{</span>

    <span class="kd">public</span> <span class="nc">Animal</span> <span class="nf">eat</span><span class="o">()</span> <span class="o">{</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"animal eat"</span><span class="o">);</span>
        <span class="k">return</span> <span class="kc">null</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="nc">Long</span> <span class="nf">calc</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="kc">null</span><span class="o">;</span>
    <span class="o">}</span>

<span class="o">}</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Dog</span> <span class="kd">extends</span> <span class="nc">Animal</span> <span class="o">{</span>

    <span class="kd">public</span> <span class="nc">Dog</span> <span class="nf">eat</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nf">Dog</span><span class="o">();</span>
    <span class="o">}</span>
<span class="cm">/*attempting to use incompatible return type
    public Integer calc() {
        return null;
    }
*/</span>
<span class="o">}</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_возможно_ли_при_переопределении_метода_изменить_модификатор_доступа_возвращаемый_тип_тип_аргумента_или_их_количество_имена_аргументов_или_их_порядок_убирать_добавлять_изменять_порядок_следования_элементов_секции_throws">2.25. Возможно ли при переопределении метода изменить: модификатор доступа, возвращаемый тип, тип аргумента или их количество, имена аргументов или их порядок; убирать, добавлять, изменять порядок следования элементов секции <code>throws</code>?</h3>
<div class="paragraph">
<p>При переопределении метода сужать модификатор доступа не разрешается, т.к. это приведёт к нарушению принципа подстановки Барбары Лисков. Расширение уровня доступа возможно.</p>
</div>
<div class="paragraph">
<p>Можно изменять все, что не мешает компилятору понять какой метод родительского класса имеется в виду:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Изменять тип возвращаемого значения при переопределении метода разрешено только в сторону сужения типа (вместо родительского класса - наследника).</p>
</li>
<li>
<p>При изменении типа, количества, порядка следования аргументов вместо переопределения будет происходить <em>overloading</em> (перегрузка) метода.</p>
</li>
<li>
<p>Секцию <code>throws</code> метода можно не указывать, но стоит помнить, что она остаётся действительной, если уже определена у метода родительского класса. Так же, возможно добавлять новые исключения, являющиеся наследниками от уже объявленных или исключения <code>RuntimeException</code>. Порядок следования таких элементов при переопределении значения не имеет.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a href="#java-core">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_как_получить_доступ_к_переопределенным_методам_родительского_класса">2.26. Как получить доступ к переопределенным методам родительского класса?</h3>
<div class="paragraph">
<p>С помощью ключевого слова <code>super</code> мы можем обратиться к любому члену родительского класса - методу или полю, если они не определены с модификатором <code>private</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="kd">super</span><span class="o">.</span><span class="na">method</span><span class="o">();</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><a href="#java-core">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_можно_ли_объявить_метод_абстрактным_и_статическим_одновременно">2.27. Можно ли объявить метод абстрактным и статическим одновременно?</h3>
<div class="paragraph">
<p>Нет. В таком случае компилятор выдаст ошибку: <em>"Illegal combination of modifiers: &#8216;abstract&#8217; and &#8216;static&#8217;"</em>. Модификатор <code>abstract</code> говорит, что метод будет реализован в другом классе, а <code>static</code> наоборот указывает, что этот метод будет доступен по имени класса.</p>
</div>
<div class="paragraph">
<p><a href="#java-core">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_в_чем_разница_между_членом_экземпляра_класса_и_статическим_членом_класса">2.28. В чем разница между членом экземпляра класса и статическим членом класса?</h3>
<div class="paragraph">
<p>Модификатор <code>static</code> говорит о том, что данный метод или поле принадлежат самому классу и доступ к ним возможен даже без создания экземпляра класса. Поля, помеченные <code>static</code> инициализируются при инициализации класса. На методы, объявленные как <code>static</code>, накладывается ряд ограничений:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Они могут вызывать только другие статические методы.</p>
</li>
<li>
<p>Они должны осуществлять доступ только к статическим переменным.</p>
</li>
<li>
<p>Они не могут ссылаться на члены типа <code>this</code> или <code>super</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>В отличии от статических, поля экземпляра класса принадлежат конкретному объекту и могут иметь разные значения для каждого. Вызов метода экземпляра возможен только после предварительного создания объекта класса.</p>
</div>
<div class="paragraph">
<p>Пример:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">MainClass</span> <span class="o">{</span>

	<span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span> <span class="n">args</span><span class="o">[])</span> <span class="o">{</span>
		<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="nc">TestClass</span><span class="o">.</span><span class="na">v</span><span class="o">);</span>
		<span class="k">new</span> <span class="nf">TestClass</span><span class="o">().</span><span class="na">a</span><span class="o">();</span>
		<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="nc">TestClass</span><span class="o">.</span><span class="na">v</span><span class="o">);</span>
	<span class="o">}</span>

<span class="o">}</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">TestClass</span> <span class="o">{</span>

	<span class="kd">public</span> <span class="kd">static</span> <span class="nc">String</span> <span class="n">v</span> <span class="o">=</span> <span class="s">"Initial val"</span><span class="o">;</span>

	<span class="o">{</span>
		<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"!!! Non-static initializer"</span><span class="o">);</span>
		<span class="n">v</span> <span class="o">=</span> <span class="s">"Val from non-static"</span><span class="o">;</span>
	<span class="o">}</span>

	<span class="kd">static</span> <span class="o">{</span>
		<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"!!! Static initializer"</span><span class="o">);</span>
		<span class="n">v</span> <span class="o">=</span> <span class="s">"Some val"</span><span class="o">;</span>
	<span class="o">}</span>

	<span class="kd">public</span> <span class="kt">void</span> <span class="nf">a</span><span class="o">()</span> <span class="o">{</span>
		<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"!!! a() called"</span><span class="o">);</span>
	<span class="o">}</span>

<span class="o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Результат:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>!!! Static initializer
Some val
!!! Non-static initializer
!!! a() called
Val from non-static</pre>
</div>
</div>
<div class="paragraph">
<p><a href="#java-core">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_где_разрешена_инициализация_статическихнестатических_полей">2.29. Где разрешена инициализация статических/нестатических полей?</h3>
<div class="ulist">
<ul>
<li>
<p>Статические поля можно инициализировать при объявлении, в статическом или нестатическом блоке инициализации.</p>
</li>
<li>
<p>Нестатические поля можно инициализировать при объявлении, в нестатическом блоке инициализации или в конструкторе.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a href="#java-core">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_какие_типы_классов_бывают_в_java">2.30. Какие типы классов бывают в java?</h3>
<div class="ulist">
<ul>
<li>
<p><em>Top level class</em> (Обычный класс):</p>
<div class="ulist">
<ul>
<li>
<p><em>Abstract class</em> (Абстрактный класс);</p>
</li>
<li>
<p><em>Final class</em> (Финализированный класс).</p>
</li>
</ul>
</div>
</li>
<li>
<p><em>Interfaces</em> (Интерфейс).</p>
</li>
<li>
<p><em>Enum</em> (Перечисление).</p>
</li>
<li>
<p><em>Nested class</em> (Вложенный класс):</p>
<div class="ulist">
<ul>
<li>
<p><em>Static nested class</em> (Статический вложенный класс);</p>
</li>
<li>
<p><em>Member inner class</em> (Простой внутренний класс);</p>
</li>
<li>
<p><em>Local inner class</em> (Локальный класс);</p>
</li>
<li>
<p><em>Anonymous inner class</em> (Анонимный класс).</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p><a href="#java-core">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_расскажите_про_вложенные_классы_в_каких_случаях_они_применяются">2.31. Расскажите про вложенные классы. В каких случаях они применяются?</h3>
<div class="paragraph">
<p>Класс называется вложенным (<em>Nested class</em>), если он определен внутри другого класса. Вложенный класс должен создаваться только для того, чтобы обслуживать обрамляющий его класс. Если вложенный класс оказывается полезен в каком-либо ином контексте, он должен стать классом верхнего уровня. Вложенные классы имеют доступ ко всем (в том числе приватным) полям и методам внешнего класса, но не наоборот. Из-за этого разрешения использование вложенных классов приводит к некоторому нарушению инкапсуляции.</p>
</div>
<div class="paragraph">
<p>Существуют четыре категории вложенных классов:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><em>Static nested class</em> (Статический вложенный класс);</p>
</li>
<li>
<p><em>Member inner class</em> (Простой внутренний класс);</p>
</li>
<li>
<p><em>Local inner class</em> (Локальный класс);</p>
</li>
<li>
<p><em>Anonymous inner class</em> (Анонимный класс).</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Такие категории классов, за исключением первого, также называют внутренними (<em>Inner class</em>). Внутренние классы ассоциируются не с внешним классом, а с экземпляром внешнего.</p>
</div>
<div class="paragraph">
<p>Каждая из категорий имеет рекомендации по своему применению. Если вложенный класс должен быть виден за пределами одного метода или он слишком длинный для того, чтобы его можно было удобно разместить в границах одного метода и если каждому экземпляру такого класса необходима ссылка на включающий его экземпляр, то используется нестатический внутренний класс. В случае, если ссылка на обрамляющий класс не требуется - лучше сделать такой класс статическим. Если класс необходим только внутри какого-то метода и требуется создавать экземпляры этого класса только в этом методе, то используется локальный класс. А, если к тому же применение класса сводится к использованию лишь в одном месте и уже существует тип, характеризующий этот класс, то рекомендуется делать его анонимным классом.</p>
</div>
<div class="paragraph">
<p><a href="#java-core">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_что_такое_статический_класс">2.32. Что такое <em>«статический класс»</em>?</h3>
<div class="paragraph">
<p>Это вложенный класс, объявленный с использованием ключевого слова <code>static</code>. К классам верхнего уровня модификатор <code>static</code> неприменим.</p>
</div>
<div class="paragraph">
<p><a href="#java-core">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_какие_существуют_особенности_использования_вложенных_классов_статических_и_внутренних_в_чем_заключается_разница_между_ними">2.33. Какие существуют особенности использования вложенных классов: статических и внутренних? В чем заключается разница между ними?</h3>
<div class="ulist">
<ul>
<li>
<p>Вложенные классы могут обращаться ко всем членам обрамляющего класса, в том числе и приватным.</p>
</li>
<li>
<p>Для создания объекта статического вложенного класса объект внешнего класса не требуется.</p>
</li>
<li>
<p>Из объекта статического вложенного класса нельзя обращаться к не статическим членам обрамляющего класса напрямую, а только через ссылку на экземпляр внешнего класса.</p>
</li>
<li>
<p>Обычные вложенные классы не могут содержать статических методов, блоков инициализации и классов. Статические вложенные классы - могут.</p>
</li>
<li>
<p>В объекте обычного вложенного класса хранится ссылка на объект внешнего класса. Внутри статической такой ссылки нет. Доступ к экземпляру обрамляющего класса осуществляется через указание <code>.this</code> после его имени. Например: <code>Outer.this</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a href="#java-core">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_что_такое_локальный_класс_каковы_его_особенности">2.34. Что такое <em>«локальный класс»</em>? Каковы его особенности?</h3>
<div class="paragraph">
<p><strong>Local inner class</strong> (Локальный класс) - это вложенный класс, который может быть декларирован в любом блоке, в котором разрешается декларировать переменные. Как и простые внутренние классы (<em>Member inner class</em>) локальные классы имеют имена и могут использоваться многократно. Как и анонимные классы, они имеют окружающий их экземпляр только тогда, когда применяются в нестатическом контексте.</p>
</div>
<div class="paragraph">
<p>Локальные классы имеют следующие особенности:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Видны только в пределах блока, в котором объявлены;</p>
</li>
<li>
<p>Не могут быть объявлены как <code>private</code>/<code>public</code>/<code>protected</code> или <code>static</code>;</p>
</li>
<li>
<p>Не могут иметь внутри себя статических объявлений методов и классов, но могут иметь финальные статические поля, проинициализированные константой;</p>
</li>
<li>
<p>Имеют доступ к полям и методам обрамляющего класса;</p>
</li>
<li>
<p>Могут обращаться к локальным переменным и параметрам метода, если они объявлены с модификатором <code>final</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a href="#java-core">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_что_такое_анонимные_классы_где_они_применяются">2.35. Что такое <em>«анонимные классы»</em>? Где они применяются?</h3>
<div class="paragraph">
<p>Это вложенный локальный класс без имени, который разрешено декларировать в любом месте обрамляющего класса, разрешающем размещение выражений. Создание экземпляра анонимного класса происходит одновременно с его объявлением. В зависимости от местоположения анонимный класс ведет себя как статический либо как нестатический вложенный класс - в нестатическом контексте появляется окружающий его экземпляр.</p>
</div>
<div class="paragraph">
<p>Анонимные классы имеют несколько ограничений:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Их использование разрешено только в одном месте программы - месте его создания;</p>
</li>
<li>
<p>Применение возможно только в том случае, если после порождения экземпляра нет необходимости на него ссылаться;</p>
</li>
<li>
<p>Реализует лишь методы своего интерфейса или суперкласса, т.е. не может объявлять каких-либо новых методов, так как для доступа к ним нет поименованного типа.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Анонимные классы обычно применяются для:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>создания объекта функции (<em>function object</em>), например, реализация интерфейса <code>Comparator</code>;</p>
</li>
<li>
<p>создания объекта процесса (<em>process object</em>), такого как экземпляры классов <code>Thread</code>, <code>Runnable</code> и подобных;</p>
</li>
<li>
<p>в статическом методе генерации;</p>
</li>
<li>
<p>инициализации открытого статического поля <code>final</code>, которое соответствует сложному перечислению типов, когда для каждого экземпляра в перечислении требуется отдельный подкласс.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a href="#java-core">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_каким_образом_из_вложенного_класса_получить_доступ_к_полю_внешнего_класса">2.36. Каким образом из вложенного класса получить доступ к полю внешнего класса?</h3>
<div class="paragraph">
<p>Статический вложенный класс имеет прямой доступ только к статическим полям обрамляющего класса.</p>
</div>
<div class="paragraph">
<p>Простой внутренний класс, может обратиться к любому полю внешнего класса напрямую. В случае, если у вложенного класса уже существует поле с таким же литералом, то обращаться к такому полю следует через ссылку на его экземпляр. Например: <code>Outer.this.field</code>.</p>
</div>
<div class="paragraph">
<p><a href="#java-core">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_для_чего_используется_оператор_assert">2.37. Для чего используется оператор <code>assert</code>?</h3>
<div class="paragraph">
<p><strong>Assert</strong> (Утверждение)&#8201;&#8212;&#8201;это специальная конструкция, позволяющая проверять предположения о значениях произвольных данных в произвольном месте программы. Утверждение может автоматически сигнализировать об обнаружении некорректных данных, что обычно приводит к аварийному завершению программы с указанием места обнаружения некорректных данных.</p>
</div>
<div class="paragraph">
<p>Утверждения существенно упрощают локализацию ошибок в коде. Даже проверка результатов выполнения очевидного кода может оказаться полезной при последующем рефакторинге, после которого код может стать не настолько очевидным и в него может закрасться ошибка.</p>
</div>
<div class="paragraph">
<p>Обычно утверждения оставляют включенными во время разработки и тестирования программ, но отключают в релиз-версиях программ.</p>
</div>
<div class="paragraph">
<p>Т.к. утверждения могут быть удалены на этапе компиляции либо во время исполнения программы, они не должны менять поведение программы. Если в результате удаления утверждения поведение программы может измениться, то это явный признак неправильного использования <em>assert</em>. Таким образом, внутри <em>assert</em> нельзя вызывать методы, изменяющие состояние программы, либо внешнего окружения программы.</p>
</div>
<div class="paragraph">
<p>В Java проверка утверждений реализована с помощью оператора <code>assert</code>, который имеет форму:</p>
</div>
<div class="paragraph">
<p><code>assert [Выражение типа boolean];</code> или <code>assert [Выражение типа boolean] : [Выражение любого типа, кроме void];</code></p>
</div>
<div class="paragraph">
<p>Во время выполнения программы в том случае, если поверка утверждений включена, вычисляется значение булевского выражения, и если его результат <code>false</code>, то генерируется исключение <code>java.lang.AssertionError</code>. В случае использования второй формы оператора <code>assert</code> выражение после двоеточия задаёт детальное сообщение о произошедшей ошибке (вычисленное выражение будет преобразовано в строку и передано конструктору <code>AssertionError</code>).</p>
</div>
<div class="paragraph">
<p><a href="#java-core">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_что_такое_heap_и_stack_память_в_java_какая_разница_между_ними">2.38. Что такое <em>Heap</em> и <em>Stack</em> память в Java? Какая разница между ними?</h3>
<div class="paragraph">
<p><strong>Heap (куча)</strong> используется Java Runtime для выделения памяти под объекты и классы. Создание нового объекта также происходит в куче. Это же является областью работы сборщика мусора. Любой объект, созданный в куче, имеет глобальный доступ и на него могут ссылаться из любой части приложения.</p>
</div>
<div class="paragraph">
<p><strong>Stack (стек)</strong> это область хранения данных также находящееся в общей оперативной памяти (<em>RAM</em>). Всякий раз, когда вызывается метод, в памяти стека создается новый блок, который содержит примитивы и ссылки на другие объекты в методе. Как только метод заканчивает работу, блок также перестает использоваться, тем самым предоставляя доступ для следующего метода.
Размер стековой памяти намного меньше объема памяти в куче. Стек в Java работает по схеме <em>LIFO</em> (Последний-зашел-Первый-вышел)</p>
</div>
<div class="paragraph">
<p>Различия между <em>Heap</em> и <em>Stack</em> памятью:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Куча используется всеми частями приложения, в то время как стек используется только одним потоком исполнения программы.</p>
</li>
<li>
<p>Всякий раз, когда создается объект, он всегда хранится в куче, а в памяти стека содержится лишь ссылка на него. Память стека содержит только локальные переменные примитивных типов и ссылки на объекты в куче.</p>
</li>
<li>
<p>Объекты в куче доступны с любой точки программы, в то время как стековая память не может быть доступна для других потоков.</p>
</li>
<li>
<p>Стековая память существует лишь какое-то время работы программы, а память в куче живет с самого начала до конца работы программы.</p>
</li>
<li>
<p>Если память стека полностью занята, то Java Runtime бросает исключение <code>java.lang.StackOverflowError</code>. Если заполнена память кучи, то бросается исключение <code>java.lang.OutOfMemoryError: Java Heap Space</code>.</p>
</li>
<li>
<p>Размер памяти стека намного меньше памяти в куче.</p>
</li>
<li>
<p>Из-за простоты распределения памяти, стековая память работает намного быстрее кучи.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Для определения начального и максимального размера памяти в куче используются <code>-Xms</code> и <code>-Xmx</code> опции JVM. Для стека определить размер памяти можно с помощью опции <code>-Xss</code>.</p>
</div>
<div class="paragraph">
<p><a href="#java-core">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_верно_ли_утверждение_что_примитивные_типы_данных_всегда_хранятся_в_стеке_а_экземпляры_ссылочных_типов_данных_в_куче">2.39. Верно ли утверждение, что примитивные типы данных всегда хранятся в стеке, а экземпляры ссылочных типов данных в куче?</h3>
<div class="paragraph">
<p>Не совсем. Примитивное поле экземпляра класса хранится не в стеке, а в куче. Любой объект (всё, что явно или неявно создаётся при помощи оператора <code>new</code>) хранится в куче.</p>
</div>
<div class="paragraph">
<p><a href="#java-core">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_каким_образом_передаются_переменные_в_методы_по_значению_или_по_ссылке">2.40. Каким образом передаются переменные в методы, по значению или по ссылке?</h3>
<div class="paragraph">
<p>В Java параметры всегда передаются только по значению, что определяется как «скопировать значение и передать копию». С примитивами это будет копия содержимого. Со ссылками - тоже копия содержимого, т.е. копия ссылки. При этом внутренние члены ссылочных типов через такую копию изменить возможно, а вот саму ссылку, указывающую на экземпляр - нет.</p>
</div>
<div class="paragraph">
<p><a href="#java-core">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_для_чего_нужен_сборщик_мусора">2.41. Для чего нужен сборщик мусора?</h3>
<div class="paragraph">
<p>Сборщик мусора (Garbage Collector) должен делать всего две вещи:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Находить мусор - неиспользуемые объекты. (Объект считается неиспользуемым, если ни одна из сущностей в коде, выполняемом в данный момент, не содержит ссылок на него, либо цепочка ссылок, которая могла бы связать объект с некоторой сущностью приложения, обрывается);</p>
</li>
<li>
<p>Освобождать память от мусора.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Существует два подхода к обнаружению мусора:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><em>Reference counting</em>;</p>
</li>
<li>
<p><em>Tracing</em></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Reference counting</strong> (подсчёт ссылок). Суть этого подхода состоит в том, что каждый объект имеет счетчик. Счетчик хранит информацию о том, сколько ссылок указывает на объект. Когда ссылка уничтожается, счетчик уменьшается. Если значение счетчика равно нулю, - объект можно считать мусором. Главным минусом такого подхода является сложность обеспечения точности счетчика. Также при таком подходе сложно выявлять циклические зависимости (когда два объекта указывают друг на друга, но ни один живой объект на них не ссылается), что приводит к утечкам памяти.</p>
</div>
<div class="paragraph">
<p>Главная идея подхода <strong>Tracing</strong> (трассировка) состоит в утверждении, что живыми могут считаться только те объекты, до которых мы можем добраться из корневых точек (<em>GC Root</em>) и те объекты, которые доступны с живого объекта. Всё остальное - мусор.</p>
</div>
<div class="paragraph">
<p>Существует 4 типа корневых точки:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Локальные переменные и параметры методов;</p>
</li>
<li>
<p>Потоки;</p>
</li>
<li>
<p>Статические переменные;</p>
</li>
<li>
<p>Ссылки из JNI.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Самое простое java приложение будет иметь корневые точки:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Локальные переменные внутри <code>main()</code> метода и параметры <code>main()</code> метода;</p>
</li>
<li>
<p>Поток который выполняет <code>main()</code>;</p>
</li>
<li>
<p>Статические переменные класса, внутри которого находится <code>main()</code> метод.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Таким образом, если мы представим все объекты и ссылки между ними как дерево, то нам нужно будет пройти с корневых узлов (точек) по всем рёбрам. При этом узлы, до которых мы сможем добраться - не мусор, все остальные - мусор. При таком подходе циклические зависимости легко выявляются. HotSpot VM использует именно такой подход.</p>
</div>
<hr>
<div class="paragraph">
<p>Для очистки памяти от мусора существуют два основных метода:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><em>Copying collectors</em></p>
</li>
<li>
<p><em>Mark-and-sweep</em></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>При <strong>copying collectors</strong> подходе память делится на две части «from-space» и «to-space», при этом сам принцип работы такой:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Объекты создаются в «from-space»;</p>
</li>
<li>
<p>Когда «from-space» заполняется, приложение приостанавливается;</p>
</li>
<li>
<p>Запускается сборщик мусора. Находятся живые объекты в «from-space» и копируются в «to-space»;</p>
</li>
<li>
<p>Когда все объекты скопированы «from-space» полностью очищается;</p>
</li>
<li>
<p>«to-space» и «from-space» меняются местами.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Главный плюс такого подхода в том, что объекты плотно забивают память. Минусы подхода:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Приложение должно быть остановлено на время, необходимое для полного прохождения цикла сборки мусора;</p>
</li>
<li>
<p>В худшем случае (когда все объекты живые) «form-space» и «to-space» будут обязаны быть одинакового размера.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Алгоритм работы <strong>mark-and-sweep</strong> можно описать так:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Объекты создаются в памяти;</p>
</li>
<li>
<p>В момент, когда нужно запустить сборщик мусора приложение приостанавливается;</p>
</li>
<li>
<p>Сборщик проходится по дереву объектов, помечая живые объекты;</p>
</li>
<li>
<p>Сборщик проходится по всей памяти, находя все не отмеченные куски памяти и сохраняя их в «free list»;</p>
</li>
<li>
<p>Когда новые объекты начинают создаваться они создаются в памяти доступной во «free list».</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Минусы этого способа:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Приложение не работает пока происходит сборка мусора;</p>
</li>
<li>
<p>Время остановки напрямую зависит от размеров памяти и количества объектов;</p>
</li>
<li>
<p>Если не использовать «compacting» память будет использоваться не эффективно.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Сборщики мусора HotSpot VM используют комбинированный подход <strong>Generational Garbage Collection</strong>, который позволяет использовать разные алгоритмы для разных этапов сборки мусора. Этот подход опирается на том, что:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>большинство создаваемых объектов быстро становятся мусором;</p>
</li>
<li>
<p>существует мало связей между объектами, которые были созданы в прошлом и только что созданными объектами.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a href="#java-core">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_как_работает_сборщик_мусора">2.42. Как работает сборщик мусора?</h3>
<div class="paragraph">
<p>Механизм сборки мусора - это процесс освобождения места в куче, для возможности добавления новых объектов.</p>
</div>
<div class="paragraph">
<p>Объекты создаются посредством оператора <code>new</code>, тем самым присваивая объекту ссылку. Для окончания работы с объектом достаточно просто перестать на него ссылаться, например, присвоив переменной ссылку на другой объект или значение <code>null</code>; прекратить выполнение метода, чтобы его локальные переменные завершили свое существование естественным образом. Объекты, ссылки на которые отсутствуют, принято называть мусором (<em>garbage</em>), который будет удален.</p>
</div>
<div class="paragraph">
<p>Виртуальная машина Java, применяя механизм сборки мусора, гарантирует, что любой объект, обладающий ссылками, остается в памяти&#8201;&#8212;&#8201;все объекты, которые недостижимы из исполняемого кода, ввиду отсутствия ссылок на них, удаляются с высвобождением отведенной для них памяти. Точнее говоря, объект не попадает в сферу действия процесса сборки мусора, если он достижим посредством цепочки ссылок, начиная с корневой (<em>GC Root</em>) ссылки, т.е. ссылки, непосредственно существующей в выполняемом коде.</p>
</div>
<div class="paragraph">
<p>Память освобождается сборщиком мусора по его собственному «усмотрению». Программа может успешно завершить работу, не исчерпав ресурсов свободной памяти или даже не приблизившись к этой черте и поэтому ей так и не потребуются «услуги» сборщика мусора.</p>
</div>
<div class="paragraph">
<p>Мусор собирается системой автоматически, без вмешательства пользователя или программиста, но это не значит, что этот процесс не требует внимания вовсе. Необходимость создания и удаления большого количества объектов существенным образом сказывается на производительности приложений и, если быстродействие программы является важным фактором, следует тщательно обдумывать решения, связанные с созданием объектов,&#8201;&#8212;&#8201;это, в свою очередь, уменьшит и объем мусора, подлежащего утилизации.</p>
</div>
<div class="paragraph">
<p><a href="#java-core">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_какие_разновидности_сборщиков_мусора_реализованы_в_виртуальной_машине_hotspot">2.43. Какие разновидности сборщиков мусора реализованы в виртуальной машине HotSpot?</h3>
<div class="paragraph">
<p>Java HotSpot VM предоставляет разработчикам на выбор четыре различных сборщика мусора:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Serial (последовательный)</strong>&#8201;&#8212;&#8201;самый простой вариант для приложений с небольшим объемом данных и не требовательных к задержкам. На данный момент используется сравнительно редко, но на слабых компьютерах может быть выбран виртуальной машиной в качестве сборщика по умолчанию. Использование Serial GC включается опцией <code>-XX:+UseSerialGC</code>.</p>
</li>
<li>
<p><strong>Parallel (параллельный)</strong>&#8201;&#8212;&#8201;наследует подходы к сборке от последовательного сборщика, но добавляет параллелизм в некоторые операции, а также возможности по автоматической подстройке под требуемые параметры производительности. Параллельный сборщик включается опцией <code>-XX:+UseParallelGC</code>.</p>
</li>
<li>
<p><strong>Concurrent Mark Sweep (CMS)</strong>&#8201;&#8212;&#8201;нацелен на снижение максимальных задержек путем выполнения части работ по сборке мусора параллельно с основными потоками приложения. Подходит для работы с относительно большими объемами данных в памяти. Использование CMS GC включается опцией <code>-XX:+UseConcMarkSweepGC</code>.</p>
</li>
<li>
<p><strong>Garbage-First (G1)</strong>&#8201;&#8212;&#8201;создан для замены CMS, особенно в серверных приложениях, работающих на многопроцессорных серверах и оперирующих большими объемами данных. <em>G1</em> включается опцией Java <code>-XX:+UseG1GC</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a href="#java-core">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_опишите_алгоритм_работы_какого_нибудь_сборщика_мусора_реализованного_в_виртуальной_машине_hotspot">2.44. Опишите алгоритм работы какого-нибудь сборщика мусора, реализованного в виртуальной машине HotSpot.</h3>
<div class="paragraph">
<p><strong>Serial Garbage Collector (Последовательный сборщик мусора)</strong> был одним из первых сборщиков мусора в HotSpot VM. Во время работы этого сборщика приложения приостанавливается и продолжает работать только после прекращения сборки мусора.</p>
</div>
<div class="paragraph">
<p>Память приложения делится на три пространства:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><em>Young generation</em>. Объекты создаются именно в этом участке памяти.</p>
</li>
<li>
<p><em>Old generation</em>. В этот участок памяти перемещаются объекты, которые переживают «minor garbage collection».</p>
</li>
<li>
<p><em>Permanent generation</em>. Тут хранятся метаданные об объектах, <em>Class data sharing (CDS)</em>, <em>пул строк (String pool)</em>. Permanent область делится на две: только для чтения и для чтения-записи. Очевидно, что в этом случае область только для чтения не чистится сборщиком мусора никогда.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Область памяти Young generation состоит из трёх областей: <em>Eden</em> и двух меньших по размеру <em>Survivor spaces</em> - <em>To space</em> и <em>From space</em>. Большинство объектов создаются в области Eden, за исключением очень больших объектов, которые не могут быть размещены в ней и поэтому сразу размещаются в Old generation. В Survivor spaces перемещаются объекты, которые пережили по крайней мере одну сборку мусора, но ещё не достигли порога «старости» (<em>tenuring threshold</em>), чтобы быть перемещенными в Old generation.</p>
</div>
<div class="paragraph">
<p>Когда Young generation заполняется, то в этой области запускается процесс лёгкой сборки (<em>minor collection</em>), в отличие от процесса сборки, проводимого над всей кучей (<em>full collection</em>). Он происходит следующим образом: в начале работы одно из Survivor spaces - To space, является пустым, а другое - From space, содержит объекты, пережившие предыдущие сборки. Сборщик мусора ищет живые объекты в Eden и копирует их в To space, а затем копирует туда же и живые «молодые» (то есть не пережившие еще заданное число сборок мусора) объекты из From space. Старые объекты из From space перемещаются в Old generation. После лёгкой сборки From space и To space меняются ролями, область Eden становится пустой, а число объектов в Old generation увеличивается.</p>
</div>
<div class="paragraph">
<p>Если в процессе копирования живых объектов To space переполняется, то оставшиеся живые объекты из Eden и From space, которым не хватило места в To space, будут перемещены в Old generation, независимо от того, сколько сборок мусора они пережили.</p>
</div>
<div class="paragraph">
<p>Поскольку при использовании этого алгоритма сборщик мусора просто копирует все живые объекты из одной области памяти в другую, то такой сборщик мусора называется <em>copying</em> (копирующий). Очевидно, что для работы копирующего сборщика мусора у приложения всегда должна быть свободная область памяти, в которую будут копироваться живые объекты, и такой алгоритм может применяться для областей памяти сравнительно небольших по отношению к общему размеру памяти приложения. Young generation как раз удовлетворяет этому условию (по умолчанию на машинах клиентского типа эта область занимает около 10% кучи (значение может варьироваться в зависимости от платформы)).</p>
</div>
<div class="paragraph">
<p>Однако, для сборки мусора в Old generation, занимающем большую часть всей памяти, используется другой алгоритм.</p>
</div>
<div class="paragraph">
<p>В Old generation сборка мусора происходит с использованием алгоритма <em>mark-sweep-compact</em>, который состоит из трёх фаз. В фазе <em>Mark</em> (пометка) сборщик мусора помечает все живые объекты, затем, в фазе <em>Sweep</em> (очистка) все не помеченные объекты удаляются, а в фазе <em>Сompact</em> (уплотнение) все живые объекты перемещаются в начало Old generation, в результате чего свободная память после очистки представляет собой непрерывную область. Фаза уплотнения выполняется для того, чтобы избежать фрагментации и упростить процесс выделения памяти в Old generation.</p>
</div>
<div class="paragraph">
<p>Когда свободная память представляет собой непрерывную область, то для выделения памяти под создаваемый объект можно использовать очень быстрый (около десятка машинных инструкций) алгоритм <em>bump-the-pointer</em>: адрес начала свободной памяти хранится в специальном указателе, и когда поступает запрос на создание нового объекта, код проверяет, что для нового объекта достаточно места, и, если это так, то просто увеличивает указатель на размер объекта.</p>
</div>
<div class="paragraph">
<p>Последовательный сборщик мусора отлично подходит для большинства приложений, использующих до 200 мегабайт кучи, работающих на машинах клиентского типа и не предъявляющих жёстких требований к величине пауз, затрачиваемых на сборку мусора. В то же время модель «stop-the-world» может вызвать длительные паузы в работе приложения при использовании больших объёмов памяти. Кроме того, последовательный алгоритм работы не позволяет оптимально использовать вычислительные ресурсы компьютера, и последовательный сборщик мусора может стать узким местом при работе приложения на многопроцессорных машинах.</p>
</div>
<div class="paragraph">
<p><a href="#java-core">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_что_такое_пул_строк">2.45. Что такое «пул строк»?</h3>
<div class="paragraph">
<p><strong>Пул строк</strong>&#8201;&#8212;&#8201;это набор строк, хранящийся в <em>Heap</em>.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Пул строк возможен благодаря неизменяемости строк в Java и реализации идеи интернирования строк;</p>
</li>
<li>
<p>Пул строк помогает экономить память, но по этой же причине создание строки занимает больше времени;</p>
</li>
<li>
<p>Когда для создания строки используются <code>"</code>, то сначала ищется строка в пуле с таким же значением, если находится, то просто возвращается ссылка, иначе создается новая строка в пуле, а затем возвращается ссылка на неё;</p>
</li>
<li>
<p>При использовании оператора <code>new</code> создаётся новый объект <code>String</code>. Затем при помощи метода <code>intern()</code> эту строку можно поместить в пул или же получить из пула ссылку на другой объект <code>String</code> с таким же значением;</p>
</li>
<li>
<p>Пул строк является примером паттерна <em>«Приспособленец» (Flyweight)</em>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a href="#java-core">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_что_такое_finalize_зачем_он_нужен">2.46. Что такое <code>finalize()</code>? Зачем он нужен?</h3>
<div class="paragraph">
<p>Через вызов метода <code>finalize()</code> (который наследуется от Java.lang.Object) JVM реализуется функциональность аналогичная функциональности деструкторов в С&#43;&#43;, используемых для очистки памяти перед возвращением управления операционной системе. Данный метод вызывается при уничтожении объекта сборщиком мусора (<em>garbage collector</em>) и переопределяя <code>finalize()</code> можно запрограммировать действия необходимые для корректного удаления экземпляра класса - например, закрытие сетевых соединений, соединений с базой данных, снятие блокировок на файлы и т.д.</p>
</div>
<div class="paragraph">
<p>После выполнения этого метода объект должен быть повторно собран сборщиком мусора (и это считается серьезной проблемой метода <code>finalize()</code> т.к. он мешает сборщику мусора освобождать память). Вызов этого метода не гарантируется, т.к. приложение может быть завершено до того, как будет запущена сборка мусора.</p>
</div>
<div class="paragraph">
<p>Объект не обязательно будет доступен для сборки сразу же - метод <code>finalize()</code> может сохранить куда-нибудь ссылку на объект. Подобная ситуация называется «возрождением» объекта и считается антипаттерном. Главная проблема такого трюка - в том, что «возродить» объект можно только 1 раз.</p>
</div>
<div class="paragraph">
<p>Пример:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">MainClass</span> <span class="o">{</span>

	<span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span> <span class="n">args</span><span class="o">[])</span> <span class="o">{</span>
		<span class="nc">TestClass</span> <span class="n">a</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">TestClass</span><span class="o">();</span>
		<span class="n">a</span><span class="o">.</span><span class="na">a</span><span class="o">();</span>
		<span class="n">a</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
		<span class="n">a</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">TestClass</span><span class="o">();</span>
		<span class="n">a</span><span class="o">.</span><span class="na">a</span><span class="o">();</span>
		<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"!!! done"</span><span class="o">);</span>
	<span class="o">}</span>
<span class="o">}</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">TestClass</span> <span class="o">{</span>

	<span class="kd">public</span> <span class="kt">void</span> <span class="nf">a</span><span class="o">()</span> <span class="o">{</span>
		<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"!!! a() called"</span><span class="o">);</span>
	<span class="o">}</span>

	<span class="nd">@Override</span>
	<span class="kd">protected</span> <span class="kt">void</span> <span class="nf">finalize</span><span class="o">()</span> <span class="kd">throws</span> <span class="nc">Throwable</span> <span class="o">{</span>
		<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"!!! finalize() called"</span><span class="o">);</span>
		<span class="kd">super</span><span class="o">.</span><span class="na">finalize</span><span class="o">();</span>
	<span class="o">}</span>
<span class="o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Так как в данном случае сборщик мусора может и не быть вызван (в силу простоты приложения), то результат выполнения программы с большой вероятностью будет следующий:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>!!! a() called
!!! a() called
!!! done</pre>
</div>
</div>
<div class="paragraph">
<p>Теперь несколько усложним программу, добавив принудительный вызов Garbage Collector:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">MainClass</span> <span class="o">{</span>

	<span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span> <span class="n">args</span><span class="o">[])</span> <span class="o">{</span>
		<span class="nc">TestClass</span> <span class="n">a</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">TestClass</span><span class="o">();</span>
		<span class="n">a</span><span class="o">.</span><span class="na">a</span><span class="o">();</span>
		<span class="n">a</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
		<span class="nc">System</span><span class="o">.</span><span class="na">gc</span><span class="o">();</span> <span class="c1">// Принудительно зовём сборщик мусора</span>
		<span class="n">a</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">TestClass</span><span class="o">();</span>
		<span class="n">a</span><span class="o">.</span><span class="na">a</span><span class="o">();</span>
		<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"!!! done"</span><span class="o">);</span>
	<span class="o">}</span>

<span class="o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Как и было сказано ранее, Garbage Collector может в разное время отработать, поэтому результат выполнения может разниться от запуска к запуску:
Вариант а:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>!!! a() called
!!! a() called
!!! done
!!! finalize() called</pre>
</div>
</div>
<div class="paragraph">
<p>Вариант б:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>!!! a() called
!!! a() called
!!! finalize() called
!!! done</pre>
</div>
</div>
<div class="paragraph">
<p><a href="#java-core">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_что_произойдет_со_сборщиком_мусора_если_выполнение_метода_finalize_требует_ощутимо_много_времени_или_в_процессе_выполнения_будет_выброшено_исключение">2.47. Что произойдет со сборщиком мусора, если выполнение метода <code>finalize()</code> требует ощутимо много времени, или в процессе выполнения будет выброшено исключение?</h3>
<div class="paragraph">
<p>Непосредственно вызов <code>finalize()</code> происходит в отдельном потоке <em>Finalizer</em> (<code>java.lang.ref.Finalizer.FinalizerThread</code>), который создаётся при запуске виртуальной машины (в статической секции при загрузке класса <code>Finalizer</code>). Методы <code>finalize()</code> вызываются последовательно в том порядке, в котором были добавлены в список сборщиком мусора. Соответственно, если какой-то <code>finalize()</code> зависнет, он подвесит поток <em>Finalizer</em>, но не сборщик мусора. Это в частности означает, что объекты, не имеющие метода <code>finalize()</code>, будут исправно удаляться, а вот имеющие будут добавляться в очередь, пока поток <em>Finalizer</em> не освободится, не завершится приложение или не кончится память.</p>
</div>
<div class="paragraph">
<p>То же самое применимо и выброшенным в процессе <code>finalize()</code> исключениям: метод <code>runFinalizer()</code> у потока <em>Finalizer</em> игнорирует все исключения выброшенные в момент выполнения <code>finalize()</code>. Таким образом возникновение исключительной ситуации никак не скажется на работоспособности сборщика мусора.</p>
</div>
<div class="paragraph">
<p><a href="#java-core">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_чем_отличаются_final_finally_и_finalize">2.48. Чем отличаются <code>final</code>, <code>finally</code> и <code>finalize()</code>?</h3>
<div class="paragraph">
<p>Модификатор <code>final</code>:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Класс не может иметь наследников;</p>
</li>
<li>
<p>Метод не может быть переопределен в классах наследниках;</p>
</li>
<li>
<p>Поле не может изменить свое значение после инициализации;</p>
</li>
<li>
<p>Локальные переменные не могут быть изменены после присвоения им значения;</p>
</li>
<li>
<p>Параметры методов не могут изменять своё значение внутри метода.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Оператор <code>finally</code> гарантирует, что определенный в нём участок кода будет выполнен независимо от того, какие исключения были возбуждены и перехвачены в блоке <code>try-catch</code>.</p>
</div>
<div class="paragraph">
<p>Метод <code>finalize()</code> вызывается перед тем как сборщик мусора будет проводить удаление объекта.</p>
</div>
<div class="paragraph">
<p>Пример:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">MainClass</span> <span class="o">{</span>

	<span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span> <span class="n">args</span><span class="o">[])</span> <span class="o">{</span>
		<span class="nc">TestClass</span> <span class="n">a</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">TestClass</span><span class="o">();</span>
		<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"result of a.a() is "</span> <span class="o">+</span> <span class="n">a</span><span class="o">.</span><span class="na">a</span><span class="o">());</span>
		<span class="n">a</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
		<span class="nc">System</span><span class="o">.</span><span class="na">gc</span><span class="o">();</span> <span class="c1">// Принудительно зовём сборщик мусора</span>
		<span class="n">a</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">TestClass</span><span class="o">();</span>
		<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"result of a.a() is "</span> <span class="o">+</span> <span class="n">a</span><span class="o">.</span><span class="na">a</span><span class="o">());</span>
		<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"!!! done"</span><span class="o">);</span>
	<span class="o">}</span>

<span class="o">}</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">TestClass</span> <span class="o">{</span>

	<span class="kd">public</span> <span class="kt">int</span> <span class="nf">a</span><span class="o">()</span> <span class="o">{</span>
		<span class="k">try</span> <span class="o">{</span>
			<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"!!! a() called"</span><span class="o">);</span>
			<span class="k">throw</span> <span class="k">new</span> <span class="nf">Exception</span><span class="o">(</span><span class="s">""</span><span class="o">);</span>
		<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
			<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"!!! Exception in a()"</span><span class="o">);</span>
			<span class="k">return</span> <span class="mi">2</span><span class="o">;</span>
		<span class="o">}</span> <span class="k">finally</span> <span class="o">{</span>
			<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"!!! finally in a() "</span><span class="o">);</span>
		<span class="o">}</span>
	<span class="o">}</span>

	<span class="nd">@Override</span>
	<span class="kd">protected</span> <span class="kt">void</span> <span class="nf">finalize</span><span class="o">()</span> <span class="kd">throws</span> <span class="nc">Throwable</span> <span class="o">{</span>
		<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"!!! finalize() called"</span><span class="o">);</span>
		<span class="kd">super</span><span class="o">.</span><span class="na">finalize</span><span class="o">();</span>
	<span class="o">}</span>
<span class="o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Результат выполнения:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>!!! a() called
!!! Exception in a()
!!! finally in a()
result of a.a() is 2
!!! a() called
!!! Exception in a()
!!! finally in a()
!!! finalize() called
result of a.a() is 2
!!! done</pre>
</div>
</div>
<div class="paragraph">
<p><a href="#java-core">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_расскажите_про_приведение_типов_что_такое_понижение_и_повышение_типа">2.49. Расскажите про приведение типов. Что такое понижение и повышение типа?</h3>
<div class="paragraph">
<p>Java является строго типизированным языком программирования, а это означает, то что каждое выражение и каждая переменная имеет строго определенный тип уже на момент компиляции. Однако определен механизм <em>приведения типов (casting)</em> - способ преобразования значения переменной одного типа в значение другого типа.</p>
</div>
<div class="paragraph">
<p>В Java существуют несколько разновидностей приведения:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Тождественное (identity)</strong>. Преобразование выражения любого типа к точно такому же типу всегда допустимо и происходит автоматически.</p>
</li>
<li>
<p><strong>Расширение (повышение, upcasting) примитивного типа (widening primitive)</strong>. Означает, что осуществляется переход от менее емкого типа к более ёмкому. Например, от типа <code>byte</code> (длина 1 байт) к типу <code>int</code> (длина 4 байта). Такие преобразование безопасны в том смысле, что новый тип всегда гарантировано вмещает в себя все данные, которые хранились в старом типе и таким образом не происходит потери данных. Этот тип приведения всегда допустим и происходит автоматически.</p>
</li>
<li>
<p><strong>Сужение (понижение, downcasting) примитивного типа (narrowing primitive)</strong>. Означает, что переход осуществляется от более емкого типа к менее емкому. При таком преобразовании есть риск потерять данные. Например, если число типа <code>int</code> было больше <code>127</code>, то при приведении его к <code>byte</code> значения битов старше восьмого будут потеряны. В Java такое преобразование должно совершаться явным образом, при этом все старшие биты, не умещающиеся в новом типе, просто отбрасываются - никакого округления или других действий для получения более корректного результата не производится.</p>
</li>
<li>
<p><strong>Расширение объектного типа (widening reference)</strong>. Означает неявное восходящее приведение типов или переход от более конкретного типа к менее конкретному, т.е. переход от потомка к предку. Разрешено всегда и происходит автоматически.</p>
</li>
<li>
<p><strong>Сужение объектного типа (narrowing reference)</strong>. Означает нисходящее приведение, то есть приведение от предка к потомку (подтипу). Возможно только если исходная переменная является подтипом приводимого типа. При несоответствии типов в момент выполнения выбрасывается исключение <code>ClassCastException</code>. Требует явного указания типа.</p>
</li>
<li>
<p><strong>Преобразование к строке (to String)</strong>. Любой тип может быть приведен к строке, т.е. к экземпляру класса <code>String</code>.</p>
</li>
<li>
<p><strong>Запрещенные преобразования (forbidden)</strong>. Не все приведения между произвольными типами допустимы. Например, к запрещенным преобразованиям относятся приведения от любого ссылочного типа к примитивному и наоборот (кроме преобразования к строке). Кроме того, невозможно привести друг к другу классы, находящиеся на разных ветвях дерева наследования и т.п.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>При приведении ссылочных типов с самим объектом ничего не происходит, - меняется лишь тип ссылки, через которую происходит обращение к объекту.</p>
</div>
<div class="paragraph">
<p>Для проверки возможности приведения нужно воспользоваться оператором <code>instanceof</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="nc">Parent</span> <span class="n">parent</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Child</span><span class="o">();</span>
<span class="k">if</span> <span class="o">(</span><span class="n">parent</span> <span class="k">instanceof</span> <span class="nc">Child</span><span class="o">)</span> <span class="o">{</span>
    <span class="nc">Child</span> <span class="n">child</span> <span class="o">=</span> <span class="o">(</span><span class="nc">Child</span><span class="o">)</span> <span class="n">parent</span><span class="o">;</span>
<span class="o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><a href="#java-core">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_когда_в_приложении_может_быть_выброшено_исключение_classcastexception">2.50. Когда в приложении может быть выброшено исключение <code>ClassCastException</code>?</h3>
<div class="paragraph">
<p><code>ClassCastException</code> (потомок <code>RuntimeException</code>) - исключение, которое будет выброшено при ошибке приведения типа.</p>
</div>
<div class="paragraph">
<p><a href="#java-core">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_что_такое_литералы">2.51. Что такое литералы?</h3>
<div class="paragraph">
<p><strong>Литералы</strong>&#8201;&#8212;&#8201;это явно заданные значения в коде программы&#8201;&#8212;&#8201;константы определенного типа, которые находятся в коде в момент запуска.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="kd">class</span> <span class="nc">Test</span> <span class="o">{</span>
   <span class="kt">int</span> <span class="n">a</span> <span class="o">=</span> <span class="mb">0b1101010110</span><span class="o">;</span>
   <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
       <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Hello world!"</span><span class="o">);</span>
   <span class="o">}</span>
<span class="o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>В этом классе &#8220;Hello world!&#8221;&#8201;&#8212;&#8201;литерал.</p>
</div>
<div class="paragraph">
<p>Переменная <code>a</code> - тоже литерал.</p>
</div>
<div class="paragraph">
<p>Литералы бывают разных типов, которые определяются их назначением и способом написания.</p>
</div>
<div class="paragraph">
<p><a href="#java-core">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_что_такое_autoboxing_автоупаковка_в_java_и_каковы_правила_упаковки_примитивных_типов_в_классы_обертки">2.52. Что такое <em>autoboxing («автоупаковка»)</em> в Java и каковы правила упаковки примитивных типов в классы-обертки?</h3>
<div class="paragraph">
<p><strong>Автоупаковка</strong> - это механизм неявной инициализации объектов классов-оберток (<code>Byte</code>, <code>Short</code>, <code>Integer</code>, <code>Long</code>, <code>Float</code>, <code>Double</code>, <code>Character</code>, <code>Boolean</code>) значениями соответствующих им исходных примитивных типов (<code>byte</code>, <code>short</code>, <code>int</code>&#8230;&#8203;), без явного использования конструктора класса.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Автоупаковка происходит при прямом присваивании примитива классу-обертке (с помощью оператора <code>=</code>), либо при передаче примитива в параметры метода (типа класса-обертки).</p>
</li>
<li>
<p>Автоупаковке в классы-обертки могут быть подвергнуты как переменные примитивных типов, так и константы времени компиляции (литералы и <code>final</code>-примитивы). При этом литералы должны быть синтаксически корректными для инициализации переменной исходного примитивного типа.</p>
</li>
<li>
<p>Автоупаковка переменных примитивных типов требует точного соответствия типа исходного примитива типу класса-обертки. Например, попытка упаковать переменную типа <code>byte</code> в <code>Short</code>, без предварительного явного приведения <code>byte</code> в <code>short</code> вызовет ошибку компиляции.</p>
</li>
<li>
<p>Автоупаковка констант примитивных типов допускает более широкие границы соответствия. В этом случае компилятор способен предварительно осуществлять неявное расширение/сужение типа примитивов:
1) неявное расширение/сужение исходного типа примитива до типа примитива, соответствующего классу-обертке (для преобразования <code>int</code> в <code>Byte</code>, сначала компилятор самостоятельно неявно сужает <code>int</code> к <code>byte</code>)
2) автоупаковку примитива в соответствующий класс-обертку. Однако, в этом случае существуют два дополнительных ограничения:
    a) присвоение примитива обертке может производится только оператором <code>=</code> (нельзя передать такой примитив в параметры метода без явного приведения типов)
    b) тип левого операнда не должен быть старше чем <code>Character</code>, тип правого не должен старше, чем <code>int</code>: допустимо расширение/сужение <code>byte</code> в/из <code>short</code>, <code>byte</code> в/из <code>char</code>, <code>short</code> в/из <code>char</code> и только сужение <code>byte</code> из <code>int</code>, <code>short</code> из <code>int</code>, <code>char</code> из <code>int</code>. Все остальные варианты требуют явного приведения типов).</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Дополнительной особенностью целочисленных классов-оберток, созданных автоупаковкой констант в диапазоне <code>-128 ... +127</code> является то, что они кэшируются JVM. Поэтому такие обертки с одинаковыми значениями будут являться ссылками на один объект.</p>
</div>
<div class="paragraph">
<p><a href="#java-core">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_какие_есть_особенности_класса_string">2.53. Какие есть особенности класса <code>String</code>?</h3>
<div class="ulist">
<ul>
<li>
<p>Это неизменяемый (immutable) и финализированный тип данных;</p>
</li>
<li>
<p>Все объекты класса <code>String</code> JVM хранит в пуле строк;</p>
</li>
<li>
<p>Объект класса <code>String</code> можно получить, используя двойные кавычки;</p>
</li>
<li>
<p>Можно использовать оператор <code>+</code> для конкатенации строк;</p>
</li>
<li>
<p>Начиная с Java 7 строки можно использовать в конструкции <code>switch</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a href="#java-core">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_почему_string_неизменяемый_и_финализированный_класс">2.54. Почему <code>String</code> неизменяемый и финализированный класс?</h3>
<div class="paragraph">
<p>Есть несколько преимуществ в неизменности строк:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Пул строк возможен только потому, что строка неизменяемая, таким образом виртуальная машина сохраняет больше свободного места в <em>Heap</em>, поскольку разные строковые переменные указывают на одну и ту же переменную в пуле. Если бы строка была изменяемой, то интернирование строк не было бы возможным, потому что изменение значения одной переменной отразилось бы также и на остальных переменных, ссылающихся на эту строку.</p>
</li>
<li>
<p>Если строка будет изменяемой, тогда это станет серьезной угрозой безопасности приложения. Например, имя пользователя базы данных и пароль передаются строкой для получения соединения с базой данных и в программировании сокетов реквизиты хоста и порта передаются строкой. Так как строка неизменяемая, её значение не может быть изменено, в противном случае злоумышленник может изменить значение ссылки и вызвать проблемы в безопасности приложения.</p>
</li>
<li>
<p>Неизменяемость позволяет избежать синхронизации: строки безопасны для многопоточности и один экземпляр строки может быть совместно использован различными потоками.</p>
</li>
<li>
<p>Строки используются <em>classloader</em> и неизменность обеспечивает правильность загрузки класса.</p>
</li>
<li>
<p>Поскольку строка неизменяемая, её <code>hashCode()</code> кэшируется в момент создания и нет необходимости рассчитывать его снова. Это делает строку отличным кандидатом для ключа в <code>HashMap</code> т.к. его обработка происходит быстрее.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a href="#java-core">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_почему_char_предпочтительнее_string_для_хранения_пароля">2.55. Почему <code>char[]</code> предпочтительнее <code>String</code> для хранения пароля?</h3>
<div class="paragraph">
<p>С момента создания строка остаётся в пуле, до тех пор, пока не будет удалена сборщиком мусора. Поэтому, даже после окончания использования пароля, он некоторое время продолжает оставаться доступным в памяти и способа избежать этого не существует. Это представляет определённый риск для безопасности, поскольку кто-либо, имеющий доступ к памяти сможет найти пароль в виде текста.
В случае использования массива символов для хранения пароля имеется возможность очистить его сразу по окончанию работы с паролем, позволяя избежать риска безопасности, свойственного строке.</p>
</div>
<div class="paragraph">
<p><a href="#java-core">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_почему_строка_является_популярным_ключом_в_hashmap_в_java">2.56. Почему строка является популярным ключом в <code>HashMap</code> в Java?</h3>
<div class="paragraph">
<p>Поскольку строки неизменяемы, их хэш код вычисляется и кэшируется в момент создания, не требуя повторного пересчета при дальнейшем использовании. Поэтому в качестве ключа <code>HashMap</code> они будут обрабатываться быстрее.</p>
</div>
<div class="paragraph">
<p><a href="#java-core">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_что_делает_метод_intern_в_классе_string">2.57. Что делает метод <code>intern()</code> в классе <code>String</code>?.</h3>
<div class="paragraph">
<p>Метод <code>intern()</code> используется для сохранения строки в пуле строк или получения ссылки, если такая строка уже находится в пуле.</p>
</div>
<div class="paragraph">
<p><a href="#java-core">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_можно_ли_использовать_строки_в_конструкции_switch">2.58. Можно ли использовать строки в конструкции <code>switch</code>?</h3>
<div class="paragraph">
<p>Да, начиная с Java 7 в операторе <code>switch</code> можно использовать строки, ранние версии Java не поддерживают этого. При этом:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>участвующие строки чувствительны к регистру;</p>
</li>
<li>
<p>используется метод <code>equals()</code> для сравнения полученного значения со значениями <code>case</code>, поэтому во избежание <code>NullPointerException</code> стоит предусмотреть проверку на <code>null</code>.</p>
</li>
<li>
<p>согласно документации, Java 7 для строк в <code>switch</code>, компилятор Java формирует более эффективный байткод для строк в конструкции <code>switch</code>, чем для сцепленных условий <code>if</code>-<code>else</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a href="#java-core">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_какая_основная_разница_между_string_stringbuffer_stringbuilder">2.59. Какая основная разница между <code>String</code>, <code>StringBuffer</code>, <code>StringBuilder</code>?</h3>
<div class="paragraph">
<p>Класс <code>String</code> является неизменяемым (<em>immutable</em>) - модифицировать объект такого класса нельзя, можно лишь заменить его созданием нового экземпляра.</p>
</div>
<div class="paragraph">
<p>Класс <code>StringBuffer</code> изменяемый - использовать <code>StringBuffer</code> следует тогда, когда необходимо часто модифицировать содержимое.</p>
</div>
<div class="paragraph">
<p>Класс <code>StringBuilder</code> был добавлен в Java 5 и он во всем идентичен классу <code>StringBuffer</code> за исключением того, что он не синхронизирован и поэтому его методы выполняются значительно быстрей.</p>
</div>
<div class="paragraph">
<p><a href="#java-core">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_что_такое_класс_object_какие_в_нем_есть_методы">2.60. Что такое класс <code>Object</code>? Какие в нем есть методы?</h3>
<div class="paragraph">
<p><code>Object</code> это базовый класс для всех остальных объектов в Java. Любой класс наследуется от <code>Object</code> и, соответственно, наследуют его методы:</p>
</div>
<div class="paragraph">
<p><code>public boolean equals(Object obj)</code>&#8201;&#8212;&#8201;служит для сравнения объектов по значению;</p>
</div>
<div class="paragraph">
<p><code>int hashCode()</code>&#8201;&#8212;&#8201;возвращает hash код для объекта;</p>
</div>
<div class="paragraph">
<p><code>String toString()</code>&#8201;&#8212;&#8201;возвращает строковое представление объекта;</p>
</div>
<div class="paragraph">
<p><code>Class getClass()</code>&#8201;&#8212;&#8201;возвращает класс объекта во время выполнения;</p>
</div>
<div class="paragraph">
<p><code>protected Object clone()</code>&#8201;&#8212;&#8201;создает и возвращает копию объекта;</p>
</div>
<div class="paragraph">
<p><code>void notify()</code>&#8201;&#8212;&#8201;возобновляет поток, ожидающий монитор;</p>
</div>
<div class="paragraph">
<p><code>void notifyAll()</code>&#8201;&#8212;&#8201;возобновляет все потоки, ожидающие монитор;</p>
</div>
<div class="paragraph">
<p><code>void wait()</code>&#8201;&#8212;&#8201;остановка вызвавшего метод потока до момента пока другой поток не вызовет метод <code>notify()</code> или <code>notifyAll()</code> для этого объекта;</p>
</div>
<div class="paragraph">
<p><code>void wait(long timeout)</code>&#8201;&#8212;&#8201;остановка вызвавшего метод потока на определённое время или пока другой поток не вызовет метод <code>notify()</code> или <code>notifyAll()</code> для этого объекта;</p>
</div>
<div class="paragraph">
<p><code>void wait(long timeout, int nanos)</code>&#8201;&#8212;&#8201;остановка вызвавшего метод потока на определённое время или пока другой поток не вызовет метод <code>notify()</code> или <code>notifyAll()</code> для этого объекта;</p>
</div>
<div class="paragraph">
<p><code>protected void finalize()</code>&#8201;&#8212;&#8201;может вызываться сборщиком мусора в момент удаления объекта при сборке мусора.</p>
</div>
<div class="paragraph">
<p><a href="#java-core">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_дайте_определение_понятию_конструктор">2.61. Дайте определение понятию «конструктор».</h3>
<div class="paragraph">
<p><strong>Конструктор</strong>&#8201;&#8212;&#8201;это специальный метод, у которого отсутствует возвращаемый тип и который имеет то же имя, что и класс, в котором он используется. Конструктор вызывается при создании нового объекта класса и определяет действия необходимые для его инициализации.</p>
</div>
<div class="paragraph">
<p><a href="#java-core">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_что_такое_конструктор_по_умолчанию">2.62. Что такое <em>«конструктор по умолчанию»</em>?</h3>
<div class="paragraph">
<p>Если у какого-либо класса не определить конструктор, то компилятор сгенерирует конструктор без аргументов - так называемый <strong>«конструктор по умолчанию»</strong>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nf">ClassName</span><span class="o">()</span> <span class="o">{}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Если у класса уже определен какой-либо конструктор, то конструктор по умолчанию создан не будет и, если он необходим, его нужно описывать явно.</p>
</div>
<div class="paragraph">
<p><a href="#java-core">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_чем_отличаются_конструктор_по_умолчанию_конструктор_копирования_и_конструктор_с_параметрами">2.63. Чем отличаются конструктор по-умолчанию, конструктор копирования и конструктор с параметрами?</h3>
<div class="paragraph">
<p>У конструктора по умолчанию отсутствуют какие-либо аргументы. Конструктор копирования принимает в качестве аргумента уже существующий объект класса для последующего создания его клона. Конструктор с параметрами имеет в своей сигнатуре аргументы (обычно необходимые для инициализации полей класса).</p>
</div>
<div class="paragraph">
<p><a href="#java-core">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_где_и_как_вы_можете_использовать_приватный_конструктор">2.64. Где и как вы можете использовать приватный конструктор?</h3>
<div class="paragraph">
<p>Приватный (помеченный ключевым словом <code>private</code>, скрытый) конструктор может использоваться публичным статическим методом генерации объектов данного класса. Также доступ к нему разрешён вложенным классам и может использоваться для их нужд.</p>
</div>
<div class="paragraph">
<p><a href="#java-core">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_расскажите_про_классы_загрузчики_и_про_динамическую_загрузку_классов">2.65. Расскажите про классы-загрузчики и про динамическую загрузку классов.</h3>
<div class="paragraph">
<p>Основа работы с классами в Java&#8201;&#8212;&#8201;классы-загрузчики, обычные Java-объекты, предоставляющие интерфейс для поиска и создания объекта класса по его имени во время работы приложения.</p>
</div>
<div class="paragraph">
<p>В начале работы программы создается 3 основных загрузчика классов:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>базовый загрузчик (bootstrap/primordial)</strong>. Загружает основные системные и внутренние классы JDK (<em>Core API</em> - пакеты <code>java.*</code> (<code>rt.jar</code> и <code>i18n.jar</code>) . Важно заметить, что базовый загрузчик является <em>«Изначальным»</em> или <em>«Корневым»</em> и частью JVM, вследствие чего его нельзя создать внутри кода программы.</p>
</li>
<li>
<p><strong>загрузчик расширений (extention)</strong>. Загружает различные пакеты расширений, которые располагаются в директории <code>&lt;JAVA_HOME&gt;/lib/ext</code> или другой директории, описанной в системном параметре <code>java.ext.dirs</code>. Это позволяет обновлять и добавлять новые расширения без необходимости модифицировать настройки используемых приложений. Загрузчик расширений реализован классом <code>sun.misc.Launcher$ExtClassLoader</code>.</p>
</li>
<li>
<p><strong>системный загрузчик (system/application)</strong>. Загружает классы, пути к которым указаны в переменной окружения <code>CLASSPATH</code> или пути, которые указаны в командной строке запуска JVM после ключей <code>-classpath</code> или <code>-cp</code>. Системный загрузчик реализован классом <code>sun.misc.Launcher$AppClassLoader</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Загрузчики классов являются иерархическими: каждый из них (кроме базового) имеет родительский загрузчик и в большинстве случаев, перед тем как попробовать загрузить класс самостоятельно, он посылает вначале запрос родительскому загрузчику загрузить указанный класс. Такое делегирование позволяет загружать классы тем загрузчиком, который находится ближе всего к базовому в иерархии делегирования. Как следствие поиск классов будет происходить в источниках в порядке их доверия: сначала в библиотеке <em>Core API</em>, потом в папке расширений, потом в локальных файлах <code>CLASSPATH</code>.</p>
</div>
<div class="paragraph">
<p>Процесс загрузки класса состоит из трех частей:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><em>Loading</em>&#8201;&#8212;&#8201;на этой фазе происходит поиск и физическая загрузка файла класса в определенном источнике (в зависимости от загрузчика). Этот процесс определяет базовое представление класса в памяти. На этом этапе такие понятия как «методы», «поля» и т.д. пока не известны.</p>
</li>
<li>
<p><em>Linking</em>&#8201;&#8212;&#8201;процесс, который может быть разбит на 3 части:</p>
<div class="ulist">
<ul>
<li>
<p><em>Bytecode verification</em>&#8201;&#8212;&#8201;проверка байт-кода на соответствие требованиям, определенным в спецификации JVM.</p>
</li>
<li>
<p><em>Class preparation</em>&#8201;&#8212;&#8201;создание и инициализация необходимых структур, используемых для представления полей, методов, реализованных интерфейсов и т.п., определенных в загружаемом классе.</p>
</li>
<li>
<p><em>Resolving</em>&#8201;&#8212;&#8201;загрузка набора классов, на которые ссылается загружаемый класс.</p>
</li>
</ul>
</div>
</li>
<li>
<p><em>Initialization</em>&#8201;&#8212;&#8201;вызов статических блоков инициализации и присваивание полям класса значений по умолчанию.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Динамическая загрузка классов в Java имеет ряд особенностей:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><em>отложенная (lazy) загрузка и связывание классов</em>. Загрузка классов производится только при необходимости, что позволяет экономить ресурсы и распределять нагрузку.</p>
</li>
<li>
<p><em>проверка корректности загружаемого кода (type safeness)</em>. Все действия связанные с контролем использования типов производятся только во время загрузки класса, позволяя избежать дополнительной нагрузки во время выполнения кода.</p>
</li>
<li>
<p><em>программируемая загрузка</em>. Пользовательский загрузчик полностью контролирует процесс получения запрошенного класса&#8201;&#8212;&#8201;самому ли искать байт-код и создавать класс или делегировать создание другому загрузчику. Дополнительно существует возможность выставлять различные атрибуты безопасности для загружаемых классов, позволяя таким образом работать с кодом из ненадежных источников.</p>
</li>
<li>
<p><em>множественные пространства имен</em>. Каждый загрузчик имеет своё пространство имён для создаваемых классов. Соответственно, классы, загруженные двумя различными загрузчиками на основе общего байт-кода, в системе будут различаться.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Существует несколько способов инициировать загрузку требуемого класса:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>явный: вызов <code>ClassLoader.loadClass()</code> или <code>Class.forName()</code> (по умолчанию используется загрузчик, создавший текущий класс, но есть возможность и явного указания загрузчика);</p>
</li>
<li>
<p>неявный: когда для дальнейшей работы приложения требуется ранее не использованный класс, JVM инициирует его загрузку.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a href="#java-core">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_что_такое_reflection">2.66. Что такое <em>Reflection</em>?</h3>
<div class="paragraph">
<p><strong>Рефлексия (Reflection)</strong> - это механизм получения данных о программе во время её выполнения (runtime). В Java <em>Reflection</em> осуществляется с помощью <em>Java Reflection API</em>, состоящего из классов пакетов <code>java.lang</code> и <code>java.lang.reflect</code>.</p>
</div>
<div class="paragraph">
<p>Возможности Java Reflection API:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Определение класса объекта;</p>
</li>
<li>
<p>Получение информации о модификаторах класса, полях, методах, конструкторах и суперклассах;</p>
</li>
<li>
<p>Определение интерфейсов, реализуемых классом;</p>
</li>
<li>
<p>Создание экземпляра класса;</p>
</li>
<li>
<p>Получение и установка значений полей объекта;</p>
</li>
<li>
<p>Вызов методов объекта;</p>
</li>
<li>
<p>Создание нового массива.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a href="#java-core">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_зачем_нужен_equals_чем_он_отличается_от_операции">2.67. Зачем нужен <code>equals()</code>. Чем он отличается от операции <code>==</code>?</h3>
<div class="paragraph">
<p>Метод <code>equals()</code> - определяет отношение эквивалентности объектов.</p>
</div>
<div class="paragraph">
<p>При сравнении объектов с помощью <code>==</code> сравнение происходит лишь между ссылками. При сравнении по переопределённому разработчиком <code>equals()</code> - по внутреннему состоянию объектов.</p>
</div>
<div class="paragraph">
<p><a href="#java-core">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_если_вы_хотите_переопределить_equals_какие_условия_должны_выполняться">2.68. Если вы хотите переопределить <code>equals()</code>, какие условия должны выполняться?</h3>

</div>
<div class="sect2">
<h3 id="_какими_свойствами_обладает_порождаемое_equals_отношение_эквивалентности">2.69. Какими свойствами обладает порождаемое <code>equals()</code> отношение эквивалентности?</h3>
<div class="ulist">
<ul>
<li>
<p><em>Рефлексивность</em>: для любой ссылки на значение <code>x</code>, <code>x.equals(x)</code> вернет <code>true</code>;</p>
</li>
<li>
<p><em>Симметричность</em>: для любых ссылок на значения <code>x</code> и <code>y</code>, <code>x.equals(y)</code> должно вернуть <code>true</code>, тогда и только тогда, когда <code>y.equals(x)</code> возвращает <code>true</code>.</p>
</li>
<li>
<p><em>Транзитивность</em>: для любых ссылок на значения <code>x</code>, <code>y</code> и <code>z</code>, если <code>x.equals(y)</code> и <code>y.equals(z)</code> возвращают <code>true</code>, тогда и <code>x.equals(z)</code> вернёт <code>true</code>;</p>
</li>
<li>
<p><em>Непротиворечивость</em>: для любых ссылок на значения <code>х</code> и <code>у</code>, если несколько раз вызвать <code>х.equals(y)</code>, постоянно будет возвращаться значение <code>true</code> либо постоянно будет возвращаться значение <code>false</code> при условии, что никакая информация, используемая при сравнении объектов, не поменялась.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Для любой ненулевой ссылки на значение <code>х</code> выражение <code>х.equals(null)</code> должно возвращать <code>false</code>.</p>
</div>
<div class="paragraph">
<p><a href="#java-core">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_правила_переопределения_метода_object_equals">2.70. Правила переопределения метода <code>Object.equals()</code>.</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Использование оператора <code>==</code> для проверки, является ли аргумент ссылкой на указанный объект. Если является, возвращается <code>true</code>. Если сравниваемый объект <code>== null</code>, должно вернуться <code>false</code>.</p>
</li>
<li>
<p>Использование вызова метода <code>getClass()</code> для проверки, имеет ли аргумент правильный тип. Если не имеет, возвращается <code>false</code>.</p>
</li>
<li>
<p>Приведение аргумента к правильному типу. Поскольку эта операция следует за проверкой <code>instanceof</code> она гарантированно будет выполнена.</p>
</li>
<li>
<p>Обход всех значимых полей класса и проверка того, что значение поля в текущем объекте и значение того же поля в проверяемом на эквивалентность аргументе соответствуют друг другу. Если проверки для всех полей прошли успешно, возвращается результат <code>true</code>, в противном случае - <code>false</code>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>По окончанию переопределения метода <code>equals()</code> следует проверить: является ли порождаемое отношение эквивалентности рефлексивным, симметричным, транзитивным и непротиворечивым? Если ответ отрицательный, метод подлежит соответствующей правке.</p>
</div>
<div class="paragraph">
<p><a href="#java-core">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_какая_связь_между_hashcode_и_equals">2.71. Какая связь между <code>hashCode()</code> и <code>equals()</code>?</h3>

</div>
<div class="sect2">
<h3 id="_если_equals_переопределен_есть_ли_какие_либо_другие_методы_которые_следует_переопределить">2.72. Если <code>equals()</code> переопределен, есть ли какие-либо другие методы, которые следует переопределить?</h3>
<div class="paragraph">
<p>Равные объекты должны возвращать одинаковые хэш коды. При переопределении <code>equals()</code> нужно обязательно переопределять и метод <code>hashCode()</code>.</p>
</div>
<div class="paragraph">
<p><a href="#java-core">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_что_будет_если_переопределить_equals_не_переопределяя_hashcode_какие_могут_возникнуть_проблемы">2.73. Что будет, если переопределить <code>equals()</code> не переопределяя <code>hashCode()</code>? Какие могут возникнуть проблемы?</h3>
<div class="paragraph">
<p>Классы и методы, которые используют правила этого контракта могут работать некорректно. Так для <code>HashMap</code> это может привести к тому, что пара «ключ-значение», которая была в неё помещена при использовании нового экземпляра ключа не будет в ней найдена.</p>
</div>
<div class="paragraph">
<p><a href="#java-core">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_каким_образом_реализованы_методы_hashcode_и_equals_в_классе_object">2.74. Каким образом реализованы методы <code>hashCode()</code> и <code>equals()</code> в классе <code>Object</code>?</h3>
<div class="paragraph">
<p>Реализация метода <code>Object.equals()</code> сводится к проверке на равенство двух ссылок:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">equals</span><span class="o">(</span><span class="nc">Object</span> <span class="n">obj</span><span class="o">)</span> <span class="o">{</span>
  <span class="k">return</span> <span class="o">(</span><span class="k">this</span> <span class="o">==</span> <span class="n">obj</span><span class="o">);</span>
<span class="o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Реализация метода <code>Object.hashCode()</code> описана как <code>native</code>, т.е. определенной не с помощью Java кода и обычно возвращает адрес объекта в памяти:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="kd">public</span> <span class="kd">native</span> <span class="kt">int</span> <span class="nf">hashCode</span><span class="o">();</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><a href="#java-core">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_для_чего_нужен_метод_hashcode">2.75. Для чего нужен метод <code>hashCode()</code>?</h3>
<div class="paragraph">
<p>Метод <code>hashCode()</code> необходим для вычисления хэш кода переданного в качестве входного параметра объекта. В Java это целое число, в более широком смысле - битовая строка фиксированной длины, полученная из массива произвольной длины. Этот метод реализован таким образом, что для одного и того же входного объекта, хэш код всегда будет одинаковым. Следует понимать, что в Java множество возможных хэш кодов ограничено типом <code>int</code>, а множество объектов ничем не ограничено. Из-за этого, вполне возможна ситуация, что хэш коды разных объектов могут совпасть:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>если хэш коды разные, то и объекты гарантированно разные;</p>
</li>
<li>
<p>если хэш коды равны, то объекты не обязательно равны(могут быть разные).</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a href="#java-core">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_каковы_правила_переопределения_метода_object_hashcode">2.76. Каковы правила переопределения метода <code>Object.hashCode()</code>?</h3>

</div>
<div class="sect2">
<h3 id="_есть_ли_какие_либо_рекомендации_о_том_какие_поля_следует_использовать_при_подсчете_hashcode">2.77. Есть ли какие-либо рекомендации о том, какие поля следует использовать при подсчете <code>hashCode()</code>?</h3>
<div class="paragraph">
<p>Общий совет: выбирать поля, которые с большой долью вероятности будут различаться. Для этого необходимо использовать уникальные, лучше всего примитивные поля, например, такие как <code>id</code>, <code>uuid</code>. При этом нужно следовать правилу, если поля задействованы при вычислении <code>hashCode()</code>, то они должны быть задействованы и при выполнении <code>equals()</code>.</p>
</div>
<div class="paragraph">
<p><a href="#java-core">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_могут_ли_у_разных_объектов_быть_одинаковые_hashcode">2.78. Могут ли у разных объектов быть одинаковые <code>hashCode()</code>?</h3>
<div class="paragraph">
<p>Да, могут. Метод <code>hashCode()</code> не гарантирует уникальность возвращаемого значения. Ситуация, когда у разных объектов одинаковые хэш коды называется <em>коллизией</em>. Вероятность возникновения коллизии зависит от используемого алгоритма генерации хэш кода.</p>
</div>
<div class="paragraph">
<p><a href="#java-core">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_если_у_класса_pointint_x_y_реализовать_метод_equalsobject_that_return_this_x_that_x_this_y_that_y_но_сделать_хэш_код_в_виде_int_hashcode_return_x_то_будут_ли_корректно_такие_точки_помещаться_и_извлекаться_из_hashset">2.79. Если у класса <code>Point{int x, y;}</code> реализовать метод <code>equals(Object that) {(return this.x == that.x &amp;&amp; this.y == that.y)}</code>, но сделать хэш код в виде <code>int hashCode() {return x;}</code>, то будут ли корректно такие точки помещаться и извлекаться из <code>HashSet</code>?</h3>
<div class="paragraph">
<p><code>HashSet</code> использует <code>HashMap</code> для хранения элементов. При добавлении элемента в <code>HashMap</code> вычисляется хэш код, по которому определяется позиция в массиве, куда будет вставлен новый элемент. У всех экземпляров класса <code>Point</code> хэш код будет одинаковым для всех объектов с одинаковым <code>x</code>, что приведёт к вырождению хэш таблицы в список.</p>
</div>
<div class="paragraph">
<p>При возникновении коллизии в <code>HashMap</code> осуществляется проверка на наличие элемента в списке: <code>e.hash == hash &amp;&amp; k = e.key) == key || key.equals(k</code>. Если элемент найден, то его значение перезаписывается. В нашем случае для разных объектов метод <code>equals()</code> будет возвращать <code>false</code>. Соответственно новый элемент будет успешно добавлен в <code>HashSet</code>. Извлечение элемента также будет осуществляться успешно. Но производительность такого кода будет невысокой и преимущества хэш таблиц использоваться не будут.</p>
</div>
<div class="paragraph">
<p><a href="#java-core">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_могут_ли_у_разных_объектов_ref0_ref1_быть_ref0_equalsref1_true">2.80. Могут ли у разных объектов <code>(ref0 != ref1)</code> быть <code>ref0.equals(ref1) == true</code>?</h3>
<div class="paragraph">
<p>Да, могут. Для этого в классе этих объектов должен быть переопределен метод <code>equals()</code>.</p>
</div>
<div class="paragraph">
<p>Если используется метод <code>Object.equals()</code>, то для двух ссылок <code>x</code> и <code>y</code> метод вернет <code>true</code> тогда и только тогда, когда обе ссылки указывают на один и тот же объект (т.е. <code>x == y</code> возвращает <code>true</code>).</p>
</div>
<div class="paragraph">
<p><a href="#java-core">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_могут_ли_у_разных_ссылок_на_один_объект_ref0_ref1_быть_ref0_equalsref1_false">2.81. Могут ли у разных ссылок на один объект <code>(ref0 == ref1)</code> быть <code>ref0.equals(ref1) == false</code>?</h3>
<div class="paragraph">
<p>В общем случае - могут, если метод <code>equals()</code> реализован некорректно и не выполняет свойство рефлексивности: для любых ненулевых ссылок <code>x</code> метод <code>x.equals(x)</code> должен возвращать <code>true</code>.</p>
</div>
<div class="paragraph">
<p><a href="#java-core">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_можно_ли_так_реализовать_метод_equalsobject_that_return_this_hashcode_that_hashcode">2.82. Можно ли так реализовать метод <code>equals(Object that) {return this.hashCode() == that.hashCode()}</code>?</h3>
<div class="paragraph">
<p>Строго говоря нельзя, поскольку метод <code>hashCode()</code> не гарантирует уникальность значения для каждого объекта. Однако для сравнения экземпляров класса <code>Object</code> такой код допустим, т.к. метод <code>hashCode()</code> в классе <code>Object</code> возвращает уникальные значения для разных объектов (его вычисление основано на использовании адреса объекта в памяти).</p>
</div>
<div class="paragraph">
<p><a href="#java-core">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_в_equals_требуется_проверять_что_аргумент_equalsobject_that_такого_же_типа_что_и_сам_объект_в_чем_разница_между_this_getclass_that_getclass_и_that_instanceof_myclass">2.83. В <code>equals()</code> требуется проверять, что аргумент <code>equals(Object that)</code> такого же типа что и сам объект. В чем разница между <code>this.getClass() == that.getClass()</code> и <code>that instanceof MyClass</code>?</h3>
<div class="paragraph">
<p>Оператор <code>instanceof</code> сравнивает объект и указанный тип. Его можно использовать для проверки является ли данный объект экземпляром некоторого класса, либо экземпляром его дочернего класса, либо экземпляром класса, который реализует указанный интерфейс.</p>
</div>
<div class="paragraph">
<p><code>this.getClass() == that.getClass()</code> проверяет два класса на идентичность, поэтому для корректной реализации контракта метода <code>equals()</code> необходимо использовать точное сравнение с помощью метода <code>getClass()</code>.</p>
</div>
<div class="paragraph">
<p><a href="#java-core">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_можно_ли_реализовать_метод_equals_класса_myclass_вот_так_class_myclass_public_boolean_equalsmyclass_that_return_this_that">2.84. Можно ли реализовать метод <code>equals()</code> класса <code>MyClass</code> вот так: <code>class MyClass {public boolean equals(MyClass that) {return this == that;}}</code>?</h3>
<div class="paragraph">
<p>Реализовать можно, но данный метод не переопределяет метод <code>equals()</code> класса <code>Object</code>, а перегружает его.</p>
</div>
<div class="paragraph">
<p><a href="#java-core">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_есть_класс_pointint_x_y_почему_хэш_код_в_виде_31_x_y_предпочтительнее_чем_x_y">2.85. Есть класс <code>Point{int x, y;}</code>. Почему хэш код в виде <code>31 * x + y</code> предпочтительнее чем <code>x + y</code>?</h3>
<div class="paragraph">
<p>Множитель создает зависимость значения хэш кода от очередности обработки полей, что в итоге порождает лучшую хэш функцию.</p>
</div>
<div class="paragraph">
<p><a href="#java-core">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_расскажите_про_клонирование_объектов">2.86. Расскажите про клонирование объектов.</h3>
<div class="paragraph">
<p>Использование оператора присваивания не создает нового объекта, а лишь копирует ссылку на объект. Таким образом, две ссылки указывают на одну и ту же область памяти, на один и тот же объект. Для создания нового объекта с таким же состоянием используется клонирование объекта.</p>
</div>
<div class="paragraph">
<p>Класс <code>Object</code> содержит <code>protected</code> метод <code>clone()</code>, осуществляющий побитовое копирование объекта производного класса. Однако сначала необходимо переопределить метод <code>clone()</code> как <code>public</code> для обеспечения возможности его вызова. В переопределенном методе следует вызвать базовую версию метода <code>super.clone()</code>, которая и выполняет собственно клонирование.</p>
</div>
<div class="paragraph">
<p>Чтобы окончательно сделать объект клонируемым, класс должен реализовать интерфейс <code>Cloneable</code>. Интерфейс <code>Cloneable</code> не содержит методов относится к маркерным интерфейсам, а его реализация гарантирует, что метод <code>clone()</code> класса <code>Object</code> возвратит точную копию вызвавшего его объекта с воспроизведением значений всех его полей. В противном случае метод генерирует исключение <code>CloneNotSupportedException</code>. Следует отметить, что при использовании этого механизма объект создается без вызова конструктора.</p>
</div>
<div class="paragraph">
<p>Это решение эффективно только в случае, если поля клонируемого объекта представляют собой значения базовых типов и их обёрток или неизменяемых (immutable) объектных типов. Если же поле клонируемого типа является изменяемым ссылочным типом, то для корректного клонирования требуется другой подход. Причина заключается в том, что при создании копии поля оригинал и копия представляют собой ссылку на один и тот же объект. В этой ситуации следует также клонировать и сам объект поля класса.</p>
</div>
<div class="paragraph">
<p>Такое клонирование возможно только в случае, если тип атрибута класса также реализует интерфейс <code>Cloneable</code> и переопределяет метод <code>clone()</code>. Так как, если это будет иначе вызов метода невозможен из-за его недоступности. Отсюда следует, что если класс имеет суперкласс, то для реализации механизма клонирования текущего класса-потомка необходимо наличие корректной реализации такого механизма в суперклассе. При этом следует отказаться от использования объявлений <code>final</code> для полей объектных типов по причине невозможности изменения их значений при реализации клонирования.</p>
</div>
<div class="paragraph">
<p>Помимо встроенного механизма клонирования в Java для клонирования объекта можно использовать:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Специализированный конструктор копирования</strong> - в классе описывается конструктор, который принимает объект этого же класса и инициализирует поля создаваемого объекта значениями полей переданного.</p>
</li>
<li>
<p><strong>Фабричный метод</strong> - (Factory method), который представляет собой статический метод, возвращающий экземпляр своего класса.</p>
</li>
<li>
<p><strong>Механизм сериализации</strong> - сохранение и последующее восстановление объекта в/из потока байтов.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a href="#java-core">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_в_чем_отличие_между_поверхностным_и_глубоким_клонированием">2.87. В чем отличие между <em>поверхностным</em> и <em>глубоким</em> клонированием?</h3>
<div class="paragraph">
<p><strong>Поверхностное копирование</strong> копирует настолько малую часть информации об объекте, насколько это возможно. По умолчанию, клонирование в Java является поверхностным, т.е. класс <code>Object</code> не знает о структуре класса, которого он копирует. Клонирование такого типа осуществляется JVM по следующим правилам:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Если класс имеет только члены примитивных типов, то будет создана совершенно новая копия объекта и возвращена ссылка на этот объект.</p>
</li>
<li>
<p>Если класс помимо членов примитивных типов содержит члены ссылочных типов, то тогда копируются ссылки на объекты этих классов. Следовательно, оба объекта будут иметь одинаковые ссылки.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Глубокое копирование</strong> дублирует абсолютно всю информацию объекта:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Нет необходимости копировать отдельно примитивные данные;</p>
</li>
<li>
<p>Все члены ссылочного типа в оригинальном классе должны поддерживать клонирование. Для каждого такого члена при переопределении метода <code>clone()</code> должен вызываться <code>super.clone()</code>;</p>
</li>
<li>
<p>Если какой-либо член класса не поддерживает клонирование, то в методе клонирования необходимо создать новый экземпляр этого класса и скопировать каждый его член со всеми атрибутами в новый объект класса, по одному.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a href="#java-core">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_какой_способ_клонирования_предпочтительней">2.88. Какой способ клонирования предпочтительней?</h3>
<div class="paragraph">
<p>Наиболее безопасным и, следовательно, предпочтительным способом клонирования является использование специализированного конструктора копирования:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Отсутствие ошибок наследования (не нужно беспокоиться, что у наследников появятся новые поля, которые не будут склонированы через метод <code>clone()</code>);</p>
</li>
<li>
<p>Поля для клонирования указываются явно;</p>
</li>
<li>
<p>Возможность клонировать даже <code>final</code> поля.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a href="#java-core">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_почему_метод_clone_объявлен_в_классе_object_а_не_в_интерфейсе_cloneable">2.89. Почему метод <code>clone()</code> объявлен в классе <code>Object</code>, а не в интерфейсе <code>Cloneable</code>?</h3>
<div class="paragraph">
<p>Метод <code>clone()</code> объявлен в классе <code>Object</code> с указанием модификатора <code>native</code>, чтобы обеспечить доступ к стандартному механизму поверхностного копирования объектов. Одновременно он объявлен и как <code>protected</code>, чтобы нельзя было вызвать этот метод у не переопределивших его объектов. Непосредственно интерфейс <code>Cloneable</code> является маркерным (не содержит объявлений методов) и нужен только для обозначения самого факта, что данный объект готов к тому, чтобы быть клонированным. Вызов переопределённого метода <code>clone()</code> у не <code>Cloneable</code> объекта вызовет выбрасывание <code>CloneNotSupportedException</code>.</p>
</div>
<div class="paragraph">
<p><a href="#java-core">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_опишите_иерархию_исключений">2.90. Опишите иерархию исключений.</h3>
<div class="paragraph">
<p>Исключения делятся на несколько классов, но все они имеют общего предка&#8201;&#8212;&#8201;класс <code>Throwable</code>, потомками которого являются классы <code>Exception</code> и <code>Error</code>.</p>
</div>
<div class="paragraph">
<p><strong>Ошибки (Errors)</strong> представляют собой более серьёзные проблемы, которые, согласно спецификации Java, не следует обрабатывать в собственной программе, поскольку они связаны с проблемами уровня JVM. Например, исключения такого рода возникают, если закончилась память доступная виртуальной машине.</p>
</div>
<div class="paragraph">
<p><strong>Исключения (Exceptions)</strong> являются результатом проблем в программе, которые в принципе решаемы, предсказуемы и последствия которых возможно устранить внутри программы. Например, произошло деление целого числа на ноль.</p>
</div>
<div class="paragraph">
<p><a href="#java-core">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_какие_виды_исключений_в_java_вы_знаете_чем_они_отличаются">2.91. Какие виды исключений в Java вы знаете, чем они отличаются?</h3>

</div>
<div class="sect2">
<h3 id="_что_такое_checked_и_unchecked_exception">2.92. Что такое <em>checked</em> и <em>unchecked exception</em>?</h3>
<div class="paragraph">
<p>В Java все исключения делятся на два типа:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>checked (контролируемые/проверяемые исключения)</strong> должны обрабатываться блоком <code>catch</code> или описываться в заголовке метода (например, <code>throws IOException</code>). Наличие такого обработчика/модификатора в заголовке метода проверяется на этапе компиляции;</p>
</li>
<li>
<p><strong>unchecked (неконтролируемые/непроверяемые исключения)</strong>, к которым относятся ошибки <code>Error</code> (например, <code>OutOfMemoryError</code>), обрабатывать которые не рекомендуется и исключения времени выполнения, представленные классом <code>RuntimeException</code> и его наследниками (например, <code>NullPointerException</code>), которые могут не обрабатываться блоком <code>catch</code> и не быть описанными в заголовке метода.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a href="#java-core">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_какой_оператор_позволяет_принудительно_выбросить_исключение">2.93. Какой оператор позволяет принудительно выбросить исключение?</h3>
<div class="paragraph">
<p>Это оператор <code>throw</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="k">throw</span> <span class="k">new</span> <span class="nc">Exception</span><span class="o">();</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><a href="#java-core">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_о_чем_говорит_ключевое_слово_throws">2.94. О чем говорит ключевое слово <code>throws</code>?</h3>
<div class="paragraph">
<p>Модификатор <code>throws</code> прописывается в заголовке метода и указывает на то, что метод потенциально может выбросить исключение с указанным типом.</p>
</div>
<div class="paragraph">
<p><a href="#java-core">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_как_написать_собственное_пользовательское_исключение">2.95. Как написать собственное («пользовательское») исключение?</h3>
<div class="paragraph">
<p>Необходимо унаследоваться от базового класса требуемого типа исключений (например, от <code>Exception</code> или <code>RuntimeException</code>).</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="kd">class</span> <span class="nc">CustomException</span> <span class="kd">extends</span> <span class="nc">Exception</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="nf">CustomException</span><span class="o">()</span> <span class="o">{</span>
        <span class="kd">super</span><span class="o">();</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="nf">CustomException</span><span class="o">(</span><span class="kd">final</span> <span class="nc">String</span> <span class="n">string</span><span class="o">)</span> <span class="o">{</span>
        <span class="kd">super</span><span class="o">(</span><span class="n">string</span> <span class="o">+</span> <span class="s">" is invalid"</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="nf">CustomException</span><span class="o">(</span><span class="kd">final</span> <span class="nc">Throwable</span> <span class="n">cause</span><span class="o">)</span> <span class="o">{</span>
        <span class="kd">super</span><span class="o">(</span><span class="n">cause</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><a href="#java-core">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_какие_существуют_unchecked_exception">2.96. Какие существуют <em>unchecked exception</em>?</h3>
<div class="paragraph">
<p>Наиболее часто встречающиеся: <code>ArithmeticException</code>, <code>ClassCastException</code>, <code>ConcurrentModificationException</code>, <code>IllegalArgumentException</code>, <code>IllegalStateException</code>, <code>IndexOutOfBoundsException</code>, <code>NoSuchElementException</code>, <code>NullPointerException</code>, <code>UnsupportedOperationException</code>.</p>
</div>
<div class="paragraph">
<p><a href="#java-core">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_что_представляет_из_себя_ошибки_класса_error">2.97. Что представляет из себя ошибки класса <code>Error</code>?</h3>
<div class="paragraph">
<p>Ошибки класса <code>Error</code> представляют собой наиболее серьёзные проблемы уровня JVM. Например, исключения такого рода возникают, если закончилась память доступная виртуальной машине. Обрабатывать такие ошибки не запрещается, но делать этого не рекомендуется.</p>
</div>
<div class="paragraph">
<p><a href="#java-core">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_что_вы_знаете_о_outofmemoryerror">2.98. Что вы знаете о <code>OutOfMemoryError</code>?</h3>
<div class="paragraph">
<p><code>OutOfMemoryError</code> выбрасывается, когда виртуальная машина Java не может создать (разместить) объект из-за нехватки памяти, а сборщик мусора не может высвободить достаточное её количество.</p>
</div>
<div class="paragraph">
<p>Область памяти, занимаемая java процессом, состоит из нескольких частей. Тип <code>OutOfMemoryError</code> зависит от того, в какой из них не хватило места:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>java.lang.OutOfMemoryError: Java heap space</code>: Не хватает места в куче, а именно, в области памяти в которую помещаются объекты, создаваемые в приложении программно. Обычно проблема кроется в утечке памяти. Размер задается параметрами <code>-Xms</code> и <code>-Xmx</code>.</p>
</li>
<li>
<p><code>java.lang.OutOfMemoryError: PermGen space</code>: (до версии Java 8) Данная ошибка возникает при нехватке места в <em>Permanent</em> области, размер которой задается параметрами <code>-XX:PermSize</code> и <code>-XX:MaxPermSize</code>.</p>
</li>
<li>
<p><code>java.lang.OutOfMemoryError: GC overhead limit exceeded</code>: Данная ошибка может возникнуть как при переполнении первой, так и второй областей. Связана она с тем, что памяти осталось мало и сборщик мусора постоянно работает, пытаясь высвободить немного места. Данную ошибку можно отключить с помощью параметра <code>-XX:-UseGCOverheadLimit</code>.</p>
</li>
<li>
<p><code>java.lang.OutOfMemoryError: unable to create new native thread</code>: Выбрасывается, когда нет возможности создавать новые потоки.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a href="#java-core">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_опишите_работу_блока_try_catch_finally">2.99. Опишите работу блока <em>try-catch-finally</em>.</h3>
<div class="paragraph">
<p><code>try</code>&#8201;&#8212;&#8201;данное ключевое слово используется для отметки начала блока кода, который потенциально может привести к ошибке.
<code>catch</code>&#8201;&#8212;&#8201;ключевое слово для отметки начала блока кода, предназначенного для перехвата и обработки исключений в случае их возникновения.
<code>finally</code>&#8201;&#8212;&#8201;ключевое слово для отметки начала блока кода, который является дополнительным. Этот блок помещается после последнего блока <code>catch</code>. Управление передаётся в блок <code>finally</code> в любом случае, было выброшено исключение или нет.</p>
</div>
<div class="paragraph">
<p>Общий вид конструкции для обработки исключительной ситуации выглядит следующим образом:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="k">try</span> <span class="o">{</span>
    <span class="c1">//код, который потенциально может привести к исключительной ситуации</span>
<span class="o">}</span>
<span class="k">catch</span><span class="o">(</span><span class="nc">SomeException</span> <span class="n">e</span> <span class="o">)</span> <span class="o">{</span> <span class="c1">//в скобках указывается класс конкретной ожидаемой ошибки</span>
    <span class="c1">//код обработки исключительной ситуации</span>
<span class="o">}</span>
<span class="k">finally</span> <span class="o">{</span>
    <span class="c1">//необязательный блок, код которого выполняется в любом случае</span>
<span class="o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><a href="#java-core">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_что_такое_механизм_try_with_resources">2.100. Что такое механизм <em>try-with-resources</em>?</h3>
<div class="paragraph">
<p>Данная конструкция, которая появилась в Java 7, позволяет использовать блок <em>try-catch</em> не заботясь о закрытии ресурсов, используемых в данном сегменте кода.
Ресурсы объявляются в скобках сразу после <code>try</code>, а компилятор уже сам неявно создаёт секцию <code>finally</code>, в которой и происходит освобождение занятых в блоке ресурсов. Под ресурсами подразумеваются сущности, реализующие интерфейс <code>java.lang.Autocloseable</code>.</p>
</div>
<div class="paragraph">
<p>Общий вид конструкции:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="k">try</span><span class="o">(</span><span class="cm">/*объявление ресурсов*/</span><span class="o">)</span> <span class="o">{</span>
    <span class="c1">//...</span>
<span class="o">}</span> <span class="k">catch</span><span class="o">(</span><span class="nc">Exception</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{</span>
    <span class="c1">//...</span>
<span class="o">}</span> <span class="k">finally</span> <span class="o">{</span>
    <span class="c1">//...</span>
<span class="o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Стоит заметить, что блоки <code>catch</code> и явный <code>finally</code> выполняются уже после того, как закрываются ресурсы в неявном <code>finally</code>.</p>
</div>
<div class="paragraph">
<p><a href="#java-core">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_возможно_ли_использование_блока_try_finally_без_catch">2.101. Возможно ли использование блока <em>try-finally</em> (без <code>catch</code>)?</h3>
<div class="paragraph">
<p>Такая запись допустима, но смысла в такой записи не так много, всё же лучше иметь блок <code>catch</code>, в котором будет обрабатываться необходимое исключение.</p>
</div>
<div class="paragraph">
<p><a href="#java-core">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_может_ли_один_блок_catch_отлавливать_сразу_несколько_исключений">2.102. Может ли один блок <code>catch</code> отлавливать сразу несколько исключений?</h3>
<div class="paragraph">
<p>В Java 7 стала доступна новая языковая конструкция, с помощью которой можно перехватывать несколько исключений одним блоком <code>catch</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="k">try</span> <span class="o">{</span>
    <span class="c1">//...</span>
<span class="o">}</span> <span class="k">catch</span><span class="o">(</span><span class="nc">IOException</span> <span class="o">|</span> <span class="nc">SQLException</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{</span>
    <span class="c1">//...</span>
<span class="o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><a href="#java-core">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_всегда_ли_исполняется_блок_finally">2.103. Всегда ли исполняется блок <code>finally</code>?</h3>
<div class="paragraph">
<p>Код в блоке <code>finally</code> будет выполнен всегда, независимо от того, выброшено исключение или нет.</p>
</div>
<div class="paragraph">
<p><a href="#java-core">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_существуют_ли_ситуации_когда_блок_finally_не_будет_выполнен">2.104. Существуют ли ситуации, когда блок <code>finally</code> не будет выполнен?</h3>
<div class="paragraph">
<p>Например, когда JVM «умирает» - в такой ситуации <code>finally</code> недостижим и не будет выполнен, так как происходит принудительный системный выход из программы:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="k">try</span> <span class="o">{</span>
    <span class="nc">System</span><span class="o">.</span><span class="na">exit</span><span class="o">(</span><span class="mi">0</span><span class="o">);</span>
<span class="o">}</span> <span class="k">catch</span><span class="o">(</span><span class="nc">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
<span class="o">}</span> <span class="k">finally</span> <span class="o">{</span> <span class="o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><a href="#java-core">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_может_ли_метод_main_выбросить_исключение_во_вне_и_если_да_то_где_будет_происходить_обработка_данного_исключения">2.105. Может ли метод <em>main()</em> выбросить исключение во вне и если да, то где будет происходить обработка данного исключения?</h3>
<div class="paragraph">
<p>Может и оно будет передано в виртуальную машину Java (JVM).</p>
</div>
<div class="paragraph">
<p><a href="#java-core">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_предположим_есть_метод_который_может_выбросить_ioexception_и_filenotfoundexception_в_какой_последовательности_должны_идти_блоки_catch_сколько_блоков_catch_будет_выполнено">2.106. Предположим, есть метод, который может выбросить <code>IOException</code> и <code>FileNotFoundException</code> в какой последовательности должны идти блоки <code>catch</code>? Сколько блоков <code>catch</code> будет выполнено?</h3>
<div class="paragraph">
<p>Общее правило: обрабатывать исключения нужно от «младшего» к старшему. Т.е. нельзя поставить в первый блок <code>catch(Exception ex) {}</code>, иначе все дальнейшие блоки <code>catch()</code> уже ничего не смогут обработать, т.к. любое исключение будет соответствовать обработчику <code>catch(Exception ex)</code>.</p>
</div>
<div class="paragraph">
<p>Таким образом, исходя из факта, что <code>FileNotFoundException extends IOException</code> сначала нужно обработать <code>FileNotFoundException</code>, а затем уже <code>IOException</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="kt">void</span> <span class="nf">method</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">try</span> <span class="o">{</span>
        <span class="c1">//...</span>
    <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">FileNotFoundException</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{</span>
        <span class="c1">//...</span>
    <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">IOException</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{</span>
        <span class="c1">//...</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><a href="#java-core">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_что_такое_generics">2.107. Что такое <em>generics</em>?</h3>
<div class="paragraph">
<p><strong>Generics</strong> - это технический термин, обозначающий набор свойств языка позволяющих определять и использовать обобщенные типы и методы. Обобщенные типы или методы отличаются от обычных тем, что имеют типизированные параметры.</p>
</div>
<div class="paragraph">
<p>Примером использования обобщенных типов может служить <em>Java Collection Framework</em>. Так, класс <code>LinkedList&lt;E&gt;</code> - типичный обобщенный тип. Он содержит параметр <code>E</code>, который представляет тип элементов, которые будут храниться в коллекции. Создание объектов обобщенных типов происходит посредством замены параметризированных типов реальными типами данных. Вместо того, чтобы просто использовать <code>LinkedList</code>, ничего не говоря о типе элемента в списке, предлагается использовать точное указание типа <code>LinkedList&lt;String&gt;</code>, <code>LinkedList&lt;Integer&gt;</code> и т.п.</p>
</div>
<div class="paragraph">
<p><a href="#java-core">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_что_такое_интернационализация_локализация">2.108. Что такое <em>«интернационализация»</em>, <em>«локализация»</em>?</h3>
<div class="paragraph">
<p><strong>Интернационализация (internationalization)</strong> - способ создания приложений, при котором их можно легко адаптировать для разных аудиторий, говорящих на разных языках.</p>
</div>
<div class="paragraph">
<p><strong>Локализация (localization)</strong> -  адаптация интерфейса приложения под несколько языков. Добавление нового языка может внести определенные сложности в локализацию интерфейса.</p>
</div>
<div class="paragraph">
<p><a href="#java-core">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_источники_2">2.109. Источники</h3>
<div class="ulist">
<ul>
<li>
<p><a href="http://www.quizful.net/interview/java/">Quizful</a></p>
</li>
<li>
<p><a href="http://javastudy.ru/interview/java-oop2/">JavaStudy.ru</a></p>
</li>
<li>
<p><a href="https://ggenikus.github.io/blog/2014/05/04/gc/">ggenikus.github.io</a></p>
</li>
<li>
<p><a href="https://blogs.oracle.com/vmrobot/entry/основы_сборки_мусора_в_hotspot">Санкт-Петербургская группа тестирования JVM</a></p>
</li>
<li>
<p><a href="http://oop-java.blogspot.ru/2006/02/blog-post_21.html">Объектно-ориентированное программирование</a></p>
</li>
<li>
<p><a href="http://info.javarush.ru/">JavaRush</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a href="README.html">Вопросы для собеседования</a></p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_основы_css">3. Основы CSS</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_что_такое_css">3.1. Что такое <em>«CSS»</em>?</h3>
<div class="paragraph">
<p><strong>CSS, Cascading Style Sheets (каскадные таблицы стилей)</strong> - формальный язык описания внешнего вида документа, написанного с использованием языка разметки, который применяется к элементам web-страницы для управления их видом и положением.</p>
</div>
<div class="paragraph">
<p>Основной целью разработки CSS являлось разделение описания логической структуры web-страницы, которое производится с помощью HTML или других языков разметки от описания внешнего вида этой web-страницы, которое производится с помощью CSS.</p>
</div>
<div class="paragraph">
<p><a href="#Основы-css">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_как_в_css_обозначаются_комментарии">3.2. Как в CSS обозначаются комментарии?</h3>
<div class="paragraph">
<p>Чтобы пометить, что текст является комментарием, применяют конструкцию <code>/* ... */</code></p>
</div>
<div class="paragraph">
<p><a href="#Основы-css">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_что_такое_селектор">3.3. Что такое <em>«селектор»</em>?</h3>
<div class="paragraph">
<p><strong>Селектор</strong>&#8201;&#8212;&#8201;это правило, на основании которого осуществляется выбор элементов в HTML документе для того, чтобы применить к ним определённые стили.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="css"><span class="nt">p</span> <span class="p">{</span>
<span class="nl">text-align</span><span class="p">:</span> <span class="nb">center</span><span class="p">;</span>
<span class="nl">font-size</span><span class="p">:</span> <span class="m">20px</span><span class="p">;</span>
<span class="p">}</span>
<span class="c">/* p – это селектор, text-align и font-size – это свойства, а center и 20px – значения. */</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><a href="#Основы-css">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_перечислите_основные_виды_селекторов">3.4. Перечислите основные виды селекторов.</h3>
<div class="ulist">
<ul>
<li>
<p><strong>селектор <code></strong></code>* - выбор всех элементов;</p>
</li>
<li>
<p><strong>селектор элемента</strong> - выбор всех элементов в HTML документе, имеющих указанный тег (например: <code>div</code>);</p>
</li>
<li>
<p><strong>селектор класса</strong> - выбор всех элементов в HTML документе, имеющих указанный класс (например: <code>.center</code>);</p>
</li>
<li>
<p><strong>селектор идентификатора</strong> - выбор элемента в HTML документе, имеющего указанный идентификатор (например: <code>#footer</code>);</p>
</li>
<li>
<p><strong>селекторы псевдоклассов</strong> - выбор всех элементов в HTML документе, имеющих указанный псевдокласс (например: <code>p:first-of-type</code>);</p>
</li>
<li>
<p><strong>селекторы атрибутов</strong> - выбор элементов в зависимости от указанного атрибута элемента или его значения (например: <code>[href*="youtube"]</code>).</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a href="#Основы-css">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_что_такое_псевдокласс">3.5. Что такое псевдокласс?</h3>
<div class="paragraph">
<p>Псевдокласс определяет динамическое состояние элементов, которое изменяется из-за действий пользователя, или же соответствует текущему положению в дереве документа. В отличие от настоящего класса, в явном виде псеводкласс в HTML не указывается, а в CSS указывается через <code>:</code> непосредственно после селектора.</p>
</div>
<div class="paragraph">
<p>Наиболее известные псевдоклассы:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>:link</code> применяется к непосещенным ссылкам;</p>
</li>
<li>
<p><code>:visited</code> применяется к посещенным ссылкам;</p>
</li>
<li>
<p><code>:hover</code> применяется, когда курсор мыши находится в пределах элемента, но не активирует его;</p>
</li>
<li>
<p><code>:active</code> применяется при активации элемента;</p>
</li>
<li>
<p><code>:focus</code> применяется к элементу при получении им фокуса;</p>
</li>
<li>
<p><code>:first-child</code> применяется к первому дочернему элементу селектора, который расположен в дереве элементов документа.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="css"><span class="nt">a</span><span class="nc">.snowman</span><span class="nd">:link</span> <span class="p">{</span>
    <span class="nl">color</span><span class="p">:</span> <span class="no">blue</span><span class="p">;</span>
<span class="p">}</span>
<span class="nt">a</span><span class="nc">.snowman</span><span class="nd">:visited</span> <span class="p">{</span>
    <span class="nl">color</span><span class="p">:</span> <span class="no">purple</span><span class="p">;</span>
<span class="p">}</span>
<span class="nt">a</span><span class="nc">.snowman</span><span class="nd">:active</span> <span class="p">{</span>
    <span class="nl">color</span><span class="p">:</span> <span class="no">red</span><span class="p">;</span>
<span class="p">}</span>
<span class="nt">a</span><span class="nc">.snowman</span><span class="nd">:hover</span> <span class="p">{</span>
    <span class="nl">text-decoration</span><span class="p">:</span> <span class="nb">none</span><span class="p">;</span>
    <span class="nl">color</span><span class="p">:</span> <span class="no">blue</span><span class="p">;</span>
    <span class="nl">background-color</span><span class="p">:</span> <span class="no">yellow</span><span class="p">;</span>
<span class="p">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><a href="#Основы-css">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_какие_существуют_селекторы_аттрибутов">3.6. Какие существуют селекторы аттрибутов?</h3>
<div class="ulist">
<ul>
<li>
<p><strong><code>[атрибут]</code></strong> - все элементы, имеющие указанный <code>атрибут</code>;</p>
</li>
<li>
<p><strong><code>[атрибут=значение]</code></strong> - все элементы, имеющие <code>атрибут</code>, значение которого равно <code>"значение"</code>;</p>
</li>
<li>
<p><strong><code>[атрибут^=занчение]</code></strong> - все элементы, имеющие <code>атрибут</code>, значение которого начинается с <code>значение</code>;</p>
</li>
<li>
<p><strong><code>[атрибут|=значение]</code></strong> - все элементы, имеющие <code>атрибут</code>, значение которого равно <code>значение</code> или начинается с <code>значение</code> следующим образом <code>значение-*</code> (<code>значение</code> с обязательным дефисом, после которого идёт остальное содержимое значения);</p>
</li>
<li>
<p><strong><code>[атрибут$=значение]</code></strong> - все элементы, имеющие <code>атрибут</code>, значение которого заканчивается на <code>значение</code>;</p>
</li>
<li>
<p><strong><code>[атрибут</strong>=значение]</code>* - все элементы, имеющие <code>атрибут</code>, значение которого содержит подстроку <code>значение</code>;</p>
</li>
<li>
<p><strong><code>[атрибут~=значение]</code></strong> - все элементы, имеющие <code>атрибут</code>, значение которого содержит <code>значение</code> как одно из значений через пробел.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a href="#Основы-css">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_в_чем_разница_между_my_и_my">3.7. В чем разница между <code>#my</code> и <code>.my</code>?</h3>
<div class="paragraph">
<p><code>#my</code>&#8201;&#8212;&#8201;селектор идентификатора, а <code>.my</code>&#8201;&#8212;&#8201;селектор класса.</p>
</div>
<div class="paragraph">
<p><a href="#Основы-css">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_в_чем_разница_между_margin_и_padding">3.8. В чем разница между <code>margin</code> и <code>padding</code>?</h3>
<div class="paragraph">
<p><code>margin</code>&#8201;&#8212;&#8201;внешний отступ, а <code>padding</code>&#8201;&#8212;&#8201;внутренний отступ.</p>
</div>
<div class="paragraph">
<p><a href="#Основы-css">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_в_чем_заключается_разница_между_значениями_0_и_auto_в_свойстве_margin">3.9. В чем заключается разница между значениями <code>0</code> и <code>auto</code> в свойстве <code>margin</code>?</h3>
<div class="paragraph">
<p>В вертикальных полях&#8201;&#8212;&#8201;<code>auto</code> всегда означает <code>0</code>. В горизонтальных полях&#8201;&#8212;&#8201;<code>auto</code> означает <code>0</code> только тогда, когда свойство <code>width</code> также <code>auto</code>.</p>
</div>
<div class="paragraph">
<p><a href="#Основы-css">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_какое_свойство_задает_цвет_фона">3.10. Какое свойство задает цвет фона?</h3>
<div class="paragraph">
<p>Цвет фона задает свойство <code>background-color</code>.</p>
</div>
<div class="paragraph">
<p><a href="#Основы-css">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_как_убрать_подчеркивание_для_всех_ссылок_на_странице">3.11. Как убрать подчеркивание для всех ссылок на странице?</h3>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="css"><span class="nt">a</span> <span class="p">{</span>
    <span class="nl">text-decoration</span><span class="p">:</span> <span class="nb">none</span><span class="p">;</span>
<span class="p">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><a href="#Основы-css">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_для_чего_используется_свойство_clear">3.12. Для чего используется свойство <code>clear</code>?</h3>
<div class="paragraph">
<p><code>clear</code> устанавливает, с какой стороны элемента запрещено его обтекание другими элементами.</p>
</div>
<div class="paragraph">
<p><a href="#Основы-css">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_как_сделать_жирным_текст_во_всех_элементах_p">3.13. Как сделать жирным текст во всех элементах <code>&lt;p&gt;</code>?</h3>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="css"><span class="nt">p</span> <span class="p">{</span>
    <span class="nl">font-weight</span><span class="p">:</span> <span class="nb">bold</span><span class="p">;</span>
<span class="p">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><a href="#Основы-css">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_как_задать_красный_цвет_для_всех_элементов_имеющих_класс_red">3.14. Как задать красный цвет для всех элементов, имеющих класс <code>red</code>?</h3>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="css"><span class="nc">.red</span> <span class="p">{</span>
    <span class="nl">color</span><span class="p">:</span> <span class="no">red</span><span class="p">;</span>
<span class="p">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><a href="#Основы-css">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_источники_3">3.15. Источники</h3>
<div class="ulist">
<ul>
<li>
<p><a href="http://myway-blog.ru/interview-frontend-web-programmer/">myway-blog.ru</a></p>
</li>
<li>
<p><a href="http://stepbystep.htmlbook.ru/?id=43">htmlbook.ru</a></p>
</li>
<li>
<p><a href="https://itchief.ru/lessons/html-and-css/css-selectors">itchief.ru</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a href="README.html">Вопросы для собеседования</a></p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_базы_данных">4. Базы данных</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="#Что-такое-база-данных">Что такое <em>«база данных»</em>?</a></p>
</li>
<li>
<p><a href="#Что-такое-система-управления-базами-данных">Что такое <em>«система управления базами данных»</em>?</a></p>
</li>
<li>
<p><a href="#Что-такое-реляционная-модель-данных">Что такое <em>«реляционная модель данных»</em>?</a></p>
</li>
<li>
<p><a href="#Дайте-определение-терминам-простой-составной-composite-потенциальный-candidate-и-альтернативный-alternate-ключ">Дайте определение терминам <em>«простой»</em>, <em>«составной» (composite)</em>, <em>«потенциальный» (candidate)</em> и <em>«альтернативный» (alternate)</em> ключ.</a></p>
</li>
<li>
<p><a href="#Что-такое-первичный-ключ-primary-key-Каковы-критерии-его-выбора">Что такое <em>«первичный ключ» (primary key)</em>? Каковы критерии его выбора?</a></p>
</li>
<li>
<p><a href="#Что-такое-внешний-ключ-foreign-key">Что такое <em>«внешний ключ» (foreign key)</em>?</a></p>
</li>
<li>
<p><a href="#Что-такое-нормализация">Что такое <em>«нормализация»</em>?</a></p>
</li>
<li>
<p><a href="#Какие-существуют-нормальные-формы">Какие существуют нормальные формы?</a></p>
</li>
<li>
<p><a href="#Что-такое-денормализация-Для-чего-она-применяется">Что такое <em>«денормализация»</em>? Для чего она применяется?</a></p>
</li>
<li>
<p><a href="#Какие-существуют-типы-связей-в-базе-данных-Приведите-примеры">Какие существуют типы связей в базе данных? Приведите примеры.</a></p>
</li>
<li>
<p><a href="#Что-такое-индексы-Для-чего-их-используют-В-чём-заключаются-их-преимущества-и-недостатки">Что такое <em>«индексы»</em>? Для чего их используют? В чём заключаются их преимущества и недостатки?</a></p>
</li>
<li>
<p><a href="#Какие-типы-индексов-существуют">Какие типы индексов существуют?</a></p>
</li>
<li>
<p><a href="#В-чем-отличие-между-кластерными-и-некластерными-индексами">В чем отличие между кластерными и некластерными индексами?</a></p>
</li>
<li>
<p><a href="#Имеет-ли-смысл-индексировать-данные-имеющие-небольшое-количество-возможных-значений">Имеет ли смысл индексировать данные, имеющие небольшое количество возможных значений?</a></p>
</li>
<li>
<p><a href="#Когда-полное-сканирование-набора-данных-выгоднее-доступа-по-индексу">Когда полное сканирование набора данных выгоднее доступа по индексу?</a></p>
</li>
<li>
<p><a href="#Что-такое-транзакция">Что такое <em>«транзакция»</em>?</a></p>
</li>
<li>
<p><a href="#Назовите-основные-свойства-транзакции">Назовите основные свойства транзакции.</a></p>
</li>
<li>
<p><a href="#Какие-существуют-уровни-изолированности-транзакций">Какие существуют уровни изолированности транзакций?</a></p>
</li>
<li>
<p><a href="#Какие-проблемы-могут-возникать-при-параллельном-доступе-с-использованием-транзакций">Какие проблемы могут возникать при параллельном доступе с использованием транзакций?</a></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_что_такое_база_данных">4.1. Что такое <em>«база данных»</em>?</h3>
<div class="paragraph">
<p><strong>База данных</strong>&#8201;&#8212;&#8201;организованный и адаптированный для обработки вычислительной системой набор информации.</p>
</div>
<div class="paragraph">
<p><a href="#Базы-данных">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_что_такое_система_управления_базами_данных">4.2. Что такое <em>«система управления базами данных»</em>?</h3>
<div class="paragraph">
<p><strong>Система управления базами данных (СУБД)</strong> - набор средств общего или специального назначения, обеспечивающий создание, доступ к материалам и управление базой данных.</p>
</div>
<div class="paragraph">
<p>Основные функции СУБД:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>управление данными</p>
</li>
<li>
<p>журнализация изменений данных</p>
</li>
<li>
<p>резервное копирование и восстановление данных;</p>
</li>
<li>
<p>поддержка языка определения данных и манипулирования ими.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a href="#Базы-данных">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_что_такое_реляционная_модель_данных">4.3. Что такое <em>«реляционная модель данных»</em>?</h3>
<div class="paragraph">
<p><strong>Реляционная модель данных</strong>&#8201;&#8212;&#8201;это логическая модель данных и прикладная теория построения реляционных баз данных.</p>
</div>
<div class="paragraph">
<p>Реляционная модель данных включает в себя следующие компоненты:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><em>Структурный аспект</em>&#8201;&#8212;&#8201;данные представляют собой набор отношений.</p>
</li>
<li>
<p><em>Аспект целостности</em>&#8201;&#8212;&#8201;отношения отвечают определенным условиям целостности: уровня домена (типа данных), уровня отношения и уровня базы данных.</p>
</li>
<li>
<p><em>Аспект обработки (манипулирования)</em>&#8201;&#8212;&#8201;поддержка операторов манипулирования отношениями (реляционная алгебра, реляционное исчисление).</p>
</li>
<li>
<p><em>Нормальная форма</em> - свойство отношения в реляционной модели данных, характеризующее его с точки зрения избыточности и определённое как совокупность требований, которым должно удовлетворять отношение.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a href="#Базы-данных">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_дайте_определение_терминам_простой_составной_composite_потенциальный_candidate_и_альтернативный_alternate_ключ">4.4. Дайте определение терминам <em>«простой»</em>, <em>«составной» (composite)</em>, <em>«потенциальный» (candidate)</em> и <em>«альтернативный» (alternate)</em> ключ.</h3>
<div class="paragraph">
<p><strong>Простой ключ</strong> состоит из одного атрибута (поля). <strong>Составной</strong> - из двух и более.</p>
</div>
<div class="paragraph">
<p><strong>Потенциальный ключ</strong> - простой или составной ключ, который уникально идентифицирует каждую запись набора данных. При этом потенциальный ключ должен обладать критерием неизбыточности: при удалении любого из полей набор полей перестает уникально идентифицировать запись.</p>
</div>
<div class="paragraph">
<p>Из множества всех потенциальных ключей набора данных выбирают первичный ключ, все остальные ключи называют <strong>альтернативными</strong>.</p>
</div>
<div class="paragraph">
<p><a href="#Базы-данных">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_что_такое_первичный_ключ_primary_key_каковы_критерии_его_выбора">4.5. Что такое <em>«первичный ключ» (primary key)</em>? Каковы критерии его выбора?</h3>
<div class="paragraph">
<p><strong>Первичный ключ (primary key)</strong> в реляционной модели данных один из <em>потенциальных ключей</em> отношения, выбранный в качестве основного ключа (ключа по умолчанию).</p>
</div>
<div class="paragraph">
<p>Если в отношении имеется единственный потенциальный ключ, он является и первичным ключом. Если потенциальных ключей несколько, один из них выбирается в качестве первичного, а другие называют <em>«альтернативными»</em>.</p>
</div>
<div class="paragraph">
<p>В качестве первичного обычно выбирается тот из потенциальных ключей, который наиболее удобен. Поэтому в качестве первичного ключа, как правило, выбирают тот, который имеет наименьший размер (физического хранения) и/или включает наименьшее количество атрибутов. Другой критерий выбора первичного ключа&#8201;&#8212;&#8201;сохранение его уникальности со временем. Поэтому в качестве первичного ключа стараются выбирать такой потенциальный ключ, который с наибольшей вероятностью никогда не утратит уникальность.</p>
</div>
<div class="paragraph">
<p><a href="#Базы-данных">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_что_такое_внешний_ключ_foreign_key">4.6. Что такое <em>«внешний ключ» (foreign key)</em>?</h3>
<div class="paragraph">
<p><strong>Внешний ключ (foreign key)</strong>&#8201;&#8212;&#8201;подмножество атрибутов некоторого отношения A, значения которых должны совпадать со значениями некоторого потенциального ключа некоторого отношения B.</p>
</div>
<div class="paragraph">
<p><a href="#Базы-данных">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_что_такое_нормализация">4.7. Что такое <em>«нормализация»</em>?</h3>
<div class="paragraph">
<p><em>Нормализация</em> - это процесс преобразования отношений базы данных к виду, отвечающему нормальным формам (пошаговый, обратимый процесс замены исходной схемы другой схемой, в которой наборы данных имеют более простую и логичную структуру).</p>
</div>
<div class="paragraph">
<p>Нормализация предназначена для приведения структуры базы данных к виду, обеспечивающему минимальную логическую избыточность, и не имеет целью уменьшение или увеличение производительности работы или же уменьшение или увеличение физического объёма базы данных. Конечной целью нормализации является уменьшение потенциальной противоречивости хранимой в базе данных информации.</p>
</div>
<div class="paragraph">
<p><a href="#Базы-данных">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_какие_существуют_нормальные_формы">4.8. Какие существуют нормальные формы?</h3>
<div class="paragraph">
<p><strong>Первая нормальная форма (1NF)</strong> - Отношение находится в 1NF, если значения всех его атрибутов атомарны (неделимы).</p>
</div>
<div class="paragraph">
<p><strong>Вторая нормальная форма (2NF)</strong> - Отношение находится в 2NF, если оно находится в 1NF, и при этом все неключевые атрибуты зависят только от ключа целиком, а не от какой-то его части.</p>
</div>
<div class="paragraph">
<p><strong>Третья нормальная форма (3NF)</strong> - Отношение находится в 3NF, если оно находится в 2NF и все неключевые атрибуты не зависят друг от друга.</p>
</div>
<div class="paragraph">
<p><strong>Четвёртая нормальная форма (4NF)</strong> - Отношение находится в 4NF , если оно находится в 3NF и если в нем не содержатся независимые группы атрибутов, между которыми существует отношение «многие-ко-многим».</p>
</div>
<div class="paragraph">
<p><strong>Пятая нормальная форма (5NF)</strong> - Отношение находится в 5NF, когда каждая нетривиальная зависимость соединения в ней определяется потенциальным ключом (ключами) этого отношения.</p>
</div>
<div class="paragraph">
<p><strong>Шестая нормальная форма (6NF)</strong> - Отношение находится в 6NF, когда она удовлетворяет всем нетривиальным зависимостям соединения, т.е. когда она неприводима, то есть не может быть подвергнута дальнейшей декомпозиции без потерь. Каждая переменная отношения, которая находится в 6NF, также находится и в 5NF. Введена как обобщение пятой нормальной формы для хронологической базы данных.</p>
</div>
<div class="paragraph">
<p><strong>Нормальная форма Бойса-Кодда, усиленная 3 нормальная форма (BCNF)</strong> - Отношение находится в BCNF, когда каждая её нетривиальная и неприводимая слева функциональная зависимость имеет в качестве своего детерминанта некоторый потенциальный ключ.</p>
</div>
<div class="paragraph">
<p><strong>Доменно-ключевая нормальная форма (DKNF)</strong> -  Отношение находится в DKNF, когда каждое наложенное на неё ограничение является логическим следствием ограничений доменов и ограничений ключей, наложенных на данное отношение.</p>
</div>
<div class="paragraph">
<p><a href="#Базы-данных">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_что_такое_денормализация_для_чего_она_применяется">4.9. Что такое <em>«денормализация»</em>? Для чего она применяется?</h3>
<div class="paragraph">
<p><strong>Денормализация базы данных</strong>&#8201;&#8212;&#8201;это процесс осознанного приведения базы данных к виду, в котором она не будет соответствовать правилам нормализации. Обычно это необходимо для повышения производительности и скорости извлечения данных, за счет увеличения избыточности данных.</p>
</div>
<div class="paragraph">
<p><a href="#Базы-данных">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_какие_существуют_типы_связей_в_базе_данных_приведите_примеры">4.10. Какие существуют типы связей в базе данных? Приведите примеры.</h3>
<div class="ulist">
<ul>
<li>
<p><strong>Один к одному</strong> - любому значению атрибута А соответствует только одно значение атрибута В, и наоборот.</p>
</li>
</ul>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>Каждый университет гарантированно имеет 1-го ректора: <em>1 университет → 1 ректор</em>.</p>
</div>
</blockquote>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Один ко многим</strong> - любому значению атрибута А соответствует 0, 1 или несколько значений атрибута В.</p>
</li>
</ul>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>В каждом университете есть несколько факультетов: <em>1 университет → много факультетов</em>.</p>
</div>
</blockquote>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Многие ко многим</strong> - любому значению атрибута А соответствует 0, 1 или несколько значений атрибута В, и любому значению атрибута В соответствует 0, 1 или несколько значение атрибута А.</p>
</li>
</ul>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>1 профессор может преподавать на нескольких факультетах, в то же время на 1-ом факультете может преподавать несколько профессоров: <em>Несколько профессоров ↔ Несколько факультетов</em>.</p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p><a href="#Базы-данных">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_что_такое_индексы_для_чего_их_используют_в_чём_заключаются_их_преимущества_и_недостатки">4.11. Что такое <em>«индексы»</em>? Для чего их используют? В чём заключаются их преимущества и недостатки?</h3>
<div class="paragraph">
<p><strong>Индекс (index)</strong>&#8201;&#8212;&#8201;объект базы данных, создаваемый с целью повышения производительности выборки данных.</p>
</div>
<div class="paragraph">
<p>Наборы данных могут иметь большое количество записей, которые хранятся в произвольном порядке, и их поиск по заданному критерию путём последовательного просмотра набора данных запись за записью может занимать много времени. Индекс формируется из значений одного или нескольких полей и указателей на соответствующие записи набора данных, - таким образом, достигается значительный прирост скорости выборки из этих данных.</p>
</div>
<div class="paragraph">
<p>Преимущества</p>
</div>
<div class="ulist">
<ul>
<li>
<p>ускорение поиска и сортировки по определенному полю или набору полей.</p>
</li>
<li>
<p>обеспечение уникальности данных.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Недостатки</p>
</div>
<div class="ulist">
<ul>
<li>
<p>требование дополнительного места на диске и в оперативной памяти и чем больше/длиннее ключ, тем больше размер индекса.</p>
</li>
<li>
<p>замедление операций вставки, обновления и удаления записей, поскольку при этом приходится обновлять сами индексы.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Индексы предпочтительней для:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Поля-счетчика, чтобы в том числе избежать и повторения значений в этом поле;</p>
</li>
<li>
<p>Поля, по которому проводится сортировка данных;</p>
</li>
<li>
<p>Полей, по которым часто проводится соединение наборов данных. Поскольку в этом случае данные располагаются в порядке возрастания индекса и соединение происходит значительно быстрее;</p>
</li>
<li>
<p>Поля, которое объявлено первичным ключом (primary key);</p>
</li>
<li>
<p>Поля, в котором данные выбираются из некоторого диапазона. В этом случае как только будет найдена первая запись с нужным значением, все последующие значения будут расположены рядом.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Использование индексов нецелесообразно для:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Полей, которые редко используются в запросах;</p>
</li>
<li>
<p>Полей, которые содержат всего два или три значения, например: <em>мужской</em>,  <em>женский пол</em> или значения <em>«да»</em>, <em>«нет»</em>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a href="#Базы-данных">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_какие_типы_индексов_существуют">4.12. Какие типы индексов существуют?</h3>
<div class="paragraph">
<p><strong>По порядку сортировки</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p><em>упорядоченные</em>&#8201;&#8212;&#8201;индексы, в которых элементы упорядочены;</p>
</li>
<li>
<p><em>возрастающие</em>;</p>
</li>
<li>
<p><em>убывающие</em>;</p>
</li>
<li>
<p><em>неупорядоченные</em>&#8201;&#8212;&#8201;индексы, в которых элементы неупорядочены.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>По источнику данных</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p><em>индексы по представлению (view)</em>;</p>
</li>
<li>
<p><em>индексы по выражениям</em>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>По воздействию на источник данных</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p><em>кластерный индекс</em> - при определении в наборе данных физическое расположение данных перестраивается в соответствии со структурой индекса. Логическая структура набора данных в этом случае представляет собой скорее словарь, чем индекс. Данные в словаре физически упорядочены, например по алфавиту. Кластерные индексы могут дать существенное увеличение производительности поиска данных даже по сравнению с обычными индексами. Увеличение производительности особенно заметно при работе с последовательными данными.</p>
</li>
<li>
<p><em>некластерный индекс</em>&#8201;&#8212;&#8201;наиболее типичные представители семейства индексов. В отличие от кластерных, они не перестраивают физическую структуру набора данных, а лишь организуют ссылки на соответствующие записи. Для идентификации нужной записи в наборе данных некластерный индекс организует специальные указатели, включающие в себя: информацию об идентификационном номере файла, в котором хранится запись; идентификационный номер страницы соответствующих данных; номер искомой записи на соответствующей странице; содержимое столбца.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>По структуре</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p><em>B*-деревья</em>;</p>
</li>
<li>
<p><em>B+-деревья</em>;</p>
</li>
<li>
<p><em>B-деревья</em>;</p>
</li>
<li>
<p><em>Хэши</em>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>По количественному составу</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p><em>простой индекс (индекс с одним ключом)</em>&#8201;&#8212;&#8201;строится по одному полю;</p>
</li>
<li>
<p><em>составной (многоключевой, композитный) индекс</em>&#8201;&#8212;&#8201;строится по нескольким полям при этом важен порядок их следования;</p>
</li>
<li>
<p><em>индекс с включенными столбцами</em>&#8201;&#8212;&#8201;некластеризованный индекс, дополнительно содержащий кроме ключевых столбцов еще и неключевые;</p>
</li>
<li>
<p><em>главный индекс (индекс по первичному ключу)</em>&#8201;&#8212;&#8201;это тот индексный ключ, под управлением которого в данный момент находится набор данных. Набор данных не может быть отсортирован по нескольким индексным ключам одновременно. Хотя, если один и тот же набор данных открыт одновременно в нескольких рабочих областях, то у каждой копии набора данных может быть назначен свой главный индекс.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>По характеристике содержимого</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p><em>уникальный индекс</em> состоит из множества уникальных значений поля;</p>
</li>
<li>
<p><em>плотный индекс</em> (NoSQL)&#8201;&#8212;&#8201;индекс, при котором, каждом документе в индексируемой коллекции соответствует запись в индексе, даже если в документе нет индексируемого поля.</p>
</li>
<li>
<p><em>разреженный индекс</em> (NoSQL)&#8201;&#8212;&#8201;тот, в котором представлены только те документы, для которых индексируемый ключ имеет какое-то определённое значение (существует).</p>
</li>
<li>
<p><em>пространственный индекс</em>&#8201;&#8212;&#8201;оптимизирован для описания географического местоположения. Представляет из себя многоключевой индекс состоящий из широты и долготы.</p>
</li>
<li>
<p><em>составной пространственный индекс</em>&#8201;&#8212;&#8201;индекс, включающий в себя кроме широты и долготы ещё какие-либо мета-данные (например теги). Но географические координаты должны стоять на первом месте.</p>
</li>
<li>
<p><em>полнотекстовый (инвертированный) индекс</em>&#8201;&#8212;&#8201;словарь, в котором перечислены все слова и указано, в каких местах они встречаются. При наличии такого индекса достаточно осуществить поиск нужных слов в нём и тогда сразу же будет получен список документов, в которых они встречаются.</p>
</li>
<li>
<p><em>хэш-индекс</em> предполагает хранение не самих значений, а их хэшей, благодаря чему уменьшается размер (а, соответственно, и увеличивается скорость их обработки) индексов из больших полей. Таким образом, при запросах с использованием хэш-индексов, сравниваться будут не искомое со значения поля, а хэш от искомого значения с хэшами полей.
Из-за нелинейнойсти хэш-функций данный индекс нельзя сортировать по значению, что приводит к невозможности использования в сравнениях больше/меньше и «is null». Кроме того, так как хэши не уникальны, то для совпадающих хэшей применяются методы разрешения коллизий.</p>
</li>
<li>
<p><em>битовый индекс (bitmap index)</em>&#8201;&#8212;&#8201;метод битовых индексов заключается в создании отдельных битовых карт (последовательностей 0 и 1) для каждого возможного значения столбца, где каждому биту соответствует запись с индексируемым значением, а его значение равное 1 означает, что запись, соответствующая позиции бита содержит индексируемое значение для данного столбца или свойства.</p>
</li>
<li>
<p><em>обратный индекс (reverse index)</em>&#8201;&#8212;&#8201;B-tree индекс, но с реверсированным ключом, используемый в основном для монотонно возрастающих значений (например, автоинкрементный идентификатор) в OLTP системах с целью снятия конкуренции за последний листовой блок индекса, т.к. благодаря переворачиванию значения две соседние записи индекса попадают в разные блоки индекса. Он не может использоваться для диапазонного поиска.</p>
</li>
<li>
<p><em>функциональный индекс, индекс по вычисляемому полю (function-based index)</em>&#8201;&#8212;&#8201;индекс, ключи которого хранят результат пользовательских функций. Функциональные индексы часто строятся для полей, значения которых проходят предварительную обработку перед сравнением в команде SQL. Например, при сравнении строковых данных без учета регистра символов часто используется функция UPPER. Кроме того, функциональный индекс может помочь реализовать любой другой отсутствующий тип индексов данной СУБД.</p>
</li>
<li>
<p><em>первичный индекс</em>&#8201;&#8212;&#8201;уникальный индекс по полю первичного ключа.</p>
</li>
<li>
<p><em>вторичный индекс</em>&#8201;&#8212;&#8201;индекс по другим полям (кроме поля первичного ключа).</p>
</li>
<li>
<p><em>XML-индекс</em>&#8201;&#8212;&#8201;вырезанное материализованное представление больших двоичных XML-объектов (BLOB) в столбце с типом данных xml.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>По механизму обновления</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p><em>полностью перестраиваемый</em>&#8201;&#8212;&#8201;при добавлении элемента заново перестраивается весь индекс.</p>
</li>
<li>
<p><em>пополняемый (балансируемый)</em>&#8201;&#8212;&#8201;при добавлении элементов индекс перестраивается частично (например, одна из ветви) и периодически балансируется.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>По покрытию индексируемого содержимого</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p><em>полностью покрывающий (полный) индекс</em>&#8201;&#8212;&#8201;покрывает всё содержимое индексируемого объекта.</p>
</li>
<li>
<p><em>частичный индекс (partial index)</em>&#8201;&#8212;&#8201;это индекс, построенный на части набора данных, удовлетворяющей определенному условию самого индекса. Данный индекс создан для уменьшения размера индекса.</p>
</li>
<li>
<p><em>инкрементный (delta) индекс</em>&#8201;&#8212;&#8201;индексируется малая часть данных(дельта), как правило, по истечении определённого времени. Используется при интенсивной записи. Например, полный индекс перестраивается раз в сутки, а дельта-индекс строится каждый час. По сути это частичный индекс по временной метке.</p>
</li>
<li>
<p><em>индекс реального времени (real-time index)</em>&#8201;&#8212;&#8201;особый вид инкрементного индекса, характеризующийся высокой скоростью построения. Предназначен для часто меняющихся данных.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Индексы в кластерных системах</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p><em>глобальный индекс</em>&#8201;&#8212;&#8201;индекс по всему содержимому всех сегментов БД (shard).</p>
</li>
<li>
<p><em>сегментный индекс</em>&#8201;&#8212;&#8201;глобальный индекс по полю-сегментируемому ключу (shard key). Используется для быстрого определения сегмента, на котором хранятся данные в процессе маршрутизации запроса в кластере БД.</p>
</li>
<li>
<p><em>локальный индекс</em>&#8201;&#8212;&#8201; индекс по содержимому только одного сегмента БД.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a href="#Базы-данных">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_в_чем_отличие_между_кластерными_и_некластерными_индексами">4.13. В чем отличие между кластерными и некластерными индексами?</h3>
<div class="paragraph">
<p>Некластерные индексы - данные физически расположены в произвольном порядке, но логически упорядочены согласно индексу. Такой тип индексов подходит для часто изменяемого набора данных.</p>
</div>
<div class="paragraph">
<p>При кластерном индексировании данные физически упорядочены, что серьезно повышает скорость выборок данных (но только в случае последовательного доступа к данным). Для одного набора данных может быть создан только один кластерный индекс.</p>
</div>
<div class="paragraph">
<p><a href="#Базы-данных">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_имеет_ли_смысл_индексировать_данные_имеющие_небольшое_количество_возможных_значений">4.14. Имеет ли смысл индексировать данные, имеющие небольшое количество возможных значений?</h3>
<div class="paragraph">
<p>Примерное правило, которым можно руководствоваться при создании индекса - если объем информации (в байтах) НЕ удовлетворяющей условию выборки меньше, чем размер индекса (в байтах) по данному условию выборки, то в общем случае оптимизация приведет к замедлению выборки.</p>
</div>
<div class="paragraph">
<p><a href="#Базы-данных">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_когда_полное_сканирование_набора_данных_выгоднее_доступа_по_индексу">4.15. Когда полное сканирование набора данных выгоднее доступа по индексу?</h3>
<div class="paragraph">
<p>Полное сканирование производится многоблочным чтением. Сканирование по индексу - одноблочным. Также, при доступе по индексу сначала идет сканирование самого индекса, а затем чтение блоков из набора данных. Число блоков, которые надо при этом прочитать из набора зависит от фактора кластеризации. Если суммарная стоимость всех необходимых одноблочных чтений больше стоимости полного сканирования многоблочным чтением, то полное сканирование выгоднее, и оно выбирается оптимизатором.</p>
</div>
<div class="paragraph">
<p>Таким образом, полное сканирование выбирается при слабой селективности предикатов запроса и/или слабой кластеризации данных, либо в случае очень маленьких наборов данных.</p>
</div>
<div class="paragraph">
<p><a href="#Базы-данных">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_что_такое_транзакция">4.16. Что такое <em>«транзакция»</em>?</h3>
<div class="paragraph">
<p><strong>Транзакция</strong> - это воздействие на базу данных, переводящее её из одного целостного состояния в другое и выражаемое в изменении данных, хранящихся в базе данных.</p>
</div>
<div class="paragraph">
<p><a href="#Базы-данных">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_назовите_основные_свойства_транзакции">4.17. Назовите основные свойства транзакции.</h3>
<div class="paragraph">
<p><strong>Атомарность (atomicity)</strong> гарантирует, что никакая транзакция не будет зафиксирована в системе частично. Будут либо выполнены все её подоперации, либо не выполнено ни одной.</p>
</div>
<div class="paragraph">
<p><strong>Согласованность (consistency)</strong>. Транзакция, достигающая своего нормального завершения и, тем самым, фиксирующая свои результаты, сохраняет согласованность базы данных.</p>
</div>
<div class="paragraph">
<p><strong>Изолированность (isolation)</strong>. Во время выполнения транзакции параллельные транзакции не должны оказывать влияние на её результат.</p>
</div>
<div class="paragraph">
<p><strong>Долговечность (durability)</strong>. Независимо от проблем на нижних уровнях (к примеру, обесточивание системы или сбои в оборудовании) изменения, сделанные успешно завершённой транзакцией, должны остаться сохранёнными после возвращения системы в работу.</p>
</div>
<div class="paragraph">
<p><a href="#Базы-данных">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_какие_существуют_уровни_изолированности_транзакций">4.18. Какие существуют уровни изолированности транзакций?</h3>
<div class="paragraph">
<p>В порядке увеличения изолированности транзакций и, соответственно, надёжности работы с данными:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Чтение неподтверждённых данных (грязное чтение) (read uncommitted, dirty read)</strong>&#8201;&#8212;&#8201;чтение незафиксированных изменений как своей транзакции, так и параллельных транзакций. Нет гарантии, что данные, изменённые другими транзакциями, не будут в любой момент изменены в результате их отката, поэтому такое чтение является потенциальным источником ошибок. Невозможны потерянные изменения, возможны неповторяемое чтение и фантомы.</p>
</li>
<li>
<p><strong>Чтение подтверждённых данных (read committed)</strong>&#8201;&#8212;&#8201;чтение всех изменений своей транзакции и зафиксированных изменений параллельных транзакций. Потерянные изменения и грязное чтение не допускается, возможны неповторяемое чтение и фантомы.</p>
</li>
<li>
<p><strong>Повторяемость чтения (repeatable read, snapshot)</strong>&#8201;&#8212;&#8201;чтение всех изменений своей транзакции, любые изменения, внесённые параллельными транзакциями после начала своей, недоступны. Потерянные изменения, грязное и неповторяемое чтение невозможны, возможны фантомы.</p>
</li>
<li>
<p><strong>Упорядочиваемость (serializable)</strong>&#8201;&#8212;&#8201;результат параллельного выполнения сериализуемой транзакции с другими транзакциями должен быть логически эквивалентен результату их какого-либо последовательного выполнения. Проблемы синхронизации не возникают.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a href="#Базы-данных">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_какие_проблемы_могут_возникать_при_параллельном_доступе_с_использованием_транзакций">4.19. Какие проблемы могут возникать при параллельном доступе с использованием транзакций?</h3>
<div class="paragraph">
<p>При параллельном выполнении транзакций возможны следующие проблемы:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Потерянное обновление (lost update)</strong>&#8201;&#8212;&#8201;при одновременном изменении одного блока данных разными транзакциями одно из изменений теряется;</p>
</li>
<li>
<p><strong>«Грязное» чтение (dirty read)</strong>&#8201;&#8212;&#8201;чтение данных, добавленных или изменённых транзакцией, которая впоследствии не подтвердится (откатится);</p>
</li>
<li>
<p><strong>Неповторяющееся чтение (non-repeatable read)</strong>&#8201;&#8212;&#8201;при повторном чтении в рамках одной транзакции ранее прочитанные данные оказываются изменёнными;</p>
</li>
<li>
<p><strong>Фантомное чтение (phantom reads)</strong>&#8201;&#8212;&#8201;одна транзакция в ходе своего выполнения несколько раз выбирает множество записей по одним и тем же критериям. Другая транзакция в интервалах между этими выборками добавляет или удаляет записи или изменяет столбцы некоторых записей, используемых в критериях выборки первой транзакции, и успешно заканчивается. В результате получится, что одни и те же выборки в первой транзакции дают разные множества записей.
Предположим, имеется две транзакции, открытые различными приложениями, в которых выполнены следующие SQL-операторы:</p>
</li>
</ul>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Транзакция 1</th>
<th class="tableblock halign-left valign-top">Транзакция 2</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SELECT SUM(f2) FROM tbl1;</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">INSERT INTO tbl1 (f1,f2) VALUES (15,20);</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">COMMIT;</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SELECT SUM(f2) FROM tbl1;</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>В транзакции 2 выполняется SQL-оператор, использующий все значения поля f2. Затем в транзакции 1 выполняется вставка новой строки, приводящая к тому, что повторное выполнение SQL-оператора в транзакции 2 выдаст другой результат. Такая ситуация называется чтением фантома (фантомным чтением). От неповторяющегося чтения оно отличается тем, что результат повторного обращения к данным изменился не из-за изменения/удаления самих этих данных, а из-за появления новых (фантомных) данных.</p>
</div>
<div class="paragraph">
<p><a href="#Базы-данных">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_источники_4">4.20. Источники</h3>
<div class="ulist">
<ul>
<li>
<p><a href="https://ru.wikipedia.org/wiki/">Википедия</a></p>
</li>
<li>
<p><a href="http://tokarchuk.ru/2012/08/indexes-classification/">tokarchuk.ru</a></p>
</li>
<li>
<p><a href="http://www.quizful.net/interview/sql/">Quizful</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a href="README.html">Вопросы для собеседования</a></p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_основы_html">5. Основы HTML</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="#Что-такое-html">Что такое <em>«HTML»</em>?</a></p>
</li>
<li>
<p><a href="#Что-такое-xhtml">Что такое <em>«XHTML»</em>?</a></p>
</li>
<li>
<p><a href="#Что-такое-doctype-и-зачем-он-нужен">Что такое <code>DOCTYPE</code> и зачем он нужен?</a></p>
</li>
<li>
<p><a href="#Для-чего-предназначен-тег-head">Для чего предназначен тег <code>&lt;head&gt;</code>?</a></p>
</li>
<li>
<p><a href="#Чем-отличается-div-от-span">Чем отличается <code>&lt;div&gt;</code> от <code>&lt;span&gt;</code>?</a></p>
</li>
<li>
<p><a href="#Как-обозначаются-комментарии-в-html">Как обозначаются комментарии в HTML?</a></p>
</li>
<li>
<p><a href="#Каким-образом-задаётся-адрес-документа-на-который-следует-перейти">Каким образом задаётся адрес документа, на который следует перейти?</a></p>
</li>
<li>
<p><a href="#Как-сделать-ссылку-на-адрес-электронной-почты">Как сделать ссылку на адрес электронной почты?</a></p>
</li>
<li>
<p><a href="#Для-чего-предназначен-тег-em">Для чего предназначен тег <code>&lt;em&gt;</code>?</a></p>
</li>
<li>
<p><a href="#Для-чего-предназначены-теги-ol-ul-li">Для чего предназначены теги <code>&lt;ol&gt;</code>, <code>&lt;ul&gt;</code>, <code>&lt;li&gt;</code>?</a></p>
</li>
<li>
<p><a href="#Для-чего-предназначены-теги-dl-dt-dd">Для чего предназначены теги <code>&lt;dl&gt;</code>, <code>&lt;dt&gt;</code>, <code>&lt;dd&gt;</code>?</a></p>
</li>
<li>
<p><a href="#Для-чего-предназначены-теги-tr-th-td">Для чего предназначены теги <code>&lt;tr&gt;</code>, <code>&lt;th&gt;</code>, <code>&lt;td&gt;</code>?</a></p>
</li>
<li>
<p><a href="#Обязательно-ли-писать-атрибут-alt-в-теге-img">Обязательно ли писать атрибут <code>alt</code> в теге <code>&lt;img&gt;</code>?</a></p>
</li>
<li>
<p><a href="#В-каком-регистре-лучше-писать-html-код">В каком регистре лучше писать HTML-код?</a></p>
</li>
<li>
<p><a href="#Что-такое-мнемоника-entity">Что такое «мнемоника (entity)»?</a></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_что_такое_html">5.1. Что такое <em>«HTML»</em>?</h3>
<div class="paragraph">
<p><strong>HTML</strong>, HyperText Markup Language («язык гипертекстовой разметки»)&#8201;&#8212;&#8201;стандартизированный язык разметки документов в WWW. На данный момент актуальна 5 версия этого языка - HTML5.</p>
</div>
<div class="paragraph">
<p><a href="#Основы-html">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_что_такое_xhtml">5.2. Что такое <em>«XHTML»</em>?</h3>
<div class="paragraph">
<p><strong>XHTML</strong>, eXtensible HyperText Markup Language («расширяемый язык гипертекстовой разметки») - более строгий вариант HTML, следующий всем ограничениям XML и, фактически являющийся приложением языка XML к области разметки гипертекста.</p>
</div>
<div class="paragraph">
<p><a href="#Основы-html">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_что_такое_doctype_и_зачем_он_нужен">5.3. Что такое <code>DOCTYPE</code> и зачем он нужен?</h3>
<div class="paragraph">
<p>Элемент <code>&lt;!DOCTYPE&gt;</code> предназначен для указания типа текущего документа. Это необходимо, чтобы браузер понимал, согласно какому стандарту, необходимо интерпретировать данную web-страницу.</p>
</div>
<div class="paragraph">
<p>Существует несколько видов <code>&lt;!DOCTYPE&gt;</code>, различающихся версией языка, на который они ориентированы:</p>
</div>
<div class="paragraph">
<p><strong>HTML 4.01</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>&lt;!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"
"http://www.w3.org/TR/html4/strict.dtd"&gt;</code>: строгий синтаксис HTML;</p>
</li>
<li>
<p><code>&lt;!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd"&gt;</code>: переходный синтаксис HTML;</p>
</li>
<li>
<p><code>&lt;!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Frameset//EN"
"http://www.w3.org/TR/html4/frameset.dtd"&gt;</code>: HTML с фреймами.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>HTML 5</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>&lt;!DOCTYPE html&gt;</code>: для всех документов.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>XHTML 1.0</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>&lt;!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"&gt;</code>: строгий синтаксис XHTML;</p>
</li>
<li>
<p><code>&lt;!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"&gt;</code>: переходный синтаксис XHTML;</p>
</li>
<li>
<p><code>&lt;!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Frameset//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-frameset.dtd"&gt;</code>: XHTML с фреймами.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>XHTML 1.1</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>&lt;!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
"http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd"&gt;</code>: для всех документов.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a href="#Основы-html">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_для_чего_предназначен_тег_head">5.4. Для чего предназначен тег <code>&lt;head&gt;</code>?</h3>
<div class="paragraph">
<p>Тег <code>&lt;head&gt;</code> предназначен для хранения других элементов, цель которых&#8201;&#8212;&#8201;помочь браузеру в работе с данными. Также внутри этого контейнера находятся <em>метатеги</em>, которые используются для хранения информации предназначенной для браузеров и поисковых систем. Например, механизмы поисковых систем обращаются к метатегам для получения описания сайта, ключевых слов и других данных.</p>
</div>
<div class="paragraph">
<p>Содержимое тега <code>&lt;head&gt;</code> не отображается напрямую на web-странице, за исключением тега <code>&lt;title&gt;</code> устанавливающего заголовок окна.</p>
</div>
<div class="paragraph">
<p>Внутри контейнера <code>&lt;head&gt;</code> допускается размещать следующие элементы: <code>&lt;base&gt;</code>, <code>&lt;basefont&gt;</code>, <code>&lt;bgsound&gt;</code>, <code>&lt;link&gt;</code>, <code>&lt;meta&gt;</code>, <code>&lt;script&gt;</code>, <code>&lt;style&gt;</code>, <code>&lt;title&gt;</code>.</p>
</div>
<div class="paragraph">
<p>Синтаксис:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="html"><span class="nt">&lt;head&gt;</span>
  ...
<span class="nt">&lt;/head&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Специфические атрибуты:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>profile</code>: указывает адрес профиля метаданных.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a href="#Основы-html">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_чем_отличается_div_от_span">5.5. Чем отличается <code>&lt;div&gt;</code> от <code>&lt;span&gt;</code>?</h3>
<div class="paragraph">
<p><code>&lt;div&gt;</code> - блочный, а <code>&lt;span&gt;</code> - строчный элементы. Поэтому <code>&lt;div&gt;</code> формирует блок из того, что в нем располагается с новой строки, а <code>&lt;span&gt;</code> не переносит элементы, размещая их в строку. Так же стоит отметь, что согласно рекомендациям w3c линейный тег не может включать в себя блочные теги, поэтому <code>&lt;div&gt;</code> обычно используется для разметки блоков, а <code>&lt;span&gt;</code> - отрывков текста.</p>
</div>
<div class="paragraph">
<p><a href="#Основы-html">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_как_обозначаются_комментарии_в_html">5.6. Как обозначаются комментарии в HTML?</h3>
<div class="paragraph">
<p>Комментарий в HTML-коде задаётся так: <code>&lt;!-- комментарий --&gt;</code></p>
</div>
<div class="paragraph">
<p>Комментарии можно использовать в любом месте страницы, кроме тега <code>&lt;title&gt;</code>&#8201;&#8212;&#8201;внутри него они не работают. Внутри тега <code>&lt;style&gt;</code> HTML-комментарии тоже не работают, так как в CSS код комментируется другим способом.</p>
</div>
<div class="paragraph">
<p><a href="#Основы-html">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_каким_образом_задаётся_адрес_документа_на_который_следует_перейти">5.7. Каким образом задаётся адрес документа, на который следует перейти?</h3>
<div class="paragraph">
<p>Для создания ссылок на другие документы используется тег <code>&lt;a&gt;</code>. В зависимости от присутствия атрибутов <code>name</code> или <code>href</code> тег <code>&lt;a&gt;</code> устанавливает ссылку или якорь. Якорем называется закладка внутри страницы, которую можно указать в качестве цели ссылки. При использовании ссылки, которая указывает на якорь, происходит переход к закладке внутри web-страницы.</p>
</div>
<div class="paragraph">
<p>Синтаксис:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>&lt;a href="URL"&gt;...&lt;/a&gt;</code></p>
</li>
<li>
<p><code>&lt;a name="идентификатор"&gt;...&lt;/a&gt;</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Специфические атрибуты:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>accesskey</code>: активация ссылки с помощью комбинации клавиш;</p>
</li>
<li>
<p><code>coords</code>: устанавливает координаты активной области;</p>
</li>
<li>
<p><code>download</code>: предлагает скачать указанный по ссылке файл;</p>
</li>
<li>
<p><code>href</code>: задает адрес документа, на который следует перейти. Адрес ссылки может быть абсолютным и относительным. Абсолютные адреса работают везде и всюду независимо от имени сайта или веб-страницы, где прописана ссылка. Относительные ссылки, как следует из их названия, построены относительно текущего документа или корня сайта;</p>
</li>
<li>
<p><code>hreflang</code>: идентифицирует язык текста по ссылке;</p>
</li>
<li>
<p><code>name</code>: устанавливает имя якоря внутри документа;</p>
</li>
<li>
<p><code>rel</code>: отношения между ссылаемым и текущим документами;</p>
</li>
<li>
<p><code>rev</code>: отношения между текущим и ссылаемым документами;</p>
</li>
<li>
<p><code>shape</code>: задает форму активной области ссылки для изображений;</p>
</li>
<li>
<p><code>tabindex</code>: определяет последовательность перехода между ссылками при нажатии на кнопку <kbd>Tab</kbd>;</p>
</li>
<li>
<p><code>target</code>: имя окна или фрейма, куда браузер будет загружать документ;</p>
</li>
<li>
<p><code>title</code>: добавляет всплывающую подсказку к тексту ссылки;</p>
</li>
<li>
<p><code>type</code>: указывает MIME-тип документа, на который ведёт ссылка.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a href="#Основы-html">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_как_сделать_ссылку_на_адрес_электронной_почты">5.8. Как сделать ссылку на адрес электронной почты?</h3>
<div class="paragraph">
<p>Создание ссылки на адрес электронной почты делается почти также, как и ссылка на web-страницу. Только вместо URL указывается <code>mailto:"адрес электронной почты"</code></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="html"><span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"mailto:user@address.net"</span><span class="nt">&gt;</span>Напиши мне!<span class="nt">&lt;/a&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><a href="#Основы-html">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_для_чего_предназначен_тег_em">5.9. Для чего предназначен тег <code>&lt;em&gt;</code>?</h3>
<div class="paragraph">
<p>Тег <code>&lt;em&gt;</code> предназначен для акцентирования текста. Браузеры отображают такой текст курсивным начертанием.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="html"><span class="nt">&lt;em&gt;</span>Текст<span class="nt">&lt;/em&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><a href="#Основы-html">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_для_чего_предназначены_теги_ol_ul_li">5.10. Для чего предназначены теги <code>&lt;ol&gt;</code>, <code>&lt;ul&gt;</code>, <code>&lt;li&gt;</code>?</h3>
<div class="paragraph">
<p>Теги <code>&lt;ol&gt;</code>, <code>&lt;ul&gt;</code> и <code>&lt;li&gt;</code> предназначены для оформления списков.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>&lt;ol&gt;</code>: нумерованный список, т.е. каждый элемент списка начинается с числа или буквы и увеличивается по нарастающей.</p>
</li>
<li>
<p><code>&lt;ul&gt;</code>: маркированный список, каждый элемент которого начинается с небольшого символа&#8201;&#8212;&#8201;маркера.</p>
</li>
<li>
<p><code>&lt;li&gt;</code>: отдельный элемент списка. Внешний тег <code>&lt;ul&gt;</code> или <code>&lt;ol&gt;</code> устанавливает тип списка&#8201;&#8212;&#8201;маркированный или нумерованный.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="html"><span class="nt">&lt;ol&gt;</span>Нумерованый список
    <span class="nt">&lt;li&gt;</span>первый<span class="nt">&lt;/li&gt;</span>
    <span class="nt">&lt;li&gt;</span>второй<span class="nt">&lt;/li&gt;</span>
    <span class="nt">&lt;li&gt;</span>третий<span class="nt">&lt;/li&gt;</span>
<span class="nt">&lt;/ol&gt;</span>

<span class="nt">&lt;ul&gt;</span>Маркированный список
    <span class="nt">&lt;li&gt;</span>первый<span class="nt">&lt;/li&gt;</span>
    <span class="nt">&lt;li&gt;</span>второй<span class="nt">&lt;/li&gt;</span>
    <span class="nt">&lt;li&gt;</span>третий<span class="nt">&lt;/li&gt;</span>
<span class="nt">&lt;/ul&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><a href="#Основы-html">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_для_чего_предназначены_теги_dl_dt_dd">5.11. Для чего предназначены теги <code>&lt;dl&gt;</code>, <code>&lt;dt&gt;</code>, <code>&lt;dd&gt;</code>?</h3>
<div class="paragraph">
<p>Теги <code>&lt;dl&gt;</code>, <code>&lt;dt&gt;</code>, <code>&lt;dd&gt;</code> предназначены для создания списка определений.</p>
</div>
<div class="paragraph">
<p>Каждый такой список начинается с контейнера <code>&lt;dl&gt;</code>, куда входит тег <code>&lt;dt&gt;</code> создающий термин и тег <code>&lt;dd&gt;</code> задающий определение этого термина. Закрывающий тег <code>&lt;/dd&gt;</code> не обязателен, поскольку следующий тег сообщает о завершении предыдущего элемента. Тем не менее, хорошим стилем является закрывать все теги.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="html"><span class="nt">&lt;dl&gt;</span>Список определений
    <span class="nt">&lt;dt&gt;</span>Термин<span class="nt">&lt;/dt&gt;</span>
    <span class="nt">&lt;dd&gt;</span>Определение<span class="nt">&lt;/dd&gt;</span>
<span class="nt">&lt;/dl&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><a href="#Основы-html">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_для_чего_предназначены_теги_tr_th_td">5.12. Для чего предназначены теги <code>&lt;tr&gt;</code>, <code>&lt;th&gt;</code>, <code>&lt;td&gt;</code>?</h3>
<div class="paragraph">
<p><code>&lt;tr&gt;</code>: служит контейнером для создания строки таблицы. Каждая ячейка в пределах такой строки может задаваться с помощью тега <code>&lt;th&gt;</code> или <code>&lt;td&gt;</code>.
<code>&lt;th&gt;</code>: предназначен для создания одной ячейки заголовка таблицы.
<code>&lt;td&gt;</code>: предназначен для создания одной ячейки таблицы.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="html"><span class="nt">&lt;table&gt;</span>
    <span class="nt">&lt;tr&gt;</span>
        <span class="nt">&lt;th&gt;</span>Заголовок<span class="nt">&lt;/td&gt;</span>
    <span class="nt">&lt;/tr&gt;</span>
    <span class="nt">&lt;tr&gt;</span>
        <span class="nt">&lt;td&gt;</span>Строка<span class="nt">&lt;/td&gt;</span>
    <span class="nt">&lt;/tr&gt;</span>
<span class="nt">&lt;/table&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><a href="#Основы-html">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_обязательно_ли_писать_атрибут_alt_в_теге_img">5.13. Обязательно ли писать атрибут <code>alt</code> в теге <code>&lt;img&gt;</code>?</h3>
<div class="paragraph">
<p>Да, писать его обязательно.</p>
</div>
<div class="paragraph">
<p>Атрибут <code>alt</code> устанавливает альтернативный текст для изображений. Такой текст позволяет получить текстовую информацию о рисунке при отключенной в браузере загрузке изображений. Поскольку загрузка изображений происходит после получения браузером информации о нем, то замещающий рисунок текст появляется раньше. А уже по мере загрузки текст будет сменяться изображением.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="html"><span class="nt">&lt;img</span> <span class="na">src=</span><span class="s">"forest.jpg"</span> <span class="na">alt=</span><span class="s">"Лес"</span><span class="nt">&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><a href="#Основы-html">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_в_каком_регистре_лучше_писать_html_код">5.14. В каком регистре лучше писать HTML-код?</h3>
<div class="paragraph">
<p>Весь HTML-код рекомендуется писать в нижнем регистре: это относится к названиям элементов, названиям атрибутов, значениям атрибутов (кроме текста/<code>CDATA</code>), селекторам, свойствам и их значениям (кроме текста).</p>
</div>
<div class="paragraph">
<p>Не рекомендуется</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="html"><span class="nt">&lt;A</span> <span class="na">HREF=</span><span class="s">"/"</span><span class="nt">&gt;</span>Домой<span class="nt">&lt;/A&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Рекомендуется</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="html"><span class="nt">&lt;img</span> <span class="na">src=</span><span class="s">"forest.jpg"</span> <span class="na">alt=</span><span class="s">"Лес"</span><span class="nt">&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><a href="#Основы-html">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_что_такое_мнемоника_entity">5.15. Что такое «мнемоника (entity)»?</h3>
<div class="paragraph">
<p><strong>Мнемоника (entity)</strong> - это конструкция из символа <code>&amp;</code> и буквенного (или цифрового кода) после нее, предназначенная для замещения символов, которые запрещены для использования в HTML в «явном виде».</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>&num; имеет мнемонику <code>&amp;num;</code></p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p><a href="#Основы-html">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_источники_5">5.16. Источники</h3>
<div class="ulist">
<ul>
<li>
<p><a href="http://htmlbook.ru/html/">htmlbook</a></p>
</li>
<li>
<p><a href="https://habrahabr.ru/post/143452/">Хабрахабр</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a href="README.html">Вопросы для собеседования</a></p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_потоки_вводавывода_в_java">6. Потоки ввода/вывода в Java</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="#В-чём-заключается-разница-между-io-и-nio">В чём заключается разница между IO и NIO?</a></p>
</li>
<li>
<p><a href="#Какие-особенности-nio-вы-знаете">Какие особенности NIO вы знаете?</a></p>
</li>
<li>
<p><a href="#Что-такое-каналы">Что такое <em>«каналы»</em>?</a></p>
</li>
<li>
<p><a href="#Какие-существуют-виды-потоков-вводавывода">Какие существуют виды потоков ввода/вывода?</a></p>
</li>
<li>
<p><a href="#Назовите-основные-классы-потоков-вводавывода">Назовите основные классы потоков ввода/вывода.</a></p>
</li>
<li>
<p><a href="#В-каких-пакетах-расположены-классы-потоков-вводавывода">В каких пакетах расположены классы потоков ввода/вывода?</a></p>
</li>
<li>
<p><a href="#Какие-подклассы-класса-inputstream-вы-знаете-для-чего-они-предназначены">Какие подклассы класса <code>InputStream</code> вы знаете, для чего они предназначены?</a></p>
</li>
<li>
<p><a href="#Для-чего-используется-pushbackinputstream">Для чего используется <code>PushbackInputStream</code>?</a></p>
</li>
<li>
<p><a href="#Для-чего-используется-sequenceinputstream">Для чего используется <code>SequenceInputStream</code>?</a></p>
</li>
<li>
<p><a href="#Какой-класс-позволяет-читать-данные-из-входного-байтового-потока-в-формате-примитивных-типов-данных">Какой класс позволяет читать данные из входного байтового потока в формате примитивных типов данных?</a></p>
</li>
<li>
<p><a href="#Какие-подклассы-класса-outputstream-вы-знаете-для-чего-они-предназначены">Какие подклассы класса <code>OutputStream</code> вы знаете, для чего они предназначены?</a></p>
</li>
<li>
<p><a href="#Какие-подклассы-класса-reader-вы-знаете-для-чего-они-предназначены">Какие подклассы класса <code>Reader</code> вы знаете, для чего они предназначены?</a></p>
</li>
<li>
<p><a href="#Какие-подклассы-класса-writer-вы-знаете-для-чего-они-предназначены">Какие подклассы класса <code>Writer</code> вы знаете, для чего они предназначены?</a></p>
</li>
<li>
<p><a href="#В-чем-отличие-класса-printwriter-от-printstream">В чем отличие класса <code>PrintWriter</code> от <code>PrintStream</code>?</a></p>
</li>
<li>
<p><a href="#Чем-отличаются-и-что-общего-у-inputstream-outputstream-reader-writer">Чем отличаются и что общего у <code>InputStream</code>, <code>OutputStream</code>, <code>Reader</code>, <code>Writer</code>?</a></p>
</li>
<li>
<p><a href="#Какие-классы-позволяют-преобразовать-байтовые-потоки-в-символьные-и-обратно">Какие классы позволяют преобразовать байтовые потоки в символьные и обратно?</a></p>
</li>
<li>
<p><a href="#Какие-классы-позволяют-ускорить-чтениезапись-за-счет-использования-буфера">Какие классы позволяют ускорить чтение/запись за счет использования буфера?</a></p>
</li>
<li>
<p><a href="#Какой-класс-предназначен-для-работы-с-элементами-файловой-системы">Какой класс предназначен для работы с элементами файловой системы?</a></p>
</li>
<li>
<p><a href="#Какие-методы-класса-file-вы-знаете">Какие методы класса <code>File</code> вы знаете?</a></p>
</li>
<li>
<p><a href="#Что-вы-знаете-об-интерфейсе-filefilter">Что вы знаете об интерфейсе <code>FileFilter</code>?</a></p>
</li>
<li>
<p><a href="#Как-выбрать-все-элементы-определенного-каталога-по-критерию-например-с-определенным-расширением">Как выбрать все элементы определенного каталога по критерию (например, с определенным расширением)?</a></p>
</li>
<li>
<p><a href="#Что-вы-знаете-о-randomaccessfile">Что вы знаете о <code>RandomAccessFile</code>?</a></p>
</li>
<li>
<p><a href="#Какие-режимы-доступа-к-файлу-есть-у-randomaccessfile">Какие режимы доступа к файлу есть у <code>RandomAccessFile</code>?</a></p>
</li>
<li>
<p><a href="#Какие-классы-поддерживают-чтение-и-запись-потоков-в-компрессированном-формате">Какие классы поддерживают чтение и запись потоков в компрессированном формате?</a></p>
</li>
<li>
<p><a href="#Существует-ли-возможность-перенаправить-потоки-стандартного-вводавывода">Существует ли возможность перенаправить потоки стандартного ввода/вывода?</a></p>
</li>
<li>
<p><a href="#Какой-символ-является-разделителем-при-указании-пути-в-файловой-системе">Какой символ является разделителем при указании пути в файловой системе?</a></p>
</li>
<li>
<p><a href="#Что-такое-абсолютный-путь-и-относительный-путь">Что такое <em>«абсолютный путь»</em> и <em>«относительный путь»</em>?</a></p>
</li>
<li>
<p><a href="#Что-такое-символьная-ссылка">Что такое <em>«символьная ссылка»</em>?</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a href="#Потоки-вводавывода-в-java">к оглавлению</a></p>
</div>
<div class="sect2">
<h3 id="_в_чём_заключается_разница_между_io_и_nio">6.1. В чём заключается разница между IO и NIO?</h3>
<div class="ulist">
<ul>
<li>
<p>Java IO (input-output) является потокоориентированным, а Java NIO (new/non-blocking io)&#8201;&#8212;&#8201;буфер-ориентированным. Потокоориентированный ввод/вывод подразумевает чтение/запись из потока/в поток одного или нескольких байт в единицу времени поочередно. Данная информация нигде не кэшируются. Таким образом, невозможно произвольно двигаться по потоку данных вперед или назад. В Java NIO данные сначала считываются в буфер, что дает больше гибкости при обработке данных.</p>
</li>
<li>
<p>Потоки ввода/вывода в Java IO являются блокирующими. Это значит, что когда в потоке выполнения вызывается <code>read()</code> или <code>write()</code> метод любого класса из пакета <code>java.io.*</code>, происходит блокировка до тех пор, пока данные не будут считаны или записаны. Поток выполнения в данный момент не может делать ничего другого. Неблокирующий режим Java NIO позволяет запрашивать считанные данные из канала (channel) и получать только то, что доступно на данный момент, или вообще ничего, если доступных данных пока нет. Вместо того, чтобы оставаться заблокированным пока данные не станут доступными для считывания, поток выполнения может заняться чем-то другим. Тоже самое справедливо и для неблокирующего вывода. Поток выполнения может запросить запись в канал некоторых данных, но не дожидаться при этом пока они не будут полностью записаны.</p>
</li>
<li>
<p>В Java NIO имеются селекторы, которые позволяют одному потоку выполнения мониторить несколько каналов ввода. Т.е. существует возможность зарегистрировать несколько каналов с селектором, а потом использовать один поток выполнения для обслуживания каналов, имеющих доступные для обработки данные, или для выбора каналов, готовых для записи.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a href="#Потоки-вводавывода-в-java">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_какие_особенности_nio_вы_знаете">6.2. Какие особенности NIO вы знаете?</h3>
<div class="ulist">
<ul>
<li>
<p><strong>Каналы и селекторы</strong>: NIO поддерживает различные типы каналов. Канал является абстракцией объектов более низкого уровня файловой системы (например, отображенные в памяти файлы и блокировки файлов), что позволяет передавать данные с более высокой скоростью. Каналы не блокируются и поэтому Java предоставляет еще такие инструменты, как селектор, который позволяет выбрать готовый канал для передачи данных, и сокет, который является инструментом для блокировки.</p>
</li>
<li>
<p><strong>Буферы</strong>: имеет буферизация для всех классов-обёрток примитивов (кроме Boolean). Появился абстрактный класс Buffer, который предоставляет такие операции, как clear, flip, mark и т.д. Его подклассы предоставляют методы для получения и установки данных.</p>
</li>
<li>
<p><strong>Кодировки</strong>: появились кодеры и декодеры для отображения байт и символов Unicode.
<a href="#Потоки-вводавывода-в-java">к оглавлению</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_что_такое_каналы">6.3. Что такое <em>«каналы»</em>?</h3>
<div class="paragraph">
<p>Каналы (channels)&#8201;&#8212;&#8201;это логические (не физические) порталы, абстракции объектов более низкого уровня файловой системы (например, отображенные в памяти файлы и блокировки файлов), через которые осуществляется ввод/вывод данных, а буферы являются источниками или приёмниками этих переданных данных. При организации вывода, данные, которые необходимо отправить, помещаются в буфер, который затем передается в канал. При вводе, данные из канала помещаются в заранее предоставленный буфер.</p>
</div>
<div class="paragraph">
<p>Каналы напоминают трубопроводы, по которым эффективно транспортируются данные между буферами байтов и сущностями по ту сторону каналов. Каналы&#8201;&#8212;&#8201;это шлюзы, которые позволяют получить доступ к сервисам ввода/вывода операционной системы с минимальными накладными расходами, а буферы&#8201;&#8212;&#8201;внутренние конечные точки этих шлюзов, используемые для передачи и приема данных.</p>
</div>
<div class="paragraph">
<p><a href="#Потоки-вводавывода-в-java">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_какие_существуют_виды_потоков_вводавывода">6.4. Какие существуют виды потоков ввода/вывода?</h3>

</div>
<div class="sect2">
<h3 id="_назовите_основные_классы_потоков_вводавывода">6.5. Назовите основные классы потоков ввода/вывода.</h3>
<div class="paragraph">
<p>Разделяют два вида потоков ввода/вывода:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>байтовые</strong> - <code>java.io.InputStream</code>, <code>java.io.OutputStream</code>;</p>
</li>
<li>
<p><strong>символьные</strong> - <code>java.io.Reader</code>, <code>java.io.Writer</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a href="#Потоки-вводавывода-в-java">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_в_каких_пакетах_расположены_классы_потоков_вводавывода">6.6. В каких пакетах расположены классы потоков ввода/вывода?</h3>
<div class="paragraph">
<p><code>java.io</code>, <code>java.nio</code>. Для работы с потоками компрессированных данных используются классы из пакета <code>java.util.zip</code></p>
</div>
<div class="paragraph">
<p><a href="#Потоки-вводавывода-в-java">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_какие_подклассы_класса_inputstream_вы_знаете_для_чего_они_предназначены">6.7. Какие подклассы класса <code>InputStream</code> вы знаете, для чего они предназначены?</h3>
<div class="ulist">
<ul>
<li>
<p><code>InputStream</code> - абстрактный класс, описывающий поток ввода;</p>
</li>
<li>
<p><code>BufferedInputStream</code> - буферизованный входной поток;</p>
</li>
<li>
<p><code>ByteArrayInputStream</code> позволяет использовать буфер в памяти (массив байтов) в качестве источника данных для входного потока;</p>
</li>
<li>
<p><code>DataInputStream</code> - входной поток для байтовых данных, включающий методы для чтения стандартных типов данных Java;</p>
</li>
<li>
<p><code>FileInputStream</code> - входной поток для чтения информации из файла;</p>
</li>
<li>
<p><code>FilterInputStream</code> - абстрактный класс, предоставляющий интерфейс для классов-надстроек, которые добавляют к существующим потокам полезные свойства;</p>
</li>
<li>
<p><code>ObjectInputStream</code> - входной поток для объектов;</p>
</li>
<li>
<p><code>StringBufferInputStream</code> превращает строку (<code>String</code>) во входной поток данных <code>InputStream</code>;</p>
</li>
<li>
<p><code>PipedInputStream</code> реализует понятие входного канала;</p>
</li>
<li>
<p><code>PushbackInputStream</code> - разновидность буферизации, обеспечивающая чтение байта с последующим его возвратом в поток, позволяет «заглянуть» во входной поток и увидеть, что оттуда поступит в следующий момент, не извлекая информации.</p>
</li>
<li>
<p><code>SequenceInputStream</code> используется для слияния двух или более потоков <code>InputStream</code> в единый.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a href="#Потоки-вводавывода-в-java">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_для_чего_используется_pushbackinputstream">6.8. Для чего используется <code>PushbackInputStream</code>?</h3>
<div class="paragraph">
<p>Разновидность буферизации, обеспечивающая чтение байта с последующим его возвратом в поток. Класс <code>PushbackInputStream</code> представляет механизм «заглянуть» во входной поток и увидеть, что оттуда поступит в следующий момент, не извлекая информации.</p>
</div>
<div class="paragraph">
<p>У класса есть дополнительный метод unread().</p>
</div>
<div class="paragraph">
<p><a href="#Потоки-вводавывода-в-java">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_для_чего_используется_sequenceinputstream">6.9. Для чего используется <code>SequenceInputStream</code>?</h3>
<div class="paragraph">
<p>Класс <code>SequenceInputStream</code> позволяет сливать вместе несколько экземпляров класса <code>InputStream</code>. Конструктор принимает в качестве аргумента либо пару объектов класса <code>InputStream</code>, либо интерфейс <code>Enumeration</code>.</p>
</div>
<div class="paragraph">
<p>Во время работы класс выполняет запросы на чтение из первого объекта класса <code>InputStream</code> и до конца, а затем переключается на второй. При использовании интерфейса работа продолжится по всем объектам класса <code>InputStream</code>. По достижении конца, связанный с ним поток закрывается. Закрытие потока, созданного объектом класса <code>SequenceInputStream</code>, приводит к закрытию всех открытых потоков.</p>
</div>
<div class="paragraph">
<p><a href="#Потоки-вводавывода-в-java">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_какой_класс_позволяет_читать_данные_из_входного_байтового_потока_в_формате_примитивных_типов_данных">6.10. Какой класс позволяет читать данные из входного байтового потока в формате примитивных типов данных?</h3>
<div class="paragraph">
<p>Класс <code>DataInputStream</code> представляет поток ввода и предназначен для записи данных примитивных типов, таких, как <code>int</code>, <code>double</code> и т.д. Для каждого примитивного типа определен свой метод для считывания:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>boolean readBoolean()</code>: считывает из потока булевое однобайтовое значение</p>
</li>
<li>
<p><code>byte readByte()</code>: считывает из потока 1 байт</p>
</li>
<li>
<p><code>char readChar()</code>: считывает из потока значение <code>char</code></p>
</li>
<li>
<p><code>double readDouble()</code>: считывает из потока 8-байтовое значение <code>double</code></p>
</li>
<li>
<p><code>float readFloat()</code>: считывает из потока 4-байтовое значение <code>float</code></p>
</li>
<li>
<p><code>int readInt()</code>: считывает из потока целочисленное значение <code>int</code></p>
</li>
<li>
<p><code>long readLong()</code>: считывает из потока значение <code>long</code></p>
</li>
<li>
<p><code>short readShort()</code>: считывает значение <code>short</code></p>
</li>
<li>
<p><code>String readUTF()</code>: считывает из потока строку в кодировке UTF-8</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a href="#Потоки-вводавывода-в-java">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_какие_подклассы_класса_outputstream_вы_знаете_для_чего_они_предназначены">6.11. Какие подклассы класса <code>OutputStream</code> вы знаете, для чего они предназначены?</h3>
<div class="ulist">
<ul>
<li>
<p><code>OutputStream</code> - это абстрактный класс, определяющий потоковый байтовый вывод;</p>
</li>
<li>
<p><code>BufferedOutputStream</code> - буферизированный выходной поток;</p>
</li>
<li>
<p><code>ByteArrayOutputStream</code> - все данные, посылаемые в этот поток, размещаются в предварительно созданном буфере;</p>
</li>
<li>
<p><code>DataOutputStream</code> - выходной поток байт, включающий методы для записи стандартных типов данных Java;</p>
</li>
<li>
<p><code>FileOutputStream</code> - запись данных в файл на физическом носителе;</p>
</li>
<li>
<p><code>FilterOutputStream</code> - абстрактный класс, предоставляющий интерфейс для классов-надстроек, которые добавляют к существующим потокам полезные свойства;</p>
</li>
<li>
<p><code>PrintStream</code> - выходной поток, включающий методы <code>print()</code> и <code>println()</code>;</p>
</li>
<li>
<p><code>ObjectOutputStream</code> - выходной поток для записи объектов;</p>
</li>
<li>
<p><code>PipedOutputStream</code> реализует понятие выходного канала.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a href="#Потоки-вводавывода-в-java">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_какие_подклассы_класса_reader_вы_знаете_для_чего_они_предназначены">6.12. Какие подклассы класса <code>Reader</code> вы знаете, для чего они предназначены?</h3>
<div class="ulist">
<ul>
<li>
<p><code>Reader</code> - абстрактный класс, описывающий символьный ввод;</p>
</li>
<li>
<p><code>BufferedReader</code> - буферизованный входной символьный поток;</p>
</li>
<li>
<p><code>CharArrayReader</code> - входной поток, который читает из символьного массива;</p>
</li>
<li>
<p><code>FileReader</code> - входной поток, читающий файл;</p>
</li>
<li>
<p><code>FilterReader</code> - абстрактный класс, предоставляющий интерфейс для классов-надстроек;</p>
</li>
<li>
<p><code>InputStreamReader</code>- входной поток, транслирующий байты в символы;</p>
</li>
<li>
<p><code>LineNumberReader</code> - входной поток, подсчитывающий строки;</p>
</li>
<li>
<p><code>PipedReader</code> - входной канал;</p>
</li>
<li>
<p><code>PushbackReader</code> - входной поток, позволяющий возвращать символы обратно в поток;</p>
</li>
<li>
<p><code>StringReader</code> - входной поток, читающий из строки.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a href="#Потоки-вводавывода-в-java">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_какие_подклассы_класса_writer_вы_знаете_для_чего_они_предназначены">6.13. Какие подклассы класса <code>Writer</code> вы знаете, для чего они предназначены?</h3>
<div class="ulist">
<ul>
<li>
<p><code>Writer</code> - абстрактный класс, описывающий символьный вывод;</p>
</li>
<li>
<p><code>BufferedWriter</code> - буферизованный выходной символьный поток;</p>
</li>
<li>
<p><code>CharArrayWriter</code> - выходной поток, который пишет в символьный массив;</p>
</li>
<li>
<p><code>FileWriter</code> - выходной поток, пишущий в файл;</p>
</li>
<li>
<p><code>FilterWriter</code> - абстрактный класс, предоставляющий интерфейс для классов-надстроек;</p>
</li>
<li>
<p><code>OutputStreamWriter</code> - выходной поток, транслирующий байты в символы;</p>
</li>
<li>
<p><code>PipedWriter</code> - выходной канал;</p>
</li>
<li>
<p><code>PrintWriter</code> - выходной поток символов, включающий методы <code>print()</code> и <code>println()</code>;</p>
</li>
<li>
<p><code>StringWriter</code> - выходной поток, пишущий в строку;</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a href="#Потоки-вводавывода-в-java">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_в_чем_отличие_класса_printwriter_от_printstream">6.14. В чем отличие класса <code>PrintWriter</code> от <code>PrintStream</code>?</h3>
<div class="paragraph">
<p>Прежде всего, в классе <code>PrintWriter</code> применен усовершенствованный способ работы с символами Unicode и другой механизм буферизации вывода: в классе PrintStream буфер вывода сбрасывался всякий раз, когда вызывался метод <code>print()</code> или <code>println()</code>, а при использовании класса <code>PrintWriter</code> существует возможность отказаться от автоматического сброса буферов, выполняя его явным образом при помощи метода <code>flush()</code>.</p>
</div>
<div class="paragraph">
<p>Кроме того, методы класса <code>PrintWriter</code> никогда не создают исключений. Для проверки ошибок необходимо явно вызвать метод <code>checkError()</code>.</p>
</div>
<div class="paragraph">
<p><a href="#Потоки-вводавывода-в-java">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_чем_отличаются_и_что_общего_у_inputstream_outputstream_reader_writer">6.15. Чем отличаются и что общего у <code>InputStream</code>, <code>OutputStream</code>, <code>Reader</code>, <code>Writer</code>?</h3>
<div class="ulist">
<ul>
<li>
<p><code>InputStream</code> и его наследники - совокупность для получения байтовых данных из различных источников;</p>
</li>
<li>
<p><code>OutputStream</code> и его наследники - набор классов, определяющих потоковый байтовый вывод;</p>
</li>
<li>
<p><code>Reader</code> и его наследники определяют потоковый ввод символов Unicode;</p>
</li>
<li>
<p><code>Writer</code> и его наследники определяют потоковый вывод символов Unicode.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a href="#Потоки-вводавывода-в-java">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_какие_классы_позволяют_преобразовать_байтовые_потоки_в_символьные_и_обратно">6.16. Какие классы позволяют преобразовать байтовые потоки в символьные и обратно?</h3>
<div class="ulist">
<ul>
<li>
<p><code>OutputStreamWriter</code>&#8201;&#8212;&#8201;«мост» между классом <code>OutputStream</code> и классом <code>Writer</code>. Символы, записанные в поток, преобразовываются в байты.</p>
</li>
<li>
<p><code>InputStreamReader</code>&#8201;&#8212;&#8201;аналог для чтения. При помощи методов класса <code>Reader</code> читаются байты из потока <code>InputStream</code> и далее преобразуются в символы.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a href="#Потоки-вводавывода-в-java">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_какие_классы_позволяют_ускорить_чтениезапись_за_счет_использования_буфера">6.17. Какие классы позволяют ускорить чтение/запись за счет использования буфера?</h3>
<div class="ulist">
<ul>
<li>
<p><code>BufferedInputStream(InputStream in)</code>/<code>BufferedInputStream(InputStream in, int size)</code>,</p>
</li>
<li>
<p><code>BufferedOutputStream(OutputStream out)</code>/<code>BufferedOutputStream(OutputStream out, int size)</code>,</p>
</li>
<li>
<p><code>BufferedReader(Reader r)</code>/<code>BufferedReader(Reader in, int sz)</code>,</p>
</li>
<li>
<p><code>BufferedWriter(Writer out)</code>/<code>BufferedWriter(Writer out, int sz)</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a href="#Потоки-вводавывода-в-java">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_какой_класс_предназначен_для_работы_с_элементами_файловой_системы">6.18. Какой класс предназначен для работы с элементами файловой системы?</h3>
<div class="paragraph">
<p><code>File</code> работает непосредственно с файлами и каталогами. Данный класс позволяет создавать новые элементы и получать информацию существующих: размер, права доступа, время и дату создания, путь к родительскому каталогу.</p>
</div>
<div class="paragraph">
<p><a href="#Потоки-вводавывода-в-java">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_какие_методы_класса_file_вы_знаете">6.19. Какие методы класса <code>File</code> вы знаете?</h3>
<div class="paragraph">
<p>Наиболее используемые методы класса <code>File</code>:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>boolean createNewFile()</code>: делает попытку создать новый файл;</p>
</li>
<li>
<p><code>boolean delete()</code>: делает попытку удалить каталог или файл;</p>
</li>
<li>
<p><code>boolean mkdir()</code>: делает попытку создать новый каталог;</p>
</li>
<li>
<p><code>boolean renameTo(File dest)</code>: делает попытку переименовать файл или каталог;</p>
</li>
<li>
<p><code>boolean exists()</code>: проверяет, существует ли файл или каталог;</p>
</li>
<li>
<p><code>String getAbsolutePath()</code>: возвращает абсолютный путь для пути, переданного в конструктор объекта;</p>
</li>
<li>
<p><code>String getName()</code>: возвращает краткое имя файла или каталога;</p>
</li>
<li>
<p><code>String getParent()</code>: возвращает имя родительского каталога;</p>
</li>
<li>
<p><code>boolean isDirectory()</code>: возвращает значение <code>true</code>, если по указанному пути располагается каталог;</p>
</li>
<li>
<p><code>boolean isFile()</code>: возвращает значение <code>true</code>, если по указанному пути находится файл;</p>
</li>
<li>
<p><code>boolean isHidden()</code>: возвращает значение <code>true</code>, если каталог или файл являются скрытыми;</p>
</li>
<li>
<p><code>long length()</code>: возвращает размер файла в байтах;</p>
</li>
<li>
<p><code>long lastModified()</code>: возвращает время последнего изменения файла или каталога;</p>
</li>
<li>
<p><code>String[] list()</code>: возвращает массив файлов и подкаталогов, которые находятся в определенном каталоге;</p>
</li>
<li>
<p><code>File[] listFiles()</code>: возвращает массив файлов и подкаталогов, которые находятся в определенном каталоге.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a href="#Потоки-вводавывода-в-java">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_что_вы_знаете_об_интерфейсе_filefilter">6.20. Что вы знаете об интерфейсе <code>FileFilter</code>?</h3>
<div class="paragraph">
<p>Интерфейс <code>FileFilter</code> применяется для проверки, попадает ли объект <code>File</code> под некоторое условие. Этот интерфейс содержит единственный метод <code>boolean accept(File pathName)</code>. Этот метод необходимо переопределить и реализовать. Например:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">accept</span><span class="o">(</span><span class="kd">final</span> <span class="nc">File</span> <span class="n">file</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">file</span><span class="o">.</span><span class="na">isExists</span><span class="o">()</span> <span class="o">&amp;&amp;</span> <span class="n">file</span><span class="o">.</span><span class="na">isDirectory</span><span class="o">();</span>
<span class="o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><a href="#Потоки-вводавывода-в-java">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_как_выбрать_все_элементы_определенного_каталога_по_критерию_например_с_определенным_расширением">6.21. Как выбрать все элементы определенного каталога по критерию (например, с определенным расширением)?</h3>
<div class="paragraph">
<p>Метод <code>File.listFiles()</code> возвращает массив объектов <code>File</code>, содержащихся в каталоге. Метод может принимать в качестве параметра объект класса, реализующего <code>FileFilter</code>. Это позволяет включить в список только те элементы, для которых метод <code>accept</code> возвращает <code>true</code> (критерием может быть длина имени файла или его расширение).</p>
</div>
<div class="paragraph">
<p><a href="#Потоки-вводавывода-в-java">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_что_вы_знаете_о_randomaccessfile">6.22. Что вы знаете о <code>RandomAccessFile</code>?</h3>
<div class="paragraph">
<p>Класс <code>java.io.RandomAccessFile</code> обеспечивает чтение и запись данных в произвольном месте файла. Он не является частью иерархии <code>InputStream</code> или <code>OutputStream</code>. Это полностью отдельный класс, имеющий свои собственные (в большинстве своем <em>native</em>) методы. Объяснением этого может быть то, что <code>RandomAccessFile</code> имеет во многом отличающееся поведение по сравнению с остальными классами ввода/вывода так как позволяет, в пределах файла, перемещаться вперед и назад.</p>
</div>
<div class="paragraph">
<p><code>RandomAccessFile</code> имеет такие специфические методы как:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>getFilePointer()</code> для определения текущего местоположения в файле;</p>
</li>
<li>
<p><code>seek()</code> для перемещения на новую позицию в файле;</p>
</li>
<li>
<p><code>length()</code> для выяснения размера файла;</p>
</li>
<li>
<p><code>setLength()</code> для установки размера файла;</p>
</li>
<li>
<p><code>skipBytes()</code> для того, чтобы попытаться пропустить определённое число байт;</p>
</li>
<li>
<p><code>getChannel()</code> для работы с уникальным файловым каналом, ассоциированным с заданным файлом;</p>
</li>
<li>
<p>методы для выполнения обычного и форматированного вывода из файла (<code>read()</code>, <code>readInt()</code>, <code>readLine()</code>, <code>readUTF()</code> и т.п.);</p>
</li>
<li>
<p>методы для обычной или форматированной записи в файл с прямым доступом (<code>write()</code>, <code>writeBoolean()</code>, <code>writeByte()</code> и т.п.).</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Так же следует отметить, что конструкторы <code>RandomAccessFile</code> требуют второй аргумент, указывающий необходимый режим доступа к файлу - только чтение (<code>"r"</code>), чтение и запись (<code>"rw"</code>) или иную их разновидность.</p>
</div>
<div class="paragraph">
<p><a href="#Потоки-вводавывода-в-java">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_какие_режимы_доступа_к_файлу_есть_у_randomaccessfile">6.23. Какие режимы доступа к файлу есть у <code>RandomAccessFile</code>?</h3>
<div class="ulist">
<ul>
<li>
<p><code>"r"</code> открывает файл только для чтения. Запуск любых методов записи данных приведет к выбросу исключения <code>IOException</code>.</p>
</li>
<li>
<p><code>"rw"</code> открывает файл для чтения и записи. Если файл еще не создан, то осуществляется попытка создать его.</p>
</li>
<li>
<p><code>"rws"</code> открывает файл для чтения и записи подобно <code>"rw"</code>, но требует от системы при каждом изменении содержимого файла или метаданных синхронно записывать эти изменения на физический носитель.</p>
</li>
<li>
<p><code>"rwd"</code> открывает файл для чтения и записи подобно <code>"rws"</code>, но требует от системы синхронно записывать изменения на физический носитель только при каждом изменении содержимого файла. Если изменяются метаданные, синхронная запись не требуется.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a href="#Потоки-вводавывода-в-java">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_какие_классы_поддерживают_чтение_и_запись_потоков_в_компрессированном_формате">6.24. Какие классы поддерживают чтение и запись потоков в компрессированном формате?</h3>
<div class="ulist">
<ul>
<li>
<p><code>DeflaterOutputStream</code> - компрессия данных в формате deflate.</p>
</li>
<li>
<p><code>Deflater</code> - компрессия данных в формат ZLIB</p>
</li>
<li>
<p><code>ZipOutputStream</code> - потомок <code>DeflaterOutputStream</code> для компрессии данных в формат Zip.</p>
</li>
<li>
<p><code>GZIPOutputStream</code> - потомок <code>DeflaterOutputStream</code> для компрессии данных в формат GZIP.</p>
</li>
<li>
<p><code>InflaterInputStream</code> - декомпрессия данных в формате deflate.</p>
</li>
<li>
<p><code>Inflater</code> - декомпрессия данных в формате ZLIB</p>
</li>
<li>
<p><code>ZipInputStream</code> - потомок <code>InflaterInputStream</code> для декомпрессии данных в формате Zip.</p>
</li>
<li>
<p><code>GZIPInputStream</code> - потомок <code>InflaterInputStream</code> для декомпрессии данных в формате GZIP.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a href="#Потоки-вводавывода-в-java">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_существует_ли_возможность_перенаправить_потоки_стандартного_вводавывода">6.25. Существует ли возможность перенаправить потоки стандартного ввода/вывода?</h3>
<div class="paragraph">
<p>Класс <code>System</code> позволяет вам перенаправлять стандартный ввод, вывод и поток вывода ошибок, используя простой вызов статического метода:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>setIn(InputStream)</code> - для ввода;</p>
</li>
<li>
<p><code>setOut(PrintStream)</code> - для вывода;</p>
</li>
<li>
<p><code>setErr(PrintStream)</code> - для вывода ошибок.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a href="#Потоки-вводавывода-в-java">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_какой_символ_является_разделителем_при_указании_пути_в_файловой_системе">6.26. Какой символ является разделителем при указании пути в файловой системе?</h3>
<div class="paragraph">
<p>Для различных операционных систем символ разделителя различается. Для Windows это <code>\</code>, для Linux - <code>/</code>.</p>
</div>
<div class="paragraph">
<p>В Java получить разделитель для текущей операционной системы можно через обращение к статическому полю <code>File.separator</code>.</p>
</div>
<div class="paragraph">
<p><a href="#Потоки-вводавывода-в-java">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_что_такое_абсолютный_путь_и_относительный_путь">6.27. Что такое <em>«абсолютный путь»</em> и <em>«относительный путь»</em>?</h3>
<div class="paragraph">
<p><strong>Абсолютный (полный) путь</strong>&#8201;&#8212;&#8201;это путь, который указывает на одно и то же место в файловой системе, вне зависимости от текущей рабочей директории или других обстоятельств. Полный путь всегда начинается с корневого каталога.</p>
</div>
<div class="paragraph">
<p><strong>Относительный путь</strong> представляет собой путь по отношению к текущему рабочему каталогу пользователя или активного приложения.</p>
</div>
<div class="paragraph">
<p><a href="#Потоки-вводавывода-в-java">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_что_такое_символьная_ссылка">6.28. Что такое <em>«символьная ссылка»</em>?</h3>
<div class="paragraph">
<p><strong>Символьная (символическая) ссылка</strong> (также «симлинк», Symbolic link)&#8201;&#8212;&#8201;специальный файл в файловой системе, в котором, вместо пользовательских данных, содержится путь к файлу, который должен быть открыт при попытке обратиться к данной ссылке (файлу). Целью ссылки может быть любой объект: например, другая ссылка, файл, каталог или даже несуществующий файл (в последнем случае, при попытке открыть его, должно выдаваться сообщение об отсутствии файла).</p>
</div>
<div class="paragraph">
<p>Символьные ссылки используются для более удобной организации структуры файлов на компьютере, так как:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>позволяют для одного файла или каталога иметь несколько имён и различных атрибутов;</p>
</li>
<li>
<p>свободны от некоторых ограничений, присущих жёстким ссылкам (последние действуют только в пределах одной файловой системы (одного раздела) и не могут ссылаться на каталоги).</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a href="#Потоки-вводавывода-в-java">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_источники_6">6.29. Источники</h3>
<div class="ulist">
<ul>
<li>
<p><a href="http://www.quizful.net/post/java-nio-tutorial">Quizful</a></p>
</li>
<li>
<p><a href="https://habrahabr.ru/post/235585/">Хабрахабр</a></p>
</li>
<li>
<p><a href="http://developer.alexanderklimov.ru/android/java/io.php">Освой программирование играючи</a></p>
</li>
<li>
<p><a href="http://metanit.com/java/tutorial/6.1.php">Metanit</a></p>
</li>
<li>
<p><a href="http://javastudy.ru/interview/input-output/">javastudy.ru</a></p>
</li>
<li>
<p><a href="http://iais.kemsu.ru/odocs/java/Chapter11.html">Bruce Eckel «Thinking in Java»</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a href="README.html">Вопросы для собеседования</a></p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_java_8">7. Java 8</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="#Какие-нововведения-появились-в-java-8-и-jdk-8">Какие нововведения, появились в Java 8 и JDK 8?</a></p>
</li>
<li>
<p><a href="#Что-такое-лямбда-Какова-структура-и-особенности-использования-лямбда-выражения">Что такое <em>«лямбда»</em>? Какова структура и особенности использования лямбда-выражения?</a></p>
</li>
<li>
<p><a href="#К-каким-переменным-есть-доступ-у-лямбда-выражений">К каким переменным есть доступ у лямбда-выражений?</a></p>
</li>
<li>
<p><a href="#Как-отсортировать-список-строк-с-помощью-лямбда-выражения">Как отсортировать список строк с помощью лямбда-выражения?</a></p>
</li>
<li>
<p><a href="#Что-такое-ссылка-на-метод">Что такое «ссылка на метод»?</a></p>
</li>
<li>
<p><a href="#Какие-виды-ссылок-на-методы-вы-знаете">Какие виды ссылок на методы вы знаете?</a></p>
</li>
<li>
<p><a href="#Объясните-выражение-systemoutprintln">Объясните выражение <code>System.out::println</code>.</a></p>
</li>
<li>
<p><a href="#Что-такое-функциональные-интерфейсы">Что такое «функциональные интерфейсы»?</a></p>
</li>
<li>
<p><a href="#Для-чего-нужны-функциональные-интерфейсы-functiontr-doublefunctionr-intfunctionr-и-longfunctionr">Для чего нужны функциональные интерфейсы <code>Function&lt;T,R&gt;</code>, <code>DoubleFunction&lt;R&gt;</code>, <code>IntFunction&lt;R&gt;</code> и <code>LongFunction&lt;R&gt;</code>?</a></p>
</li>
<li>
<p><a href="#Для-чего-нужны-функциональные-интерфейсы-unaryoperatort-doubleunaryoperator-intunaryoperator-и-longunaryoperator">Для чего нужны функциональные интерфейсы <code>UnaryOperator&lt;T&gt;</code>, <code>DoubleUnaryOperator</code>, <code>IntUnaryOperator</code> и <code>LongUnaryOperator</code>?</a></p>
</li>
<li>
<p><a href="#Для-чего-нужны-функциональные-интерфейсы-binaryoperatort-doublebinaryoperator-intbinaryoperator-и-longbinaryoperator">Для чего нужны функциональные интерфейсы <code>BinaryOperator&lt;T&gt;</code>, <code>DoubleBinaryOperator</code>, <code>IntBinaryOperator</code> и <code>LongBinaryOperator</code>?</a></p>
</li>
<li>
<p><a href="#Для-чего-нужны-функциональные-интерфейсы-predicatet-doublepredicate-intpredicate-и-longpredicate">Для чего нужны функциональные интерфейсы <code>Predicate&lt;T&gt;</code>, <code>DoublePredicate</code>, <code>IntPredicate</code> и <code>LongPredicate</code>?</a></p>
</li>
<li>
<p><a href="#Для-чего-нужны-функциональные-интерфейсы-consumert-doubleconsumer-intconsumer-и-longconsumer">Для чего нужны функциональные интерфейсы <code>Consumer&lt;T&gt;</code>, <code>DoubleConsumer</code>, <code>IntConsumer</code> и <code>LongConsumer</code>?</a></p>
</li>
<li>
<p><a href="Для-чего-нужны-функциональные-интерфейсы-suppliert&.html#8212;&#8203;booleansupplier-doublesupplier-intsupplier-и-longsupplier">Для чего нужны функциональные интерфейсы <code>Supplier&lt;T&gt;</code>,  <code>BooleanSupplier</code>, <code>DoubleSupplier</code>, <code>IntSupplier</code> и <code>LongSupplier</code>?</a></p>
</li>
<li>
<p><a href="#Для-чего-нужен-функциональный-интерфейс-biconsumertu">Для чего нужен функциональный интерфейс <code>BiConsumer&lt;T,U&gt;</code>?</a></p>
</li>
<li>
<p><a href="#Для-чего-нужен-функциональный-интерфейс-bifunctiontur">Для чего нужен функциональный интерфейс <code>BiFunction&lt;T,U,R&gt;</code>?</a></p>
</li>
<li>
<p><a href="#Для-чего-нужен-функциональный-интерфейс-bipredicatetu">Для чего нужен функциональный интерфейс <code>BiPredicate&lt;T,U&gt;</code>?</a></p>
</li>
<li>
<p><a href="#Для-чего-нужны-функциональные-интерфейсы-вида-tofunction">Для чего нужны функциональные интерфейсы вида <code>_To_Function</code>?</a></p>
</li>
<li>
<p><a href="#Для-чего-нужны-функциональные-интерфейсы-todoublebifunctiontu-tointbifunctiontu-и-tolongbifunctiontu">Для чего нужны функциональные интерфейсы <code>ToDoubleBiFunction&lt;T,U&gt;</code>, <code>ToIntBiFunction&lt;T,U&gt;</code> и <code>ToLongBiFunction&lt;T,U&gt;</code>?</a></p>
</li>
<li>
<p><a href="#Для-чего-нужны-функциональные-интерфейсы-todoublefunctiont-tointfunctiont-и-tolongfunctiont">Для чего нужны функциональные интерфейсы <code>ToDoubleFunction&lt;T&gt;</code>, <code>ToIntFunction&lt;T&gt;</code> и <code>ToLongFunction&lt;T&gt;</code>?</a></p>
</li>
<li>
<p><a href="#Для-чего-нужны-функциональные-интерфейсы-objdoubleconsumert-objintconsumert-и-objlongconsumert">Для чего нужны функциональные интерфейсы <code>ObjDoubleConsumer&lt;T&gt;</code>, <code>ObjIntConsumer&lt;T&gt;</code> и <code>ObjLongConsumer&lt;T&gt;</code>?</a></p>
</li>
<li>
<p><a href="#Что-такое-stringjoiner">Что такое <code>StringJoiner</code>?</a></p>
</li>
<li>
<p><a href="#Что-такое-default-методы-интрефейса">Что такое <code>default</code> методы интрефейса?</a></p>
</li>
<li>
<p><a href="#Как-вызывать-default-метод-интерфейса-в-реализующем-этот-интерфейс-классе">Как вызывать <code>default</code> метод интерфейса в реализующем этот интерфейс классе?</a></p>
</li>
<li>
<p><a href="#Что-такое-static-метод-интерфейса">Что такое <code>static</code> метод интерфейса?</a></p>
</li>
<li>
<p><a href="#Как-вызывать-static-метод-интерфейса">Как вызывать <code>static</code> метод интерфейса?</a></p>
</li>
<li>
<p><a href="#Что-такое-optional">Что такое <code>Optional</code>?</a></p>
</li>
<li>
<p><a href="#Что-такое-stream">Что такое <code>Stream</code>?</a></p>
</li>
<li>
<p><a href="#Какие-существуют-способы-создания-стрима">Какие существуют способы создания стрима?</a></p>
</li>
<li>
<p><a href="#В-чем-разница-между-collection-и-stream">В чем разница между <code>Collection</code> и <code>Stream</code>?</a></p>
</li>
<li>
<p><a href="#Для-чего-нужен-метод-collect-в-стримах">Для чего нужен метод <code>collect()</code> в стримах?</a></p>
</li>
<li>
<p><a href="#Для-чего-в-стримах-применяются-методы-foreach-и-foreachordered">Для чего в стримах применяются методы <code>forEach()</code> и <code>forEachOrdered()</code>?</a></p>
</li>
<li>
<p><a href="#Для-чего-в-стримах-предназначены-методы-map-и-maptoint-maptodouble-maptolong">Для чего в стримах предназначены методы <code>map()</code> и <code>mapToInt()</code>, <code>mapToDouble()</code>, <code>mapToLong()</code>?</a></p>
</li>
<li>
<p><a href="#Какова-цель-метода-filter-в-стримах">Какова цель метода <code>filter()</code> в стримах?</a></p>
</li>
<li>
<p><a href="#Для-чего-в-стримах-предназначен-метод-limit">Для чего в стримах предназначен метод <code>limit()</code>?</a></p>
</li>
<li>
<p><a href="#Для-чего-в-стримах-предназначен-метод-sorted">Для чего в стримах предназначен метод <code>sorted()</code>?</a></p>
</li>
<li>
<p><a href="#Для-чего-в-стримах-предназначены-методы-flatmap-flatmaptoint-flatmaptodouble-flatmaptolong">Для чего в стримах предназначены методы <code>flatMap()</code>, <code>flatMapToInt()</code>, <code>flatMapToDouble()</code>, <code>flatMapToLong()</code>?</a></p>
</li>
<li>
<p><a href="#Расскажите-о-параллельной-обработке-в-java-8">Расскажите о параллельной обработке в Java 8.</a></p>
</li>
<li>
<p><a href="#Какие-конечные-методы-работы-со-стримами-вы-знаете">Какие конечные методы работы со стримами вы знаете?</a></p>
</li>
<li>
<p><a href="#Какие-промежуточные-методы-работы-со-стримами-вы-знаете">Какие промежуточные методы работы со стримами вы знаете?</a></p>
</li>
<li>
<p><a href="#Как-вывести-на-экран-10-случайных-чисел-используя-foreach">Как вывести на экран 10 случайных чисел, используя <code>forEach()</code>?</a></p>
</li>
<li>
<p><a href="#Как-можно-вывести-на-экран-уникальные-квадраты-чисел-используя-метод-map">Как можно вывести на экран уникальные квадраты чисел используя метод <code>map()</code>?</a></p>
</li>
<li>
<p><a href="#Как-вывести-на-экран-количество-пустых-строк-с-помощью-метода-filter">Как вывести на экран количество пустых строк с помощью метода <code>filter()</code>?</a></p>
</li>
<li>
<p><a href="#Как-вывести-на-экран-10-случайных-чисел-в-порядке-возрастания">Как вывести на экран 10 случайных чисел в порядке возрастания?</a></p>
</li>
<li>
<p><a href="#Как-найти-максимальное-число-в-наборе">Как найти максимальное число в наборе?</a></p>
</li>
<li>
<p><a href="#Как-найти-минимальное-число-в-наборе">Как найти минимальное число в наборе?</a></p>
</li>
<li>
<p><a href="#Как-получить-сумму-всех-чисел-в-наборе">Как получить сумму всех чисел в наборе?</a></p>
</li>
<li>
<p><a href="#Как-получить-среднее-значение-всех-чисел">Как получить среднее значение всех чисел?</a></p>
</li>
<li>
<p><a href="#Какие-дополнительные-методы-для-работы-с-ассоциативными-массивами-maps-появились-в-java-8">Какие дополнительные методы для работы с ассоциативными массивами (maps) появились в Java 8?</a></p>
</li>
<li>
<p><a href="#Что-такое-localdatetime">Что такое <code>LocalDateTime</code>?</a></p>
</li>
<li>
<p><a href="#Что-такое-zoneddatetime">Что такое <code>ZonedDateTime</code>?</a></p>
</li>
<li>
<p><a href="#Как-получить-текущую-дату-с-использованием-date-time-api-из-java-8">Как получить текущую дату с использованием Date Time API из Java 8?</a></p>
</li>
<li>
<p><a href="#Как-добавить-1-неделю-1-месяц-1-год-10-лет-к-текущей-дате-с-использованием-date-time-api">Как добавить 1 неделю, 1 месяц, 1 год, 10 лет к текущей дате с использованием Date Time API?</a></p>
</li>
<li>
<p><a href="#Как-получить-следующий-вторник-используя-date-time-api">Как получить следующий вторник используя Date Time API?</a></p>
</li>
<li>
<p><a href="#Как-получить-вторую-субботу-текущего-месяца-используя-date-time-api">Как получить вторую субботу текущего месяца используя Date Time API?</a></p>
</li>
<li>
<p><a href="#Как-получить-текущее-время-с-точностью-до-миллисекунд-используя-date-time-api">Как получить текущее время с точностью до миллисекунд используя Date Time API?</a></p>
</li>
<li>
<p><a href="#Как-получить-текущее-время-по-местному-времени-с-точностью-до-миллисекунд-используя-date-time-api">Как получить текущее время по местному времени с точностью до миллисекунд используя Date Time API?</a></p>
</li>
<li>
<p><a href="#Как-определить-повторяемую-аннотацию">Как определить повторяемую аннотацию?</a></p>
</li>
<li>
<p><a href="#Что-такое-nashorn">Что такое <code>Nashorn</code>?</a></p>
</li>
<li>
<p><a href="#Что-такое-jjs">Что такое <code>jjs</code>?</a></p>
</li>
<li>
<p><a href="#Какой-класс-появился-в-java-8-для-кодированиядекодирования-данных">Какой класс появился в Java 8 для кодирования/декодирования данных?</a></p>
</li>
<li>
<p><a href="#Как-создать-base64-кодировщик-и-декодировщик">Как создать Base64 кодировщик и декодировщик?</a></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_какие_нововведения_появились_в_java_8_и_jdk_8">7.1. Какие нововведения, появились в Java 8 и JDK 8?</h3>
<div class="ulist">
<ul>
<li>
<p>Методы интерфейсов по умолчанию;</p>
</li>
<li>
<p>Лямбда-выражения;</p>
</li>
<li>
<p>Функциональные интерфейсы;</p>
</li>
<li>
<p>Ссылки на методы и конструкторы;</p>
</li>
<li>
<p>Повторяемые аннотации;</p>
</li>
<li>
<p>Аннотации на типы данных;</p>
</li>
<li>
<p>Рефлексия для параметров методов;</p>
</li>
<li>
<p><em>Stream API</em> для работы с коллекциями;</p>
</li>
<li>
<p>Параллельная сортировка массивов;</p>
</li>
<li>
<p>Новое API для работы с датами и временем;</p>
</li>
<li>
<p>Новый движок JavaScript <em>Nashorn</em>;</p>
</li>
<li>
<p>Добавлено несколько новых классов для потокобезопасной работы;</p>
</li>
<li>
<p>Добавлен новый API для <code>Calendar</code> и <code>Locale</code>;</p>
</li>
<li>
<p>Добавлена поддержка <em>Unicode 6.2.0</em>;</p>
</li>
<li>
<p>Добавлен стандартный класс для работы с <em>Base64</em>;</p>
</li>
<li>
<p>Добавлена поддержка беззнаковой арифметики;</p>
</li>
<li>
<p>Улучшена производительность конструктора <code>java.lang.String(byte[], *)</code> и метода <code>java.lang.String.getBytes()</code>;</p>
</li>
<li>
<p>Новая реализация <code>AccessController.doPrivileged</code>, позволяющая устанавливать подмножество привилегий без необходимости проверки всех остальных уровней доступа;</p>
</li>
<li>
<p><em>Password-based</em> алгоритмы стали более устойчивыми;</p>
</li>
<li>
<p>Добавлена поддержка <em>SSL/TLS Server Name Indication (NSI)</em> в <em>JSSE Server</em>;</p>
</li>
<li>
<p>Улучшено хранилище ключей (KeyStore);</p>
</li>
<li>
<p>Добавлен алгоритм <em>SHA-224</em>;</p>
</li>
<li>
<p>Удален мост <em>JDBC - ODBC</em>;</p>
</li>
<li>
<p>Удален <em>PermGen</em>, изменен способ хранения мета-данных классов;</p>
</li>
<li>
<p>Возможность создания профилей для платформы Java SE, которые включают в себя не всю платформу целиком, а некоторую ее часть;</p>
</li>
<li>
<p>Инструментарий</p>
<div class="ulist">
<ul>
<li>
<p>Добавлена утилита <code>jjs</code> для использования <em>JavaScript Nashorn</em>;</p>
</li>
<li>
<p>Команда <code>java</code> может запускать <em>JavaFX</em> приложения;</p>
</li>
<li>
<p>Добавлена утилита <code>jdeps</code> для анализа <em>.class</em>-файлов.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p><a href="#java-8">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_что_такое_лямбда_какова_структура_и_особенности_использования_лямбда_выражения">7.2. Что такое <em>«лямбда»</em>? Какова структура и особенности использования лямбда-выражения?</h3>
<div class="paragraph">
<p><strong>Лямбда</strong> представляет собой набор инструкций, которые можно выделить в отдельную переменную и затем многократно вызвать в различных местах программы.</p>
</div>
<div class="paragraph">
<p>Основу лямбда-выражения составляет <em>лямбда-оператор</em>, который представляет стрелку <code>-&gt;</code>. Этот оператор разделяет лямбда-выражение на две части: левая часть содержит список параметров выражения, а правая, собственно, представляет тело лямбда-выражения, где выполняются все действия.</p>
</div>
<div class="paragraph">
<p>Лямбда-выражение не выполняется само по себе, а образует реализацию метода, определенного в функциональном интерфейсе. При этом важно, что функциональный интерфейс должен содержать только один единственный метод без реализации.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="kd">interface</span> <span class="nc">Operationable</span> <span class="o">{</span>
    <span class="kt">int</span> <span class="nf">calculate</span><span class="o">(</span><span class="kt">int</span> <span class="n">x</span><span class="o">,</span> <span class="kt">int</span> <span class="n">y</span><span class="o">);</span>
<span class="o">}</span>

<span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
    <span class="nc">Operationable</span> <span class="n">operation</span> <span class="o">=</span> <span class="o">(</span><span class="n">x</span><span class="o">,</span> <span class="n">y</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="n">x</span> <span class="o">+</span> <span class="n">y</span><span class="o">;</span>
    <span class="kt">int</span> <span class="n">result</span> <span class="o">=</span> <span class="n">operation</span><span class="o">.</span><span class="na">calculate</span><span class="o">(</span><span class="mi">10</span><span class="o">,</span> <span class="mi">20</span><span class="o">);</span>
    <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">result</span><span class="o">);</span> <span class="c1">//30</span>
<span class="o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>По факту лямбда-выражения являются в некотором роде сокращенной формой внутренних анонимных классов, которые ранее применялись в Java.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><em>Отложенное выполнение (deferred execution) лямбда-выражения</em>- определяется один раз в одном месте программы, вызываются при необходимости, любое количество раз и в произвольном месте программы.</p>
</li>
<li>
<p><em>Параметры лямбда-выражения</em> должны соответствовать по типу параметрам метода функционального интерфейса:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="n">operation</span> <span class="o">=</span> <span class="o">(</span><span class="kt">int</span> <span class="n">x</span><span class="o">,</span> <span class="kt">int</span> <span class="n">y</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="n">x</span> <span class="o">+</span> <span class="n">y</span><span class="o">;</span>
<span class="c1">//При написании самого лямбда-выражения тип параметров разрешается не указывать:</span>
<span class="o">(</span><span class="n">x</span><span class="o">,</span> <span class="n">y</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="n">x</span> <span class="o">+</span> <span class="n">y</span><span class="o">;</span>
<span class="c1">//Если метод не принимает никаких параметров, то пишутся пустые скобки, например,</span>
<span class="o">()</span> <span class="o">-&gt;</span> <span class="mi">30</span> <span class="o">+</span> <span class="mi">20</span><span class="o">;</span>
<span class="c1">//Если метод принимает только один параметр, то скобки можно опустить:</span>
<span class="n">n</span> <span class="o">-&gt;</span> <span class="n">n</span> <span class="o">*</span> <span class="n">n</span><span class="o">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><em>Конечные лямбда-выражения</em> не обязаны возвращать какое-либо значение.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="kd">interface</span> <span class="nc">Printable</span> <span class="o">{</span>
    <span class="kt">void</span> <span class="nf">print</span><span class="o">(</span><span class="nc">String</span> <span class="n">s</span><span class="o">);</span>
<span class="o">}</span>

<span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
    <span class="nc">Printable</span> <span class="n">printer</span> <span class="o">=</span> <span class="n">s</span> <span class="o">-&gt;</span> <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">s</span><span class="o">);</span>
    <span class="n">printer</span><span class="o">.</span><span class="na">print</span><span class="o">(</span><span class="s">"Hello, world"</span><span class="o">);</span>
<span class="o">}</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><em>Блочные лямбда-выражения</em> обрамляются фигурными скобками. В блочных лямбда-выражениях можно использовать внутренние вложенные блоки, циклы, конструкции <code>if</code>, <code>switch</code>, создавать переменные и т.д. Если блочное лямбда-выражение должно возвращать значение, то явным образом применяется оператор <code>return</code>:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="nc">Operationable</span> <span class="n">operation</span> <span class="o">=</span> <span class="o">(</span><span class="kt">int</span> <span class="n">x</span><span class="o">,</span> <span class="kt">int</span> <span class="n">y</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="o">{</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">y</span> <span class="o">==</span> <span class="mi">0</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="mi">0</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="k">else</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">x</span> <span class="o">/</span> <span class="n">y</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">};</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><em>Передача лямбда-выражения в качестве параметра метода</em>:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="kd">interface</span> <span class="nc">Condition</span> <span class="o">{</span>
    <span class="kt">boolean</span> <span class="nf">isAppropriate</span><span class="o">(</span><span class="kt">int</span> <span class="n">n</span><span class="o">);</span>
<span class="o">}</span>

<span class="kd">private</span> <span class="kd">static</span> <span class="kt">int</span> <span class="nf">sum</span><span class="o">(</span><span class="kt">int</span><span class="o">[]</span> <span class="n">numbers</span><span class="o">,</span> <span class="nc">Condition</span> <span class="n">condition</span><span class="o">)</span> <span class="o">{</span>
    <span class="kt">int</span> <span class="n">result</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
    <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">:</span> <span class="n">numbers</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">condition</span><span class="o">.</span><span class="na">isAppropriate</span><span class="o">(</span><span class="n">i</span><span class="o">))</span> <span class="o">{</span>
            <span class="n">result</span> <span class="o">+=</span> <span class="n">i</span><span class="o">;</span>
        <span class="o">}</span>
    <span class="o">}</span>
    <span class="k">return</span> <span class="n">result</span><span class="o">;</span>
<span class="o">}</span>

<span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
    <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">sum</span><span class="o">(</span><span class="k">new</span> <span class="kt">int</span><span class="o">[]</span> <span class="o">{</span><span class="mi">0</span><span class="o">,</span> <span class="mi">1</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="mi">3</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="mi">5</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="mi">7</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="mi">9</span><span class="o">},</span> <span class="o">(</span><span class="n">n</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="n">n</span> <span class="o">!=</span> <span class="mi">0</span><span class="o">));</span>
<span class="o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><a href="#java-8">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_к_каким_переменным_есть_доступ_у_лямбда_выражений">7.3. К каким переменным есть доступ у лямбда-выражений?</h3>
<div class="paragraph">
<p>Доступ к переменным внешней области действия из лямбда-выражения очень схож к доступу из анонимных объектов. Можно ссылаться на:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>неизменяемые (<em>effectively final</em> - не обязательно помеченные как <code>final</code>) локальные переменные;</p>
</li>
<li>
<p>поля класса;</p>
</li>
<li>
<p>статические переменные.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>К методам по умолчанию реализуемого функционального интерфейса обращаться внутри лямбда-выражения запрещено.</p>
</div>
<div class="paragraph">
<p><a href="#java-8">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_как_отсортировать_список_строк_с_помощью_лямбда_выражения">7.4. Как отсортировать список строк с помощью лямбда-выражения?</h3>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="kd">public</span> <span class="kd">static</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;</span> <span class="nf">sort</span><span class="o">(</span><span class="nc">List</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;</span> <span class="n">list</span><span class="o">){</span>
    <span class="nc">Collections</span><span class="o">.</span><span class="na">sort</span><span class="o">(</span><span class="n">list</span><span class="o">,</span> <span class="o">(</span><span class="n">a</span><span class="o">,</span> <span class="n">b</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="n">a</span><span class="o">.</span><span class="na">compareTo</span><span class="o">(</span><span class="n">b</span><span class="o">));</span>
    <span class="k">return</span> <span class="n">list</span><span class="o">;</span>
<span class="o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><a href="#java-8">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_что_такое_ссылка_на_метод">7.5. Что такое «ссылка на метод»?</h3>
<div class="paragraph">
<p>Если существующий в классе метод уже делает все, что необходимо, то можно воспользоваться механизмом <strong>method reference (ссылка на метод)</strong> для непосредственной передачи этого метода. Такая ссылка передается в виде:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>имя_класса::имя_статического_метода</code> для статического метода;</p>
</li>
<li>
<p><code>объект_класса::имя_метода</code> для метода экземпляра;</p>
</li>
<li>
<p><code>название_класса::new</code> для конструктора.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Результат будет в точности таким же, как в случае определения лямбда-выражения, которое вызывает этот метод.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="kd">private</span> <span class="kd">interface</span> <span class="nc">Measurable</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kt">int</span> <span class="nf">length</span><span class="o">(</span><span class="nc">String</span> <span class="n">string</span><span class="o">);</span>
<span class="o">}</span>

<span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
    <span class="nc">Measurable</span> <span class="n">a</span> <span class="o">=</span> <span class="nl">String:</span><span class="o">:</span><span class="n">length</span><span class="o">;</span>
    <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">a</span><span class="o">.</span><span class="na">length</span><span class="o">(</span><span class="s">"abc"</span><span class="o">));</span>
<span class="o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Ссылки на методы потенциально более эффективны, чем использование лямбда-выражений. Кроме того, они предоставляют компилятору более качественную информацию о типе и при возможности выбора между использованием ссылки на существующий метод и использованием лямбда-выражения, следует всегда предпочитать использование ссылки на метод.</p>
</div>
<div class="paragraph">
<p><a href="#java-8">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_какие_виды_ссылок_на_методы_вы_знаете">7.6. Какие виды ссылок на методы вы знаете?</h3>
<div class="ulist">
<ul>
<li>
<p>на статический метод;</p>
</li>
<li>
<p>на метод экземпляра;</p>
</li>
<li>
<p>на конструкторе.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a href="#java-8">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_объясните_выражение_system_outprintln">7.7. Объясните выражение <code>System.out::println</code>.</h3>
<div class="paragraph">
<p>Данное выражение иллюстрирует механизм <em>instance method reference</em>: передачи ссылки на метод <code>println()</code> статического поля <code>out</code> класса <code>System</code>.</p>
</div>
<div class="paragraph">
<p><a href="#java-8">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_что_такое_функциональные_интерфейсы">7.8. Что такое «функциональные интерфейсы»?</h3>
<div class="paragraph">
<p><strong>Функциональный интерфейс</strong> - это интерфейс, который определяет только один абстрактный метод.</p>
</div>
<div class="paragraph">
<p>Чтобы точно определить интерфейс как функциональный, добавлена аннотация <code>@FunctionalInterface</code>, работающая по принципу <code>@Override</code>. Она обозначит замысел и не даст определить второй абстрактный метод в интерфейсе.</p>
</div>
<div class="paragraph">
<p>Интерфейс может включать сколько угодно <code>default</code> методов и при этом оставаться функциональным, потому что <code>default</code> методы - не абстрактные.</p>
</div>
<div class="paragraph">
<p><a href="#java-8">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_для_чего_нужны_функциональные_интерфейсы_functiontr_doublefunctionr_intfunctionr_и_longfunctionr">7.9. Для чего нужны функциональные интерфейсы <code>Function&lt;T,R&gt;</code>, <code>DoubleFunction&lt;R&gt;</code>, <code>IntFunction&lt;R&gt;</code> и <code>LongFunction&lt;R&gt;</code>?</h3>
<div class="paragraph">
<p><strong><code>Function&lt;T, R&gt;</code></strong> - интерфейс, с помощью которого реализуется функция, получающая на вход экземпляр класса <code>T</code> и возвращающая на выходе экземпляр класса <code>R</code>.</p>
</div>
<div class="paragraph">
<p>Методы по умолчанию могут использоваться для построения цепочек вызовов (<code>compose</code>, <code>andThen</code>).</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="nc">Function</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">Integer</span><span class="o">&gt;</span> <span class="n">toInteger</span> <span class="o">=</span> <span class="nl">Integer:</span><span class="o">:</span><span class="n">valueOf</span><span class="o">;</span>
<span class="nc">Function</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">String</span><span class="o">&gt;</span> <span class="n">backToString</span> <span class="o">=</span> <span class="n">toInteger</span><span class="o">.</span><span class="na">andThen</span><span class="o">(</span><span class="nl">String:</span><span class="o">:</span><span class="n">valueOf</span><span class="o">);</span>
<span class="n">backToString</span><span class="o">.</span><span class="na">apply</span><span class="o">(</span><span class="s">"123"</span><span class="o">);</span>     <span class="c1">// "123"</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>DoubleFunction&lt;R&gt;</code> - функция, получающая на вход <code>Double</code> и возвращающая на выходе экземпляр класса <code>R</code>;</p>
</li>
<li>
<p><code>IntFunction&lt;R&gt;</code> - функция, получающая на вход <code>Integer</code> и возвращающая на выходе экземпляр класса <code>R</code>;</p>
</li>
<li>
<p><code>LongFunction&lt;R&gt;</code> - функция, получающая на вход <code>Long</code> и возвращающая на выходе экземпляр класса <code>R</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a href="#java-8">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_для_чего_нужны_функциональные_интерфейсы_unaryoperatort_doubleunaryoperator_intunaryoperator_и_longunaryoperator">7.10. Для чего нужны функциональные интерфейсы <code>UnaryOperator&lt;T&gt;</code>, <code>DoubleUnaryOperator</code>, <code>IntUnaryOperator</code> и <code>LongUnaryOperator</code>?</h3>
<div class="paragraph">
<p><strong><code>UnaryOperator&lt;T&gt;</code> (унарный оператор)</strong> принимает в качестве параметра объект типа <code>T</code>, выполняет над ними операции и возвращает результат операций в виде объекта типа <code>T</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="nc">UnaryOperator</span><span class="o">&lt;</span><span class="nc">Integer</span><span class="o">&gt;</span> <span class="n">operator</span> <span class="o">=</span> <span class="n">x</span> <span class="o">-&gt;</span> <span class="n">x</span> <span class="o">*</span> <span class="n">x</span><span class="o">;</span>
<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">operator</span><span class="o">.</span><span class="na">apply</span><span class="o">(</span><span class="mi">5</span><span class="o">));</span> <span class="c1">// 25</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>DoubleUnaryOperator</code> - унарный оператор, получающий на вход <code>Double</code>;</p>
</li>
<li>
<p><code>IntUnaryOperator</code> - унарный оператор, получающий на вход <code>Integer</code>;</p>
</li>
<li>
<p><code>LongUnaryOperator</code> - унарный оператор, получающий на вход <code>Long</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a href="#java-8">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_для_чего_нужны_функциональные_интерфейсы_binaryoperatort_doublebinaryoperator_intbinaryoperator_и_longbinaryoperator">7.11. Для чего нужны функциональные интерфейсы <code>BinaryOperator&lt;T&gt;</code>, <code>DoubleBinaryOperator</code>, <code>IntBinaryOperator</code> и <code>LongBinaryOperator</code>?</h3>
<div class="paragraph">
<p><strong><code>BinaryOperator&lt;T&gt;</code> (бинарный оператор)</strong> - интерфейс, с помощью которого реализуется функция, получающая на вход два экземпляра класса <code>T</code> и возвращающая на выходе экземпляр класса <code>T</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="nc">BinaryOperator</span><span class="o">&lt;</span><span class="nc">Integer</span><span class="o">&gt;</span> <span class="n">operator</span> <span class="o">=</span> <span class="o">(</span><span class="n">a</span><span class="o">,</span> <span class="n">b</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span><span class="o">;</span>
<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">operator</span><span class="o">.</span><span class="na">apply</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">2</span><span class="o">));</span> <span class="c1">// 3</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>DoubleBinaryOperator</code> - бинарный оператор, получающий на вход <code>Double</code>;</p>
</li>
<li>
<p><code>IntBinaryOperator</code> - бинарный оператор, получающий на вход <code>Integer</code>;</p>
</li>
<li>
<p><code>LongBinaryOperator</code> - бинарный оператор, получающий на вход <code>Long</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a href="#java-8">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_для_чего_нужны_функциональные_интерфейсы_predicatet_doublepredicate_intpredicate_и_longpredicate">7.12. Для чего нужны функциональные интерфейсы <code>Predicate&lt;T&gt;</code>, <code>DoublePredicate</code>, <code>IntPredicate</code> и <code>LongPredicate</code>?</h3>
<div class="paragraph">
<p><strong><code>Predicate&lt;T&gt;</code> (предикат)</strong> - интерфейс, с помощью которого реализуется функция, получающая на вход экземпляр класса <code>T</code> и возвращающая на выходе значение типа <code>boolean</code>.</p>
</div>
<div class="paragraph">
<p>Интерфейс содержит различные методы по умолчанию, позволяющие строить сложные условия (<code>and</code>, <code>or</code>, <code>negate</code>).</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="nc">Predicate</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;</span> <span class="n">predicate</span> <span class="o">=</span> <span class="o">(</span><span class="n">s</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="n">s</span><span class="o">.</span><span class="na">length</span><span class="o">()</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="o">;</span>
<span class="n">predicate</span><span class="o">.</span><span class="na">test</span><span class="o">(</span><span class="s">"foo"</span><span class="o">);</span> <span class="c1">// true</span>
<span class="n">predicate</span><span class="o">.</span><span class="na">negate</span><span class="o">().</span><span class="na">test</span><span class="o">(</span><span class="s">"foo"</span><span class="o">);</span> <span class="c1">// false</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>DoublePredicate</code> - предикат, получающий на вход <code>Double</code>;</p>
</li>
<li>
<p><code>IntPredicate</code> - предикат, получающий на вход <code>Integer</code>;</p>
</li>
<li>
<p><code>LongPredicate</code> - предикат, получающий на вход <code>Long</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a href="#java-8">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_для_чего_нужны_функциональные_интерфейсы_consumert_doubleconsumer_intconsumer_и_longconsumer">7.13. Для чего нужны функциональные интерфейсы <code>Consumer&lt;T&gt;</code>, <code>DoubleConsumer</code>, <code>IntConsumer</code> и <code>LongConsumer</code>?</h3>
<div class="paragraph">
<p><strong><code>Consumer&lt;T&gt;</code> (потребитель)</strong> - интерфейс, с помощью которого реализуется функция, которая получает на вход экземпляр класса <code>T</code>, производит с ним некоторое действие и ничего не возвращает.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="nc">Consumer</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;</span> <span class="n">hello</span> <span class="o">=</span> <span class="o">(</span><span class="n">name</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Hello, "</span> <span class="o">+</span> <span class="n">name</span><span class="o">);</span>
<span class="n">hello</span><span class="o">.</span><span class="na">accept</span><span class="o">(</span><span class="s">"world"</span><span class="o">);</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>DoubleConsumer</code> - потребитель, получающий на вход <code>Double</code>;</p>
</li>
<li>
<p><code>IntConsumer</code> - потребитель, получающий на вход <code>Integer</code>;</p>
</li>
<li>
<p><code>LongConsumer</code> - потребитель, получающий на вход <code>Long</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a href="#java-8">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_для_чего_нужны_функциональные_интерфейсы_suppliert_booleansupplier_doublesupplier_intsupplier_и_longsupplier">7.14. Для чего нужны функциональные интерфейсы <code>Supplier&lt;T&gt;</code>,  <code>BooleanSupplier</code>, <code>DoubleSupplier</code>, <code>IntSupplier</code> и <code>LongSupplier</code>?</h3>
<div class="paragraph">
<p><strong><code>Supplier&lt;T&gt;</code> (поставщик)</strong> - интерфейс, с помощью которого реализуется функция, ничего не принимающая на вход, но возвращающая на выход результат класса <code>T</code>;</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="nc">Supplier</span><span class="o">&lt;</span><span class="nc">LocalDateTime</span><span class="o">&gt;</span> <span class="n">now</span> <span class="o">=</span> <span class="nl">LocalDateTime:</span><span class="o">:</span><span class="n">now</span><span class="o">;</span>
<span class="n">now</span><span class="o">.</span><span class="na">get</span><span class="o">();</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>DoubleSupplier</code> - поставщик, возвращающий <code>Double</code>;</p>
</li>
<li>
<p><code>IntSupplier</code> - поставщик, возвращающий <code>Integer</code>;</p>
</li>
<li>
<p><code>LongSupplier</code> - поставщик, возвращающий <code>Long</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a href="#java-8">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_для_чего_нужен_функциональный_интерфейс_biconsumertu">7.15. Для чего нужен функциональный интерфейс <code>BiConsumer&lt;T,U&gt;</code>?</h3>
<div class="paragraph">
<p><strong><code>BiConsumer&lt;T,U&gt;</code></strong> представляет собой операцию, которая принимает два аргумента классов <code>T</code> и <code>U</code> производит с ними некоторое действие и ничего не возвращает.</p>
</div>
<div class="paragraph">
<p><a href="#java-8">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_для_чего_нужен_функциональный_интерфейс_bifunctiontur">7.16. Для чего нужен функциональный интерфейс <code>BiFunction&lt;T,U,R&gt;</code>?</h3>
<div class="paragraph">
<p><strong><code>BiFunction&lt;T,U,R&gt;</code></strong> представляет собой операцию, которая принимает два аргумента классов <code>T</code> и <code>U</code> и возвращающая результат класса <code>R</code>.</p>
</div>
<div class="paragraph">
<p><a href="#java-8">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_для_чего_нужен_функциональный_интерфейс_bipredicatetu">7.17. Для чего нужен функциональный интерфейс <code>BiPredicate&lt;T,U&gt;</code>?</h3>
<div class="paragraph">
<p><strong><code>BiPredicate&lt;T,U&gt;</code></strong> представляет собой операцию, которая принимает два аргумента классов <code>T</code> и <code>U</code> и возвращающая результат типа <code>boolean</code>.</p>
</div>
<div class="paragraph">
<p><a href="#java-8">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_для_чего_нужны_функциональные_интерфейсы_вида_to_function">7.18. Для чего нужны функциональные интерфейсы вида <code>_To_Function</code>?</h3>
<div class="ulist">
<ul>
<li>
<p><code>DoubleToIntFunction</code> - операция, принимающая аргумент класса <code>Double</code> и возвращающая результат типа <code>Integer</code>;</p>
</li>
<li>
<p><code>DoubleToLongFunction</code> - операция, принимающая аргумент класса <code>Double</code> и возвращающая результат типа <code>Long</code>;</p>
</li>
<li>
<p><code>IntToDoubleFunction</code> - операция, принимающая аргумент класса <code>Integer</code> и возвращающая результат типа <code>Double</code>;</p>
</li>
<li>
<p><code>IntToLongFunction</code> - операция, принимающая аргумент класса <code>Integer</code> и возвращающая результат типа <code>Long</code>;</p>
</li>
<li>
<p><code>LongToDoubleFunction</code> - операция, принимающая аргумент класса <code>Long</code> и возвращающая результат типа <code>Double</code>;</p>
</li>
<li>
<p><code>LongToIntFunction</code> - операция, принимающая аргумент класса <code>Long</code> и возвращающая результат типа <code>Integer</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a href="#java-8">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_для_чего_нужны_функциональные_интерфейсы_todoublebifunctiontu_tointbifunctiontu_и_tolongbifunctiontu">7.19. Для чего нужны функциональные интерфейсы <code>ToDoubleBiFunction&lt;T,U&gt;</code>, <code>ToIntBiFunction&lt;T,U&gt;</code> и <code>ToLongBiFunction&lt;T,U&gt;</code>?</h3>
<div class="ulist">
<ul>
<li>
<p><code>ToDoubleBiFunction&lt;T,U&gt;</code> - операция принимающая два аргумента классов <code>T</code> и <code>U</code> и возвращающая результат типа <code>Double</code>;</p>
</li>
<li>
<p><code>ToLongBiFunction&lt;T,U&gt;</code> - операция принимающая два аргумента классов <code>T</code> и <code>U</code> и возвращающая результат типа <code>Long</code>;</p>
</li>
<li>
<p><code>ToIntBiFunction&lt;T,U&gt;</code>  - операция принимающая два аргумента классов <code>T</code> и <code>U</code> и возвращающая результат типа <code>Integer</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a href="#java-8">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_для_чего_нужны_функциональные_интерфейсы_todoublefunctiont_tointfunctiont_и_tolongfunctiont">7.20. Для чего нужны функциональные интерфейсы <code>ToDoubleFunction&lt;T&gt;</code>, <code>ToIntFunction&lt;T&gt;</code> и <code>ToLongFunction&lt;T&gt;</code>?</h3>
<div class="ulist">
<ul>
<li>
<p><code>ToDoubleFunction&lt;T&gt;</code> - операция, принимающая аргумент класса <code>T</code> и возвращающая результат типа <code>Double</code>;</p>
</li>
<li>
<p><code>ToLongFunction&lt;T&gt;</code> - операция, принимающая аргумент класса <code>T</code> и возвращающая результат типа <code>Long</code>;</p>
</li>
<li>
<p><code>ToIntFunction&lt;T&gt;</code> - операция, принимающая аргумент класса <code>T</code> и возвращающая результат типа <code>Integer</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a href="#java-8">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_для_чего_нужны_функциональные_интерфейсы_objdoubleconsumert_objintconsumert_и_objlongconsumert">7.21. Для чего нужны функциональные интерфейсы <code>ObjDoubleConsumer&lt;T&gt;</code>, <code>ObjIntConsumer&lt;T&gt;</code> и <code>ObjLongConsumer&lt;T&gt;</code>?</h3>
<div class="ulist">
<ul>
<li>
<p><code>ObjDoubleConsumer&lt;T&gt;</code> - операция, которая принимает два аргумента классов <code>T</code> и <code>Double</code>, производит с ними некоторое действие и ничего не возвращает;</p>
</li>
<li>
<p><code>ObjLongConsumer&lt;T&gt;</code> - операция, которая принимает два аргумента классов <code>T</code> и <code>Long</code>, производит с ними некоторое действие и ничего не возвращает;</p>
</li>
<li>
<p><code>ObjIntConsumer&lt;T&gt;</code> - операция, которая принимает два аргумента классов <code>T</code> и <code>Integer</code>, производит с ними некоторое действие и ничего не возвращает.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a href="#java-8">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_что_такое_stringjoiner">7.22. Что такое <code>StringJoiner</code>?</h3>
<div class="paragraph">
<p>Класс <code>StringJoiner</code> используется, чтобы создать последовательность строк, разделенных разделителем с возможностью присоединить к полученной строке префикс и суффикс:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="nc">StringJoiner</span> <span class="n">joiner</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">StringJoiner</span><span class="o">(</span><span class="s">"."</span><span class="o">,</span> <span class="s">"prefix-"</span><span class="o">,</span> <span class="s">"-suffix"</span><span class="o">);</span>
<span class="k">for</span> <span class="o">(</span><span class="nc">String</span> <span class="n">s</span> <span class="o">:</span> <span class="s">"Hello the brave world"</span><span class="o">.</span><span class="na">split</span><span class="o">(</span><span class="s">" "</span><span class="o">))</span> <span class="o">{</span>
    <span class="n">joiner</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">s</span><span class="o">);</span>
<span class="o">}</span>
<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">joiner</span><span class="o">);</span> <span class="c1">//prefix-Hello.the.brave.world-suffix</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><a href="#java-8">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_что_такое_default_методы_интрефейса">7.23. Что такое <code>default</code> методы интрефейса?</h3>
<div class="paragraph">
<p>Java 8 позволяет добавлять неабстрактные реализации методов в интерфейс, используя ключевое слово <code>default</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="kd">interface</span> <span class="nc">Example</span> <span class="o">{</span>
    <span class="kt">int</span> <span class="nf">process</span><span class="o">(</span><span class="kt">int</span> <span class="n">a</span><span class="o">);</span>
    <span class="k">default</span> <span class="kt">void</span> <span class="nf">show</span><span class="o">()</span> <span class="o">{</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"default show()"</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Если класс реализует интерфейс, он может, но не обязан, реализовать методы по-умолчанию, уже реализованные в интерфейсе. Класс наследует реализацию по умолчанию.</p>
</li>
<li>
<p>Если некий класс реализует несколько интерфейсов, которые имеют одинаковый метод по умолчанию, то класс должен реализовать метод с совпадающей сигнатурой самостоятельно. Ситуация аналогична, если один интерфейс имеет метод по умолчанию, а в другом этот же метод является абстрактным - никакой реализации по умолчанию классом не наследуется.</p>
</li>
<li>
<p>Метод по умолчанию не может переопределить метод класса <code>java.lang.Object</code>.</p>
</li>
<li>
<p>Помогают реализовывать интерфейсы без страха нарушить работу других классов.</p>
</li>
<li>
<p>Позволяют избежать создания служебных классов, так как все необходимые методы могут быть представлены в самих интерфейсах.</p>
</li>
<li>
<p>Дают свободу классам выбрать метод, который нужно переопределить.</p>
</li>
<li>
<p>Одной из основных причин внедрения методов по умолчанию является возможность коллекций в Java 8 использовать лямбда-выражения.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a href="#java-8">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_как_вызывать_default_метод_интерфейса_в_реализующем_этот_интерфейс_классе">7.24. Как вызывать <code>default</code> метод интерфейса в реализующем этот интерфейс классе?</h3>
<div class="paragraph">
<p>Используя ключевое слово <code>super</code> вместе с именем интерфейса:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="kd">interface</span> <span class="nc">Paper</span> <span class="o">{</span>
    <span class="k">default</span> <span class="kt">void</span> <span class="nf">show</span><span class="o">()</span> <span class="o">{</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"default show()"</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="kd">class</span> <span class="nc">Licence</span> <span class="kd">implements</span> <span class="nc">Paper</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">show</span><span class="o">()</span> <span class="o">{</span>
        <span class="nc">Paper</span><span class="o">.</span><span class="na">super</span><span class="o">.</span><span class="na">show</span><span class="o">();</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><a href="#java-8">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_что_такое_static_метод_интерфейса">7.25. Что такое <code>static</code> метод интерфейса?</h3>
<div class="paragraph">
<p>Статические методы интерфейса похожи на методы по умолчанию, за исключением того, что для них отсутствует возможность переопределения в классах, реализующих интерфейс.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Статические методы в интерфейсе являются частью интерфейса без возможности переопределить их для объектов класса реализации;</p>
</li>
<li>
<p>Методы класса <code>java.lang.Object</code> нельзя переопределить как статические;</p>
</li>
<li>
<p>Статические методы в интерфейсе используются для обеспечения вспомогательных методов, например, проверки на null, сортировки коллекций и т.д.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a href="#java-8">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_как_вызывать_static_метод_интерфейса">7.26. Как вызывать <code>static</code> метод интерфейса?</h3>
<div class="paragraph">
<p>Используя имя интерфейса:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="kd">interface</span> <span class="nc">Paper</span> <span class="o">{</span>
    <span class="kd">static</span> <span class="kt">void</span> <span class="nf">show</span><span class="o">()</span> <span class="o">{</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"static show()"</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="kd">class</span> <span class="nc">Licence</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">showPaper</span><span class="o">()</span> <span class="o">{</span>
        <span class="nc">Paper</span><span class="o">.</span><span class="na">show</span><span class="o">();</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><a href="#java-8">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_что_такое_optional">7.27. Что такое <code>Optional</code>?</h3>
<div class="paragraph">
<p>Опциональное значение <code>Optional</code>&#8201;&#8212;&#8201;это контейнер для объекта, который может содержать или не содержать значение <code>null</code>. Такая обёртка является удобным средством предотвращения <code>NullPointerException</code>, т.к.
имеет некоторые функции высшего порядка, избавляющие от добавления повторяющихся <code>if null/notNull</code> проверок:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="nc">Optional</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;</span> <span class="n">optional</span> <span class="o">=</span> <span class="nc">Optional</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="s">"hello"</span><span class="o">);</span>

<span class="n">optional</span><span class="o">.</span><span class="na">isPresent</span><span class="o">();</span> <span class="c1">// true</span>
<span class="n">optional</span><span class="o">.</span><span class="na">ifPresent</span><span class="o">(</span><span class="n">s</span> <span class="o">-&gt;</span> <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">s</span><span class="o">.</span><span class="na">length</span><span class="o">()));</span> <span class="c1">// 5</span>
<span class="n">optional</span><span class="o">.</span><span class="na">get</span><span class="o">();</span> <span class="c1">// "hello"</span>
<span class="n">optional</span><span class="o">.</span><span class="na">orElse</span><span class="o">(</span><span class="s">"ops..."</span><span class="o">);</span> <span class="c1">// "hello"</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><a href="#java-8">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_что_такое_stream">7.28. Что такое <code>Stream</code>?</h3>
<div class="paragraph">
<p>Интерфейс <code>java.util.Stream</code> представляет собой последовательность элементов, над которой можно производить различные операции.</p>
</div>
<div class="paragraph">
<p>Операции над стримами бывают или <em>промежуточными (intermediate)</em> или <em>конечными (terminal)</em>. Конечные операции возвращают результат определенного типа, а промежуточные операции возвращают тот же стрим. Таким образом вы можете строить цепочки из несколько операций над одним и тем же стримом.</p>
</div>
<div class="paragraph">
<p>У стрима может быть сколько угодно вызовов промежуточных операций и последним вызов конечной операции. При этом все промежуточные операции выполняются лениво и пока не будет вызвана конечная операция никаких действий на самом деле не происходит (похоже на создание объекта <code>Thread</code> или <code>Runnable</code>, без вызова <code>start()</code>).</p>
</div>
<div class="paragraph">
<p>Стримы создаются на основе каких-либо источников, например классов из <code>java.util.Collection</code>.</p>
</div>
<div class="paragraph">
<p>Ассоциативные массивы (maps), например, <code>HashMap</code>, не поддерживаются.</p>
</div>
<div class="paragraph">
<p>Операции над стримами могут выполняться как последовательно, так и параллельно.</p>
</div>
<div class="paragraph">
<p>Потоки не могут быть использованы повторно. Как только была вызвана какая-нибудь конечная операция, поток закрывается.</p>
</div>
<div class="paragraph">
<p>Кроме универсальных объектных существуют особые виды стримов для работы с примитивными типами данных <code>int</code>, <code>long</code> и <code>double</code>: <code>IntStream</code>, <code>LongStream</code> и <code>DoubleStream</code>. Эти примитивные стримы работают так же, как и обычные объектные, но со следующими отличиями:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>используют специализированные лямбда-выражения, например, <code>IntFunction</code> или <code>IntPredicate</code> вместо <code>Function</code> и <code>Predicate</code>;</p>
</li>
<li>
<p>поддерживают дополнительные конечные операции <code>sum()</code>, <code>average()</code>, <code>mapToObj()</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a href="#java-8">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_какие_существуют_способы_создания_стрима">7.29. Какие существуют способы создания стрима?</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Из коллекции:</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="nc">Stream</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;</span> <span class="n">fromCollection</span> <span class="o">=</span> <span class="nc">Arrays</span><span class="o">.</span><span class="na">asList</span><span class="o">(</span><span class="s">"x"</span><span class="o">,</span> <span class="s">"y"</span><span class="o">,</span> <span class="s">"z"</span><span class="o">).</span><span class="na">stream</span><span class="o">();</span></code></pre>
</div>
</div>
</li>
<li>
<p>Из набора значений:</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="nc">Stream</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;</span> <span class="n">fromValues</span> <span class="o">=</span> <span class="nc">Stream</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="s">"x"</span><span class="o">,</span> <span class="s">"y"</span><span class="o">,</span> <span class="s">"z"</span><span class="o">);</span></code></pre>
</div>
</div>
</li>
<li>
<p>Из массива:</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="nc">Stream</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;</span> <span class="n">fromArray</span> <span class="o">=</span> <span class="nc">Arrays</span><span class="o">.</span><span class="na">stream</span><span class="o">(</span><span class="k">new</span> <span class="nc">String</span><span class="o">[]{</span><span class="s">"x"</span><span class="o">,</span> <span class="s">"y"</span><span class="o">,</span> <span class="s">"z"</span><span class="o">});</span></code></pre>
</div>
</div>
</li>
<li>
<p>Из файла (каждая строка в файле будет отдельным элементом в стриме):</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="nc">Stream</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;</span> <span class="n">fromFile</span> <span class="o">=</span> <span class="nc">Files</span><span class="o">.</span><span class="na">lines</span><span class="o">(</span><span class="nc">Paths</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="s">"input.txt"</span><span class="o">));</span></code></pre>
</div>
</div>
</li>
<li>
<p>Из строки:</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="nc">IntStream</span> <span class="n">fromString</span> <span class="o">=</span> <span class="s">"0123456789"</span><span class="o">.</span><span class="na">chars</span><span class="o">();</span></code></pre>
</div>
</div>
</li>
<li>
<p>С помощью <code>Stream.builder()</code>:</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="nc">Stream</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;</span> <span class="n">fromBuilder</span> <span class="o">=</span> <span class="nc">Stream</span><span class="o">.</span><span class="na">builder</span><span class="o">().</span><span class="na">add</span><span class="o">(</span><span class="s">"z"</span><span class="o">).</span><span class="na">add</span><span class="o">(</span><span class="s">"y"</span><span class="o">).</span><span class="na">add</span><span class="o">(</span><span class="s">"z"</span><span class="o">).</span><span class="na">build</span><span class="o">();</span></code></pre>
</div>
</div>
</li>
<li>
<p>С помощью <code>Stream.iterate()</code> (бесконечный):</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="nc">Stream</span><span class="o">&lt;</span><span class="nc">Integer</span><span class="o">&gt;</span> <span class="n">fromIterate</span> <span class="o">=</span> <span class="nc">Stream</span><span class="o">.</span><span class="na">iterate</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="n">n</span> <span class="o">-&gt;</span> <span class="n">n</span> <span class="o">+</span> <span class="mi">1</span><span class="o">);</span></code></pre>
</div>
</div>
</li>
<li>
<p>С помощью <code>Stream.generate()</code> (бесконечный):</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="nc">Stream</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;</span> <span class="n">fromGenerate</span> <span class="o">=</span> <span class="nc">Stream</span><span class="o">.</span><span class="na">generate</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="s">"0"</span><span class="o">);</span></code></pre>
</div>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p><a href="#java-8">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_в_чем_разница_между_collection_и_stream">7.30. В чем разница между <code>Collection</code> и <code>Stream</code>?</h3>
<div class="paragraph">
<p>Коллекции позволяют работать с элементами по-отдельности, тогда как стримы так делать не позволяют, но вместо этого предоставляют возможность выполнять функции над данными как над одним целым.</p>
</div>
<div class="paragraph">
<p>Также стоит отметить важность самой концепции сущностей: <code>Collection</code> - это прежде всего воплощение <em>Структуры Данных</em>. Например, <code>Set</code> не просто хранит в себе элементы, он реализует идею множества с уникальными элементами,
тогда как <code>Stream</code>, это прежде всего абстракция необходимая для реализации <em>конвейера вычислений</em>, собственно, поэтому, результатом работы конвейера являются те или иные <em>Структуры Данных</em> или же результаты проверок/поиска и т.п.</p>
</div>
<div class="paragraph">
<p><a href="#java-8">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_для_чего_нужен_метод_collect_в_стримах">7.31. Для чего нужен метод <code>collect()</code> в стримах?</h3>
<div class="paragraph">
<p>Метод <code>collect()</code> является конечной операцией, которая используется для представление результата в виде коллекции или какой-либо другой структуры данных.</p>
</div>
<div class="paragraph">
<p><code>collect()</code> принимает на вход <code>Collector&lt;Тип_источника, Тип_аккумулятора, Тип_результата&gt;</code>, который содержит четыре этапа: <em>supplier</em> - инициализация аккумулятора, <em>accumulator</em> - обработка каждого элемента, <em>combiner</em> - соединение двух аккумуляторов при параллельном выполнении, <em>[finisher]</em> - необязательный метод последней обработки аккумулятора. В Java 8 в классе <code>Collectors</code> реализовано несколько распространённых коллекторов:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>toList()</code>, <code>toCollection()</code>, <code>toSet()</code> - представляют стрим в виде списка, коллекции или множества;</p>
</li>
<li>
<p><code>toConcurrentMap()</code>, <code>toMap()</code> - позволяют преобразовать стрим в <code>Map</code>;</p>
</li>
<li>
<p><code>averagingInt()</code>, <code>averagingDouble()</code>, <code>averagingLong()</code> - возвращают среднее значение;</p>
</li>
<li>
<p><code>summingInt()</code>, <code>summingDouble()</code>, <code>summingLong()</code> - возвращает сумму;</p>
</li>
<li>
<p><code>summarizingInt()</code>, <code>summarizingDouble()</code>, <code>summarizingLong()</code> - возвращают <code>SummaryStatistics</code> с разными агрегатными значениями;</p>
</li>
<li>
<p><code>partitioningBy()</code> - разделяет коллекцию на две части по соответствию условию и возвращает их как <code>Map&lt;Boolean, List&gt;</code>;</p>
</li>
<li>
<p><code>groupingBy()</code> - разделяет коллекцию на несколько частей и возвращает <code>Map&lt;N, List&lt;T&gt;&gt;</code>;</p>
</li>
<li>
<p><code>mapping()</code> - дополнительные преобразования значений для сложных <code>Collector</code>-ов.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Так же существует возможность создания собственного коллектора через <code>Collector.of()</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="nc">Collector</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;,</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;&gt;</span> <span class="n">toList</span> <span class="o">=</span> <span class="nc">Collector</span><span class="o">.</span><span class="na">of</span><span class="o">(</span>
    <span class="nl">ArrayList:</span><span class="o">:</span><span class="k">new</span><span class="o">,</span>
    <span class="nl">List:</span><span class="o">:</span><span class="n">add</span><span class="o">,</span>
    <span class="o">(</span><span class="n">l1</span><span class="o">,</span> <span class="n">l2</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="o">{</span> <span class="n">l1</span><span class="o">.</span><span class="na">addAll</span><span class="o">(</span><span class="n">l2</span><span class="o">);</span> <span class="k">return</span> <span class="n">l1</span><span class="o">;</span> <span class="o">}</span>
<span class="o">);</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><a href="#java-8">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_для_чего_в_стримах_применяются_методы_foreach_и_foreachordered">7.32. Для чего в стримах применяются методы <code>forEach()</code> и <code>forEachOrdered()</code>?</h3>
<div class="ulist">
<ul>
<li>
<p><code>forEach()</code> применяет функцию к каждому объекту стрима, порядок при параллельном выполнении не гарантируется;</p>
</li>
<li>
<p><code>forEachOrdered()</code> применяет функцию к каждому объекту стрима с сохранением порядка элементов.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a href="#java-8">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_для_чего_в_стримах_предназначены_методы_map_и_maptoint_maptodouble_maptolong">7.33. Для чего в стримах предназначены методы <code>map()</code> и <code>mapToInt()</code>, <code>mapToDouble()</code>, <code>mapToLong()</code>?</h3>
<div class="paragraph">
<p>Метод <code>map()</code> является промежуточной операцией, которая заданным образом преобразует каждый элемент стрима.</p>
</div>
<div class="paragraph">
<p><code>mapToInt()</code>, <code>mapToDouble()</code>, <code>mapToLong()</code> - аналоги <code>map()</code>, возвращающие соответствующий числовой стрим (то есть стрим из числовых примитивов):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="nc">Stream</span>
    <span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="s">"12"</span><span class="o">,</span> <span class="s">"22"</span><span class="o">,</span> <span class="s">"4"</span><span class="o">,</span> <span class="s">"444"</span><span class="o">,</span> <span class="s">"123"</span><span class="o">)</span>
    <span class="o">.</span><span class="na">mapToInt</span><span class="o">(</span><span class="nl">Integer:</span><span class="o">:</span><span class="n">parseInt</span><span class="o">)</span>
    <span class="o">.</span><span class="na">toArray</span><span class="o">();</span> <span class="c1">//[12, 22, 4, 444, 123]</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><a href="#java-8">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_какова_цель_метода_filter_в_стримах">7.34. Какова цель метода <code>filter()</code> в стримах?</h3>
<div class="paragraph">
<p>Метод <code>filter()</code> является промежуточной операцией принимающей предикат, который фильтрует все элементы, возвращая только те, что соответствуют условию.</p>
</div>
<div class="paragraph">
<p><a href="#java-8">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_для_чего_в_стримах_предназначен_метод_limit">7.35. Для чего в стримах предназначен метод <code>limit()</code>?</h3>
<div class="paragraph">
<p>Метод <code>limit()</code> является промежуточной операцией, которая позволяет ограничить выборку определенным количеством первых элементов.</p>
</div>
<div class="paragraph">
<p><a href="#java-8">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_для_чего_в_стримах_предназначен_метод_sorted">7.36. Для чего в стримах предназначен метод <code>sorted()</code>?</h3>
<div class="paragraph">
<p>Метод <code>sorted()</code> является промежуточной операцией, которая позволяет сортировать значения либо в натуральном порядке, либо задавая <code>Comparator</code>.</p>
</div>
<div class="paragraph">
<p>Порядок элементов в исходной коллекции остается нетронутым - <code>sorted()</code> всего лишь создает его отсортированное представление.</p>
</div>
<div class="paragraph">
<p><a href="#java-8">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_для_чего_в_стримах_предназначены_методы_flatmap_flatmaptoint_flatmaptodouble_flatmaptolong">7.37. Для чего в стримах предназначены методы <code>flatMap()</code>, <code>flatMapToInt()</code>, <code>flatMapToDouble()</code>, <code>flatMapToLong()</code>?</h3>
<div class="paragraph">
<p>Метод <code>flatMap()</code> похож на map, но может создавать из одного элемента несколько. Таким образом, каждый объект будет преобразован в ноль, один или несколько других объектов, поддерживаемых потоком.  Наиболее очевидный способ применения этой операции&#8201;&#8212;&#8201;преобразование элементов контейнера при помощи функций, которые возвращают контейнеры.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="nc">Stream</span>
    <span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="s">"H e l l o"</span><span class="o">,</span> <span class="s">"w o r l d !"</span><span class="o">)</span>
    <span class="o">.</span><span class="na">flatMap</span><span class="o">((</span><span class="n">p</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="nc">Arrays</span><span class="o">.</span><span class="na">stream</span><span class="o">(</span><span class="n">p</span><span class="o">.</span><span class="na">split</span><span class="o">(</span><span class="s">" "</span><span class="o">)))</span>
    <span class="o">.</span><span class="na">toArray</span><span class="o">(</span><span class="nc">String</span><span class="o">[]::</span><span class="k">new</span><span class="o">);</span><span class="c1">//["H", "e", "l", "l", "o", "w", "o", "r", "l", "d", "!"]</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><code>flatMapToInt()</code>, <code>flatMapToDouble()</code>, <code>flatMapToLong()</code> - это аналоги <code>flatMap()</code>, возвращающие соответствующий числовой стрим.</p>
</div>
<div class="paragraph">
<p><a href="#java-8">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_расскажите_о_параллельной_обработке_в_java_8">7.38. Расскажите о параллельной обработке в Java 8.</h3>
<div class="paragraph">
<p>Стримы могут быть последовательными и параллельными. Операции над последовательными стримами выполняются в одном потоке процессора, над параллельными&#8201;&#8212;&#8201;используя несколько потоков процессора. Параллельные стримы используют общий <code>ForkJoinPool</code> доступный через статический <code>ForkJoinPool.commonPool()</code> метод. При этом, если окружение не является многоядерным, то поток будет выполняться как последовательный. Фактически применение параллельных стримов сводится к тому, что данные в стримах будут разделены на части, каждая часть обрабатывается на отдельном ядре процессора, и в конце эти части соединяются, и над ними выполняются конечные операции.</p>
</div>
<div class="paragraph">
<p>Для создания параллельного потока из коллекции можно также использовать метод <code>parallelStream()</code> интерфейса <code>Collection</code>.</p>
</div>
<div class="paragraph">
<p>Чтобы сделать обычный последовательный стрим параллельным, надо вызвать у объекта <code>Stream</code> метод <code>parallel()</code>. Метод <code>isParallel()</code> позволяет узнать является ли стрим параллельным.</p>
</div>
<div class="paragraph">
<p>С помощью, методов <code>parallel()</code> и <code>sequential()</code> можно определять какие операции могут быть параллельными, а какие только последовательными. Так же из любого последовательного стрима можно сделать параллельный и наоборот:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="n">collection</span>
<span class="o">.</span><span class="na">stream</span><span class="o">()</span>
<span class="o">.</span><span class="na">peek</span><span class="o">(...)</span> <span class="c1">// операция последовательна</span>
<span class="o">.</span><span class="na">parallel</span><span class="o">()</span>
<span class="o">.</span><span class="na">map</span><span class="o">(...)</span> <span class="c1">// операция может выполняться параллельно,</span>
<span class="o">.</span><span class="na">sequential</span><span class="o">()</span>
<span class="o">.</span><span class="na">reduce</span><span class="o">(...)</span> <span class="c1">// операция снова последовательна</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Как правило, элементы передаются в стрим в том же порядке, в котором они определены в источнике данных. При работе с параллельными стримами система сохраняет порядок следования элементов. Исключение составляет метод <code>forEach()</code>, который может выводить элементы в произвольном порядке. И чтобы сохранить порядок следования, необходимо применять метод <code>forEachOrdered()</code>.</p>
</div>
<div class="paragraph">
<p>Критерии, которые могут повлиять на производительность в параллельных стримах:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Размер данных - чем больше данных, тем сложнее сначала разделять данные, а потом их соединять.</p>
</li>
<li>
<p>Количество ядер процессора. Теоретически, чем больше ядер в компьютере, тем быстрее программа будет работать. Если на машине одно ядро, нет смысла применять параллельные потоки.</p>
</li>
<li>
<p>Чем проще структура данных, с которой работает поток, тем быстрее будут происходить операции. Например, данные из <code>ArrayList</code> легко использовать, так как структура данной коллекции предполагает последовательность несвязанных данных. А вот коллекция типа <code>LinkedList</code> - не лучший вариант, так как в последовательном списке все элементы связаны с предыдущими/последующими. И такие данные трудно распараллелить.</p>
</li>
<li>
<p>Над данными примитивных типов операции будут производиться быстрее, чем над объектами классов.</p>
</li>
<li>
<p>Крайне не рекомендуется использовать параллельные стримы для скольких-нибудь долгих операций (например, сетевых соединений), так как все параллельные стримы работают c одним ForkJoinPool, то такие долгие операции могут остановить работу всех параллельных стримов в JVM из-за отсутствия доступных потоков в пуле, т.е. параллельные стримы стоит использовать лишь для коротких операций, где счет идет на миллисекунды, но не для тех где счет может идти на секунды и минуты;</p>
</li>
<li>
<p>Сохранение порядка в параллельных стримах увеличивает издержки при выполнении и если порядок не важен, то имеется возможность отключить его сохранение и тем самым увеличить производительность, использовав промежуточную операцию <code>unordered()</code>:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="n">collection</span><span class="o">.</span><span class="na">parallelStream</span><span class="o">()</span>
    <span class="o">.</span><span class="na">sorted</span><span class="o">()</span>
    <span class="o">.</span><span class="na">unordered</span><span class="o">()</span>
    <span class="o">.</span><span class="na">collect</span><span class="o">(</span><span class="nc">Collectors</span><span class="o">.</span><span class="na">toList</span><span class="o">());</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><a href="#java-8">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_какие_конечные_методы_работы_со_стримами_вы_знаете">7.39. Какие конечные методы работы со стримами вы знаете?</h3>
<div class="ulist">
<ul>
<li>
<p><code>findFirst()</code> возвращает первый элемент;</p>
</li>
<li>
<p><code>findAny()</code> возвращает любой подходящий элемент;</p>
</li>
<li>
<p><code>collect()</code> представление результатов в виде коллекций и других структур данных;</p>
</li>
<li>
<p><code>count()</code> возвращает количество элементов;</p>
</li>
<li>
<p><code>anyMatch()</code> возвращает <code>true</code>, если условие выполняется хотя бы для одного элемента;</p>
</li>
<li>
<p><code>noneMatch()</code> возвращает <code>true</code>, если условие не выполняется ни для одного элемента;</p>
</li>
<li>
<p><code>allMatch()</code> возвращает <code>true</code>, если условие выполняется для всех элементов;</p>
</li>
<li>
<p><code>min()</code> возвращает минимальный элемент, используя в качестве условия <code>Comparator</code>;</p>
</li>
<li>
<p><code>max()</code> возвращает максимальный элемент, используя в качестве условия <code>Comparator</code>;</p>
</li>
<li>
<p><code>forEach()</code> применяет функцию к каждому объекту (порядок при параллельном выполнении не гарантируется);</p>
</li>
<li>
<p><code>forEachOrdered()</code> применяет функцию к каждому объекту с сохранением порядка элементов;</p>
</li>
<li>
<p><code>toArray()</code> возвращает массив значений;</p>
</li>
<li>
<p><code>reduce()</code>позволяет выполнять агрегатные функции и возвращать один результат.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Для числовых стримов дополнительно доступны:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sum()</code> возвращает сумму всех чисел;</p>
</li>
<li>
<p><code>average()</code> возвращает среднее арифметическое всех чисел.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a href="#java-8">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_какие_промежуточные_методы_работы_со_стримами_вы_знаете">7.40. Какие промежуточные методы работы со стримами вы знаете?</h3>
<div class="ulist">
<ul>
<li>
<p><code>filter()</code> отфильтровывает записи, возвращая только записи, соответствующие условию;</p>
</li>
<li>
<p><code>skip()</code> позволяет пропустить определённое количество элементов в начале;</p>
</li>
<li>
<p><code>distinct()</code> возвращает стрим без дубликатов (для метода <code>equals()</code>);</p>
</li>
<li>
<p><code>map()</code> преобразует каждый элемент;</p>
</li>
<li>
<p><code>peek()</code> возвращает тот же стрим, применяя к каждому элементу функцию;</p>
</li>
<li>
<p><code>limit()</code> позволяет ограничить выборку определенным количеством первых элементов;</p>
</li>
<li>
<p><code>sorted()</code> позволяет сортировать значения либо в натуральном порядке, либо задавая <code>Comparator</code>;</p>
</li>
<li>
<p><code>mapToInt()</code>, <code>mapToDouble()</code>, <code>mapToLong()</code> - аналоги <code>map()</code> возвращающие стрим числовых примитивов;</p>
</li>
<li>
<p><code>flatMap()</code>, <code>flatMapToInt()</code>, <code>flatMapToDouble()</code>, <code>flatMapToLong()</code> - похожи на <code>map()</code>, но могут создавать из одного элемента несколько.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Для числовых стримов дополнительно доступен метод <code>mapToObj()</code>, который преобразует числовой стрим обратно в объектный.</p>
</div>
<div class="paragraph">
<p><a href="#java-8">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_как_вывести_на_экран_10_случайных_чисел_используя_foreach">7.41. Как вывести на экран 10 случайных чисел, используя <code>forEach()</code>?</h3>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="o">(</span><span class="k">new</span> <span class="nc">Random</span><span class="o">())</span>
    <span class="o">.</span><span class="na">ints</span><span class="o">()</span>
    <span class="o">.</span><span class="na">limit</span><span class="o">(</span><span class="mi">10</span><span class="o">)</span>
    <span class="o">.</span><span class="na">forEach</span><span class="o">(</span><span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">::</span><span class="n">println</span><span class="o">);</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><a href="#java-8">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_как_можно_вывести_на_экран_уникальные_квадраты_чисел_используя_метод_map">7.42. Как можно вывести на экран уникальные квадраты чисел используя метод <code>map()</code>?</h3>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="nc">Stream</span>
    <span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span> <span class="mi">3</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span> <span class="mi">1</span><span class="o">)</span>
    <span class="o">.</span><span class="na">map</span><span class="o">(</span><span class="n">s</span> <span class="o">-&gt;</span> <span class="n">s</span> <span class="o">*</span> <span class="n">s</span><span class="o">)</span>
    <span class="o">.</span><span class="na">distinct</span><span class="o">()</span>
    <span class="o">.</span><span class="na">forEach</span><span class="o">(</span><span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">::</span><span class="n">println</span><span class="o">);</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><a href="#java-8">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_как_вывести_на_экран_количество_пустых_строк_с_помощью_метода_filter">7.43. Как вывести на экран количество пустых строк с помощью метода <code>filter()</code>?</h3>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span>
    <span class="nc">Stream</span>
        <span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="s">"Hello"</span><span class="o">,</span> <span class="s">""</span><span class="o">,</span> <span class="s">", "</span><span class="o">,</span> <span class="s">"world"</span><span class="o">,</span> <span class="s">"!"</span><span class="o">)</span>
        <span class="o">.</span><span class="na">filter</span><span class="o">(</span><span class="nl">String:</span><span class="o">:</span><span class="n">isEmpty</span><span class="o">)</span>
        <span class="o">.</span><span class="na">count</span><span class="o">());</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><a href="#java-8">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_как_вывести_на_экран_10_случайных_чисел_в_порядке_возрастания">7.44. Как вывести на экран 10 случайных чисел в порядке возрастания?</h3>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="o">(</span><span class="k">new</span> <span class="nc">Random</span><span class="o">())</span>
    <span class="o">.</span><span class="na">ints</span><span class="o">()</span>
    <span class="o">.</span><span class="na">limit</span><span class="o">(</span><span class="mi">10</span><span class="o">)</span>
    <span class="o">.</span><span class="na">sorted</span><span class="o">()</span>
    <span class="o">.</span><span class="na">forEach</span><span class="o">(</span><span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">::</span><span class="n">println</span><span class="o">);</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><a href="#java-8">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_как_найти_максимальное_число_в_наборе">7.45. Как найти максимальное число в наборе?</h3>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="nc">Stream</span>
    <span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="mi">5</span><span class="o">,</span> <span class="mi">3</span><span class="o">,</span> <span class="mi">4</span><span class="o">,</span> <span class="mi">55</span><span class="o">,</span> <span class="mi">2</span><span class="o">)</span>
    <span class="o">.</span><span class="na">mapToInt</span><span class="o">(</span><span class="n">a</span> <span class="o">-&gt;</span> <span class="n">a</span><span class="o">)</span>
    <span class="o">.</span><span class="na">max</span><span class="o">()</span>
    <span class="o">.</span><span class="na">getAsInt</span><span class="o">();</span> <span class="c1">//55</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><a href="#java-8">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_как_найти_минимальное_число_в_наборе">7.46. Как найти минимальное число в наборе?</h3>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="nc">Stream</span>
    <span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="mi">5</span><span class="o">,</span> <span class="mi">3</span><span class="o">,</span> <span class="mi">4</span><span class="o">,</span> <span class="mi">55</span><span class="o">,</span> <span class="mi">2</span><span class="o">)</span>
    <span class="o">.</span><span class="na">mapToInt</span><span class="o">(</span><span class="n">a</span> <span class="o">-&gt;</span> <span class="n">a</span><span class="o">)</span>
    <span class="o">.</span><span class="na">min</span><span class="o">()</span>
    <span class="o">.</span><span class="na">getAsInt</span><span class="o">();</span> <span class="c1">//2</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><a href="#java-8">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_как_получить_сумму_всех_чисел_в_наборе">7.47. Как получить сумму всех чисел в наборе?</h3>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="nc">Stream</span>
    <span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="mi">5</span><span class="o">,</span> <span class="mi">3</span><span class="o">,</span> <span class="mi">4</span><span class="o">,</span> <span class="mi">55</span><span class="o">,</span> <span class="mi">2</span><span class="o">)</span>
    <span class="o">.</span><span class="na">mapToInt</span><span class="o">()</span>
    <span class="o">.</span><span class="na">sum</span><span class="o">();</span> <span class="c1">//69</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><a href="#java-8">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_как_получить_среднее_значение_всех_чисел">7.48. Как получить среднее значение всех чисел?</h3>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="nc">Stream</span>
    <span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="mi">5</span><span class="o">,</span> <span class="mi">3</span><span class="o">,</span> <span class="mi">4</span><span class="o">,</span> <span class="mi">55</span><span class="o">,</span> <span class="mi">2</span><span class="o">)</span>
    <span class="o">.</span><span class="na">mapToInt</span><span class="o">(</span><span class="n">a</span> <span class="o">-&gt;</span> <span class="n">a</span><span class="o">)</span>
    <span class="o">.</span><span class="na">average</span><span class="o">()</span>
    <span class="o">.</span><span class="na">getAsDouble</span><span class="o">();</span> <span class="c1">//13.8</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><a href="#java-8">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_какие_дополнительные_методы_для_работы_с_ассоциативными_массивами_maps_появились_в_java_8">7.49. Какие дополнительные методы для работы с ассоциативными массивами (maps) появились в Java 8?</h3>
<div class="ulist">
<ul>
<li>
<p><code>putIfAbsent()</code> добавляет пару «ключ-значение», только если ключ отсутствовал:</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><code>map.putIfAbsent("a", "Aa");</code></p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>forEach()</code> принимает функцию, которая производит операцию над каждым элементом:</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><code>map.forEach((k, v) -&gt; System.out.println(v));</code></p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>compute()</code> создаёт или обновляет текущее значение на полученное в результате вычисления (возможно использовать ключ и текущее значение):</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><code>map.compute("a", (k, v) -&gt; String.valueOf(k).concat(v)); //["a", "aAa"]</code></p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>computeIfPresent()</code> если ключ существует, обновляет текущее значение на полученное в результате вычисления (возможно использовать ключ и текущее значение):</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><code>map.computeIfPresent("a", (k, v) -&gt; k.concat(v));</code></p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>computeIfAbsent()</code> если ключ отсутствует, создаёт его со значением, которое вычисляется (возможно использовать ключ):</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><code>map.computeIfAbsent("a", k -&gt; "A".concat(k)); //["a","Aa"]</code></p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>getOrDefault()</code> в случае отсутствия ключа, возвращает переданное значение по-умолчанию:</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><code>map.getOrDefault("a", "not found");</code></p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>merge()</code> принимает ключ, значение и функцию, которая объединяет передаваемое и текущее значения. Если под заданным ключем значение отсутствует, то записывает туда передаваемое значение.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><code>map.merge("a", "z", (value, newValue) -&gt; value.concat(newValue)); //["a","Aaz"]</code></p>
</div>
<div class="paragraph">
<p><a href="#java-8">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_что_такое_localdatetime">7.50. Что такое <code>LocalDateTime</code>?</h3>
<div class="paragraph">
<p><code>LocalDateTime</code> объединяет вместе <code>LocaleDate</code> и <code>LocalTime</code>, содержит дату и время в календарной системе ISO-8601 без привязки к часовому поясу. Время хранится с точностью до наносекунды. Содержит множество удобных методов, таких как plusMinutes, plusHours, isAfter, toSecondOfDay и т.д.</p>
</div>
<div class="paragraph">
<p><a href="#java-8">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_что_такое_zoneddatetime">7.51. Что такое <code>ZonedDateTime</code>?</h3>
<div class="paragraph">
<p><code>java.time.ZonedDateTime</code>&#8201;&#8212;&#8201;аналог <code>java.util.Calendar</code>, класс с самым полным объемом информации о временном контексте в календарной системе ISO-8601. Включает временную зону, поэтому все операции с временными сдвигами этот класс проводит с её учётом.</p>
</div>
<div class="paragraph">
<p><a href="#java-8">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_как_получить_текущую_дату_с_использованием_date_time_api_из_java_8">7.52. Как получить текущую дату с использованием Date Time API из Java 8?</h3>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="nc">LocalDate</span><span class="o">.</span><span class="na">now</span><span class="o">();</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><a href="#java-8">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_как_добавить_1_неделю_1_месяц_1_год_10_лет_к_текущей_дате_с_использованием_date_time_api">7.53. Как добавить 1 неделю, 1 месяц, 1 год, 10 лет к текущей дате с использованием Date Time API?</h3>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="nc">LocalDate</span><span class="o">.</span><span class="na">now</span><span class="o">().</span><span class="na">plusWeeks</span><span class="o">(</span><span class="mi">1</span><span class="o">);</span>
<span class="nc">LocalDate</span><span class="o">.</span><span class="na">now</span><span class="o">().</span><span class="na">plusMonths</span><span class="o">(</span><span class="mi">1</span><span class="o">);</span>
<span class="nc">LocalDate</span><span class="o">.</span><span class="na">now</span><span class="o">().</span><span class="na">plusYears</span><span class="o">(</span><span class="mi">1</span><span class="o">);</span>
<span class="nc">LocalDate</span><span class="o">.</span><span class="na">now</span><span class="o">().</span><span class="na">plus</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="nc">ChronoUnit</span><span class="o">.</span><span class="na">DECADES</span><span class="o">);</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><a href="#java-8">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_как_получить_следующий_вторник_используя_date_time_api">7.54. Как получить следующий вторник используя Date Time API?</h3>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="nc">LocalDate</span><span class="o">.</span><span class="na">now</span><span class="o">().</span><span class="na">with</span><span class="o">(</span><span class="nc">TemporalAdjusters</span><span class="o">.</span><span class="na">next</span><span class="o">(</span><span class="nc">DayOfWeek</span><span class="o">.</span><span class="na">TUESDAY</span><span class="o">));</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><a href="#java-8">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_как_получить_вторую_субботу_текущего_месяца_используя_date_time_api">7.55. Как получить вторую субботу текущего месяца используя Date Time API?</h3>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="nc">LocalDate</span>
    <span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="nc">LocalDate</span><span class="o">.</span><span class="na">now</span><span class="o">().</span><span class="na">getYear</span><span class="o">(),</span> <span class="nc">LocalDate</span><span class="o">.</span><span class="na">now</span><span class="o">().</span><span class="na">getMonth</span><span class="o">(),</span> <span class="mi">1</span><span class="o">)</span>
    <span class="o">.</span><span class="na">with</span><span class="o">(</span><span class="nc">TemporalAdjusters</span><span class="o">.</span><span class="na">nextOrSame</span><span class="o">(</span><span class="nc">DayOfWeek</span><span class="o">.</span><span class="na">SATURDAY</span><span class="o">))</span>
    <span class="o">.</span><span class="na">with</span><span class="o">(</span><span class="nc">TemporalAdjusters</span><span class="o">.</span><span class="na">next</span><span class="o">(</span><span class="nc">DayOfWeek</span><span class="o">.</span><span class="na">SATURDAY</span><span class="o">));</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><a href="#java-8">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_как_получить_текущее_время_с_точностью_до_миллисекунд_используя_date_time_api">7.56. Как получить текущее время с точностью до миллисекунд используя Date Time API?</h3>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="k">new</span> <span class="nc">Date</span><span class="o">().</span><span class="na">toInstant</span><span class="o">();</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><a href="#java-8">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_как_получить_текущее_время_по_местному_времени_с_точностью_до_миллисекунд_используя_date_time_api">7.57. Как получить текущее время по местному времени с точностью до миллисекунд используя Date Time API?</h3>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="nc">LocalDateTime</span><span class="o">.</span><span class="na">ofInstant</span><span class="o">(</span><span class="k">new</span> <span class="nc">Date</span><span class="o">().</span><span class="na">toInstant</span><span class="o">(),</span> <span class="nc">ZoneId</span><span class="o">.</span><span class="na">systemDefault</span><span class="o">());</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><a href="#java-8">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_как_определить_повторяемую_аннотацию">7.58. Как определить повторяемую аннотацию?</h3>
<div class="paragraph">
<p>Чтобы определить повторяемую аннотацию, необходимо создать аннотацию-контейнер для списка повторяемых аннотаций и обозначить повторяемую мета-аннотацией <code>@Repeatable</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="nd">@interface</span> <span class="nc">Schedulers</span>
<span class="o">{</span>
    <span class="nc">Scheduler</span><span class="o">[]</span> <span class="nf">value</span><span class="o">();</span>
<span class="o">}</span>

<span class="nd">@Repeatable</span><span class="o">(</span><span class="nc">Schedulers</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
<span class="nd">@interface</span> <span class="nc">Scheduler</span>
<span class="o">{</span>
    <span class="nc">String</span> <span class="nf">birthday</span><span class="o">()</span> <span class="k">default</span> <span class="s">"Jan 8 1935"</span><span class="o">;</span>
<span class="o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><a href="#java-8">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_что_такое_nashorn">7.59. Что такое <code>Nashorn</code>?</h3>
<div class="paragraph">
<p><strong>Nashorn</strong> - это движок JavaScript, разрабатываемый на Java компанией Oracle. Призван дать возможность встраивать код JavaScript в приложения Java. В сравнении с <em>Rhino</em>, который поддерживается Mozilla Foundation, Nashorn обеспечивает от 2 до 10 раз более высокую производительность, так как он компилирует код и передает байт-код виртуальной машине Java непосредственно в памяти. Nashorn умеет компилировать код JavaScript и генерировать классы Java, которые загружаются специальным загрузчиком. Так же возможен вызов кода Java прямо из JavaScript.</p>
</div>
<div class="paragraph">
<p><a href="#java-8">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_что_такое_jjs">7.60. Что такое <code>jjs</code>?</h3>
<div class="paragraph">
<p><code>jjs</code> это утилита командной строки, которая позволяет исполнять программы на языке JavaScript прямо в консоли.</p>
</div>
<div class="paragraph">
<p><a href="#java-8">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_какой_класс_появился_в_java_8_для_кодированиядекодирования_данных">7.61. Какой класс появился в Java 8 для кодирования/декодирования данных?</h3>
<div class="paragraph">
<p><code>Base64</code> - потокобезопасный класс, который реализует кодировщик и декодировщик данных, используя схему кодирования base64 согласно <em>RFC 4648</em> и <em>RFC 2045</em>.</p>
</div>
<div class="paragraph">
<p>Base64 содержит 6 основных методов:</p>
</div>
<div class="paragraph">
<p><code>getEncoder()</code>/<code>getDecoder()</code> - возвращает кодировщик/декодировщик base64, соответствующий стандарту <em>RFC 4648</em>;
<code>getUrlEncoder()</code>/<code>getUrlDecoder()</code> - возвращает URL-safe кодировщик/декодировщик base64, соответствующий стандарту <em>RFC 4648</em>;
<code>getMimeEncoder()</code>/<code>getMimeDecoder()</code> - возвращает MIME кодировщик/декодировщик, соответствующий стандарту <em>RFC 2045</em>.</p>
</div>
<div class="paragraph">
<p><a href="#java-8">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_как_создать_base64_кодировщик_и_декодировщик">7.62. Как создать Base64 кодировщик и декодировщик?</h3>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="c1">// Encode</span>
<span class="nc">String</span> <span class="n">b64</span> <span class="o">=</span> <span class="nc">Base64</span><span class="o">.</span><span class="na">getEncoder</span><span class="o">().</span><span class="na">encodeToString</span><span class="o">(</span><span class="s">"input"</span><span class="o">.</span><span class="na">getBytes</span><span class="o">(</span><span class="s">"utf-8"</span><span class="o">));</span> <span class="c1">//aW5wdXQ==</span>
<span class="c1">// Decode</span>
<span class="k">new</span> <span class="nf">String</span><span class="o">(</span><span class="nc">Base64</span><span class="o">.</span><span class="na">getDecoder</span><span class="o">().</span><span class="na">decode</span><span class="o">(</span><span class="s">"aW5wdXQ=="</span><span class="o">),</span> <span class="s">"utf-8"</span><span class="o">);</span> <span class="c1">//input</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><a href="#java-8">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_источники_7">7.63. Источники</h3>
<div class="ulist">
<ul>
<li>
<p><a href="https://habrahabr.ru/post/216431/">Хабрахабр - Новое в Java 8</a></p>
</li>
<li>
<p><a href="https://habrahabr.ru/company/luxoft/blog/270383/">Хабрахабр - Шпаргалка Java программиста 4. Java Stream API</a></p>
</li>
<li>
<p><a href="http://metanit.com/java/tutorial/9.1.php">METANIT.COM</a></p>
</li>
<li>
<p><a href="http://javadevblog.com/interfejsy-v-java-8-staticheskie-metody-metody-po-umolchaniyu-funktsional-ny-e-interfejsy.html">javadevblog.com</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a href="README.html">Вопросы для собеседования</a></p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_java_collections_framework">8. Java Collections Framework</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="#Что-такое-коллекция">Что такое <em>«коллекция»</em>?</a></p>
</li>
<li>
<p><a href="#Назовите-основные-интерфейсы-jcf-и-их-реализации">Назовите основные интерфейсы JCF и их реализации.</a></p>
</li>
<li>
<p><a href="#Расположите-в-виде-иерархии-следующие-интерфейсы-list-set-map-sortedset-sortedmap-collection-iterable-iterator-navigableset-navigablemap">Расположите в виде иерархии следующие интерфейсы: <code>List</code>, <code>Set</code>, <code>Map</code>, <code>SortedSet</code>, <code>SortedMap</code>, <code>Collection</code>, <code>Iterable</code>, <code>Iterator</code>, <code>NavigableSet</code>, <code>NavigableMap</code>.</a></p>
</li>
<li>
<p><a href="Почему-map&.html#8212;&#8203;это-не-collection-в-то-время-как-list-и-set-являются-collection">Почему <code>Map</code>&#8201;&#8212;&#8201;это не <code>Collection</code>, в то время как <code>List</code> и <code>Set</code> являются <code>Collection</code>?</a></p>
</li>
<li>
<p><a href="#В-чем-разница-между-классами-javautilcollection-и-javautilcollections">В чем разница между классами <code>java.util.Collection</code> и <code>java.util.Collections</code>?</a></p>
</li>
<li>
<p><a href="#Что-такое-fail-fast-поведение">Что такое «fail-fast поведение»?</a></p>
</li>
<li>
<p><a href="#Какая-разница-между-fail-fast-и-fail-safe">Какая разница между fail-fast и fail-safe?</a></p>
</li>
<li>
<p><a href="#Приведите-примеры-итераторов-реализующих-поведение-fail-safe">Приведите примеры итераторов, реализующих поведение fail-safe</a></p>
</li>
<li>
<p><a href="#Чем-различаются-enumeration-и-iterator">Чем различаются <code>Enumeration</code> и <code>Iterator</code>.</a></p>
</li>
<li>
<p><a href="#Как-между-собой-связаны-iterable-и-iterator">Как между собой связаны <code>Iterable</code> и <code>Iterator</code>?</a></p>
</li>
<li>
<p><a href="#Как-между-собой-связаны-iterable-iterator-и-for-each">Как между собой связаны <code>Iterable</code>, <code>Iterator</code> и «for-each»?</a></p>
</li>
<li>
<p><a href="#Сравните-iterator-и-listiterator">Сравните <code>Iterator</code> и <code>ListIterator</code>.</a></p>
</li>
<li>
<p><a href="#Что-произойдет-при-вызове-iteratornext-без-предварительного-вызова-iteratorhasnext">Что произойдет при вызове <code>Iterator.next()</code> без предварительного вызова <code>Iterator.hasNext()</code>?</a></p>
</li>
<li>
<p><a href="#Сколько-элементов-будет-пропущено-если-iteratornext-будет-вызван-после-10-ти-вызовов-iteratorhasnext">Сколько элементов будет пропущено, если <code>Iterator.next()</code> будет вызван после 10-ти вызовов <code>Iterator.hasNext()</code>?</a></p>
</li>
<li>
<p><a href="#Как-поведёт-себя-коллекция-если-вызвать-iteratorremove">Как поведёт себя коллекция, если вызвать <code>iterator.remove()</code>?</a></p>
</li>
<li>
<p><a href="#Как-поведёт-себя-уже-инстанциированный-итератор-для-collection-если-вызвать-collectionremove">Как поведёт себя уже инстанциированный итератор для <code>collection</code>, если вызвать <code>collection.remove()</code>?</a></p>
</li>
<li>
<p><a href="#Как-избежать-concurrentmodificationexception-во-время-перебора-коллекции">Как избежать <code>ConcurrentModificationException</code> во время перебора коллекции?</a></p>
</li>
<li>
<p><a href="#Какая-коллекция-реализует-дисциплину-обслуживания-fifo">Какая коллекция реализует дисциплину обслуживания FIFO?</a></p>
</li>
<li>
<p><a href="#Какая-коллекция-реализует-дисциплину-обслуживания-filo">Какая коллекция реализует дисциплину обслуживания FILO?</a></p>
</li>
<li>
<p><a href="#Чем-отличается-arraylist-от-vector">Чем отличается <code>ArrayList</code> от <code>Vector</code>?</a></p>
</li>
<li>
<p><a href="#Зачем-добавили-arraylist-если-уже-был-vector">Зачем добавили <code>ArrayList</code>, если уже был <code>Vector</code>?</a></p>
</li>
<li>
<p><a href="#Чем-отличается-arraylist-от-linkedlist-В-каких-случаях-лучше-использовать-первый-а-в-каких-второй">Чем отличается <code>ArrayList</code> от <code>LinkedList</code>? В каких случаях лучше использовать первый, а в каких второй?</a></p>
</li>
<li>
<p><a href="#Что-работает-быстрее-arraylist-или-linkedlist">Что работает быстрее <code>ArrayList</code> или <code>LinkedList</code>?</a></p>
</li>
<li>
<p><a href="#Какое-худшее-время-работы-метода-contains-для-элемента-который-есть-в-linkedlist">Какое худшее время работы метода <code>contains()</code> для элемента, который есть в <code>LinkedList</code>?</a></p>
</li>
<li>
<p><a href="#Какое-худшее-время-работы-метода-contains-для-элемента-который-есть-в-arraylist">Какое худшее время работы метода <code>contains()</code> для элемента, который есть в <code>ArrayList</code>?</a></p>
</li>
<li>
<p><a href="#Какое-худшее-время-работы-метода-add-для-linkedlist">Какое худшее время работы метода <code>add()</code> для <code>LinkedList</code>?</a></p>
</li>
<li>
<p><a href="#Какое-худшее-время-работы-метода-add-для-arraylist">Какое худшее время работы метода <code>add()</code> для <code>ArrayList</code>?</a></p>
</li>
<li>
<p><a href="#Необходимо-добавить-1-млн-элементов-какую-структуру-вы-используете">Необходимо добавить 1 млн. элементов, какую структуру вы используете?</a></p>
</li>
<li>
<p><a href="#Как-происходит-удаление-элементов-из-arraylist-Как-меняется-в-этом-случае-размер-arraylist">Как происходит удаление элементов из <code>ArrayList</code>? Как меняется в этом случае размер <code>ArrayList</code>?</a></p>
</li>
<li>
<p><a href="#Предложите-эффективный-алгоритм-удаления-нескольких-рядом-стоящих-элементов-из-середины-списка-реализуемого-arraylist">Предложите эффективный алгоритм удаления нескольких рядом стоящих элементов из середины списка, реализуемого <code>ArrayList</code>.</a></p>
</li>
<li>
<p><a href="#Сколько-необходимо-дополнительной-памяти-при-вызове-arraylistadd">Сколько необходимо дополнительной памяти при вызове <code>ArrayList.add()</code>?</a></p>
</li>
<li>
<p><a href="#Сколько-выделяется-дополнительно-памяти-при-вызове-linkedlistadd">Сколько выделяется дополнительно памяти при вызове <code>LinkedList.add()</code>?</a></p>
</li>
<li>
<p><a href="#Оцените-количество-памяти-на-хранение-одного-примитива-типа-byte-в-linkedlist">Оцените количество памяти на хранение одного примитива типа <code>byte</code> в <code>LinkedList</code>?</a></p>
</li>
<li>
<p><a href="#Оцените-количество-памяти-на-хранение-одного-примитива-типа-byte-в-arraylist">Оцените количество памяти на хранение одного примитива типа <code>byte</code> в <code>ArrayList</code>?</a></p>
</li>
<li>
<p><a href="#Для-arraylist-или-для-linkedlist-операция-добавления-элемента-в-середину-listaddlistsize2-newelement-медленнее">Для <code>ArrayList</code> или для <code>LinkedList</code> операция добавления элемента в середину (<code>list.add(list.size()/2, newElement)</code>) медленнее?</a></p>
</li>
<li>
<p><a href="#В-реализации-класса-arraylist-есть-следующие-поля-object-elementdata-int-size-Объясните-зачем-хранить-отдельно-size-если-всегда-можно-взять-elementdatalength">В реализации класса <code>ArrayList</code> есть следующие поля: <code>Object[] elementData</code>, <code>int size</code>. Объясните, зачем хранить отдельно <code>size</code>, если всегда можно взять <code>elementData.length</code>?</a></p>
</li>
<li>
<p><a href="#Сравните-интерфейсы-queue-и-deque">Сравните интерфейсы <code>Queue</code> и <code>Deque</code>.</a></p>
</li>
<li>
<p><a href="#Кто-кого-расширяет-queue-расширяет-deque-или-deque-расширяет-queue">Кто кого расширяет: <code>Queue</code> расширяет <code>Deque</code>, или <code>Deque</code> расширяет <code>Queue</code>?</a></p>
</li>
<li>
<p><a href="#Почему-linkedlist-реализует-и-list-и-deque">Почему <code>LinkedList</code> реализует и <code>List</code>, и <code>Deque</code>?</a></p>
</li>
<li>
<p><a href="linkedlist&.html#8212;&#8203;это-односвязный-двусвязный-или-четырехсвязный-список"><code>LinkedList</code>&#8201;&#8212;&#8201;это односвязный, двусвязный или четырехсвязный список?</a></p>
</li>
<li>
<p><a href="#Как-перебрать-элементы-linkedlist-в-обратном-порядке-не-используя-медленный-getindex">Как перебрать элементы <code>LinkedList</code> в обратном порядке, не используя медленный <code>get(index)</code>?</a></p>
</li>
<li>
<p><a href="#Что-позволяет-сделать-priorityqueue">Что позволяет сделать <code>PriorityQueue</code>?</a></p>
</li>
<li>
<p><a href="#stack-считается-устаревшим-Чем-его-рекомендуют-заменять-Почему"><code>Stack</code> считается «устаревшим». Чем его рекомендуют заменять? Почему?</a></p>
</li>
<li>
<p><a href="#Зачем-нужен-hashmap-если-есть-hashtable">Зачем нужен <code>HashMap</code>, если есть <code>Hashtable</code>?</a></p>
</li>
<li>
<p><a href="#В-чем-разница-между-hashmap-и-identityhashmap-Для-чего-нужна-identityhashmap">В чем разница между <code>HashMap</code> и <code>IdentityHashMap</code>? Для чего нужна <code>IdentityHashMap</code>?</a></p>
</li>
<li>
<p><a href="#В-чем-разница-между-hashmap-и-weakhashmap-Для-чего-используется-weakhashmap">В чем разница между <code>HashMap</code> и <code>WeakHashMap</code>? Для чего используется <code>WeakHashMap</code>?</a></p>
</li>
<li>
<p><a href="#В-weakhashmap-используются-weakreferences-А-почему-бы-не-создать-softhashmap-на-softreferences">В <code>WeakHashMap</code> используются WeakReferences. А почему бы не создать <code>SoftHashMap</code> на SoftReferences?</a></p>
</li>
<li>
<p><a href="#В-weakhashmap-используются-weakreferences-А-почему-бы-не-создать-phantomhashmap-на-phantomreferences">В <code>WeakHashMap</code> используются WeakReferences. А почему бы не создать <code>PhantomHashMap</code> на PhantomReferences?</a></p>
</li>
<li>
<p><a href="#linkedhashmap---что-в-нем-от-linkedlist-а-что-от-hashmap"><code>LinkedHashMap</code> - что в нем от <code>LinkedList</code>, а что от <code>HashMap</code>?</a></p>
</li>
<li>
<p><a href="#В-чем-проявляется-сортированность-sortedmap-кроме-того-что-tostring-выводит-все-элементы-по-порядку">В чем проявляется «сортированность» <code>SortedMap</code>, кроме того, что <code>toString()</code> выводит все элементы по порядку?</a></p>
</li>
<li>
<p><a href="#Как-устроен-hashmap">Как устроен <code>HashMap</code>?</a></p>
</li>
<li>
<p><a href="#Согласно-Кнуту-и-Кормену-существует-две-основных-реализации-хэш-таблицы-на-основе-открытой-адресации-и-на-основе-метода-цепочек-Как-реализована-hashmap-Почему-по-вашему-мнению-была-выбрана-именно-эта-реализация-В-чем-плюсы-и-минусы-каждого-подхода">Согласно Кнуту и Кормену существует две основных реализации хэш-таблицы: на основе открытой адресации и на основе метода цепочек. Как реализована <code>HashMap</code>? Почему, по вашему мнению, была выбрана именно эта реализация? В чем плюсы и минусы каждого подхода?</a></p>
</li>
<li>
<p><a href="Как-работает-hashmap-при-попытке-сохранить-в-него-два-элемента-по-ключам-с-одинаковым-hashcode-но-для-которых-equals&.html#8212;&#8203;false">Как работает <code>HashMap</code> при попытке сохранить в него два элемента по ключам с одинаковым <code>hashCode()</code>, но для которых <code>equals() == false</code>?</a></p>
</li>
<li>
<p><a href="#Какое-начальное-количество-корзин-в-hashmap">Какое начальное количество корзин в <code>HashMap</code>?</a></p>
</li>
<li>
<p><a href="#Какова-оценка-временной-сложности-операций-над-элементами-из-hashmap-Гарантирует-ли-hashmap-указанную-сложность-выборки-элемента">Какова оценка временной сложности операций над элементами из <code>HashMap</code>? Гарантирует ли <code>HashMap</code> указанную сложность выборки элемента?</a></p>
</li>
<li>
<p><a href="#Возможна-ли-ситуация-когда-hashmap-выродится-в-список-даже-с-ключами-имеющими-разные-hashcode">Возможна ли ситуация, когда <code>HashMap</code> выродится в список даже с ключами имеющими разные <code>hashCode()</code>?</a></p>
</li>
<li>
<p><a href="#В-каком-случае-может-быть-потерян-элемент-в-hashmap">В каком случае может быть потерян элемент в <code>HashMap</code>?</a></p>
</li>
<li>
<p><a href="#Почему-нельзя-использовать-byte-в-качестве-ключа-в-hashmap">Почему нельзя использовать <code>byte[]</code> в качестве ключа в <code>HashMap</code>?</a></p>
</li>
<li>
<p><a href="#Какова-роль-equals-и-hashcode-в-hashmap">Какова роль <code>equals()</code> и <code>hashCode()</code> в <code>HashMap</code>?</a></p>
</li>
<li>
<p><a href="#Каково-максимальное-число-значений-hashcode">Каково максимальное число значений <code>hashCode()</code>?</a></p>
</li>
<li>
<p><a href="#Какое-худшее-время-работы-метода-getkey-для-ключа-которого-нет-в-hashmap">Какое худшее время работы метода get(key) для ключа, которого нет в <code>HashMap</code>?</a></p>
</li>
<li>
<p><a href="#Какое-худшее-время-работы-метода-getkey-для-ключа-который-есть-в-hashmap">Какое худшее время работы метода get(key) для ключа, который есть в <code>HashMap</code>?</a></p>
</li>
<li>
<p><a href="#Сколько-переходов-происходит-в-момент-вызова-hashmapgetkey-по-ключу-который-есть-в-таблице">Сколько переходов происходит в момент вызова <code>HashMap.get(key)</code> по ключу, который есть в таблице?</a></p>
</li>
<li>
<p><a href="#Сколько-создается-новых-объектов-когда-вы-добавляете-новый-элемент-в-hashmap">Сколько создается новых объектов, когда вы добавляете новый элемент в <code>HashMap</code>?</a></p>
</li>
<li>
<p><a href="#Как-и-когда-происходит-увеличение-количества-корзин-в-hashmap">Как и когда происходит увеличение количества корзин в <code>HashMap</code>?</a></p>
</li>
<li>
<p><a href="#Объясните-смысл-параметров-в-конструкторе-hashmapint-initialcapacity-float-loadfactor">Объясните смысл параметров в конструкторе <code>HashMap(int initialCapacity, float loadFactor)</code>.</a></p>
</li>
<li>
<p><a href="#Будет-ли-работать-hashmap-если-все-добавляемые-ключи-будут-иметь-одинаковый-hashcode">Будет ли работать <code>HashMap</code>, если все добавляемые ключи будут иметь одинаковый <code>hashCode()</code>?</a></p>
</li>
<li>
<p><a href="#Как-перебрать-все-ключи-map">Как перебрать все ключи <code>Map</code>?</a></p>
</li>
<li>
<p><a href="#Как-перебрать-все-значения-map">Как перебрать все значения <code>Map</code>?</a></p>
</li>
<li>
<p><a href="#Как-перебрать-все-пары-ключ-значение-в-map">Как перебрать все пары «ключ-значение» в <code>Map</code>?</a></p>
</li>
<li>
<p><a href="#В-чем-отличия-treeset-и-hashset">В чем отличия <code>TreeSet</code> и <code>HashSet</code>?</a></p>
</li>
<li>
<p><a href="#Что-будет-если-добавлять-элементы-в-treeset-по-возрастанию">Что будет, если добавлять элементы в <code>TreeSet</code> по возрастанию?</a></p>
</li>
<li>
<p><a href="#Чем-linkedhashset-отличается-от-hashset">Чем <code>LinkedHashSet</code> отличается от <code>HashSet</code>?</a></p>
</li>
<li>
<p><a href="#Для-enum-есть-специальный-класс-javautilenumset-Зачем-Чем-авторов-не-устраивал-hashset-или-treeset">Для <code>Enum</code> есть специальный класс <code>java.util.EnumSet</code>. Зачем? Чем авторов не устраивал <code>HashSet</code> или <code>TreeSet</code>?</a></p>
</li>
<li>
<p><a href="#Какие-существуют-способы-перебирать-элементы-списка">Какие существуют способы перебирать элементы списка?</a></p>
</li>
<li>
<p><a href="#Каким-образом-можно-получить-синхронизированные-объекты-стандартных-коллекций">Каким образом можно получить синхронизированные объекты стандартных коллекций?</a></p>
</li>
<li>
<p><a href="#Как-получить-коллекцию-только-для-чтения">Как получить коллекцию только для чтения?</a></p>
</li>
<li>
<p><a href="#Напишите-однопоточную-программу-которая-заставляет-коллекцию-выбросить-concurrentmodificationexception">Напишите однопоточную программу, которая заставляет коллекцию выбросить <code>ConcurrentModificationException</code>.</a></p>
</li>
<li>
<p><a href="#Приведите-пример-когда-какая-либо-коллекция-выбрасывает-unsupportedoperationexception">Приведите пример, когда какая-либо коллекция выбрасывает <code>UnsupportedOperationException</code>.</a></p>
</li>
<li>
<p><a href="#Реализуйте-симметрическую-разность-двух-коллекций-используя-методы-collection-addall-removeall-retainall">Реализуйте симметрическую разность двух коллекций используя методы <code>Collection</code> (<code>addAll(...)</code>, <code>removeAll(...)</code>, <code>retainAll(...)</code>).</a></p>
</li>
<li>
<p><a href="#Как-используя-linkedhashmap-сделать-кэш-c-invalidation-policy">Как, используя LinkedHashMap, сделать кэш c «invalidation policy»?</a></p>
</li>
<li>
<p><a href="#Как-одной-строчкой-скопировать-элементы-любой-collection-в-массив">Как одной строчкой скопировать элементы любой <code>collection</code> в массив?</a></p>
</li>
<li>
<p><a href="#Как-одним-вызовом-из-list-получить-list-со-всеми-элементами-кроме-первых-и-последних-3-х">Как одним вызовом из <code>List</code> получить <code>List</code> со всеми элементами, кроме первых и последних 3-х?</a></p>
</li>
<li>
<p><a href="#Как-одной-строчкой-преобразовать-hashset-в-arraylist">Как одной строчкой преобразовать <code>HashSet</code> в <code>ArrayList</code>?</a></p>
</li>
<li>
<p><a href="#Как-одной-строчкой-преобразовать-arraylist-в-hashset">Как одной строчкой преобразовать <code>ArrayList</code> в <code>HashSet</code>?</a></p>
</li>
<li>
<p><a href="#Сделайте-hashset-из-ключей-hashmap">Сделайте <code>HashSet</code> из ключей <code>HashMap</code>.</a></p>
</li>
<li>
<p><a href="#Сделайте-hashmap-из-hashsetmapentryk-v">Сделайте <code>HashMap</code> из <code>HashSet&lt;Map.Entry&lt;K, V</a></code>.&gt;&gt;</p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_что_такое_коллекция">8.1. Что такое <em>«коллекция»</em>?</h3>
<div class="paragraph">
<p><em>«Коллекция»</em> - это структура данных, набор каких-либо объектов. Данными (объектами в наборе) могут быть числа, строки, объекты пользовательских классов и т.п.</p>
</div>
<div class="paragraph">
<p><a href="#java-collections-framework">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_назовите_основные_интерфейсы_jcf_и_их_реализации">8.2. Назовите основные интерфейсы JCF и их реализации.</h3>
<div class="paragraph">
<p>На вершине иерархии в Java Collection Framework располагаются 2 интерфейса: <code>Collection</code> и <code>Map</code>. Эти интерфейсы разделяют все коллекции, входящие во фреймворк на две части по типу хранения данных: простые последовательные наборы элементов и наборы пар «ключ&#8201;&#8212;&#8201;значение» соответственно.</p>
</div>
<div class="paragraph">
<p>Интерфейс <code>Collection</code> расширяют интерфейсы:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>List</code> (список) представляет собой коллекцию, в которой допустимы дублирующие значения. Реализации:</p>
<div class="ulist">
<ul>
<li>
<p><code>ArrayList</code> - инкапсулирует в себе обычный массив, длина которого автоматически увеличивается при добавлении новых элементов. Элементы такой коллекции пронумерованы, начиная от нуля, к ним можно обратиться по индексу.</p>
</li>
<li>
<p><code>LinkedList</code> (двунаправленный связный список) - состоит из узлов, каждый из которых содержит как собственно данные, так и две ссылки на следующий и предыдущий узел.</p>
</li>
<li>
<p><code>Vector</code>&#8201;&#8212;&#8201;реализация динамического массива объектов, методы которой синхронизированы.</p>
</li>
<li>
<p><code>Stack</code>&#8201;&#8212;&#8201;реализация стека LIFO (last-in-first-out).</p>
</li>
</ul>
</div>
</li>
<li>
<p><code>Set</code> (сет) описывает неупорядоченную коллекцию, не содержащую повторяющихся элементов. Реализации:</p>
<div class="ulist">
<ul>
<li>
<p><code>HashSet</code> - использует HashMap для хранения данных. В качестве ключа и значения используется добавляемый элемент. Из-за особенностей реализации порядок элементов не гарантируется при добавлении.</p>
</li>
<li>
<p><code>LinkedHashSet</code>&#8201;&#8212;&#8201;гарантирует, что порядок элементов при обходе коллекции будет идентичен порядку добавления элементов.</p>
</li>
<li>
<p><code>TreeSet</code>&#8201;&#8212;&#8201;предоставляет возможность управлять порядком элементов в коллекции при помощи объекта <code>Comparator</code>, либо сохраняет элементы с использованием «natural ordering».</p>
</li>
</ul>
</div>
</li>
<li>
<p><code>Queue</code> (очередь) предназначена для хранения элементов с предопределённым способом вставки и извлечения FIFO (first-in-first-out):</p>
<div class="ulist">
<ul>
<li>
<p><code>PriorityQueue</code>&#8201;&#8212;&#8201;предоставляет возможность управлять порядком элементов в коллекции при помощи объекта <code>Comparator</code>, либо сохраняет элементы с использованием «natural ordering».</p>
</li>
<li>
<p><code>ArrayDeque</code>&#8201;&#8212;&#8201;реализация интерфейса <code>Deque</code>, который расширяет интерфейс <code>Queue</code> методами, позволяющими реализовать конструкцию вида LIFO (last-in-first-out).</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>Интерфейс <code>Map</code> реализован классами:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>Hashtable</code>&#8201;&#8212;&#8201;хэш-таблица, методы которой синхронизированы. Не позволяет использовать <code>null</code> в качестве значения или ключа и не является упорядоченной.</p>
</li>
<li>
<p><code>HashMap</code>&#8201;&#8212;&#8201;хэш-таблица. Позволяет использовать <code>null</code> в качестве значения или ключа и не является упорядоченной.</p>
</li>
<li>
<p><code>LinkedHashMap</code>&#8201;&#8212;&#8201;упорядоченная реализация хэш-таблицы.</p>
</li>
<li>
<p><code>TreeMap</code>&#8201;&#8212;&#8201;реализация, основанная на красно-чёрных деревьях. Является упорядоченной и предоставляет возможность управлять порядком элементов в коллекции при помощи объекта <code>Comparator</code>, либо сохраняет элементы с использованием «natural ordering».</p>
</li>
<li>
<p><code>WeakHashMap</code>&#8201;&#8212;&#8201;реализация хэш-таблицы, которая организована с использованием <em>weak references</em> для ключей (сборщик мусора автоматически удалит элемент из коллекции при следующей сборке мусора, если на ключ этого элемента нет жёстких ссылок).</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a href="#java-collections-framework">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_расположите_в_виде_иерархии_следующие_интерфейсы_list_set_map_sortedset_sortedmap_collection_iterable_iterator_navigableset_navigablemap">8.3. Расположите в виде иерархии следующие интерфейсы: <code>List</code>, <code>Set</code>, <code>Map</code>, <code>SortedSet</code>, <code>SortedMap</code>, <code>Collection</code>, <code>Iterable</code>, <code>Iterator</code>, <code>NavigableSet</code>, <code>NavigableMap</code>.</h3>
<div class="ulist">
<ul>
<li>
<p><code>Iterable</code></p>
<div class="ulist">
<ul>
<li>
<p><code>Collection</code></p>
<div class="ulist">
<ul>
<li>
<p><code>List</code></p>
</li>
<li>
<p><code>Set</code></p>
<div class="ulist">
<ul>
<li>
<p><code>SortedSet</code></p>
<div class="ulist">
<ul>
<li>
<p><code>NavigableSet</code></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
<li>
<p><code>Map</code></p>
<div class="ulist">
<ul>
<li>
<p><code>SortedMap</code></p>
<div class="ulist">
<ul>
<li>
<p><code>NavigableMap</code></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
<li>
<p><code>Iterator</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a href="#java-collections-framework">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_почему_mapэто_не_collection_в_то_время_как_list_и_set_являются_collection">8.4. Почему <code>Map</code>&#8201;&#8212;&#8201;это не <code>Collection</code>, в то время как <code>List</code> и <code>Set</code> являются <code>Collection</code>?</h3>
<div class="paragraph">
<p><code>Collection</code> представляет собой совокупность некоторых элементов. <code>Map</code> - это совокупность пар «ключ-значение».</p>
</div>
<div class="paragraph">
<p><a href="#java-collections-framework">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_в_чем_разница_между_классами_java_util_collection_и_java_util_collections">8.5. В чем разница между классами <code>java.util.Collection</code> и <code>java.util.Collections</code>?</h3>
<div class="paragraph">
<p><code>java.util.Collections</code> - набор статических методов для работы с коллекциями.</p>
</div>
<div class="paragraph">
<p><code>java.util.Collection</code> - один из основных интерфейсов Java Collections Framework.</p>
</div>
<div class="paragraph">
<p><a href="#java-collections-framework">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_что_такое_fail_fast_поведение">8.6. Что такое «fail-fast поведение»?</h3>
<div class="paragraph">
<p><strong>fail-fast поведение</strong> означает, что при возникновении ошибки или состояния, которое может привести к ошибке, система немедленно прекращает дальнейшую работу и уведомляет об этом. Использование fail-fast подхода позволяет избежать недетерминированного поведения программы в течение времени.</p>
</div>
<div class="paragraph">
<p>В Java Collections API некоторые итераторы ведут себя как fail-fast и выбрасывают <code>ConcurrentModificationException</code>, если после его создания была произведена модификация коллекции, т.е. добавлен или удален элемент напрямую из коллекции, а не используя методы итератора.</p>
</div>
<div class="paragraph">
<p>Реализация такого поведения осуществляется за счет подсчета количества модификаций коллекции (modification count):</p>
</div>
<div class="ulist">
<ul>
<li>
<p>при изменении коллекции счетчик модификаций так же изменяется;</p>
</li>
<li>
<p>при создании итератора ему передается текущее значение счетчика;</p>
</li>
<li>
<p>при каждом обращении к итератору сохраненное значение счетчика сравнивается с текущим, и, если они не совпадают, возникает исключение.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a href="#java-collections-framework">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_какая_разница_между_fail_fast_и_fail_safe">8.7. Какая разница между fail-fast и fail-safe?</h3>
<div class="paragraph">
<p>В противоположность fail-fast, итераторы fail-safe не вызывают никаких исключений при изменении структуры, потому что они работают с клоном коллекции вместо оригинала.</p>
</div>
<div class="paragraph">
<p><a href="#java-collections-framework">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_приведите_примеры_итераторов_реализующих_поведение_fail_safe">8.8. Приведите примеры итераторов, реализующих поведение fail-safe</h3>
<div class="paragraph">
<p>Итератор коллекции <code>CopyOnWriteArrayList</code> и итератор представления <code>keySet</code> коллекции <code>ConcurrentHashMap</code> являются примерами итераторов fail-safe.</p>
</div>
<div class="paragraph">
<p><a href="#java-collections-framework">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_чем_различаются_enumeration_и_iterator">8.9. Чем различаются <code>Enumeration</code> и <code>Iterator</code>.</h3>
<div class="paragraph">
<p>Хотя оба интерфейса и предназначены для обхода коллекций между ними имеются существенные различия:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>с помощью <code>Enumeration</code> нельзя добавлять/удалять элементы;</p>
</li>
<li>
<p>в <code>Iterator</code> исправлены имена методов для повышения читаемости кода (<code>Enumeration.hasMoreElements()</code> соответствует <code>Iterator.hasNext()</code>, <code>Enumeration.nextElement()</code> соответствует <code>Iterator.next()</code> и т.д);</p>
</li>
<li>
<p><code>Enumeration</code> присутствуют в устаревших классах, таких как <code>Vector</code>/<code>Stack</code>, тогда как <code>Iterator</code> есть во всех современных классах-коллекциях.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a href="#java-collections-framework">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_как_между_собой_связаны_iterable_и_iterator">8.10. Как между собой связаны <code>Iterable</code> и <code>Iterator</code>?</h3>
<div class="paragraph">
<p>Интерфейс <code>Iterable</code> имеет только один метод - <code>iterator()</code>, который возвращает <code>Iterator</code>.</p>
</div>
<div class="paragraph">
<p><a href="#java-collections-framework">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_как_между_собой_связаны_iterable_iterator_и_for_each">8.11. Как между собой связаны <code>Iterable</code>, <code>Iterator</code> и «for-each»?</h3>
<div class="paragraph">
<p>Классы, реализующие интерфейс <code>Iterable</code>, могут применяться в конструкции <code>for-each</code>, которая использует <code>Iterator</code>.</p>
</div>
<div class="paragraph">
<p><a href="#java-collections-framework">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_сравните_iterator_и_listiterator">8.12. Сравните <code>Iterator</code> и <code>ListIterator</code>.</h3>
<div class="ulist">
<ul>
<li>
<p><code>ListIterator</code> расширяет интерфейс <code>Iterator</code></p>
</li>
<li>
<p><code>ListIterator</code> может быть использован только для перебора элементов коллекции <code>List</code>;</p>
</li>
<li>
<p><code>Iterator</code> позволяет перебирать элементы только в одном направлении, при помощи метода <code>next()</code>. Тогда как <code>ListIterator</code> позволяет перебирать список в обоих направлениях, при помощи методов <code>next()</code> и <code>previous()</code>;</p>
</li>
<li>
<p><code>ListIterator</code> не указывает на конкретный элемент: его текущая позиция располагается между элементами, которые возвращают методы <code>previous()</code> и <code>next()</code>.</p>
</li>
<li>
<p>При помощи <code>ListIterator</code> вы можете модифицировать список, добавляя/удаляя элементы с помощью методов <code>add()</code> и <code>remove()</code>. <code>Iterator</code> не поддерживает данного функционала.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a href="#java-collections-framework">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_что_произойдет_при_вызове_iterator_next_без_предварительного_вызова_iterator_hasnext">8.13. Что произойдет при вызове <code>Iterator.next()</code> без предварительного вызова <code>Iterator.hasNext()</code>?</h3>
<div class="paragraph">
<p>Если итератор указывает на последний элемент коллекции, то возникнет исключение <code>NoSuchElementException</code>, иначе будет возвращен следующий элемент.</p>
</div>
<div class="paragraph">
<p><a href="#java-collections-framework">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_сколько_элементов_будет_пропущено_если_iterator_next_будет_вызван_после_10_ти_вызовов_iterator_hasnext">8.14. Сколько элементов будет пропущено, если <code>Iterator.next()</code> будет вызван после 10-ти вызовов <code>Iterator.hasNext()</code>?</h3>
<div class="paragraph">
<p>Нисколько - <code>hasNext()</code> осуществляет только проверку наличия следующего элемента.</p>
</div>
<div class="paragraph">
<p><a href="#java-collections-framework">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_как_поведёт_себя_коллекция_если_вызвать_iterator_remove">8.15. Как поведёт себя коллекция, если вызвать <code>iterator.remove()</code>?</h3>
<div class="paragraph">
<p>Если вызову <code>iterator.remove()</code> предшествовал вызов <code>iterator.next()</code>, то <code>iterator.remove()</code> удалит элемент коллекции, на который указывает итератор, в противном случае будет выброшено <code>IllegalStateException()</code>.</p>
</div>
<div class="paragraph">
<p><a href="#java-collections-framework">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_как_поведёт_себя_уже_инстанциированный_итератор_для_collection_если_вызвать_collection_remove">8.16. Как поведёт себя уже инстанциированный итератор для <code>collection</code>, если вызвать <code>collection.remove()</code>?</h3>
<div class="paragraph">
<p>При следующем вызове методов итератора будет выброшено <code>ConcurrentModificationException</code>.</p>
</div>
<div class="paragraph">
<p><a href="#java-collections-framework">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_как_избежать_concurrentmodificationexception_во_время_перебора_коллекции">8.17. Как избежать <code>ConcurrentModificationException</code> во время перебора коллекции?</h3>
<div class="ulist">
<ul>
<li>
<p>Попробовать подобрать или реализовать самостоятельно другой итератор, работающий по принципу fail-safe.</p>
</li>
<li>
<p>Использовать <code>ConcurrentHashMap</code> и <code>CopyOnWriteArrayList</code>.</p>
</li>
<li>
<p>Преобразовать список в массив и перебирать массив.</p>
</li>
<li>
<p>Блокировать изменения списка на время перебора с помощью блока <code>synchronized</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Отрицательная сторона последних двух вариантов - ухудшение производительности.</p>
</div>
<div class="paragraph">
<p><a href="#java-collections-framework">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_какая_коллекция_реализует_дисциплину_обслуживания_fifo">8.18. Какая коллекция реализует дисциплину обслуживания FIFO?</h3>
<div class="paragraph">
<p>FIFO, First-In-First-Out («первым пришел-первым ушел») - по этому принципу построена коллекция <code>Queue</code>.</p>
</div>
<div class="paragraph">
<p><a href="#java-collections-framework">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_какая_коллекция_реализует_дисциплину_обслуживания_filo">8.19. Какая коллекция реализует дисциплину обслуживания FILO?</h3>
<div class="paragraph">
<p>FILO, First-In-Last-Out («первым пришел, последним ушел») - по этому принципу построена коллекция <code>Stack</code>.</p>
</div>
<div class="paragraph">
<p><a href="#java-collections-framework">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_чем_отличается_arraylist_от_vector">8.20. Чем отличается <code>ArrayList</code> от <code>Vector</code>?</h3>

</div>
<div class="sect2">
<h3 id="_зачем_добавили_arraylist_если_уже_был_vector">8.21. Зачем добавили <code>ArrayList</code>, если уже был <code>Vector</code>?</h3>
<div class="ulist">
<ul>
<li>
<p>Методы класса <code>Vector</code> синхронизированы, а <code>ArrayList</code> - нет;</p>
</li>
<li>
<p>По умолчанию, <code>Vector</code> удваивает свой размер, когда заканчивается выделенная под элементы память. <code>ArrayList</code> же увеличивает свой размер только на половину.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><code>Vector</code> это устаревший класс и его использование не рекомендовано.</p>
</div>
<div class="paragraph">
<p><a href="#java-collections-framework">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_чем_отличается_arraylist_от_linkedlist_в_каких_случаях_лучше_использовать_первый_а_в_каких_второй">8.22. Чем отличается <code>ArrayList</code> от <code>LinkedList</code>? В каких случаях лучше использовать первый, а в каких второй?</h3>
<div class="paragraph">
<p><code>ArrayList</code> это список, реализованный на основе массива, а <code>LinkedList</code>&#8201;&#8212;&#8201;это классический двусвязный список, основанный на объектах с ссылками между ними.</p>
</div>
<div class="paragraph">
<p><code>ArrayList</code>:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>доступ к произвольному элементу по индексу за <em>константное</em> время <em>O(1)</em>;</p>
</li>
<li>
<p>доступ к элементам по значению за <em>линейное</em> время <em>O(N)</em>;</p>
</li>
<li>
<p>вставка в конец в среднем производится за <em>константное</em> время <em>O(1)</em>;</p>
</li>
<li>
<p>удаление произвольного элемента из списка занимает значительное время т.к. при этом все элементы, находящиеся «правее» смещаются на одну ячейку влево (реальный размер массива (capacity) не изменяется);</p>
</li>
<li>
<p>вставка элемента в произвольное место списка занимает значительное время т.к. при этом все элементы, находящиеся «правее» смещаются на одну ячейку вправо;</p>
</li>
<li>
<p>минимум накладных расходов при хранении.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><code>LinkedList</code>:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>на получение элемента по индексу или значению потребуется <em>линейное</em> время <em>O(N)</em>;</p>
</li>
<li>
<p>но доступ к первому и последнему элементу списка всегда осуществляется за <em>константное</em> время <em>O(1)</em>&#8201;&#8212;&#8201;ссылки постоянно хранятся на первый и последний элемент;</p>
</li>
<li>
<p>на добавление и удаление в начало или конец списка потребуется <em>константное</em> <em>O(1)</em>;</p>
</li>
<li>
<p>вставка или удаление в/из произвольного место <em>константное</em> <em>O(1)</em>;</p>
</li>
<li>
<p>но поиск позиции вставки и удаления за <em>линейное</em> время <em>O(N)</em>;</p>
</li>
<li>
<p>требует больше памяти для хранения такого же количества элементов, потому что кроме самого элемента хранятся еще указатели на следующий и предыдущий элементы списка.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>В целом, <code>LinkedList</code> в абсолютных величинах проигрывает <code>ArrayList</code> и по потребляемой памяти, и по скорости выполнения операций. <code>LinkedList</code> предпочтительно применять, когда нужны частые операции вставки/удаления или в случаях, когда необходимо гарантированное время добавления элемента в список.</p>
</div>
<div class="paragraph">
<p><a href="#java-collections-framework">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_что_работает_быстрее_arraylist_или_linkedlist">8.23. Что работает быстрее <code>ArrayList</code> или <code>LinkedList</code>?</h3>
<div class="paragraph">
<p>Смотря какие действия будут выполняться над структурой.</p>
</div>
<div class="paragraph">
<p>см. <a href="#Чем-отличается-arraylist-от-linkedlist-В-каких-случаях-лучше-использовать-первый-а-в-каких-второй">Чем отличается <code>ArrayList</code> от <code>LinkedList</code></a></p>
</div>
<div class="paragraph">
<p><a href="#java-collections-framework">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_какое_худшее_время_работы_метода_contains_для_элемента_который_есть_в_linkedlist">8.24. Какое худшее время работы метода <code>contains()</code> для элемента, который есть в <code>LinkedList</code>?</h3>
<div class="paragraph">
<p><em>O(N)</em>. Время поиска элемента линейно пропорционально количеству элементов в списке.</p>
</div>
<div class="paragraph">
<p><a href="#java-collections-framework">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_какое_худшее_время_работы_метода_contains_для_элемента_который_есть_в_arraylist">8.25. Какое худшее время работы метода <code>contains()</code> для элемента, который есть в <code>ArrayList</code>?</h3>
<div class="paragraph">
<p><em>O(N)</em>. Время поиска элемента линейно пропорционально количеству элементов с списке.</p>
</div>
<div class="paragraph">
<p><a href="#java-collections-framework">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_какое_худшее_время_работы_метода_add_для_linkedlist">8.26. Какое худшее время работы метода <code>add()</code> для <code>LinkedList</code>?</h3>
<div class="paragraph">
<p><em>O(N)</em>. Добавление в начало/конец списка осуществляется за время <em>O(1)</em>.</p>
</div>
<div class="paragraph">
<p><a href="#java-collections-framework">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_какое_худшее_время_работы_метода_add_для_arraylist">8.27. Какое худшее время работы метода <code>add()</code> для <code>ArrayList</code>?</h3>
<div class="paragraph">
<p><em>O(N)</em>. Вставка элемента в конец списка осуществляется за время <em>O(1)</em>, но если вместимость массива недостаточна, то происходит создание нового массива с увеличенным размером и копирование всех элементов из старого массива в новый.</p>
</div>
<div class="paragraph">
<p><a href="#java-collections-framework">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_необходимо_добавить_1_млн_элементов_какую_структуру_вы_используете">8.28. Необходимо добавить 1 млн. элементов, какую структуру вы используете?</h3>
<div class="paragraph">
<p>Однозначный ответ можно дать только исходя из информации о том в какую часть списка происходит добавление элементов, что потом будет происходить с элементами списка, существуют ли какие-то ограничения по памяти или скорости выполнения.</p>
</div>
<div class="paragraph">
<p>см. <a href="#Чем-отличается-arraylist-от-linkedlist-В-каких-случаях-лучше-использовать-первый-а-в-каких-второй">Чем отличается <code>ArrayList</code> от <code>LinkedList</code></a></p>
</div>
<div class="paragraph">
<p><a href="#java-collections-framework">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_как_происходит_удаление_элементов_из_arraylist_как_меняется_в_этом_случае_размер_arraylist">8.29. Как происходит удаление элементов из <code>ArrayList</code>? Как меняется в этом случае размер <code>ArrayList</code>?</h3>
<div class="paragraph">
<p>При удалении произвольного элемента из списка, все элементы, находящиеся «правее» смещаются на одну ячейку влево и реальный размер массива (его емкость, capacity) не изменяется никак. Механизм автоматического «расширения» массива существует, а вот автоматического «сжатия» нет, можно только явно выполнить «сжатие» командой <code>trimToSize()</code>.</p>
</div>
<div class="paragraph">
<p><a href="#java-collections-framework">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_предложите_эффективный_алгоритм_удаления_нескольких_рядом_стоящих_элементов_из_середины_списка_реализуемого_arraylist">8.30. Предложите эффективный алгоритм удаления нескольких рядом стоящих элементов из середины списка, реализуемого <code>ArrayList</code>.</h3>
<div class="paragraph">
<p>Допустим нужно удалить <code>n</code> элементов с позиции <code>m</code> в списке. Вместо выполнения удаления одного элемента <code>n</code> раз (каждый раз смещая на 1 позицию элементы, стоящие «правее» в списке), нужно выполнить смещение всех элементов, стоящих «правее» <code>n + m</code> позиции на <code>n</code> элементов «левее» к началу списка. Таким образом, вместо выполнения <code>n</code> итераций перемещения элементов списка, все выполняется за 1 проход. Но если говорить об общей эффективности - то самый быстрый способ будет с использованием <code>System.arraycopy()</code>, и получить к нему доступ можно через метод - <code>subList(int fromIndex, int toIndex)</code></p>
</div>
<div class="paragraph">
<p>Пример:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="kn">import</span> <span class="nn">java.io.*</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.ArrayList</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Main</span> <span class="o">{</span>
    <span class="c1">//позиция, с которой удаляем</span>
    <span class="kd">private</span> <span class="kd">static</span> <span class="kt">int</span> <span class="n">m</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
    <span class="c1">//количество удаляемых элементов</span>
    <span class="kd">private</span> <span class="kd">static</span> <span class="kt">int</span> <span class="n">n</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
    <span class="c1">//количество элементов в списке</span>
    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="kt">int</span> <span class="n">size</span> <span class="o">=</span> <span class="mi">1000000</span><span class="o">;</span>
    <span class="c1">//основной список (для удаления вызовом remove() и его копия для удаления путём перезаписи)</span>
    <span class="kd">private</span> <span class="kd">static</span> <span class="nc">ArrayList</span><span class="o">&lt;</span><span class="nc">Integer</span><span class="o">&gt;</span> <span class="n">initList</span><span class="o">,</span> <span class="n">copyList</span><span class="o">;</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">){</span>

        <span class="n">initList</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ArrayList</span><span class="o">&lt;&gt;(</span><span class="n">size</span><span class="o">);</span>
        <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">size</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
            <span class="n">initList</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">i</span><span class="o">);</span>
        <span class="o">}</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Список из 1.000.000 элементов заполнен"</span><span class="o">);</span>

        <span class="n">copyList</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ArrayList</span><span class="o">&lt;&gt;(</span><span class="n">initList</span><span class="o">);</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Создана копия списка\n"</span><span class="o">);</span>

        <span class="nc">BufferedReader</span> <span class="n">br</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">BufferedReader</span><span class="o">(</span><span class="k">new</span> <span class="nc">InputStreamReader</span><span class="o">(</span><span class="nc">System</span><span class="o">.</span><span class="na">in</span><span class="o">));</span>
        <span class="k">try</span><span class="o">{</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">print</span><span class="o">(</span><span class="s">"С какой позиции удаляем? &gt; "</span><span class="o">);</span>
            <span class="n">m</span> <span class="o">=</span> <span class="nc">Integer</span><span class="o">.</span><span class="na">parseInt</span><span class="o">(</span><span class="n">br</span><span class="o">.</span><span class="na">readLine</span><span class="o">());</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">print</span><span class="o">(</span><span class="s">"Сколько удаляем? &gt; "</span><span class="o">);</span>
            <span class="n">n</span> <span class="o">=</span> <span class="nc">Integer</span><span class="o">.</span><span class="na">parseInt</span><span class="o">(</span><span class="n">br</span><span class="o">.</span><span class="na">readLine</span><span class="o">());</span>
        <span class="o">}</span> <span class="k">catch</span><span class="o">(</span><span class="nc">IOException</span> <span class="n">e</span><span class="o">){</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">err</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">e</span><span class="o">.</span><span class="na">toString</span><span class="o">());</span>
        <span class="o">}</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"\nВыполняем удаление вызовом remove()..."</span><span class="o">);</span>
        <span class="kt">long</span> <span class="n">start</span> <span class="o">=</span> <span class="nc">System</span><span class="o">.</span><span class="na">currentTimeMillis</span><span class="o">();</span>

        <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">m</span> <span class="o">-</span> <span class="mi">1</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">m</span> <span class="o">+</span> <span class="n">n</span> <span class="o">-</span> <span class="mi">1</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
            <span class="n">initList</span><span class="o">.</span><span class="na">remove</span><span class="o">(</span><span class="n">i</span><span class="o">);</span>
        <span class="o">}</span>

        <span class="kt">long</span> <span class="n">finish</span> <span class="o">=</span> <span class="nc">System</span><span class="o">.</span><span class="na">currentTimeMillis</span><span class="o">()</span> <span class="o">-</span> <span class="n">start</span><span class="o">;</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Время удаления с помощью вызова remove(): "</span> <span class="o">+</span> <span class="n">finish</span><span class="o">);</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Размер исходного списка после удаления: "</span> <span class="o">+</span> <span class="n">initList</span><span class="o">.</span><span class="na">size</span><span class="o">());</span>

        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"\nВыполняем удаление путем перезаписи...\n"</span><span class="o">);</span>
        <span class="n">start</span> <span class="o">=</span> <span class="nc">System</span><span class="o">.</span><span class="na">currentTimeMillis</span><span class="o">();</span>

        <span class="n">removeEfficiently</span><span class="o">();</span>

        <span class="n">finish</span> <span class="o">=</span> <span class="nc">System</span><span class="o">.</span><span class="na">currentTimeMillis</span><span class="o">()</span> <span class="o">-</span> <span class="n">start</span><span class="o">;</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Время удаления путём смещения: "</span> <span class="o">+</span> <span class="n">finish</span><span class="o">);</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Размер копии списка:"</span> <span class="o">+</span> <span class="n">copyList</span><span class="o">.</span><span class="na">size</span><span class="o">());</span>

        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"\nВыполняем удаление через SubList...\n"</span><span class="o">);</span>
        <span class="n">start</span> <span class="o">=</span> <span class="nc">System</span><span class="o">.</span><span class="na">currentTimeMillis</span><span class="o">();</span>

        <span class="n">initList</span><span class="o">.</span><span class="na">subList</span><span class="o">(</span><span class="n">m</span> <span class="o">-</span> <span class="mi">1</span><span class="o">,</span> <span class="n">m</span> <span class="o">+</span> <span class="n">n</span><span class="o">).</span><span class="na">clear</span><span class="o">();</span>

        <span class="n">finish</span> <span class="o">=</span> <span class="nc">System</span><span class="o">.</span><span class="na">currentTimeMillis</span><span class="o">()</span> <span class="o">-</span> <span class="n">start</span><span class="o">;</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Время удаления через саблист: "</span> <span class="o">+</span> <span class="n">finish</span><span class="o">);</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Размер копии списка:"</span> <span class="o">+</span> <span class="n">copyList</span><span class="o">.</span><span class="na">size</span><span class="o">());</span>
    <span class="o">}</span>

    <span class="kd">private</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">removeEfficiently</span><span class="o">(){</span>
        <span class="cm">/* если необходимо удалить все элементы, начиная с указанного,
         * то удаляем элементы с конца до m
         */</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">m</span> <span class="o">+</span> <span class="n">n</span> <span class="o">&gt;=</span> <span class="n">size</span><span class="o">){</span>
            <span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">size</span> <span class="o">-</span> <span class="mi">1</span><span class="o">;</span>
            <span class="k">while</span> <span class="o">(</span><span class="n">i</span> <span class="o">!=</span> <span class="n">m</span> <span class="o">-</span> <span class="mi">1</span><span class="o">){</span>
                <span class="n">copyList</span><span class="o">.</span><span class="na">remove</span><span class="o">(</span><span class="n">i</span><span class="o">);</span>
                <span class="n">i</span><span class="o">--;</span>
            <span class="o">}</span>
        <span class="o">}</span> <span class="k">else</span><span class="o">{</span>
            <span class="c1">//переменная k необходима для отсчёта сдвига начиная от места вставка m</span>
            <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span>  <span class="o">=</span> <span class="n">m</span> <span class="o">+</span> <span class="n">n</span><span class="o">,</span> <span class="n">k</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">size</span><span class="o">;</span> <span class="n">i</span><span class="o">++,</span> <span class="n">k</span><span class="o">++)</span> <span class="o">{</span>
               <span class="n">copyList</span><span class="o">.</span><span class="na">set</span><span class="o">(</span><span class="n">m</span> <span class="o">+</span> <span class="n">k</span><span class="o">,</span> <span class="n">copyList</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">i</span><span class="o">));</span>
            <span class="o">}</span>

            <span class="cm">/* удаляем ненужные элементы в конце списка
             * удаляется всегда последний элемент, так как время этого действия
             * фиксировано и не зависит от размера списка
             */</span>
            <span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">size</span> <span class="o">-</span> <span class="mi">1</span><span class="o">;</span>
            <span class="k">while</span> <span class="o">(</span><span class="n">i</span> <span class="o">!=</span> <span class="n">size</span> <span class="o">-</span> <span class="n">n</span> <span class="o">-</span> <span class="mi">1</span><span class="o">){</span>
                <span class="n">copyList</span><span class="o">.</span><span class="na">remove</span><span class="o">(</span><span class="n">i</span><span class="o">);</span>
                <span class="n">i</span><span class="o">--;</span>
            <span class="o">}</span>
            <span class="c1">//сокращаем длину списка путём удаления пустых ячеек</span>
            <span class="n">copyList</span><span class="o">.</span><span class="na">trimToSize</span><span class="o">();</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Результат выполнения:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>run:
Список из 1.000.000 элементов заполнен
Создана копия списка

С какой позиции удаляем? &gt; 600000
Сколько удаляем? &gt; 20000

Выполняем удаление вызовом remove()...
Время удаления с помощью вызова remove(): 928
Размер исходного списка после удаления: 980000

Выполняем удаление путем перезаписи...

Время удаления путём смещения: 17
Размер копии списка:980000

Выполняем удаление через SubList...

Время удаления через саблист: 1
Размер копии списка:980000
СБОРКА УСПЕШНО ЗАВЕРШЕНА (общее время: 33 секунды)</pre>
</div>
</div>
<div class="paragraph">
<p><a href="#java-collections-framework">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_сколько_необходимо_дополнительной_памяти_при_вызове_arraylist_add">8.31. Сколько необходимо дополнительной памяти при вызове <code>ArrayList.add()</code>?</h3>
<div class="paragraph">
<p>Если в массиве достаточно места для размещения нового элемента, то дополнительной памяти не требуется. Иначе происходит создание нового массива размером в 1,5 раза превышающим существующий (это верно для JDK выше 1.7, в более ранних версиях размер увеличения иной).</p>
</div>
<div class="paragraph">
<p><a href="#java-collections-framework">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_сколько_выделяется_дополнительно_памяти_при_вызове_linkedlist_add">8.32. Сколько выделяется дополнительно памяти при вызове <code>LinkedList.add()</code>?</h3>
<div class="paragraph">
<p>Создается один новый экземпляр вложенного класса <code>Node</code>.</p>
</div>
<div class="paragraph">
<p><a href="#java-collections-framework">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_оцените_количество_памяти_на_хранение_одного_примитива_типа_byte_в_linkedlist">8.33. Оцените количество памяти на хранение одного примитива типа <code>byte</code> в <code>LinkedList</code>?</h3>
<div class="paragraph">
<p>Каждый элемент <code>LinkedList</code> хранит ссылку на предыдущий элемент, следующий элемент и ссылку на данные.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="kd">private</span> <span class="kd">static</span> <span class="kd">class</span> <span class="nc">Node</span><span class="o">&lt;</span><span class="no">E</span><span class="o">&gt;</span> <span class="o">{</span>
        <span class="no">E</span> <span class="n">item</span><span class="o">;</span>
        <span class="nc">Node</span><span class="o">&lt;</span><span class="no">E</span><span class="o">&gt;</span> <span class="n">next</span><span class="o">;</span>
        <span class="nc">Node</span><span class="o">&lt;</span><span class="no">E</span><span class="o">&gt;</span> <span class="n">prev</span><span class="o">;</span>
<span class="c1">//...</span>
<span class="o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Для 32-битных систем каждая ссылка занимает 32 бита (4 байта). Сам объект (заголовок) вложенного класса <code>Node</code> занимает 8 байт. 4 + 4 + 4 + 8 = 20 байт, а т.к. размер каждого объекта в Java кратен 8, соответственно получаем 24 байта. Примитив типа <code>byte</code> занимает 1 байт памяти, но в JCF примитивы упаковываются: объект типа <code>Byte</code> занимает в памяти 16 байт (8 байт на заголовок объекта, 1 байт на поле типа <code>byte</code> и 7 байт для кратности 8). Также напомню, что значения от -128 до 127 кэшируются и для них новые объекты каждый раз не создаются. Таким образом, в x32 JVM 24 байта тратятся на хранение одного элемента в списке и 16 байт - на хранение упакованного объекта типа <code>Byte</code>. Итого 40 байт.</p>
</div>
<div class="paragraph">
<p>Для 64-битной JVM каждая ссылка занимает 64 бита (8 байт), размер заголовка каждого объекта составляет 16 байт (два машинных слова). Вычисления аналогичны: 8 + 8 + 8 + 16 = 40байт и 24 байта. Итого 64 байта.</p>
</div>
<div class="paragraph">
<p><a href="#java-collections-framework">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_оцените_количество_памяти_на_хранение_одного_примитива_типа_byte_в_arraylist">8.34. Оцените количество памяти на хранение одного примитива типа <code>byte</code> в <code>ArrayList</code>?</h3>
<div class="paragraph">
<p><code>ArrayList</code> основан на массиве, для примитивных типов данных осуществляется автоматическая упаковка значения, поэтому 16 байт тратится на хранение упакованного объекта и 4 байта (8 для x64) - на хранение ссылки на этот объект в самой структуре данных. Таким образом, в x32 JVM 4 байта используются на хранение одного элемента и 16 байт - на хранение упакованного объекта типа <code>Byte</code>. Для x64 - 8 байт и 24 байта соответственно.</p>
</div>
<div class="paragraph">
<p><a href="#java-collections-framework">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_для_arraylist_или_для_linkedlist_операция_добавления_элемента_в_середину_list_addlist_size2_newelement_медленнее">8.35. Для <code>ArrayList</code> или для <code>LinkedList</code> операция добавления элемента в середину (<code>list.add(list.size()/2, newElement)</code>) медленнее?</h3>
<div class="paragraph">
<p>Для <code>ArrayList</code>:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>проверка массива на вместимость. Если вместимости недостаточно, то увеличение размера массива и копирование всех элементов в новый массив (<em>O(N)</em>);</p>
</li>
<li>
<p>копирование всех элементов, расположенных правее от позиции вставки, на одну позицию вправо (<em>O(N)</em>);</p>
</li>
<li>
<p>вставка элемента (<em>O(1)</em>).</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Для <code>LinkedList</code>:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>поиск позиции вставки (<em>O(N)</em>);</p>
</li>
<li>
<p>вставка элемента (<em>O(1)</em>).</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>В худшем случае вставка в середину списка эффективнее для <code>LinkedList</code>. В остальных - скорее всего, для <code>ArrayList</code>, поскольку копирование элементов осуществляется за счет вызова быстрого системного метода <code>System.arraycopy()</code>.</p>
</div>
<div class="paragraph">
<p><a href="#java-collections-framework">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_в_реализации_класса_arraylist_есть_следующие_поля_object_elementdata_int_size_объясните_зачем_хранить_отдельно_size_если_всегда_можно_взять_elementdata_length">8.36. В реализации класса <code>ArrayList</code> есть следующие поля: <code>Object[] elementData</code>, <code>int size</code>. Объясните, зачем хранить отдельно <code>size</code>, если всегда можно взять <code>elementData.length</code>?</h3>
<div class="paragraph">
<p>Размер массива <code>elementData</code> представляет собой вместимость (capacity) <code>ArrayList</code>, которая всегда больше переменной <code>size</code> - реального количества хранимых элементов. При необходимости вместимость автоматически возрастает.</p>
</div>
<div class="paragraph">
<p><a href="#java-collections-framework">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_сравните_интерфейсы_queue_и_deque">8.37. Сравните интерфейсы <code>Queue</code> и <code>Deque</code>.</h3>

</div>
<div class="sect2">
<h3 id="_кто_кого_расширяет_queue_расширяет_deque_или_deque_расширяет_queue">8.38. Кто кого расширяет: <code>Queue</code> расширяет <code>Deque</code>, или <code>Deque</code> расширяет <code>Queue</code>?</h3>
<div class="paragraph">
<p><code>Queue</code> - это очередь, которая обычно (но необязательно) строится по принципу FIFO (First-In-First-Out) - соответственно извлечение элемента осуществляется с начала очереди, вставка элемента - в конец очереди. Хотя этот принцип нарушает, к примеру, <code>PriorityQueue</code>, использующая «natural ordering» или переданный <code>Comparator</code> при вставке нового элемента.</p>
</div>
<div class="paragraph">
<p><code>Deque</code> (Double Ended Queue) расширяет <code>Queue</code> и согласно документации, это линейная коллекция, поддерживающая вставку/извлечение элементов с обоих концов. Помимо этого, реализации интерфейса <code>Deque</code> могут строится по принципу FIFO, либо LIFO.</p>
</div>
<div class="paragraph">
<p>Реализации и <code>Deque</code>, и <code>Queue</code> обычно не переопределяют методы <code>equals()</code> и <code>hashCode()</code>, вместо этого используются унаследованные методы класса Object, основанные на сравнении ссылок.</p>
</div>
<div class="paragraph">
<p><a href="#java-collections-framework">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_почему_linkedlist_реализует_и_list_и_deque">8.39. Почему <code>LinkedList</code> реализует и <code>List</code>, и <code>Deque</code>?</h3>
<div class="paragraph">
<p><code>LinkedList</code> позволяет добавлять элементы в начало и конец списка за константное время, что хорошо согласуется с поведением интерфейса <code>Deque</code>.</p>
</div>
<div class="paragraph">
<p><a href="#java-collections-framework">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_linkedlistэто_односвязный_двусвязный_или_четырехсвязный_список">8.40. <code>LinkedList</code>&#8201;&#8212;&#8201;это односвязный, двусвязный или четырехсвязный список?</h3>
<div class="paragraph">
<p><code>Двусвязный</code>: каждый элемент <code>LinkedList</code> хранит ссылку на предыдущий и следующий элементы.</p>
</div>
<div class="paragraph">
<p><a href="#java-collections-framework">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_как_перебрать_элементы_linkedlist_в_обратном_порядке_не_используя_медленный_getindex">8.41. Как перебрать элементы <code>LinkedList</code> в обратном порядке, не используя медленный <code>get(index)</code>?</h3>
<div class="paragraph">
<p>Для этого в <code>LinkedList</code> есть обратный итератор, который можно получить вызва метод <code>descendingIterator()</code>.</p>
</div>
<div class="paragraph">
<p><a href="#java-collections-framework">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_что_позволяет_сделать_priorityqueue">8.42. Что позволяет сделать <code>PriorityQueue</code>?</h3>
<div class="paragraph">
<p>Особенностью <code>PriorityQueue</code> является возможность управления порядком элементов. По-умолчанию, элементы сортируются с использованием «natural ordering», но это поведение может быть переопределено при помощи объекта <code>Comparator</code>, который задаётся при создании очереди. Данная коллекция не поддерживает null в качестве элементов.</p>
</div>
<div class="paragraph">
<p>Используя <code>PriorityQueue</code>, можно, например, реализовать алгоритм Дейкстры для поиска кратчайшего пути от одной вершины графа к другой. Либо для хранения объектов согласно определённого свойства.</p>
</div>
<div class="paragraph">
<p><a href="#java-collections-framework">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_stack_считается_устаревшим_чем_его_рекомендуют_заменять_почему">8.43. <code>Stack</code> считается «устаревшим». Чем его рекомендуют заменять? Почему?</h3>
<div class="paragraph">
<p><code>Stack</code> был добавлен в Java 1.0 как реализация стека LIFO (last-in-first-out) и является расширением коллекции <code>Vector</code>, хотя это несколько нарушает понятие стека (например, класс <code>Vector</code> предоставляет возможность обращаться к любому элементу по индексу). Является частично синхронизированной коллекцией (кроме метода добавления <code>push()</code>) с вытекающими отсюда последствиями в виде негативного воздействия на производительность. После добавления в Java 1.6 интерфейса <code>Deque</code>, рекомендуется использовать реализации именно этого интерфейса, например, <code>ArrayDeque</code>.</p>
</div>
<div class="paragraph">
<p><a href="#java-collections-framework">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_зачем_нужен_hashmap_если_есть_hashtable">8.44. Зачем нужен <code>HashMap</code>, если есть <code>Hashtable</code>?</h3>
<div class="ulist">
<ul>
<li>
<p>Методы класса <code>Hashtable</code> синхронизированы, что приводит к снижению производительности, а <code>HashMap</code> - нет;</p>
</li>
<li>
<p><code>HashTable</code> не может содержать элементы <code>null</code>, тогда как <code>HashMap</code> может содержать один ключ <code>null</code> и любое количество значений <code>null</code>;</p>
</li>
<li>
<p>Iterator у <code>HashMap</code>, в отличие от Enumeration у <code>HashTable</code>, работает по принципу «fail-fast» (выдает исключение при любой несогласованности данных).</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><code>Hashtable</code> это устаревший класс и его использование не рекомендовано.</p>
</div>
<div class="paragraph">
<p><a href="#java-collections-framework">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_в_чем_разница_между_hashmap_и_identityhashmap_для_чего_нужна_identityhashmap">8.45. В чем разница между <code>HashMap</code> и <code>IdentityHashMap</code>? Для чего нужна <code>IdentityHashMap</code>?</h3>
<div class="paragraph">
<p><code>IdentityHashMap</code> - это структура данных, так же реализующая интерфейс <code>Map</code> и использующая при сравнении ключей (значений) сравнение ссылок, а не вызов метода <code>equals()</code>. Другими словами, в <code>IdentityHashMap</code> два ключа <code>k1</code> и <code>k2</code> будут считаться равными, если они указывают на один объект, т.е. выполняется условие <code>k1</code> == <code>k2</code>.</p>
</div>
<div class="paragraph">
<p><code>IdentityHashMap</code> не использует метод <code>hashCode()</code>, вместо которого применяется метод <code>System.identityHashCode()</code>, по этой причине <code>IdentityHashMap</code> по сравнению с <code>HashMap</code> имеет более высокую производительность, особенно если последний хранит объекты с дорогостоящими методами <code>equals()</code> и <code>hashCode()</code>.</p>
</div>
<div class="paragraph">
<p>Одним из основных требований к использованию <code>HashMap</code> является неизменяемость ключа, а, т.к. <code>IdentityHashMap</code> не использует методы  <code>equals()</code> и <code>hashCode()</code>, то это правило на него не распространяется.</p>
</div>
<div class="paragraph">
<p><code>IdentityHashMap</code> может применяться для реализации сериализации/клонирования. При выполнении подобных алгоритмов программе необходимо обслуживать хэш-таблицу со всеми ссылками на объекты, которые уже были обработаны. Такая структура не должна рассматривать уникальные объекты как равные, даже если метод <code>equals()</code> возвращает <code>true</code>.</p>
</div>
<div class="paragraph">
<p>Пример кода:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="kn">import</span> <span class="nn">java.util.HashMap</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.IdentityHashMap</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.Map</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Q2</span> <span class="o">{</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="no">Q2</span> <span class="n">q</span> <span class="o">=</span> <span class="k">new</span> <span class="no">Q2</span><span class="o">();</span>
        <span class="n">q</span><span class="o">.</span><span class="na">testHashMapAndIdentityHashMap</span><span class="o">();</span>
    <span class="o">}</span>

    <span class="kd">private</span> <span class="kt">void</span> <span class="nf">testHashMapAndIdentityHashMap</span><span class="o">()</span> <span class="o">{</span>
        <span class="nc">CreditCard</span> <span class="n">visa</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">CreditCard</span><span class="o">(</span><span class="s">"VISA"</span><span class="o">,</span> <span class="s">"04/12/2019"</span><span class="o">);</span>

        <span class="nc">Map</span><span class="o">&lt;</span><span class="nc">CreditCard</span><span class="o">,</span> <span class="nc">String</span><span class="o">&gt;</span> <span class="n">cardToExpiry</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">HashMap</span><span class="o">&lt;&gt;();</span>
        <span class="nc">Map</span><span class="o">&lt;</span><span class="nc">CreditCard</span><span class="o">,</span> <span class="nc">String</span><span class="o">&gt;</span> <span class="n">cardToExpiryIdenity</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">IdentityHashMap</span><span class="o">&lt;&gt;();</span>

        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"adding to HM"</span><span class="o">);</span>
        <span class="c1">// inserting objects to HashMap</span>
        <span class="n">cardToExpiry</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">visa</span><span class="o">,</span> <span class="n">visa</span><span class="o">.</span><span class="na">getExpiryDate</span><span class="o">());</span>

        <span class="c1">// inserting objects to IdentityHashMap</span>
        <span class="n">cardToExpiryIdenity</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">visa</span><span class="o">,</span> <span class="n">visa</span><span class="o">.</span><span class="na">getExpiryDate</span><span class="o">());</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"adding to IHM"</span><span class="o">);</span>

        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"before modifying keys"</span><span class="o">);</span>
        <span class="nc">String</span> <span class="n">result</span> <span class="o">=</span> <span class="n">cardToExpiry</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">visa</span><span class="o">)</span> <span class="o">!=</span> <span class="kc">null</span> <span class="o">?</span> <span class="s">"Yes"</span> <span class="o">:</span> <span class="s">"No"</span><span class="o">;</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Does VISA card exists in HashMap? "</span> <span class="o">+</span> <span class="n">result</span><span class="o">);</span>

        <span class="n">result</span> <span class="o">=</span> <span class="n">cardToExpiryIdenity</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">visa</span><span class="o">)</span> <span class="o">!=</span> <span class="kc">null</span> <span class="o">?</span> <span class="s">"Yes"</span> <span class="o">:</span> <span class="s">"No"</span><span class="o">;</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Does VISA card exists in IdenityHashMap? "</span> <span class="o">+</span> <span class="n">result</span><span class="o">);</span>

        <span class="c1">// modifying value object</span>
        <span class="n">visa</span><span class="o">.</span><span class="na">setExpiryDate</span><span class="o">(</span><span class="s">"02/11/2030"</span><span class="o">);</span>

        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"after modifying keys"</span><span class="o">);</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">cardToExpiry</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">visa</span><span class="o">)</span> <span class="o">!=</span> <span class="kc">null</span> <span class="o">?</span> <span class="s">"Yes"</span> <span class="o">:</span> <span class="s">"No"</span><span class="o">;</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Does VISA card exists in HashMap? "</span> <span class="o">+</span> <span class="n">result</span><span class="o">);</span>

        <span class="n">result</span> <span class="o">=</span> <span class="n">cardToExpiryIdenity</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">visa</span><span class="o">)</span> <span class="o">!=</span> <span class="kc">null</span> <span class="o">?</span> <span class="s">"Yes"</span> <span class="o">:</span> <span class="s">"No"</span><span class="o">;</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Does VISA card exists in IdenityHashMap? "</span> <span class="o">+</span> <span class="n">result</span><span class="o">);</span>

        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"cardToExpiry.containsKey"</span><span class="o">);</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">cardToExpiry</span><span class="o">.</span><span class="na">containsKey</span><span class="o">(</span><span class="n">visa</span><span class="o">));</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"cardToExpiryIdenity.containsKey"</span><span class="o">);</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">cardToExpiryIdenity</span><span class="o">.</span><span class="na">containsKey</span><span class="o">(</span><span class="n">visa</span><span class="o">));</span>
    <span class="o">}</span>

<span class="o">}</span>

<span class="kd">class</span> <span class="nc">CreditCard</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">issuer</span><span class="o">;</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">expiryDate</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nf">CreditCard</span><span class="o">(</span><span class="nc">String</span> <span class="n">issuer</span><span class="o">,</span> <span class="nc">String</span> <span class="n">expiryDate</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">issuer</span> <span class="o">=</span> <span class="n">issuer</span><span class="o">;</span>
        <span class="k">this</span><span class="o">.</span><span class="na">expiryDate</span> <span class="o">=</span> <span class="n">expiryDate</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="nc">String</span> <span class="nf">getIssuer</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">issuer</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="nc">String</span> <span class="nf">getExpiryDate</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">expiryDate</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setExpiryDate</span><span class="o">(</span><span class="nc">String</span> <span class="n">expiry</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">expiryDate</span> <span class="o">=</span> <span class="n">expiry</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">int</span> <span class="nf">hashCode</span><span class="o">()</span> <span class="o">{</span>
        <span class="kd">final</span> <span class="kt">int</span> <span class="n">prime</span> <span class="o">=</span> <span class="mi">31</span><span class="o">;</span>
        <span class="kt">int</span> <span class="n">result</span> <span class="o">=</span> <span class="mi">1</span><span class="o">;</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">prime</span> <span class="o">*</span> <span class="n">result</span> <span class="o">+</span> <span class="o">((</span><span class="n">expiryDate</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">?</span> <span class="mi">0</span> <span class="o">:</span> <span class="n">expiryDate</span><span class="o">.</span><span class="na">hashCode</span><span class="o">());</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">prime</span> <span class="o">*</span> <span class="n">result</span> <span class="o">+</span> <span class="o">((</span><span class="n">issuer</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">?</span> <span class="mi">0</span> <span class="o">:</span> <span class="n">issuer</span><span class="o">.</span><span class="na">hashCode</span><span class="o">());</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"hashCode = "</span> <span class="o">+</span> <span class="n">result</span><span class="o">);</span>
        <span class="k">return</span> <span class="n">result</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">equals</span><span class="o">(</span><span class="nc">Object</span> <span class="n">obj</span><span class="o">)</span> <span class="o">{</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"equals !!! "</span><span class="o">);</span>
        <span class="k">if</span> <span class="o">(</span><span class="k">this</span> <span class="o">==</span> <span class="n">obj</span><span class="o">)</span>
            <span class="k">return</span> <span class="kc">true</span><span class="o">;</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">obj</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span>
            <span class="k">return</span> <span class="kc">false</span><span class="o">;</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">getClass</span><span class="o">()</span> <span class="o">!=</span> <span class="n">obj</span><span class="o">.</span><span class="na">getClass</span><span class="o">())</span>
            <span class="k">return</span> <span class="kc">false</span><span class="o">;</span>
        <span class="nc">CreditCard</span> <span class="n">other</span> <span class="o">=</span> <span class="o">(</span><span class="nc">CreditCard</span><span class="o">)</span> <span class="n">obj</span><span class="o">;</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">expiryDate</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">other</span><span class="o">.</span><span class="na">expiryDate</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span>
                <span class="k">return</span> <span class="kc">false</span><span class="o">;</span>
        <span class="o">}</span> <span class="k">else</span> <span class="k">if</span> <span class="o">(!</span><span class="n">expiryDate</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">other</span><span class="o">.</span><span class="na">expiryDate</span><span class="o">))</span>
            <span class="k">return</span> <span class="kc">false</span><span class="o">;</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">issuer</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">other</span><span class="o">.</span><span class="na">issuer</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span>
                <span class="k">return</span> <span class="kc">false</span><span class="o">;</span>
        <span class="o">}</span> <span class="k">else</span> <span class="k">if</span> <span class="o">(!</span><span class="n">issuer</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">other</span><span class="o">.</span><span class="na">issuer</span><span class="o">))</span>
            <span class="k">return</span> <span class="kc">false</span><span class="o">;</span>
        <span class="k">return</span> <span class="kc">true</span><span class="o">;</span>
    <span class="o">}</span>

<span class="o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Результат выполнения кода:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>adding to HM
hashCode = 1285631513
adding to IHM
before modifying keys
hashCode = 1285631513
Does VISA card exists in HashMap? Yes
Does VISA card exists in IdenityHashMap? Yes
after modifying keys
hashCode = 791156485
Does VISA card exists in HashMap? No
Does VISA card exists in IdenityHashMap? Yes
cardToExpiry.containsKey
hashCode = 791156485
false
cardToExpiryIdenity.containsKey
true</pre>
</div>
</div>
<div class="paragraph">
<p><a href="#java-collections-framework">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_в_чем_разница_между_hashmap_и_weakhashmap_для_чего_используется_weakhashmap">8.46. В чем разница между <code>HashMap</code> и <code>WeakHashMap</code>? Для чего используется <code>WeakHashMap</code>?</h3>
<div class="paragraph">
<p>В Java существует 4 типа ссылок: <em>сильные (strong reference)</em>, <em>мягкие (SoftReference)</em>, <em>слабые (WeakReference)</em> и <em>фантомные (PhantomReference)</em>. Особенности каждого типа ссылок связаны с работой Garbage Collector. Если объект можно достичь только с помощью цепочки WeakReference (то есть на него отсутствуют сильные и мягкие ссылки), то данный объект будет помечен на удаление.</p>
</div>
<div class="paragraph">
<p><code>WeakHashMap</code> - это структура данных, реализующая интерфейс <code>Map</code> и основанная на использовании WeakReference для хранения ключей. Таким образом, пара «ключ-значение» будет удалена из <code>WeakHashMap</code>, если на объект-ключ более не имеется сильных ссылок.</p>
</div>
<div class="paragraph">
<p>В качестве примера использования такой структуры данных можно привести следующую ситуацию: допустим имеются объекты, которые необходимо расширить дополнительной информацией, при этом изменение класса этих объектов нежелательно либо невозможно. В этом случае добавляем каждый объект в <code>WeakHashMap</code> в качестве ключа, а в качестве значения - нужную информацию. Таким образом, пока на объект имеется сильная ссылка (либо мягкая), можно проверять хэш-таблицу и извлекать информацию. Как только объект будет удален, то WeakReference для этого ключа будет помещен в ReferenceQueue и затем соответствующая запись для этой слабой ссылки будет удалена из <code>WeakHashMap</code>.</p>
</div>
<div class="paragraph">
<p><a href="#java-collections-framework">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_в_weakhashmap_используются_weakreferences_а_почему_бы_не_создать_softhashmap_на_softreferences">8.47. В <code>WeakHashMap</code> используются WeakReferences. А почему бы не создать <code>SoftHashMap</code> на SoftReferences?</h3>
<div class="paragraph">
<p><code>SoftHashMap</code> представлена в сторонних библиотеках, например, в <code>Apache Commons</code>.</p>
</div>
<div class="paragraph">
<p><a href="#java-collections-framework">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_в_weakhashmap_используются_weakreferences_а_почему_бы_не_создать_phantomhashmap_на_phantomreferences">8.48. В <code>WeakHashMap</code> используются WeakReferences. А почему бы не создать <code>PhantomHashMap</code> на PhantomReferences?</h3>
<div class="paragraph">
<p>PhantomReference при вызове метода <code>get()</code> возвращает всегда <code>null</code>, поэтому тяжело представить назначение такой структуры данных.</p>
</div>
<div class="paragraph">
<p><a href="#java-collections-framework">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_linkedhashmap_что_в_нем_от_linkedlist_а_что_от_hashmap">8.49. <code>LinkedHashMap</code> - что в нем от <code>LinkedList</code>, а что от <code>HashMap</code>?</h3>
<div class="paragraph">
<p>Реализация <code>LinkedHashMap</code> отличается от <code>HashMap</code> поддержкой двухсвязанного списка, определяющего порядок итерации по элементам структуры данных. По умолчанию элементы списка упорядочены согласно их порядку добавления в <code>LinkedHashMap</code> (insertion-order). Однако порядок итерации можно изменить, установив параметр конструктора <code>accessOrder</code> в значение <code>true</code>. В этом случае доступ осуществляется по порядку последнего обращения к элементу (access-order). Это означает, что при вызове методов <code>get()</code> или <code>put()</code> элемент, к которому обращаемся, перемещается в конец списка.</p>
</div>
<div class="paragraph">
<p>При добавлении элемента, который уже присутствует в <code>LinkedHashMap</code> (т.е. с одинаковым ключом), порядок итерации по элементам не изменяется.</p>
</div>
<div class="paragraph">
<p><a href="#java-collections-framework">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_в_чем_проявляется_сортированность_sortedmap_кроме_того_что_tostring_выводит_все_элементы_по_порядку">8.50. В чем проявляется «сортированность» <code>SortedMap</code>, кроме того, что <code>toString()</code> выводит все элементы по порядку?</h3>
<div class="paragraph">
<p>Так же оно проявляется при итерации по коллекции.</p>
</div>
<div class="paragraph">
<p><a href="#java-collections-framework">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_как_устроен_hashmap">8.51. Как устроен <code>HashMap</code>?</h3>
<div class="paragraph">
<p><code>HashMap</code> состоит из «корзин» (bucket). С технической точки зрения «корзины»&#8201;&#8212;&#8201;это элементы массива, которые хранят ссылки на списки элементов. При добавлении новой пары «ключ-значение», вычисляет хэш-код ключа, на основании которого вычисляется номер корзины (номер ячейки массива), в которую попадет новый элемент. Если корзина пустая, то в нее сохраняется ссылка на вновь добавляемый элемент, если же там уже есть элемент, то происходит последовательный переход по ссылкам между элементами в цепочке, в поисках последнего элемента, от которого и ставится ссылка на вновь добавленный элемент. Если в списке был найден элемент с таким же ключом, то он заменяется.</p>
</div>
<div class="paragraph">
<p><a href="#java-collections-framework">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_согласно_кнуту_и_кормену_существует_две_основных_реализации_хэш_таблицы_на_основе_открытой_адресации_и_на_основе_метода_цепочек_как_реализована_hashmap_почему_по_вашему_мнению_была_выбрана_именно_эта_реализация_в_чем_плюсы_и_минусы_каждого_подхода">8.52. Согласно Кнуту и Кормену существует две основных реализации хэш-таблицы: на основе открытой адресации и на основе метода цепочек. Как реализована <code>HashMap</code>? Почему, по вашему мнению, была выбрана именно эта реализация? В чем плюсы и минусы каждого подхода?</h3>
<div class="paragraph">
<p><code>HashMap</code> реализован с использованием метода цепочек, т.е. каждой ячейке массива (корзине) соответствует свой связный список и при возникновении коллизии осуществляется добавление нового элемента в этот список.</p>
</div>
<div class="paragraph">
<p>Для метода цепочек коэффициент заполнения может быть больше 1 и с увеличением числа элементов производительность убывает линейно. Такие таблицы удобно использовать, если заранее неизвестно количество хранимых элементов, либо их может быть достаточно много, что приводит к большим значениям коэффициента заполнения.</p>
</div>
<div class="paragraph">
<p>Среди методов открытой реализации различают:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>линейное пробирование;</p>
</li>
<li>
<p>квадратичное пробирование;</p>
</li>
<li>
<p>двойное хэширование.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Недостатки структур с методом открытой адресации:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Количество элементов в хэш-таблице не может превышать размера массива. По мере увеличения числа элементов и повышения коэффициента заполнения производительность структуры резко падает, поэтому необходимо проводить перехэширование.</p>
</li>
<li>
<p>Сложно организовать удаление элемента.</p>
</li>
<li>
<p>Первые два метода открытой адресации приводят к проблеме первичной и вторичной группировок.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Преимущества хэш-таблицы с открытой адресацией:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>отсутствие затрат на создание и хранение объектов списка;</p>
</li>
<li>
<p>простота организации сериализации/десериализации объекта.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a href="#java-collections-framework">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_как_работает_hashmap_при_попытке_сохранить_в_него_два_элемента_по_ключам_с_одинаковым_hashcode_но_для_которых_equals_false">8.53. Как работает <code>HashMap</code> при попытке сохранить в него два элемента по ключам с одинаковым <code>hashCode()</code>, но для которых <code>equals() == false</code>?</h3>
<div class="paragraph">
<p>По значению <code>hashCode()</code> вычисляется индекс ячейки массива, в список которой этот элемент будет добавлен. Перед добавлением осуществляется проверка на наличие элементов в этой ячейке. Если элементы с таким <code>hashCode()</code> уже присутствует, но их <code>equals()</code> методы не равны, то элемент будет добавлен в конец списка.</p>
</div>
<div class="paragraph">
<p><a href="#java-collections-framework">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_какое_начальное_количество_корзин_в_hashmap">8.54. Какое начальное количество корзин в <code>HashMap</code>?</h3>
<div class="paragraph">
<p>В конструкторе по умолчанию - 16, используя конструкторы с параметрами можно задавать произвольное начальное количество корзин.</p>
</div>
<div class="paragraph">
<p><a href="#java-collections-framework">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_какова_оценка_временной_сложности_операций_над_элементами_из_hashmap_гарантирует_ли_hashmap_указанную_сложность_выборки_элемента">8.55. Какова оценка временной сложности операций над элементами из <code>HashMap</code>? Гарантирует ли <code>HashMap</code> указанную сложность выборки элемента?</h3>
<div class="paragraph">
<p>В общем случае операции добавления, поиска и удаления элементов занимают константное время.</p>
</div>
<div class="paragraph">
<p>Данная сложность не гарантируется, т.к. если хэш-функция распределяет элементы по корзинам равномерно, временная сложность станет не хуже <a href="https://ru.wikipedia.org/wiki/%D0%92%D1%80%D0%B5%D0%BC%D0%B5%D0%BD%D0%BD%D0%B0%D1%8F_%D1%81%D0%BB%D0%BE%D0%B6%D0%BD%D0%BE%D1%81%D1%82%D1%8C_%D0%B0%D0%BB%D0%B3%D0%BE%D1%80%D0%B8%D1%82%D0%BC%D0%B0#%D0%9B%D0%BE%D0%B3%D0%B0%D1%80%D0%B8%D1%84%D0%BC%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%BE%D0%B5_%D0%B2%D1%80%D0%B5%D0%BC%D1%8F"><em>Логарифмического времени</em></a> O(log(N)), а в случае, когда хэш-функция постоянно возвращает одно и то же значение, <code>HashMap</code> превратится в связный список со сложностью О(n).</p>
</div>
<div class="paragraph">
<p>Пример кода двоичного поиска:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Q</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="no">Q</span> <span class="n">q</span> <span class="o">=</span> <span class="k">new</span> <span class="no">Q</span><span class="o">();</span>
        <span class="n">q</span><span class="o">.</span><span class="na">binSearch</span><span class="o">();</span>
    <span class="o">}</span>

    <span class="kd">private</span> <span class="kt">void</span> <span class="nf">binSearch</span><span class="o">()</span> <span class="o">{</span>
        <span class="kt">int</span><span class="o">[]</span> <span class="n">inpArr</span> <span class="o">=</span> <span class="o">{</span><span class="mi">1</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span> <span class="mi">3</span><span class="o">,</span> <span class="mi">4</span><span class="o">,</span> <span class="mi">5</span><span class="o">,</span> <span class="mi">6</span><span class="o">,</span> <span class="mi">7</span><span class="o">,</span> <span class="mi">8</span><span class="o">,</span> <span class="mi">9</span><span class="o">};</span>
        <span class="nc">Integer</span> <span class="n">result</span> <span class="o">=</span> <span class="n">binSearchF</span><span class="o">(</span><span class="n">inpArr</span><span class="o">,</span> <span class="mi">1</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="n">inpArr</span><span class="o">.</span><span class="na">length</span> <span class="o">-</span> <span class="mi">1</span><span class="o">);</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"-----------------------"</span><span class="o">);</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">binSearchF</span><span class="o">(</span><span class="n">inpArr</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="n">inpArr</span><span class="o">.</span><span class="na">length</span> <span class="o">-</span> <span class="mi">1</span><span class="o">);</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Found at position "</span> <span class="o">+</span> <span class="n">result</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="kd">private</span> <span class="nc">Integer</span> <span class="nf">binSearchF</span><span class="o">(</span><span class="kt">int</span><span class="o">[]</span> <span class="n">inpArr</span><span class="o">,</span> <span class="kt">int</span> <span class="n">searchValue</span><span class="o">,</span> <span class="kt">int</span> <span class="n">low</span><span class="o">,</span> <span class="kt">int</span> <span class="n">high</span><span class="o">)</span> <span class="o">{</span>
        <span class="nc">Integer</span> <span class="n">index</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
        <span class="k">while</span> <span class="o">(</span><span class="n">low</span> <span class="o">&lt;=</span> <span class="n">high</span><span class="o">)</span> <span class="o">{</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"New iteration, low = "</span> <span class="o">+</span> <span class="n">low</span> <span class="o">+</span> <span class="s">", high = "</span> <span class="o">+</span> <span class="n">high</span><span class="o">);</span>
            <span class="kt">int</span> <span class="n">mid</span> <span class="o">=</span> <span class="o">(</span><span class="n">low</span> <span class="o">+</span> <span class="n">high</span><span class="o">)</span> <span class="o">/</span> <span class="mi">2</span><span class="o">;</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"trying mid = "</span> <span class="o">+</span> <span class="n">mid</span> <span class="o">+</span> <span class="s">" inpArr[mid] = "</span> <span class="o">+</span> <span class="n">inpArr</span><span class="o">[</span><span class="n">mid</span><span class="o">]);</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">inpArr</span><span class="o">[</span><span class="n">mid</span><span class="o">]</span> <span class="o">&lt;</span> <span class="n">searchValue</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">low</span> <span class="o">=</span> <span class="n">mid</span> <span class="o">+</span> <span class="mi">1</span><span class="o">;</span>
                <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"inpArr[mid] ("</span> <span class="o">+</span> <span class="n">inpArr</span><span class="o">[</span><span class="n">mid</span><span class="o">]</span> <span class="o">+</span> <span class="s">") &lt; searchValue("</span> <span class="o">+</span> <span class="n">searchValue</span> <span class="o">+</span> <span class="s">"), mid = "</span> <span class="o">+</span> <span class="n">mid</span>
                        <span class="o">+</span> <span class="s">", setting low = "</span> <span class="o">+</span> <span class="n">low</span><span class="o">);</span>
            <span class="o">}</span> <span class="k">else</span> <span class="k">if</span> <span class="o">(</span><span class="n">inpArr</span><span class="o">[</span><span class="n">mid</span><span class="o">]</span> <span class="o">&gt;</span> <span class="n">searchValue</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">high</span> <span class="o">=</span> <span class="n">mid</span> <span class="o">-</span> <span class="mi">1</span><span class="o">;</span>
                <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"inpArr[mid] ("</span> <span class="o">+</span> <span class="n">inpArr</span><span class="o">[</span><span class="n">mid</span><span class="o">]</span> <span class="o">+</span> <span class="s">") &gt; searchValue("</span> <span class="o">+</span> <span class="n">searchValue</span> <span class="o">+</span> <span class="s">"), mid = "</span> <span class="o">+</span> <span class="n">mid</span>
                        <span class="o">+</span> <span class="s">", setting high = "</span> <span class="o">+</span> <span class="n">high</span><span class="o">);</span>
            <span class="o">}</span> <span class="k">else</span> <span class="k">if</span> <span class="o">(</span><span class="n">inpArr</span><span class="o">[</span><span class="n">mid</span><span class="o">]</span> <span class="o">==</span> <span class="n">searchValue</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">index</span> <span class="o">=</span> <span class="n">mid</span><span class="o">;</span>
                <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"found at index "</span> <span class="o">+</span> <span class="n">mid</span><span class="o">);</span>
                <span class="k">break</span><span class="o">;</span>
            <span class="o">}</span>
        <span class="o">}</span>
        <span class="k">return</span> <span class="n">index</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><a href="#java-collections-framework">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_возможна_ли_ситуация_когда_hashmap_выродится_в_список_даже_с_ключами_имеющими_разные_hashcode">8.56. Возможна ли ситуация, когда <code>HashMap</code> выродится в список даже с ключами имеющими разные <code>hashCode()</code>?</h3>
<div class="paragraph">
<p>Это возможно в случае, если метод, определяющий номер корзины будет возвращать одинаковые значения.</p>
</div>
<div class="paragraph">
<p><a href="#java-collections-framework">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_в_каком_случае_может_быть_потерян_элемент_в_hashmap">8.57. В каком случае может быть потерян элемент в <code>HashMap</code>?</h3>
<div class="paragraph">
<p>Допустим, в качестве ключа используется не примитив, а объект с несколькими полями. После добавления элемента в <code>HashMap</code> у объекта, который выступает в качестве ключа, изменяют одно поле, которое участвует в вычислении хэш-кода. В результате при попытке найти данный элемент по исходному ключу, будет происходить обращение к правильной корзине, а вот <code>equals</code> уже не найдет указанный ключ в списке элементов. Тем не менее, даже если <code>equals</code> реализован таким образом, что изменение данного поля объекта не влияет на результат, то после увеличения размера корзин и пересчета хэш-кодов элементов, указанный элемент, с измененным значением поля, с большой долей вероятности попадет в совершенно другую корзину и тогда уже потеряется совсем.</p>
</div>
<div class="paragraph">
<p><a href="#java-collections-framework">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_почему_нельзя_использовать_byte_в_качестве_ключа_в_hashmap">8.58. Почему нельзя использовать <code>byte[]</code> в качестве ключа в <code>HashMap</code>?</h3>
<div class="paragraph">
<p>Хэш-код массива не зависит от хранимых в нем элементов, а присваивается при создании массива (метод вычисления хэш-кода массива не переопределен и вычисляется по стандартному <code>Object.hashCode()</code> на основании адреса массива). Так же у массивов не переопределен <code>equals</code> и выполняется сравнение указателей. Это приводит к тому, что обратиться к сохраненному с ключом-массивом элементу не получится при использовании другого массива такого же размера и с такими же элементами, доступ можно осуществить лишь в одном случае&#8201;&#8212;&#8201;при использовании той же самой ссылки на массив, что использовалась для сохранения элемента.</p>
</div>
<div class="paragraph">
<p><a href="#java-collections-framework">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_какова_роль_equals_и_hashcode_в_hashmap">8.59. Какова роль <code>equals()</code> и <code>hashCode()</code> в <code>HashMap</code>?</h3>
<div class="paragraph">
<p><code>hashCode</code> позволяет определить корзину для поиска элемента, а <code>equals</code> используется для сравнения ключей элементов в списке корзины и искомого ключа.</p>
</div>
<div class="paragraph">
<p><a href="#java-collections-framework">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_каково_максимальное_число_значений_hashcode">8.60. Каково максимальное число значений <code>hashCode()</code>?</h3>
<div class="paragraph">
<p>Число значений следует из сигнатуры <code>int hashCode()</code> и равно диапазону типа <code>int</code>&#8201;&#8212;&#8201;<strong>2<sup>32</sup></strong>.</p>
</div>
<div class="paragraph">
<p><a href="#java-collections-framework">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_какое_худшее_время_работы_метода_getkey_для_ключа_которого_нет_в_hashmap">8.61. Какое худшее время работы метода get(key) для ключа, которого нет в <code>HashMap</code>?</h3>

</div>
<div class="sect2">
<h3 id="_какое_худшее_время_работы_метода_getkey_для_ключа_который_есть_в_hashmap">8.62. Какое худшее время работы метода get(key) для ключа, который есть в <code>HashMap</code>?</h3>
<div class="paragraph">
<p><strong><em>O(N)</em></strong>. Худший случай - это поиск ключа в <code>HashMap</code>, вырожденного в список по причине совпадения ключей по <code>hashCode()</code> и для выяснения хранится ли элемент с определённым ключом может потребоваться перебор всего списка.</p>
</div>
<div class="paragraph">
<p>Но начиная с Java 8, после определенного числа элементов в списке, связный список преобразовывается в красно-черное дерево и сложность выборки, даже в случае плохой хеш-функции, не хуже <em>логарифмической</em> <em>O(log(N))</em></p>
</div>
<div class="paragraph">
<p><a href="#java-collections-framework">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_сколько_переходов_происходит_в_момент_вызова_hashmap_getkey_по_ключу_который_есть_в_таблице">8.63. Сколько переходов происходит в момент вызова <code>HashMap.get(key)</code> по ключу, который есть в таблице?</h3>
<div class="ulist">
<ul>
<li>
<p>ключ равен <code>null</code>: <strong>1</strong> - выполняется единственный метод <code>getForNullKey()</code>.</p>
</li>
<li>
<p>любой ключ отличный от <code>null</code>: <strong>4</strong> - вычисление хэш-кода ключа; определение номера корзины; поиск значения; возврат значения.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a href="#java-collections-framework">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_сколько_создается_новых_объектов_когда_вы_добавляете_новый_элемент_в_hashmap">8.64. Сколько создается новых объектов, когда вы добавляете новый элемент в <code>HashMap</code>?</h3>
<div class="paragraph">
<p><strong>Один</strong> новый объект статического вложенного класса <code>Entry&lt;K,V&gt;</code>.</p>
</div>
<div class="paragraph">
<p><a href="#java-collections-framework">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_как_и_когда_происходит_увеличение_количества_корзин_в_hashmap">8.65. Как и когда происходит увеличение количества корзин в <code>HashMap</code>?</h3>
<div class="paragraph">
<p>Помимо <code>capacity</code> у <code>HashMap</code> есть еще поле <code>loadFactor</code>, на основании которого, вычисляется предельное количество занятых корзин <code>capacity * loadFactor</code>. По умолчанию <code>loadFactor = 0.75</code>. По достижению предельного значения, число корзин увеличивается в 2 раза и для всех хранимых элементов вычисляется новое «местоположение» с учетом нового числа корзин.</p>
</div>
<div class="paragraph">
<p><a href="#java-collections-framework">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_объясните_смысл_параметров_в_конструкторе_hashmapint_initialcapacity_float_loadfactor">8.66. Объясните смысл параметров в конструкторе <code>HashMap(int initialCapacity, float loadFactor)</code>.</h3>
<div class="ulist">
<ul>
<li>
<p><code>initialCapacity</code> - исходный размер <code>HashMap</code>, количество корзин в хэш-таблице в момент её создания.</p>
</li>
<li>
<p><code>loadFactor</code> - коэффициент заполнения <code>HashMap</code>, при превышении которого происходит увеличение количества корзин и автоматическое перехэширование. Равен отношению числа уже хранимых элементов в таблице к её размеру.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a href="#java-collections-framework">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_будет_ли_работать_hashmap_если_все_добавляемые_ключи_будут_иметь_одинаковый_hashcode">8.67. Будет ли работать <code>HashMap</code>, если все добавляемые ключи будут иметь одинаковый <code>hashCode()</code>?</h3>
<div class="paragraph">
<p>Да, будет, но в этом случае <code>HashMap</code> вырождается в связный список и теряет свои преимущества.</p>
</div>
</div>
<div class="sect2">
<h3 id="_как_перебрать_все_ключи_map">8.68. Как перебрать все ключи <code>Map</code>?</h3>
<div class="paragraph">
<p>Использовать метод <code>keySet()</code>, который возвращает множество <code>Set&lt;K&gt;</code> ключей.</p>
</div>
<div class="paragraph">
<p><a href="#java-collections-framework">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_как_перебрать_все_значения_map">8.69. Как перебрать все значения <code>Map</code>?</h3>
<div class="paragraph">
<p>Использовать метод <code>values()</code>, который возвращает коллекцию <code>Collection&lt;V&gt;</code> значений.</p>
</div>
<div class="paragraph">
<p><a href="#java-collections-framework">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_как_перебрать_все_пары_ключ_значение_в_map">8.70. Как перебрать все пары «ключ-значение» в <code>Map</code>?</h3>
<div class="paragraph">
<p>Использовать метод <code>entrySet()</code>, который возвращает множество <code>Set&lt;Map.Entry&lt;K, V&gt;</code> пар «ключ-значение».</p>
</div>
<div class="paragraph">
<p><a href="#java-collections-framework">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_в_чем_отличия_treeset_и_hashset">8.71. В чем отличия <code>TreeSet</code> и <code>HashSet</code>?</h3>
<div class="paragraph">
<p><code>TreeSet</code> обеспечивает упорядоченно хранение элементов в виде красно-черного дерева. Сложность выполнения основных операций не хуже <em>O(log(N))</em> (<em>Логарифмическое время</em>).</p>
</div>
<div class="paragraph">
<p><code>HashSet</code> использует для хранения элементов такой же подход, что и <code>HashMap</code>, за тем отличием, что в <code>HashSet</code> в качестве ключа и значения выступает сам <code>элемент</code>, кроме того, <code>HashSet</code> не поддерживает упорядоченное хранение элементов и обеспечивает временную сложность выполнения операций аналогично <code>HashMap</code>.</p>
</div>
<div class="paragraph">
<p><a href="#java-collections-framework">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_что_будет_если_добавлять_элементы_в_treeset_по_возрастанию">8.72. Что будет, если добавлять элементы в <code>TreeSet</code> по возрастанию?</h3>
<div class="paragraph">
<p>В основе <code>TreeSet</code> лежит красно-черное дерево, которое умеет само себя балансировать. В итоге, <code>TreeSet</code> все равно в каком порядке вы добавляете в него элементы, преимущества этой структуры данных будут сохраняться.</p>
</div>
<div class="paragraph">
<p><a href="#java-collections-framework">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_чем_linkedhashset_отличается_от_hashset">8.73. Чем <code>LinkedHashSet</code> отличается от <code>HashSet</code>?</h3>
<div class="paragraph">
<p><code>LinkedHashSet</code> отличается от <code>HashSet</code> только тем, что в его основе лежит <code>LinkedHashMap</code> вместо <code>HashMap</code>. Благодаря этому порядок элементов при обходе коллекции является идентичным порядку добавления элементов (insertion-order). При добавлении элемента, который уже присутствует в <code>LinkedHashSet</code> (т.е. с одинаковым ключом), порядок обхода элементов не изменяется.</p>
</div>
<div class="paragraph">
<p><a href="#java-collections-framework">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_для_enum_есть_специальный_класс_java_util_enumset_зачем_чем_авторов_не_устраивал_hashset_или_treeset">8.74. Для <code>Enum</code> есть специальный класс <code>java.util.EnumSet</code>. Зачем? Чем авторов не устраивал <code>HashSet</code> или <code>TreeSet</code>?</h3>
<div class="paragraph">
<p><code>EnumSet</code> - это реализация интерфейса <code>Set</code> для использования с перечислениями (<code>Enum</code>). В структуре данных хранятся объекты только одного типа <code>Enum</code>, указываемого при создании. Для хранения значений <code>EnumSet</code> использует массив битов (<em>bit vector</em>), - это позволяет получить высокую компактность и эффективность. Проход по <code>EnumSet</code> осуществляется согласно порядку объявления элементов перечисления.</p>
</div>
<div class="paragraph">
<p>Все основные операции выполняются за <em>O(1)</em> и обычно (но негарантированно) быстрей аналогов из <code>HashSet</code>, а пакетные операции (<em>bulk operations</em>), такие как <code>containsAll()</code> и <code>retainAll()</code> выполняются даже гораздо быстрей.</p>
</div>
<div class="paragraph">
<p>Помимо всего <code>EnumSet</code> предоставляет множество статических методов инициализации для упрощенного и удобного создания экземпляров.</p>
</div>
<div class="paragraph">
<p><a href="#java-collections-framework">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_какие_существуют_способы_перебирать_элементы_списка">8.75. Какие существуют способы перебирать элементы списка?</h3>
<div class="ulist">
<ul>
<li>
<p>Цикл с итератором</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="nc">Iterator</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;</span> <span class="n">iterator</span> <span class="o">=</span> <span class="n">list</span><span class="o">.</span><span class="na">iterator</span><span class="o">();</span>
<span class="k">while</span> <span class="o">(</span><span class="n">iterator</span><span class="o">.</span><span class="na">hasNext</span><span class="o">())</span> <span class="o">{</span>
    <span class="c1">//iterator.next();</span>
<span class="o">}</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Цикл <code>for</code></p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">list</span><span class="o">.</span><span class="na">size</span><span class="o">();</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
    <span class="c1">//list.get(i);</span>
<span class="o">}</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Цикл <code>while</code></p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
<span class="k">while</span> <span class="o">(</span><span class="n">i</span> <span class="o">&lt;</span> <span class="n">list</span><span class="o">.</span><span class="na">size</span><span class="o">())</span> <span class="o">{</span>
    <span class="c1">//list.get(i);</span>
    <span class="n">i</span><span class="o">++;</span>
<span class="o">}</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>«for-each»</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="k">for</span> <span class="o">(</span><span class="nc">String</span> <span class="n">element</span> <span class="o">:</span> <span class="n">list</span><span class="o">)</span> <span class="o">{</span>
    <span class="c1">//element;</span>
<span class="o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><a href="#java-collections-framework">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_каким_образом_можно_получить_синхронизированные_объекты_стандартных_коллекций">8.76. Каким образом можно получить синхронизированные объекты стандартных коллекций?</h3>
<div class="paragraph">
<p>С помощью статических методов <code>synchronizedMap()</code> и <code>synchronizedList()</code> класса <code>Collections</code>. Данные методы возвращают синхронизированный декоратор переданной коллекции. При этом все равно в случае обхода по коллекции требуется ручная синхронизация.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java">  <span class="nc">Map</span> <span class="n">m</span> <span class="o">=</span> <span class="nc">Collections</span><span class="o">.</span><span class="na">synchronizedMap</span><span class="o">(</span><span class="k">new</span> <span class="nc">HashMap</span><span class="o">());</span>
  <span class="nc">List</span> <span class="n">l</span> <span class="o">=</span> <span class="nc">Collections</span><span class="o">.</span><span class="na">synchronizedList</span><span class="o">(</span><span class="k">new</span> <span class="nc">ArrayList</span><span class="o">());</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Начиная с Java 6 JCF был расширен специальными коллекциями, поддерживающими многопоточный доступ, такими как <code>CopyOnWriteArrayList</code> и <code>ConcurrentHashMap</code>.</p>
</div>
<div class="paragraph">
<p><a href="#java-collections-framework">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_как_получить_коллекцию_только_для_чтения">8.77. Как получить коллекцию только для чтения?</h3>
<div class="paragraph">
<p>При помощи:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>Collections.unmodifiableList(list)</code>;</p>
</li>
<li>
<p><code>Collections.unmodifiableSet(set)</code>;</p>
</li>
<li>
<p><code>Collections.unmodifiableMap(map)</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Эти методы принимают коллекцию в качестве параметра, и возвращают коллекцию только для чтения с теми же элементами внутри.</p>
</div>
<div class="paragraph">
<p><a href="#java-collections-framework">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_напишите_однопоточную_программу_которая_заставляет_коллекцию_выбросить_concurrentmodificationexception">8.78. Напишите однопоточную программу, которая заставляет коллекцию выбросить <code>ConcurrentModificationException</code>.</h3>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
    <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Integer</span><span class="o">&gt;</span> <span class="n">list</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ArrayList</span><span class="o">&lt;&gt;();</span>
    <span class="n">list</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="mi">1</span><span class="o">);</span>
    <span class="n">list</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="mi">2</span><span class="o">);</span>
    <span class="n">list</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="mi">3</span><span class="o">);</span>

    <span class="k">for</span> <span class="o">(</span><span class="nc">Integer</span> <span class="n">integer</span> <span class="o">:</span> <span class="n">list</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">list</span><span class="o">.</span><span class="na">remove</span><span class="o">(</span><span class="mi">1</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><a href="#java-collections-framework">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_приведите_пример_когда_какая_либо_коллекция_выбрасывает_unsupportedoperationexception">8.79. Приведите пример, когда какая-либо коллекция выбрасывает <code>UnsupportedOperationException</code>.</h3>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
    <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Integer</span><span class="o">&gt;</span> <span class="n">list</span> <span class="o">=</span> <span class="nc">Collections</span><span class="o">.</span><span class="na">emptyList</span><span class="o">();</span>
    <span class="n">list</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="mi">0</span><span class="o">);</span>
<span class="o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><a href="#java-collections-framework">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_реализуйте_симметрическую_разность_двух_коллекций_используя_методы_collection_addall_removeall_retainall">8.80. Реализуйте симметрическую разность двух коллекций используя методы <code>Collection</code> (<code>addAll(...)</code>, <code>removeAll(...)</code>, <code>retainAll(...)</code>).</h3>
<div class="paragraph">
<p>Симметрическая разность двух коллекций - это множество элементов, одновременно не принадлежащих обоим исходным коллекциям.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="o">&lt;</span><span class="no">T</span><span class="o">&gt;</span> <span class="nc">Collection</span><span class="o">&lt;</span><span class="no">T</span><span class="o">&gt;</span> <span class="nf">symmetricDifference</span><span class="o">(</span><span class="nc">Collection</span><span class="o">&lt;</span><span class="no">T</span><span class="o">&gt;</span> <span class="n">a</span><span class="o">,</span> <span class="nc">Collection</span><span class="o">&lt;</span><span class="no">T</span><span class="o">&gt;</span> <span class="n">b</span><span class="o">)</span> <span class="o">{</span>
    <span class="c1">// Объединяем коллекции.</span>
    <span class="nc">Collection</span><span class="o">&lt;</span><span class="no">T</span><span class="o">&gt;</span> <span class="n">result</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ArrayList</span><span class="o">&lt;&gt;(</span><span class="n">a</span><span class="o">);</span>
    <span class="n">result</span><span class="o">.</span><span class="na">addAll</span><span class="o">(</span><span class="n">b</span><span class="o">);</span>

    <span class="c1">// Получаем пересечение коллекций.</span>
    <span class="nc">Collection</span><span class="o">&lt;</span><span class="no">T</span><span class="o">&gt;</span> <span class="n">intersection</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ArrayList</span><span class="o">&lt;&gt;(</span><span class="n">a</span><span class="o">);</span>
    <span class="n">intersection</span><span class="o">.</span><span class="na">retainAll</span><span class="o">(</span><span class="n">b</span><span class="o">);</span>

    <span class="c1">// Удаляем элементы, расположенные в обоих коллекциях.</span>
    <span class="n">result</span><span class="o">.</span><span class="na">removeAll</span><span class="o">(</span><span class="n">intersection</span><span class="o">);</span>

    <span class="k">return</span> <span class="n">result</span><span class="o">;</span>
<span class="o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><a href="#java-collections-framework">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_как_используя_linkedhashmap_сделать_кэш_c_invalidation_policy">8.81. Как, используя LinkedHashMap, сделать кэш c «invalidation policy»?</h3>
<div class="paragraph">
<p>Необходимо использовать <em>LRU-алгоритм (Least Recently Used algorithm)</em> и <code>LinkedHashMap</code> с access-order. В этом случае при обращении к элементу он будет перемещаться в конец списка, а наименее используемые элементы будут постепенно группироваться в начале списка. Так же в стандартной реализации <code>LinkedHashMap</code> есть метод <code>removeEldestEntries()</code>, который возвращает <code>true</code>, если текущий объект <code>LinkedHashMap</code> должен удалить наименее используемый элемент из коллекции при использовании методов <code>put()</code> и <code>putAll()</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">LRUCache</span><span class="o">&lt;</span><span class="no">K</span><span class="o">,</span> <span class="no">V</span><span class="o">&gt;</span> <span class="kd">extends</span> <span class="nc">LinkedHashMap</span><span class="o">&lt;</span><span class="no">K</span><span class="o">,</span> <span class="no">V</span><span class="o">&gt;</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="kt">int</span> <span class="no">MAX_ENTRIES</span> <span class="o">=</span> <span class="mi">10</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nf">LRUCache</span><span class="o">(</span><span class="kt">int</span> <span class="n">initialCapacity</span><span class="o">)</span> <span class="o">{</span>
        <span class="kd">super</span><span class="o">(</span><span class="n">initialCapacity</span><span class="o">,</span> <span class="mf">0.85f</span><span class="o">,</span> <span class="kc">true</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">protected</span> <span class="kt">boolean</span> <span class="nf">removeEldestEntry</span><span class="o">(</span><span class="nc">Map</span><span class="o">.</span><span class="na">Entry</span><span class="o">&lt;</span><span class="no">K</span><span class="o">,</span> <span class="no">V</span><span class="o">&gt;</span> <span class="n">eldest</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="nf">size</span><span class="o">()</span> <span class="o">&gt;</span> <span class="no">MAX_ENTRIES</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Стоит заметить, что <code>LinkedHashMap</code> не позволяет полностью реализовать LRU-алгоритм, поскольку при вставке уже имеющегося в коллекции элемента порядок итерации по элементам не меняется.</p>
</div>
<div class="paragraph">
<p><a href="#java-collections-framework">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_как_одной_строчкой_скопировать_элементы_любой_collection_в_массив">8.82. Как одной строчкой скопировать элементы любой <code>collection</code> в массив?</h3>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="nc">Object</span><span class="o">[]</span> <span class="n">array</span> <span class="o">=</span> <span class="n">collection</span><span class="o">.</span><span class="na">toArray</span><span class="o">();</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><a href="#java-collections-framework">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_как_одним_вызовом_из_list_получить_list_со_всеми_элементами_кроме_первых_и_последних_3_х">8.83. Как одним вызовом из <code>List</code> получить <code>List</code> со всеми элементами, кроме первых и последних 3-х?</h3>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="nc">List</span><span class="o">&lt;</span><span class="nc">Integer</span><span class="o">&gt;</span> <span class="n">subList</span> <span class="o">=</span> <span class="n">list</span><span class="o">.</span><span class="na">subList</span><span class="o">(</span><span class="mi">3</span><span class="o">,</span> <span class="n">list</span><span class="o">.</span><span class="na">size</span><span class="o">()</span> <span class="o">-</span> <span class="mi">3</span><span class="o">);</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><a href="#java-collections-framework">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_как_одной_строчкой_преобразовать_hashset_в_arraylist">8.84. Как одной строчкой преобразовать <code>HashSet</code> в <code>ArrayList</code>?</h3>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="nc">ArrayList</span><span class="o">&lt;</span><span class="nc">Integer</span><span class="o">&gt;</span> <span class="n">list</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ArrayList</span><span class="o">&lt;&gt;(</span><span class="k">new</span> <span class="nc">HashSet</span><span class="o">&lt;&gt;());</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><a href="#java-collections-framework">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_как_одной_строчкой_преобразовать_arraylist_в_hashset">8.85. Как одной строчкой преобразовать <code>ArrayList</code> в <code>HashSet</code>?</h3>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="nc">HashSet</span><span class="o">&lt;</span><span class="nc">Integer</span><span class="o">&gt;</span> <span class="n">set</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">HashSet</span><span class="o">&lt;&gt;(</span><span class="k">new</span> <span class="nc">ArrayList</span><span class="o">&lt;&gt;());</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><a href="#java-collections-framework">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_сделайте_hashset_из_ключей_hashmap">8.86. Сделайте <code>HashSet</code> из ключей <code>HashMap</code>.</h3>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="nc">HashSet</span><span class="o">&lt;</span><span class="nc">Object</span><span class="o">&gt;</span> <span class="n">set</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">HashSet</span><span class="o">&lt;&gt;(</span><span class="n">map</span><span class="o">.</span><span class="na">keySet</span><span class="o">());</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><a href="#java-collections-framework">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_сделайте_hashmap_из_hashsetmap_entryk_v">8.87. Сделайте <code>HashMap</code> из <code>HashSet&lt;Map.Entry&lt;K, V&gt;&gt;</code>.</h3>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="nc">HashMap</span><span class="o">&lt;</span><span class="no">K</span><span class="o">,</span> <span class="no">V</span><span class="o">&gt;</span> <span class="n">map</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">HashMap</span><span class="o">&lt;&gt;(</span><span class="n">set</span><span class="o">.</span><span class="na">size</span><span class="o">());</span>
<span class="k">for</span> <span class="o">(</span><span class="nc">Map</span><span class="o">.</span><span class="na">Entry</span><span class="o">&lt;</span><span class="no">K</span><span class="o">,</span> <span class="no">V</span><span class="o">&gt;</span> <span class="n">entry</span> <span class="o">:</span> <span class="n">set</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">map</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">entry</span><span class="o">.</span><span class="na">getKey</span><span class="o">(),</span> <span class="n">entry</span><span class="o">.</span><span class="na">getValue</span><span class="o">());</span>
<span class="o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><a href="#java-collections-framework">к оглавлению</a></p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_источник">9. Источник</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="http://www.parshinpn.pro/content/voprosy-i-otvety-na-sobesedovanii-po-teme-java-collection-framework-chast-1">parshinpn.pro</a></p>
</li>
<li>
<p><a href="https://habrahabr.ru/post/162017/">Хабрахабр</a></p>
</li>
<li>
<p><a href="http://www.quizful.net/interview/java">Quizful</a></p>
</li>
<li>
<p><a href="http://info.javarush.ru/">JavaRush</a></p>
</li>
<li>
<p><a href="https://habrahabr.ru/post/237043/">Хабрахабр:Справочник по Java Collections Framework</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a href="README.html">Вопросы для собеседования</a></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_jdbc">10. JDBC</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="#Что-такое-jdbc">Что такое <em>JDBC</em>?</a></p>
</li>
<li>
<p><a href="#В-чем-заключаются-преимущества-использования-jdbc">В чем заключаются преимущества использования JDBC?</a></p>
</li>
<li>
<p><a href="#Что-из-себя-представляет-jdbc-url">Что из себя представляет JDBC URL?</a></p>
</li>
<li>
<p><a href="#Из-каких-частей-стоит-jdbc">Из каких частей стоит JDBC?</a></p>
</li>
<li>
<p><a href="#Перечислите-основные-классы-и-интерфейсы-jdbc">Перечислите-основные-классы-и-интерфейсы-jdbc</a></p>
</li>
<li>
<p><a href="#Опишите-основные-этапы-работы-с-базой-данных-при-использовании-jdbc">Опишите основные этапы работы с базой данных с использованием JDBC.</a></p>
</li>
<li>
<p><a href="#Перечислите-основные-типы-данных-используемые-в-JDBC.-Как-они-связаны-с-типами-Java">Перечислите основные типы данных используемые в JDBC. Как они связаны с типами Java?</a></p>
</li>
<li>
<p><a href="#Как-зарегистрировать-драйвер-jdbc">Как зарегистрировать драйвер JDBC?</a></p>
</li>
<li>
<p><a href="#Как-установить-соединение-с-базой-данных">Как установить соединение с базой данных?</a></p>
</li>
<li>
<p><a href="#Какие-уровни-изоляции-транзакций-поддерживаются-в-jdbc">Какие уровни изоляции транзакций поддерживаются в JDBC?</a></p>
</li>
<li>
<p><a href="#При-помощи-чего-формируются-запросы-к-базе-данных">При помощи чего формируются запросы к базе данных?</a></p>
</li>
<li>
<p><a href="#Чем-отличается-statement-от-preparedstatement">Чем отличается Statement от PreparedStatement?</a></p>
</li>
<li>
<p><a href="#Как-осуществляется-запрос-к-базе-данных-и-обработка-результатов">Как осуществляется запрос к базе данных и обработка результатов?</a></p>
</li>
<li>
<p><a href="#Как-вызвать-хранимую-процедуру">Как вызвать хранимую процедуру?</a></p>
</li>
<li>
<p><a href="#Как-закрыть-соединение-с-базой-данных">Как закрыть соединение с базой данных?</a></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_что_такое_jdbc">10.1. Что такое <em>JDBC</em>?</h3>
<div class="paragraph">
<p><strong>JDBC, Java DataBase Connectivity (соединение с базами данных на Java)</strong>&#8201;&#8212;&#8201;промышленный стандарт взаимодействия Java-приложений с различными СУБД. Реализован в виде пакета <code>java.sql</code>, входящего в состав Java SE.</p>
</div>
<div class="paragraph">
<p>JDBC основан на концепции драйверов, которые позволяют получать соединение с базой данных по специально описанному URL. При загрузке драйвер регистрирует себя в системе и в дальнейшем автоматически вызывается, когда программа требует URL, содержащий протокол, за который этот драйвер отвечает.</p>
</div>
<div class="paragraph">
<p><a href="#jdbc">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_в_чем_заключаются_преимущества_использования_jdbc">10.2. В чем заключаются преимущества использования JDBC?</h3>
<div class="paragraph">
<p>Преимуществами JDBC считают:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Лёгкость разработки: разработчик может не знать специфики базы данных, с которой работает;</p>
</li>
<li>
<p>Код практически не меняется, если компания переходит на другую базу данных (количество изменений зависит исключительно от различий между диалектами SQL);</p>
</li>
<li>
<p>Не нужно дополнительно устанавливать клиентскую программу;</p>
</li>
<li>
<p>К любой базе данных можно подсоединиться через легко описываемый URL.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a href="#jdbc">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_что_из_себя_представляет_jdbc_url">10.3. Что из себя представляет JDBC URL?</h3>
<div class="paragraph">
<p><strong>JDBC URL</strong> состоит из:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>&lt;protocol&gt;:</code> (протокола) - всегда <code>jdbc:</code>.</p>
</li>
<li>
<p><code>&lt;subprotocol&gt;:</code> (подпротокола) - это имя драйвера или имя механизма соединения с базой данных. Подпротокол может поддерживаться одним или несколькими драйверами. Лежащий на поверхности пример подпротокола - это "odbc", отведенный для URL, обозначающих имя источника данных ODBC. В случае необходимости использовать сервис имен (т.е. имя базы данных в JDBC URL не будет действительным именем базы данных), то подпротоколом может выступать сервис имен.</p>
</li>
<li>
<p><code>&lt;subname&gt;</code> (подимени) - это идентификатор базы данных. Значение подимени может менятся в зависимости от подпротокола, и может также иметь под-подимя с синтаксисом, определяемым разработчиком драйвера. Назначение подимени - это предоставление всей информации, необходимой для поиска базы данных. Например, если база данных находится в Интернет, то в состав подимени JDBC URL должен быть включен сетевой адрес, подчиняющийся следующим соглашениям: <code>//&lt;hostname&gt;:&lt;port&gt;/&lt;subsubname</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Пример JDBC URL для подключения к MySQL базе данных «Test» расположенной по адресу localhost и ожидающей соединений по порту 3306: <code>jdbc:mysql://localhost:3306/Test</code></p>
</div>
<div class="paragraph">
<p><a href="#jdbc">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_из_каких_частей_стоит_jdbc">10.4. Из каких частей стоит JDBC?</h3>
<div class="paragraph">
<p>JDBC состоит из двух частей:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>JDBC API</strong>, который содержит набор классов и интерфейсов, определяющих доступ к базам данных. Эти классы и методы объявлены в двух пакетах - <code>java.sql</code> и <code>javax.sql</code>;</p>
</li>
<li>
<p><strong>JDBC-драйвер</strong>, компонент, специфичный для каждой базы данных.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>JDBC превращает вызовы уровня API в «родные» команды того или иного сервера баз данных.</p>
</div>
<div class="paragraph">
<p><a href="#jdbc">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_перечислите_основные_классы_и_интерфейсы_jdbc">10.5. Перечислите основные классы и интерфейсы JDBC.</h3>
<div class="ulist">
<ul>
<li>
<p><code>java.sql.DriverManager</code> - позволяет загрузить и зарегистрировать необходимый JDBC-драйвер, а затем получить соединение с базой данных.</p>
</li>
<li>
<p><code>javax.sql.DataSource</code> - решает те же задачи, что и <em>DriverManager</em>, но более удобным и универсальным образом. Существуют также <code>javax.sql.ConnectionPoolDataSource</code> и <code>javax.sq1.XADataSource</code> задача которых - обеспечение поддержки пула соединений.</p>
</li>
<li>
<p><code>java.sql.Connection</code>  - обеспечивает формирование запросов к источнику данных и управление транзакциями. Также предусмотрены интерфейсы <code>javax.sql.PooledConnection</code> и <code>javax.sql.XAConnection</code>.</p>
</li>
<li>
<p><code>java.sql.Statement</code> , <code>java.sql.PreparedStatement</code> и <code>java.sql.CallableStatement</code>  - эти интерфейсы позволяют отправить запрос к источнику данных.</p>
</li>
<li>
<p><code>java.sql.ResultSet</code>  - объявляет методы, которые позволяют перемещаться по набору данных и считывать значения отдельных полей в текущей записи.</p>
</li>
<li>
<p><code>java.sql.ResultSetMetaData</code>  - позволяет получить информацию о структуре набора данных.</p>
</li>
<li>
<p><code>java.sql.DatabaseMetaData</code> - позволяет получить информацию о структуре источника данных.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a href="#jdbc">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_перечислите_основные_типы_данных_используемые_в_jdbc_как_они_связаны_с_типами_java">10.6. Перечислите основные типы данных используемые в JDBC. Как они связаны с типами Java?</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-right valign-top">JDBC Type</th>
<th class="tableblock halign-left valign-top">Java Object Type</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock"><strong>CHAR</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock"><strong>VARCHAR</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock"><strong>LONGVARCHAR</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock"><strong>NUMERIC</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>java.math.BigDecimal</code></p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock"><strong>DECIMAL</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>java.math.BigDecimal</code></p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock"><strong>BIT</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Boolean</code></p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock"><strong>TINYINT</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Integer</code></p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock"><strong>SMALLINT</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Integer</code></p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock"><strong>INTEGER</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Integer</code></p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock"><strong>BIGINT</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Long</code></p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock"><strong>REAL</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Float</code></p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock"><strong>FLOAT</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Double</code></p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock"><strong>DOUBLE</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Double</code></p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock"><strong>BINARY</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>byte[]</code></p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock"><strong>VARBINARY</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>byte[]</code></p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock"><strong>LONGVARBINARY</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>byte[]</code></p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock"><strong>DATE</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>java.sql.Date</code></p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock"><strong>TIME</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>java.sql.Time</code></p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock"><strong>TIMESTAMP</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>java.sql.Timestamp</code></p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock"><strong>CLOB</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Clob</code></p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock"><strong>BLOB</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Blob</code></p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock"><strong>ARRAY</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Array</code></p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock"><strong>STRUCT</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Struct</code></p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock"><strong>REF</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Ref</code></p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock"><strong>DISTINCT</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">сопоставление базового типа</p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock"><strong>JAVA_OBJECT</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">базовый класс Java</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><a href="#jdbc">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_опишите_основные_этапы_работы_с_базой_данных_при_использовании_jdbc">10.7. Опишите основные этапы работы с базой данных при использовании JDBC.</h3>
<div class="ulist">
<ul>
<li>
<p>Регистрация драйверов;</p>
</li>
<li>
<p>Установление соединения с базой данных;</p>
</li>
<li>
<p>Создание запроса(ов) к базе данных;</p>
</li>
<li>
<p>Выполнение запроса(ов) к базе данных;</p>
</li>
<li>
<p>Обработка результата(ов);</p>
</li>
<li>
<p>Закрытие соединения с базой данных.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a href="#jdbc">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_как_зарегистрировать_драйвер_jdbc">10.8. Как зарегистрировать драйвер JDBC?</h3>
<div class="paragraph">
<p>Регистрацию драйвера можно осуществить несколькими способами:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>java.sql.DriverManager.registerDriver(%объект класса драйвера%)</code>.</p>
</li>
<li>
<p><code>Class.forName(«полное имя класса драйвера»).newInstance()</code>.</p>
</li>
<li>
<p><code>Class.forName(«полное имя класса драйвера»)</code>;</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a href="#jdbc">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_как_установить_соединение_с_базой_данных">10.9. Как установить соединение с базой данных?</h3>
<div class="paragraph">
<p>Для установки соединения с базой данных используется статический вызов <code>java.sql.DriverManager.getConnection(...)</code> .</p>
</div>
<div class="paragraph">
<p>В качестве параметра может передаваться:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>URL базы данных</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="kd">static</span> <span class="nc">Connection</span> <span class="nf">getConnection</span><span class="o">(</span><span class="nc">String</span> <span class="n">url</span><span class="o">)</span></code></pre>
</div>
</div>
</li>
<li>
<p>URL базы данных и набор свойств для инициализации</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="kd">static</span> <span class="nc">Connection</span> <span class="nf">getConnection</span><span class="o">(</span><span class="nc">String</span> <span class="n">url</span><span class="o">,</span> <span class="nc">Properties</span> <span class="n">info</span><span class="o">)</span></code></pre>
</div>
</div>
</li>
<li>
<p>URL базы данных, имя пользователя и пароль</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="kd">static</span> <span class="nc">Connection</span> <span class="nf">getConnection</span><span class="o">(</span><span class="nc">String</span> <span class="n">url</span><span class="o">,</span> <span class="nc">String</span> <span class="n">user</span><span class="o">,</span> <span class="nc">String</span> <span class="n">password</span><span class="o">)</span></code></pre>
</div>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>В результате вызова будет установлено соединение с базой данных и создан объект класса <code>java.sql.Connection</code> - своеобразная «сессия», внутри контекста которой и будет происходить дальнейшая работа с базой данных.</p>
</div>
<div class="paragraph">
<p><a href="#jdbc">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_какие_уровни_изоляции_транзакций_поддерживаются_в_jdbc">10.10. Какие уровни изоляции транзакций поддерживаются в JDBC?</h3>
<div class="paragraph">
<p><strong>Уровень изолированности транзакций</strong>&#8201;&#8212;&#8201;значение, определяющее уровень, при котором в транзакции допускаются несогласованные данные, то есть степень изолированности одной транзакции от другой. Более высокий уровень изолированности повышает точность данных, но при этом может снижаться количество параллельно выполняемых транзакций. С другой стороны, более низкий уровень изолированности позволяет выполнять больше параллельных транзакций, но снижает точность данных.</p>
</div>
<div class="paragraph">
<p>Во время использования транзакций, для обеспечения целостности данных, СУБД использует блокировки, чтобы заблокировать доступ других обращений к данным, участвующим в транзакции. Такие блокировки необходимы, чтобы предотвратить:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><em>«грязное» чтение (dirty read)</em>&#8201;&#8212;&#8201;чтение данных, добавленных или изменённых транзакцией, которая впоследствии не подтвердится (откатится);</p>
</li>
<li>
<p><em>неповторяющееся чтение (non-repeatable read)</em>&#8201;&#8212;&#8201;при повторном чтении в рамках одной транзакции ранее прочитанные данные оказываются изменёнными;</p>
</li>
<li>
<p><em>фантомное чтение (phantom reads)</em>&#8201;&#8212;&#8201;ситуация, когда при повторном чтении в рамках одной транзакции одна и та же выборка дает разные множества строк.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Уровни изоляции транзакций определены в виде констант интерфейса <code>java.sql.Connection</code>:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>TRANSACTION_NONE</code>&#8201;&#8212;&#8201;драйвер не поддерживает транзакции;</p>
</li>
<li>
<p><code>TRANSACTION_READ_UNCOMMITTED</code>&#8201;&#8212;&#8201;позволяет транзакциям видеть несохраненные изменения данных: разрешает грязное, непроверяющееся и фантомное чтения;</p>
</li>
<li>
<p><code>TRANSACTION_READ_COMMITTED</code>&#8201;&#8212;&#8201;любое изменение, сделанное в транзакции, не видно вне неё, пока она не сохранена: предотвращает грязное чтение, но разрешает непроверяющееся и фантомное;</p>
</li>
<li>
<p><code>TRANSACTION_REPEATABLE_READ</code>&#8201;&#8212;&#8201;запрещает грязное и непроверяющееся, фантомное чтение разрешено;</p>
</li>
<li>
<p><code>TRANSACTION_SERIALIZABLE</code>&#8201;&#8212;&#8201;грязное, непроверяющееся и фантомное чтения запрещены.</p>
</li>
</ul>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p><strong>NB!</strong> Сервер базы данных может не поддерживать все уровни изоляции. Интерфейс <code>java.sql.DatabaseMetaData</code> предоставляет информацию об уровнях изолированности транзакций, которые поддерживаются данной СУБД.</p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p>Уровень изоляции транзакции используемый СУБД можно задать с помощью метода <code>setTransactionIsolation()</code> объекта <code>java.sql.Connection</code>. Получить информацию о применяемом уровне изоляции поможет метод <code>getTransactionIsolation()</code>.</p>
</div>
<div class="paragraph">
<p><a href="#jdbc">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_при_помощи_чего_формируются_запросы_к_базе_данных">10.11. При помощи чего формируются запросы к базе данных?</h3>
<div class="paragraph">
<p>Для выполнения запросов к базе данных в Java используются три интерфейса:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>java.sql.Statement</code> - для операторов SQL без параметров;</p>
</li>
<li>
<p><code>java.sql.PreparedStatement</code> - для операторов SQL с параметрами и часто выполняемых операторов;</p>
</li>
<li>
<p><code>java.sql.CallableStatement</code> -  для исполнения хранимых в базе процедур.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Объекты-носители интерфейсов создаются при помощи методов объекта <code>java.sql.Connection</code>:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>java.sql.createStatement()</code> возвращает объект <em>Statement</em>;</p>
</li>
<li>
<p><code>java.sql.prepareStatement()</code> возвращает объект <em>PreparedStatement</em>;</p>
</li>
<li>
<p><code>java.sql.prepareCall()</code> возвращает объект <em>CallableStatement</em>;</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a href="#jdbc">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_чем_отличается_statement_от_preparedstatement">10.12. Чем отличается Statement от PreparedStatement?</h3>
<div class="ulist">
<ul>
<li>
<p><strong>Statement</strong>: используется для простых случаев запроса без параметров.</p>
</li>
<li>
<p><strong>PreparedStatement</strong>: предварительно компилирует запрос, который может содержать входные параметры и выполняться несколько раз с разным набором этих параметров.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Перед выполнением СУБД разбирает каждый запрос, оптимизирует его и создает «план» (query plan) его выполнения. Если один и тот же запрос выполняется несколько раз, то СУБД в состоянии кэшировать план его выполнения и не производить этапов разборки и оптимизации повторно. Благодаря этому запрос выполняется быстрее.</p>
</div>
<div class="paragraph">
<p>Суммируя: <em>PreparedStatement</em> выгодно отличается от <em>Statement</em> тем, что при повторном использовании с одним или несколькими наборами параметров позволяет получить преимущества заранее прекомпилированного и кэшированного запроса, помогая при этом избежать SQL Injection.</p>
</div>
<div class="paragraph">
<p><a href="#jdbc">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_как_осуществляется_запрос_к_базе_данных_и_обработка_результатов">10.13. Как осуществляется запрос к базе данных и обработка результатов?</h3>
<div class="paragraph">
<p>Выполнение запросов осуществляется при помощи вызова методов объекта, реализующего интерфейс <code>java.sql.Statement</code>:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong><code>executeQuery()</code></strong> -  для запросов, результатом которых является один набор значений, например запросов <code>SELECT</code>. Результатом выполнения является объект класса <code>java.sql.ResultSet</code>;</p>
</li>
<li>
<p><strong><code>executeUpdate()</code></strong> - для выполнения операторов <code>INSERT</code>, <code>UPDATE</code> или <code>DELETE</code>, а также для операторов <em>DDL (Data Definition Language)</em>. Метод возвращает целое число, показывающее, сколько записей было модифицировано;</p>
</li>
<li>
<p><strong><code>execute()</code></strong>&#8201;&#8212;&#8201;исполняет SQL-команды, которые могут возвращать различные результаты. Например, может использоваться для операции <code>CREATE TABLE</code>. Возвращает <code>true</code>, если первый результат содержит <em>ResultSet</em> и <code>false</code>, если первый результат - это количество модифицированных записей или результат отсутствует. Чтобы получить первый результат необходимо вызвать метод <code>getResultSet()</code> или <code>getUpdateCount()</code>. Остальные результаты доступны через вызов <code>getMoreResults()</code>, который при необходимости может быть произведён многократно.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Объект с интерфейсом <code>java.sql.ResultSet</code> хранит в себе результат запроса к базе данных - некий набор данных, внутри которого есть курсор, указывающий на один из элементов набора данных - текущую запись.</p>
</div>
<div class="paragraph">
<p>Используя курсор можно перемещаться по набору данных при помощи метода <code>next()</code>.</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p><strong>NB!</strong> Сразу после получения набора данных его курсор находится перед первой записью и чтобы сделать её текущей необходимо вызвать метод <code>next()</code>.</p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p>Содержание полей текущей записи доступно через вызовы методов <code>getInt()</code>, <code>getFloat()</code>, <code>getString()</code>, <code>getDate()</code> и им подобных.</p>
</div>
<div class="paragraph">
<p><a href="#jdbc">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_как_вызвать_хранимую_процедуру">10.14. Как вызвать хранимую процедуру?</h3>
<div class="paragraph">
<p><strong>Хранимые процедуры</strong>&#8201;&#8212;&#8201;это именованный набор операторов SQL хранящийся на сервере. Такую процедуру можно вызвать из Java-класса с помощью вызова методов объекта реализующего интерфейс <code>java.sql.Statement</code>.</p>
</div>
<div class="paragraph">
<p>Выбор объекта зависит от характеристик хранимой процедуры:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>без параметров → <code>Statement</code></p>
</li>
<li>
<p>с входными параметрами → <code>PreparedStatement</code></p>
</li>
<li>
<p>с входными и выходными параметрами → <code>CallableStatement</code></p>
</li>
</ul>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>Если неизвестно, как была определена хранимая процедура, для получения информации о хранимой процедуре (например, имен и типов параметров) можно использовать методы <code>java.sql.DatabaseMetaData</code> позволяющие получить информацию о структуре источника данных.</p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p>Пример вызова хранимой процедуры с входными и выходными параметрами:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="kd">public</span> <span class="n">vois</span> <span class="nf">runStoredProcedure</span><span class="o">(</span><span class="kd">final</span> <span class="nc">Connection</span> <span class="n">connection</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">Exception</span> <span class="o">{</span>
    <span class="c1">// описываем хранимую процедуру</span>
    <span class="nc">String</span> <span class="n">procedure</span> <span class="o">=</span> <span class="s">"{ call procedureExample(?, ?, ?) }"</span><span class="o">;</span>

    <span class="c1">// подготавливаем запрос</span>
    <span class="nc">CallableStatement</span> <span class="n">cs</span> <span class="o">=</span> <span class="n">connection</span><span class="o">.</span><span class="na">prepareCall</span><span class="o">(</span><span class="n">procedure</span><span class="o">);</span>

    <span class="c1">// устанавливаем входные параметры</span>
    <span class="n">cs</span><span class="o">.</span><span class="na">setString</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="s">"abcd"</span><span class="o">);</span>
    <span class="n">cs</span><span class="o">.</span><span class="na">setBoolean</span><span class="o">(</span><span class="mi">2</span><span class="o">,</span> <span class="kc">true</span><span class="o">);</span>
    <span class="n">cs</span><span class="o">.</span><span class="na">setInt</span><span class="o">(</span><span class="mi">3</span><span class="o">,</span> <span class="mi">10</span><span class="o">);</span>

    <span class="c1">// описываем выходные параметры</span>
    <span class="n">cs</span><span class="o">.</span><span class="na">registerOutParameter</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="n">java</span><span class="o">.</span><span class="na">sql</span><span class="o">.</span><span class="na">Types</span><span class="o">.</span><span class="na">VARCHAR</span><span class="o">);</span>
    <span class="n">cs</span><span class="o">.</span><span class="na">registerOutParameter</span><span class="o">(</span><span class="mi">2</span><span class="o">,</span> <span class="n">java</span><span class="o">.</span><span class="na">sql</span><span class="o">.</span><span class="na">Types</span><span class="o">.</span><span class="na">INTEGER</span><span class="o">);</span>

    <span class="c1">// запускаем выполнение хранимой процедуры</span>
    <span class="n">cs</span><span class="o">.</span><span class="na">execute</span><span class="o">();</span>

    <span class="c1">// получаем результаты</span>
    <span class="nc">String</span> <span class="n">parameter1</span> <span class="o">=</span> <span class="n">cs</span><span class="o">.</span><span class="na">getString</span><span class="o">(</span><span class="mi">1</span><span class="o">);</span>
    <span class="kt">int</span> <span class="n">parameter2</span> <span class="o">=</span> <span class="n">cs</span><span class="o">.</span><span class="na">getInt</span><span class="o">(</span><span class="mi">2</span><span class="o">);</span>

    <span class="c1">// заканчиваем работу с запросом</span>
    <span class="n">cs</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
<span class="o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><a href="#jdbc">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_как_закрыть_соединение_с_базой_данных">10.15. Как закрыть соединение с базой данных?</h3>
<div class="paragraph">
<p>Соединение с базой данной закрывается вызовом метода <code>close()</code> у соответствующего объекта <code>java.sql.Connection</code> или посредством использования механизма try-with-resources при создании такого объекта, появившегося в Java 7.</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p><strong>NB!</strong> Предварительно необходимо закрыть все запросы созданные этим соединением.</p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p><a href="#jdbc">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_источники_8">10.16. Источники</h3>
<div class="ulist">
<ul>
<li>
<p><a href="https://ru.wikipedia.org/wiki/Java_Database_Connectivity">Википедия - JDBC</a></p>
</li>
<li>
<p><a href="http://www.ibm.com/developerworks/ru/library/dm-1209storedprocedures/">IBM developerWorks®</a></p>
</li>
<li>
<p><a href="https://docs.oracle.com/javase/7/docs/api/java/sql/package-summary.html">Документация к пакету java.sql</a></p>
</li>
<li>
<p><a href="https://ru.wikipedia.org/wiki/Уровень_изолированности_транзакций">Википедия - Уровень изолированности транзакции</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a href="README.html">Вопросы для собеседования</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_jvm">10.17. JVM</h3>
<div class="ulist">
<ul>
<li>
<p><a href="jvm.md#За-что-отвечает-JVM">За что отвечает JVM</a></p>
</li>
<li>
<p><a href="jvm.md#Classloader">Classloader</a></p>
</li>
<li>
<p><a href="jvm.md#Области-данных-времени-выполнения">Области данных времени выполнения</a></p>
</li>
<li>
<p><a href="jvm.md#Frames">Frames</a></p>
</li>
<li>
<p><a href="jvm.md#Execution-Engine">Execution Engine</a></p>
</li>
<li>
<p><a href="jvm.md#Полезные-ссылки">Полезные ссылки</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_за_что_отвечает_jvm">10.18. За что отвечает <em>JVM</em>:</h3>
<div class="ulist">
<ul>
<li>
<p>Загрузка, проверка и исполнение байт кода;</p>
</li>
<li>
<p>Предоставление среды выполнения для выполнения байт-кода;</p>
</li>
<li>
<p>Управление памятью и очисткой мусора (Garbage collection);</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Виртуальная машина Java (Java Virtual Machine) - это механизм, предоставляющий среду выполнения для управления Java-кодом или приложениями.
Виртуальная машина является независимой оболочкой исполнения кода, благодаря которой возможен её запуск на любой ОС,
без влияния ОС на выполняемую программу.</p>
</div>
<div class="paragraph">
<p>JVM работает с 2мя типами данных:  примитивные типы (<strong>primitive types</strong>) и ссылочные типы (<strong>reference types</strong>).</p>
</div>
<div class="paragraph">
<p><strong>Примитивы</strong></p>
</div>
<div class="paragraph">
<p>JVM работает с примитивными значениями (целыми числами и числами с плавающей точкой). По сути, JVM - это 32-битная машина.
Типы <code>long</code> и <code>double</code>, которые являются 64-битными, поддерживаются изначально, но занимают две единицы памяти в <code>frame&#8217;s local</code>
или стеке операндов, поскольку каждая единица составляет 32 бита.
Типы <code>boolean</code>, <code>byte</code>, <code>short</code> и <code>char</code> имеют расширенный знак (кроме <code>char</code> с нулевым расширением) и работают как 32-разрядные целые числа, так же, как и типы <code>int</code>.
Меньшие типы имеют только несколько специфических для типа инструкций для загрузки, хранения и преобразования типов.
<code>boolean</code> значение работает как 8-битное <code>byte</code> значения, где 0 представляет значение <strong>false</strong>, а 1 - значение <strong>true</strong>.</p>
</div>
<div class="paragraph">
<p><strong>Типы ссылок и значения</strong></p>
</div>
<div class="paragraph">
<p>Существует три типа ссылочных типов: типы классов, типы массивов и типы интерфейсов.
Их значения являются ссылками на динамически создаваемые экземпляры классов, массивы или экземпляры классов,
которые реализуют интерфейсы соответственно.</p>
</div>
<div class="paragraph">
<p><a href="#jvm">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_classloader">10.19. Classloader</h3>
<div class="paragraph">
<p>Загрузчик классов является частью JRE, которая динамически загружает Java классы в JVM.
Обычно классы загружаются только по запросу. Система исполнения в Java не должна знать о файлах и файловых системах
благодаря загрузчику классов. <strong>Делегирование является важной концепцией</strong>, которую выполняет загрузчик. Загрузчик классов
отвечает за поиск библиотек, чтение их содержимого и загрузку классов, содержащихся в библиотеках.
Эта <strong>загрузка</strong> обычно выполняется <strong>«по требованию»</strong>, поскольку она не происходит до тех пор, пока программа не вызовет класс.
<strong>Класс с именем может быть загружен только один раз данным загрузчиком классов.</strong></p>
</div>
<div class="paragraph">
<p>При запуске JVM, используются три загрузчика классов:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Bootstrap class loader (Загрузчик класса Bootstrap)</p>
</li>
<li>
<p>Extensions class loader (Загрузчик класса расширений)</p>
</li>
<li>
<p>System class loader (Системный загрузчик классов)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Загрузчик класса Bootstrap</strong> загружает основные библиотеки Java, расположенные в папке <code>&lt;JAVA_HOME&gt;/jre/lib</code>.
Этот загрузчик является частью ядра JVM, написан на нативном коде.</p>
</div>
<div class="paragraph">
<p><strong>Загрузчик класса расширений</strong> загружает код в каталоги расширений
(<code>&lt;JAVA_HOME&gt;/jre/lib/ext</code>, или любой другой каталог, указанный системным свойством <code>java.ext.dirs</code>).</p>
</div>
<div class="paragraph">
<p><strong>Системный загрузчик</strong> загружает код, найденный в <code>java.class.path</code>, который сопоставляется с переменной среды <code>CLASSPATH</code>.
Это реализуется классом <code>sun.misc.Launcher$AppClassLoader</code>.</p>
</div>
<div class="paragraph">
<p>Загрузчик классов выполняет три основных действия в строгом порядке:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Загрузка: находит и импортирует двоичные данные для типа.</p>
</li>
<li>
<p>Связывание: выполняет проверку, подготовку и (необязательно) разрешение.</p>
<div class="ulist">
<ul>
<li>
<p>Проверка: обеспечивает правильность импортируемого типа.</p>
</li>
<li>
<p>Подготовка: выделяет память для переменных класса и инициализация памяти значениями по умолчанию.</p>
</li>
<li>
<p>Разрешение: преобразует символические ссылки из типа в прямые ссылки.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Инициализация: вызывает код Java, который инициализирует переменные класса их правильными начальными значениями.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Пользовательский загрузчик классов</strong></p>
</div>
<div class="paragraph">
<p>Загрузчик классов написан на Java. Поэтому возможно создать свой собственный загрузчик классов, не понимая тонких деталей JVM.
У каждого загрузчика классов Java есть родительский загрузчик классов, определенный при создании экземпляра нового
загрузчика классов или в качестве системного загрузчика классов по умолчанию для виртуальной машины.</p>
</div>
<div class="paragraph">
<p>Что делает возможным следующее:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>загружать или выгружать классы во время выполнения (например, динамически загружать библиотеки во время выполнения, даже из ресурса HTTP).
Это важная особенность для:</p>
<div class="ulist">
<ul>
<li>
<p>реализация скриптовых языков;</p>
</li>
<li>
<p>использование bean builders;</p>
</li>
<li>
<p>добавить пользовательскую расширение;</p>
</li>
<li>
<p>позволяя нескольким пространствам имен общаться. Например, это одна из основ протоколов CORBA / RMI;</p>
</li>
</ul>
</div>
</li>
<li>
<p>изменить способ загрузки байт-кода (например, можно использовать зашифрованный байт-код класса Java);</p>
</li>
<li>
<p>модифицировать загруженный байт-код (например, для переплетения аспектов во время загрузки при использовании аспектно-ориентированного программирования);</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a href="#jvm">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_области_данных_времени_выполнения">10.20. Области данных времени выполнения</h3>
<div class="paragraph">
<p>Run-Time Data Areas. JVM выделяет множество областей данных во время выполнения, которые используются во время выполнения программы. Некоторые участки данных
созданы JVM во время старта и уничтожаются во время её выключения. Другие создаются для каждого потока и уничтожаются, когда поток уничтожается.</p>
</div>
<div class="paragraph">
<p><strong>The pc Register (PCR)</strong></p>
</div>
<div class="paragraph">
<p>Виртуальная машина Java может поддерживать много потоков исполнения одновременно. Каждый поток виртуальной машины Java имеет свой собственный регистр PC (program counter).
В любой момент каждый поток виртуальной машины Java выполняет код одного метода, а именно текущий метод для этого потока.
Если этот метод не является native, регистр pc содержит адрес инструкции виртуальной машины Java, выполняемой в настоящее время.</p>
</div>
<div class="paragraph">
<p>Коротко говоря: для одного потока, существует один PCR, который создается при запуске потока. PCR хранит адрес выполняемой сейчас инструкции JVM.</p>
</div>
<div class="paragraph">
<p><strong>Java Virtual Machine Stacks</strong></p>
</div>
<div class="paragraph">
<p>Каждый поток в JVM имеет собственный стек, созданный одновременно с потоком.  Стек в JVM хранит frames.
Cтеки в JVM могут иметь фиксированный размер или динамически расширяться и сжиматься в соответствии с требованиями вычислений.</p>
</div>
<div class="paragraph">
<p><strong>Heap</strong></p>
</div>
<div class="paragraph">
<p>JVM имеет heap (кучу), которая используется всеми потоками виртуальной машины Java.
Куча - это область данных времени выполнения, из которой выделяется память для всех экземпляров и массивов классов.
Куча создается при запуске виртуальной машины. Хранилище для объектов восстанавливается автоматической системой
управления данными (известной как сборщик мусора); объекты никогда не освобождаются явно.
JVM не предполагает какого-либо конкретного типа системы автоматического управления хранением данных,
и метод управления может быть выбран в соответствии с системными требованиями разработчика.
Куча может иметь фиксированный размер или может быть расширена в соответствии с требованиями вычислений и может быть сокращена,
если большая куча становится ненужной. Память для кучи не должна быть смежной.</p>
</div>
<div class="paragraph">
<p><strong>Method Area</strong></p>
</div>
<div class="paragraph">
<p>JVM имеет область методов, которая является общей для всех потоков. Она хранит структуры для каждого класса, такие как пул констант, данные полей и методов,
а также код для методов и конструкторов, включая специальные методы, используемые при инициализации классов и экземпляров, и инициализации интерфейса.
Хотя область метода является логически частью кучи, простые реализации могут не обрабатываться сборщиком мусора. Область метода может иметь
фиксированный размер или может быть расширена в соответствии с требованиями вычислений и может быть сокращена, если большая область метода становится ненужной.</p>
</div>
<div class="paragraph">
<p><strong>Run-Time Constant Pool</strong></p>
</div>
<div class="paragraph">
<p>A run-time constant pool существует для каждого класса или интерфейса в рантайме и представленно constant_pool таблицей в *.class файле.
 Он содержит несколько видов констант: от числовых литералов, известных во время компиляции, до ссылок на методы и поля,
 которые должны быть разрешены во время выполнения.  Сам run-time constant pool выполняет функцию,
 аналогичную функции таблицы символов для обычного языка программирования, хотя он содержит более широкий диапазон данных, чем типичная таблица символов.
 Каждый run-time constant pool отделён от JVM&#8217;s method area. JVM создаёт run-time constant pool вместе с созданием class или interface.</p>
</div>
<div class="paragraph">
<p><strong>Native Method Stacks</strong></p>
</div>
<div class="paragraph">
<p>Реализация виртуальной машины Java может использовать обычные стеки, обычно называемые «стеки Си», для поддержки native methods (методов, написанных на языке, отличном от языка программирования Java).</p>
</div>
<div class="paragraph">
<p><a href="#jvm">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_frames">10.21. Frames</h3>
<div class="paragraph">
<p>Frame используется для хранения данных и частичных результатов, а также для выполнения динамического связывания, возврата значений для методов и отправки исключений.
Новый frame создается каждый раз, когда вызывается метод. Frame уничтожается, когда завершается вызов метода,
является ли это завершение нормальным или резким (он генерирует неперехваченное исключение). Frames выделяются из стека потока, создающего frame.
Каждый frame имеет свой собственный массив локальных переменных, свой собственный стек операндов и ссылку на пул констант во время выполнения класса текущего метода.
Размеры массива локальных переменных и стека операндов определяются во время компиляции и предоставляются вместе с кодом для метода, связанного с фреймом.
Таким образом, размер структуры данных, frame-а зависит только от реализации виртуальной машины Java, и память для этих структур может быть выделена одновременно при вызове метода.</p>
</div>
<div class="paragraph">
<p>Только один frame активен в любой точке данного потока управления - метода выполнения, и это frame называется текущим, а его метод известен как текущий метод.
Класс, в котором определен текущий метод, является текущим классом. Операции над локальными переменными и стеком операндов обычно выполняются со ссылкой на текущий frame.</p>
</div>
<div class="paragraph">
<p>Frame перестает быть текущим, если его метод вызывает другой метод или если его метод завершается. Когда метод вызывается, новый frame создается и становится текущим,
когда управление переходит к новому методу. При возврате метода текущий frame передает результат вызова метода, если таковой имеется, в предыдущий frame.
Текущий frame затем отбрасывается, так как предыдущий frame становится текущим. Обратите внимание, что frame, созданный потоком,
является локальным для этого потока и на него не может ссылаться ни один другой поток.</p>
</div>
<div class="paragraph">
<p><strong>Локальные переменные</strong></p>
</div>
<div class="paragraph">
<p>Каждый frame содержит массив переменных, известных как его локальные переменные. Длина массива локальных переменных frame определяется во время компиляции
и предоставляется в двоичном представлении класса или интерфейса вместе с кодом для метода, связанного с frame-ом.
Единичная локальная переменная может хранить значение типа: boolean, byte, char, short, int, float, reference, or returnAddress.
Пара локальных переменных может хранить значение типов: long или double.</p>
</div>
<div class="paragraph">
<p>Локальные переменные адресуются путем индексации. Индекс первой локальной переменной равен нулю.</p>
</div>
<div class="paragraph">
<p>Значение типа long или типа double занимает две последовательные локальные переменные.</p>
</div>
<div class="paragraph">
<p>JVM использует локальные переменные для передачи параметров при вызове метода. При вызове метода класса все параметры передаются в последовательных локальных переменных,
начиная с локальной переменной 0. При вызове метода экземпляра локальная переменная 0 всегда используется для передачи ссылки на объект,
для которого вызывается метод экземпляра (this в Java). Любые параметры впоследствии передаются в последовательных локальных переменных, начиная с локальной переменной 1.</p>
</div>
<div class="paragraph">
<p><strong>Стеки операндов (Operand Stacks)</strong></p>
</div>
<div class="paragraph">
<p>Каждый frame содержит стек «последний вошел - первый вышел» (LIFO), известный как стек операндов. Максимальная глубина стека операндов frame-a
определяется во время компиляции и предоставляется вместе с кодом для метода, связанного с frame-ом.</p>
</div>
<div class="paragraph">
<p>Стек операнда пуст при создании frame-a, который его содержит. JVM предоставляет инструкции для загрузки констант
или значений из локальных переменных или полей в стек операндов. Другие инструкции JVM берут операнды из стека операндов,
оперируют с ними и помещают результат обратно в стек операндов. Стек операндов также используется для подготовки параметров
для передачи в методы и для получения результатов метода.</p>
</div>
<div class="paragraph">
<p>Для примера, инструкция <strong>iadd</strong>  суммирует два int-вых значения. От стека операндов требуется, чтобы два int-вых значения были наверху стека.
Значения удаляются из стека, операция <strong>pop</strong>. Суммируются и их сумма помещается в стек операндов.</p>
</div>
<div class="paragraph">
<p><strong>Динамическое связывание (Dynamic Linking)</strong></p>
</div>
<div class="paragraph">
<p>Каждый frame содержит ссылку на  run-time constant pool для типа текущего метода для поддержки динамического связывания кода метода.
Доступ к вызываемым методам и переменным осуществляется через символические ссылки из class файла.
Динамическое связывание преобразует эти символьные ссылки на методы в конкретные ссылки на методы, загружая классы по мере необходимости
для разрешения пока еще не определенных символов, и преобразует обращения к переменным в соответствующие смещения в структурах хранения,
связанных с расположением этих переменных во время выполнения.</p>
</div>
<div class="paragraph">
<p>Позднее связывание методов и переменных вносит изменения в другие классы, которые метод использует с меньшей вероятностью нарушить этот код.</p>
</div>
<div class="paragraph">
<p><strong>Нормальное завершение вызова метода</strong></p>
</div>
<div class="paragraph">
<p>Вызов метода завершается нормально, если этот вызов не вызывает исключение, либо непосредственно из JVM, либо в результате выполнения явного оператора throw.
Если вызов текущего метода завершается нормально, то значение может быть возвращено вызывающему методу.
Это происходит, когда вызванный метод выполняет одну из инструкций возврата, выбор которых должен соответствовать типу возвращаемого значения (если оно есть).</p>
</div>
<div class="paragraph">
<p>Текущий frame используется в этом случае для восстановления состояния инициатора, включая его локальные переменные и стек операндов,
с соответствующим образом увеличенным программным счетчиком инициатора, чтобы пропустить инструкцию вызова метода.
Затем выполнение обычно продолжается в frame вызывающего метода с возвращенным значением (если оно есть), помещаемым в стек операндов этого frame.</p>
</div>
<div class="paragraph">
<p><strong>Резкое завершение вызова метода</strong></p>
</div>
<div class="paragraph">
<p>Вызов метода завершается преждевременно, если при выполнении инструкции JVM в методе выдает исключение, и это исключение не обрабатывается в методе.
Выполнение команды <strong>throw</strong> также приводит к явному выбрасыванию исключения, и, если исключение не перехватывается текущим методом,
приводит к неожиданному завершению вызова метода. Вызов метода, который завершается внезапно, никогда не возвращает значение своему вызывающему.</p>
</div>
<div class="paragraph">
<p><a href="#jvm">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_execution_engine">10.22. Execution Engine</h3>
<div class="paragraph">
<p>Байт-код, назначенный <strong>run-time data areas</strong>, будет выполнен <strong>execution engine</strong>. Механизм выполнения считывает байт-код и выполняет его по частям.</p>
</div>
<div class="paragraph">
<p><strong>Interpreter</strong></p>
</div>
<div class="paragraph">
<p>Интерпретатор интерпретирует байт-код быстро, но выполняется медленно. Недостаток интерпретатора заключается в том, что, когда один метод вызывается несколько раз, каждый раз требуется новая интерпретация.</p>
</div>
<div class="paragraph">
<p><strong>JIT Compiler</strong></p>
</div>
<div class="paragraph">
<p>JIT-компилятор устраняет недостатки интерпретатора. Механизм выполнения будет использовать помощь интерпретатора при преобразовании байт-кода,
но когда он находит повторный код, он использует JIT-компилятор, который компилирует весь байт-код и изменяет его на собственный код.
Этот нативный код будет использоваться непосредственно для повторных вызовов методов, которые улучшают производительность системы.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Генератор промежуточного кода (Intermediate Code Generator). Производит промежуточный код.</p>
</li>
<li>
<p>Code Optimizer. Отвечает за оптимизацию промежуточного кода, сгенерированного выше.</p>
</li>
<li>
<p>Генератор целевого кода (Target Code Generator). Отвечает за генерацию машинного кода или родной код.</p>
</li>
<li>
<p>Профилировщик (Profiler). Специальный компонент, отвечающий за поиск горячих точек, то есть, вызывается ли метод несколько раз или нет.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Garbage Collector</strong></p>
</div>
<div class="paragraph">
<p><a href="#jvm">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_полезные_ссылки">10.23. Полезные ссылки:</h3>
<div class="ulist">
<ul>
<li>
<p><a href="https://docs.oracle.com/javase/specs/jvms/se7/html/jvms-2.html" class="bare">https://docs.oracle.com/javase/specs/jvms/se7/html/jvms-2.html</a></p>
</li>
<li>
<p><a href="https://www.developer.com/java/data/understanding-the-jvm-architecture.html" class="bare">https://www.developer.com/java/data/understanding-the-jvm-architecture.html</a></p>
</li>
<li>
<p><a href="https://dzone.com/articles/understanding-jvm-internals" class="bare">https://dzone.com/articles/understanding-jvm-internals</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a href="#jvm">к оглавлению</a></p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_журналирование">11. Журналирование</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="#Какие-существуют-типы-логов">Какие существуют типы логов?</a></p>
</li>
<li>
<p><a href="#Из-каких-частей-состоит-система-журналирования-log4j">Из каких частей состоит система журналирования log4j?</a></p>
</li>
<li>
<p><a href="#Что-такое-logger-в-log4j">Что такое <em>Logger</em> в log4j?</a></p>
</li>
<li>
<p><a href="#Что-такое-appender-в-log4j">Что такое <em>Appender</em> в log4j?</a></p>
</li>
<li>
<p><a href="#Что-такое-layout-в-log4j">Что такое <em>Layout</em> в log4j?</a></p>
</li>
<li>
<p><a href="#Перечислите-уровни-журналирования-в-log4j-Назовите-порядок-их-приоритетности">Перечислите уровни журналирования в log4j? Назовите порядок их приоритетности.</a></p>
</li>
<li>
<p><a href="#Какие-существуют-способы-конфигурирования-log4j">Какие существуют способы конфигурирования log4j?</a></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_какие_существуют_типы_логов">11.1. Какие существуют типы логов?</h3>
<div class="ulist">
<ul>
<li>
<p>системы (System);</p>
</li>
<li>
<p>безопасности (Security);</p>
</li>
<li>
<p>приложения (Application, Buisness).</p>
</li>
</ul>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>Пользователь входит в приложение, проверяется пароль. Это действие относится к безопасности (Security). Дальше он запускает какой-нибудь модуль. Это событие уровня приложения (Application). Модуль при старте обращается к другому модулю за какими-то дополнительными данными, производит какие-либо еще вызовы&#8201;&#8212;&#8201;это уже системные действия (System).</p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p><a href="#_журналирование">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_из_каких_частей_состоит_система_журналирования_log4j">11.2. Из каких частей состоит система журналирования log4j?</h3>
<div class="paragraph">
<p>Система журналирования состоит из трёх основных частей:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>управляющей журналированием - <strong>logger</strong>;</p>
</li>
<li>
<p>добавляющей в журнал - <strong>appender</strong>;</p>
</li>
<li>
<p>определяющей формат добавления - <strong>layout</strong>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a href="#_журналирование">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_что_такое_logger_в_log4j">11.3. Что такое <em>Logger</em> в log4j?</h3>
<div class="paragraph">
<p><strong>Logger</strong> представляет собой объект класса <code>org.apache.log4j.Logger</code>, который используется как управляющий интерфейс для журналирования сообщений с возможностью задавать уровень детализации. Именно logger проверяет нужно ли обрабатывать сообщение и если журналирование необходимо, то сообщение передаётся в appender, если нет - система завершает обработку данного сообщения.</p>
</div>
<div class="paragraph">
<p><a href="#_журналирование">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_что_такое_appender_в_log4j">11.4. Что такое <em>Appender</em> в log4j?</h3>
<div class="paragraph">
<p><strong>Appender</strong> - это именованный объект журнала событий, реализующий интерфейс <code>org.apache.log4j.Appender</code> и добавляющий события в журнал. Appender вызывает разные вспомогательные инструменты - компоновщик, фильтр, обработчик ошибок (если они определены и необходимы). В ходе этой работы окончательно устанавливается необходимость записи сообщения, сообщению придаются окончательные содержание и форма.</p>
</div>
<div class="paragraph">
<p>В log4j журнал может представлять:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>консоль;</p>
</li>
<li>
<p>файл;</p>
</li>
<li>
<p>сокет;</p>
</li>
<li>
<p>объект класса реализующего <code>java.io.Writer</code> или <code>java.io.OutputStream</code>;</p>
</li>
<li>
<p>JDBC хранилище;</p>
</li>
<li>
<p>тему (topic) JMS;</p>
</li>
<li>
<p>NT Event Log;</p>
</li>
<li>
<p>SMTP;</p>
</li>
<li>
<p>Syslog;</p>
</li>
<li>
<p>Telnet.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Наиболее часто используемые log4j appender-ы:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>org.apache.log4j.ConsoleAppender</code> - вывод в консоль;</p>
</li>
<li>
<p><code>org.apache.log4j.FileAppender</code> - добавление в файл;</p>
</li>
<li>
<p><code>org.apache.log4j.DailyRollingFileAppender</code> - добавление в файл с обновлением файла через заданный промежуток времени;</p>
</li>
<li>
<p><code>org.apache.log4j.RollingFileAppender</code> - добавление в файл с обновлением файла по достижению определенного размера;</p>
</li>
<li>
<p><code>org.apache.log4j.varia.ExternallyRolledFileAppender</code> - расширение <em>RollingFileAppender</em> обновляющее файл по команде принятой с заданного порта;</p>
</li>
<li>
<p><code>org.apache.log4j.net.SMTPAppender</code> - сообщение по SMTP;</p>
</li>
<li>
<p><code>org.apache.log4j.AsyncAppender</code> - позволяет, используя отдельный поток, организовать асинхронную работу, когда сообщения фиксируются лишь при достижении определенного уровня заполненности промежуточного буфера.</p>
</li>
<li>
<p><code>org.apache.log4j.nt.NTEventLogAppender</code> - добавление в NT Event Log;</p>
</li>
<li>
<p><code>org.apache.log4j.net.SyslogAppender</code> - добавление в Syslog;</p>
</li>
<li>
<p><code>org.apache.log4j.jdbc.JDBCAppender</code> - запись в хранилище JDBC;</p>
</li>
<li>
<p><code>org.apache.log4j.lf5.LF5Appender</code> - сообщение передаётся в специальный GUI интерфейс LogFactor5</p>
</li>
<li>
<p><code>org.apache.log4j.net.SocketAppender</code> - трансляция сообщения по указанному адресу и порту;</p>
</li>
<li>
<p><code>org.apache.log4j.net.SocketHubAppender</code> - рассылка сообщения сразу нескольким удалённым серверам, соединённым по заданному порту;</p>
</li>
<li>
<p><code>org.apache.log4j.net.TelnetAppender</code> - отсылка сообщения по протоколу Telenet;</p>
</li>
<li>
<p><code>org.apache.log4j.net.JMSAppender</code> - добавление сообщения в JMS.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a href="#_журналирование">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_что_такое_layout_в_log4j">11.5. Что такое <em>Layout</em> в log4j?</h3>
<div class="paragraph">
<p><strong>Layout</strong> - наследник класса <code>org.apache.log4j.Layout</code> предоставляющий возможность форматирования сообщения перед добавлением в журнал.</p>
</div>
<div class="paragraph">
<p>В log4j существуют следующие типы layout-ов:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>org.apache.log4j.SimpleLayout</code> - на выходе получается строка содержащая лишь уровень вывода и сообщение;</p>
</li>
<li>
<p><code>org.apache.log4j.HTMLLayout</code> - форматирует сообщение в виде элемента HTML-таблицы;</p>
</li>
<li>
<p><code>org.apache.log4j.xml.XMLLayout</code> - компонует сообщение в виде XML формате;</p>
</li>
<li>
<p><code>org.apache.log4j.TTCCLayout</code> - на выходе сообщение дополняется информацией о времени, потоке, имени логгера и вложенном диагностическом контексте;</p>
</li>
<li>
<p><code>org.apache.log4j.PatternLayout</code> / <code>org.apache.log4j.EnhancedPatternLayout</code> - настройка форматирования сообщения при помощи шаблона заданного пользователем.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a href="#_журналирование">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_перечислите_уровни_журналирования_в_log4j_назовите_порядок_их_приоритетности">11.6. Перечислите уровни журналирования в log4j? Назовите порядок их приоритетности.</h3>
<div class="ulist">
<ul>
<li>
<p><strong>OFF</strong> - отсутствие журналирования;</p>
</li>
<li>
<p><strong>FATAL</strong> - фатальная ошибка;</p>
</li>
<li>
<p><strong>ERROR</strong> - ошибка;</p>
</li>
<li>
<p><strong>WARN</strong> - предупреждение;</p>
</li>
<li>
<p><strong>INFO</strong> - информация;</p>
</li>
<li>
<p><strong>DEBUG</strong> - детальная информация для отладки;</p>
</li>
<li>
<p><strong>TRACE</strong>&#8201;&#8212;&#8201;трассировка всех сообщений.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Между уровнями логирования установлен следующий порядок приоритетов:</p>
</div>
<div class="paragraph">
<p><code>ALL &lt; TRACE &lt; DEBUG &lt; INFO &lt; WARN &lt; ERROR &lt; FATAL &lt; OFF</code></p>
</div>
<div class="paragraph">
<p><a href="#_журналирование">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_какие_существуют_способы_конфигурирования_log4j">11.7. Какие существуют способы конфигурирования log4j?</h3>
<div class="paragraph">
<p>Для того, чтобы log4j начал работать нужно предоставить ему конфигурацию. Это можно сделать несколькими путями:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Создать конфигурацию программно, т.е. получить logger, определить уровень журналирования, прикрепить appender и задать способ форматирования.</p>
</li>
<li>
<p>Указать файл или URL как аргумент при запуске java-машины <code>-Dlog4j.configuration=путь/к/файлу/конфигурации</code>, а затем прочитать его в программе при помощи <code>PropertyConfigurator.configure(...)</code>/ <code>DOMConfigurator.configure(...)</code> для формата <code>.properties</code> или <code>XML</code> соответственно.</p>
</li>
<li>
<p>Загрузить конфигурацию из файла в формате <code>XML</code> или <code>.properties</code>: log4j ищет файл конфигурации в classpath. Сначала ищется файл <code>log4j.xml</code> и, если таковой не найден, -  файл <code>log4j.properties</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a href="#_журналирование">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_источники_9">11.8. Источники</h3>
<div class="ulist">
<ul>
<li>
<p><a href="http://www.quizful.net/">Quizful</a></p>
</li>
<li>
<p><a href="http://skipy.ru/useful/logging.html#log4j_concepts_logger">Skipy</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a href="README.html">Вопросы для собеседования</a></p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_ооп">12. ООП</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="#Что-такое-ООП">Что такое <em>ООП</em>?</a></p>
</li>
<li>
<p><a href="#Назовите-основные-принципы-ООП">Назовите основные принципы <em>ООП</em>.</a></p>
</li>
<li>
<p><a href="#Что-такое-инкапсуляция">Что такое <em>«инкапсуляция»</em>?</a></p>
</li>
<li>
<p><a href="#Что-такое-наследование">Что такое <em>«наследование»</em>?</a></p>
</li>
<li>
<p><a href="#Что-такое-полиморфизм">Что такое <em>«полиморфизм»</em>?</a></p>
</li>
<li>
<p><a href="#Что-такое-абстракция">Что такое <em>«абстракция»</em>?</a></p>
</li>
<li>
<p><a href="#Что-представляет-собой-обмен-сообщениями">Что представляет собой <em>«обмен сообщениями»</em>?</a></p>
</li>
<li>
<p><a href="#Расскажите-про-основные-понятия-ООП-класс-объект-интерфейс">Расскажите про основные понятия ООП: <em>«класс»</em>, <em>«объект»</em>, <em>«интерфейс»</em>.</a></p>
</li>
<li>
<p><a href="#В-чем-заключаются-преимущества-и-недостатки-объектно-ориентированного-подхода-в-программировании">В чем заключаются преимущества и недостатки объектно-ориентированного подхода в программировании?</a></p>
</li>
<li>
<p><a href="#Что-подразумевают-в-плане-принципов-ООП-выражения-является-и-имеет">Что подразумевают в плане принципов ООП выражения <em>«является»</em> и <em>«имеет»</em>?</a></p>
</li>
<li>
<p><a href="#В-чем-разница-между-композицией-и-агрегацией">В чем разница между <em>композицией</em> и <em>агрегацией</em>?</a></p>
</li>
<li>
<p><a href="#Что-такое-статическое-и-динамическое-связывание">Что такое <em>статическое</em> и <em>динамическое связывание</em>?</a></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_что_такое_ооп">12.1. Что такое <em>ООП</em>?</h3>
<div class="paragraph">
<p><strong>Объектно-ориентированное программирование (ООП)</strong>&#8201;&#8212;&#8201;методология программирования, основанная на представлении программы в виде совокупности объектов, каждый из которых является экземпляром определенного класса, а классы образуют иерархию наследования.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>объектно-ориентированное программирование использует в качестве основных логических конструктивных элементов объекты, а не алгоритмы;</p>
</li>
<li>
<p>каждый объект является экземпляром определенного класса</p>
</li>
<li>
<p>классы образуют иерархии.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Программа считается объектно-ориентированной, только если выполнены все три указанных требования. В частности, программирование, не использующее наследование, называется не объектно-ориентированным, а программированием с помощью абстрактных типов данных.</p>
</div>
<div class="paragraph">
<p>Согласно парадигме ООП программа состоит из объектов, обменивающихся сообщениями. Объекты могут обладать состоянием, единственный способ изменить состояние объекта - послать ему сообщение, в ответ на которое, объект может изменить собственное состояние.</p>
</div>
<div class="paragraph">
<p><a href="#_ооп">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_назовите_основные_принципы_ооп">12.2. Назовите основные принципы <em>ООП</em>.</h3>
<div class="ulist">
<ul>
<li>
<p><em>Инкапсуляция</em> - сокрытие реализации.</p>
</li>
<li>
<p><em>Наследование</em> - создание новой сущности на базе уже существующей.</p>
</li>
<li>
<p><em>Полиморфизм</em> - возможность иметь разные формы для одной и той же сущности.</p>
</li>
<li>
<p><em>Абстракция</em> - набор общих характеристик.</p>
</li>
<li>
<p><em>Посылка сообщений</em> - форма связи, взаимодействия между сущностями.</p>
</li>
<li>
<p><em>Переиспользование</em>- все что перечислено выше работает на повторное использование кода.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Это единственно верный порядок парадигм ООП, так как каждая последующая использует предыдущие.</p>
</div>
<div class="paragraph">
<p><a href="#_ооп">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_что_такое_инкапсуляция">12.3. Что такое <em>«инкапсуляция»</em>?</h3>
<div class="paragraph">
<p><strong>Инкапсуляция</strong>&#8201;&#8212;&#8201;это свойство системы, позволяющее объединить данные и методы, работающие с ними, в классе и скрыть детали реализации от пользователя, открыв только то, что необходимо при последующем использовании.</p>
</div>
<div class="paragraph">
<p>Цель инкапсуляции&#8201;&#8212;&#8201;уйти от зависимости внешнего интерфейса класса (то, что могут использовать другие классы) от реализации. Чтобы малейшее изменение в классе не влекло за собой изменение внешнего поведения класса.</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>Представим на минутку, что мы оказались в конце позапрошлого века, когда Генри Форд ещё не придумал конвейер, а первые попытки создать автомобиль сталкивались с критикой властей по поводу того, что эти коптящие монстры загрязняют воздух и пугают лошадей. Представим, что для управления первым паровым автомобилем необходимо было знать, как устроен паровой котёл, постоянно подбрасывать уголь, следить за температурой, уровнем воды. При этом для поворота колёс использовать два рычага, каждый из которых поворачивает одно колесо в отдельности. Думаю, можно согласиться с тем, что вождение автомобиля того времени было весьма неудобным и трудным занятием.</p>
</div>
</blockquote>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>Теперь вернёмся в сегодняшний день к современным чудесам автопрома с коробкой-автоматом. На самом деле, по сути, ничего не изменилось. Бензонасос всё так же поставляет бензин в двигатель, дифференциалы обеспечивают поворот колёс на различающиеся углы, коленвал превращает поступательное движение поршня во вращательное движение колёс. Прогресс в другом. Сейчас все эти действия скрыты от пользователя и позволяют ему крутить руль и нажимать на педаль газа, не задумываясь, что в это время происходит с инжектором, дроссельной заслонкой и распредвалом. Именно сокрытие внутренних процессов, происходящих в автомобиле, позволяет эффективно его использовать даже тем, кто не является профессионалом-автомехаником с двадцатилетним стажем. Это сокрытие в ООП носит название инкапсуляции.</p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p>Пример:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">SomePhone</span> <span class="o">{</span>

    <span class="kd">private</span> <span class="kt">int</span> <span class="n">year</span><span class="o">;</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">company</span><span class="o">;</span>
    <span class="kd">public</span> <span class="nf">SomePhone</span><span class="o">(</span><span class="kt">int</span> <span class="n">year</span><span class="o">,</span> <span class="nc">String</span> <span class="n">company</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">year</span> <span class="o">=</span> <span class="n">year</span><span class="o">;</span>
        <span class="k">this</span><span class="o">.</span><span class="na">company</span> <span class="o">=</span> <span class="n">company</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="kd">private</span> <span class="kt">void</span> <span class="nf">openConnection</span><span class="o">(){</span>
        <span class="c1">//findComutator</span>
        <span class="c1">//openNewConnection...</span>
    <span class="o">}</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">call</span><span class="o">()</span> <span class="o">{</span>
        <span class="n">openConnection</span><span class="o">();</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Вызываю номер"</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">ring</span><span class="o">()</span> <span class="o">{</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Дзынь-дзынь"</span><span class="o">);</span>
    <span class="o">}</span>

<span class="o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Модификатор private делает доступными поля и методы класса только внутри данного класса. Это означает, что получить доступ к private полям из вне невозможно, как и нет возможности вызвать private методы.</p>
</div>
<div class="paragraph">
<p>Сокрытие доступа к методу openConnection, оставляет нам также возможность к свободному изменению внутренней реализации этого метода, так как этот метод гарантированно не используется другими объектами и не нарушит их работу.</p>
</div>
<div class="paragraph">
<p>Для работы с нашим объектом мы оставляем открытыми методы call и ring с помощью модификатора public. Предоставление открытых методов для работы с объектом также является частью механизма инкапсуляции, так как если полностью закрыть доступ к объекту&#8201;&#8212;&#8201;он станет бесполезным.</p>
</div>
<div class="paragraph">
<p><a href="#_ооп">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_что_такое_наследование">12.4. Что такое <em>«наследование»</em>?</h3>
<div class="paragraph">
<p><strong>Наследование</strong>&#8201;&#8212;&#8201;это свойство системы, позволяющее описать новый класс на основе уже существующего с частично или полностью заимствующейся функциональностью.</p>
</div>
<div class="paragraph">
<p>Класс, от которого производится наследование, называется <em>предком</em>, <em>базовым</em> или <em>родительским</em>. Новый класс&#8201;&#8212;&#8201;<em>потомком</em>, <em>наследником</em> или <em>производным</em> классом.</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>Представим себя, на минуту, инженерами автомобильного завода. Нашей задачей является разработка современного автомобиля. У нас уже есть предыдущая модель, которая отлично зарекомендовала себя в течение многолетнего использования. Всё бы хорошо, но времена и технологии меняются, а наш современный завод должен стремиться повышать удобство и комфорт выпускаемой продукции и соответствовать современным стандартам.</p>
</div>
</blockquote>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>Нам необходимо выпустить целый модельный ряд автомобилей: седан, универсал и малолитражный хэтч-бэк. Очевидно, что мы не собираемся проектировать новый автомобиль с нуля, а, взяв за основу предыдущее поколение, внесём ряд конструктивных изменений. Например, добавим гидроусилитель руля и уменьшим зазоры между крыльями и крышкой капота, поставим противотуманные фонари. Кроме того, в каждой модели будет изменена форма кузова.</p>
</div>
</blockquote>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>Очевидно, что все три модификации будут иметь большинство свойств прежней модели (старый добрый двигатель 1970 года, непробиваемая ходовая часть, зарекомендовавшая себя отличным образом на отечественных дорогах, коробку передач и т.д.). При этом каждая из моделей будет реализовать некоторую новую функциональность или конструктивную особенность. В данном случае, мы имеем дело с наследованием.</p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p>Пример:
Рассмотрим пример создания класса смартфон с помощью наследования. Все беспроводные телефоны работают от аккумуляторных батарей, которые имеют определенный ресурс работы в часах. Поэтому добавим это свойство в класс беспроводных телефонов:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="kd">public</span> <span class="kd">abstract</span> <span class="kd">class</span> <span class="nc">WirelessPhone</span> <span class="kd">extends</span> <span class="nc">AbstractPhone</span> <span class="o">{</span>

    <span class="kd">private</span> <span class="kt">int</span> <span class="n">hour</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nf">WirelessPhone</span><span class="o">(</span><span class="kt">int</span> <span class="n">year</span><span class="o">,</span> <span class="kt">int</span> <span class="n">hour</span><span class="o">)</span> <span class="o">{</span>
        <span class="kd">super</span><span class="o">(</span><span class="n">year</span><span class="o">);</span>
        <span class="k">this</span><span class="o">.</span><span class="na">hour</span> <span class="o">=</span> <span class="n">hour</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Сотовые телефоны наследуют свойства беспроводного телефона, мы также добавили в этот класс реализацию методов call и ring:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">CellPhone</span> <span class="kd">extends</span> <span class="nc">WirelessPhone</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="nf">CellPhone</span><span class="o">(</span><span class="kt">int</span> <span class="n">year</span><span class="o">,</span> <span class="kt">int</span> <span class="n">hour</span><span class="o">)</span> <span class="o">{</span>
        <span class="kd">super</span><span class="o">(</span><span class="n">year</span><span class="o">,</span> <span class="n">hour</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">call</span><span class="o">(</span><span class="kt">int</span> <span class="n">outputNumber</span><span class="o">)</span> <span class="o">{</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Вызываю номер "</span> <span class="o">+</span> <span class="n">outputNumber</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">ring</span><span class="o">(</span><span class="kt">int</span> <span class="n">inputNumber</span><span class="o">)</span> <span class="o">{</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Вам звонит абонент "</span> <span class="o">+</span> <span class="n">inputNumber</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>И, наконец, класс смартфон, который в отличие от классических сотовых телефонов имеет полноценную операционную систему. В смартфон можно добавлять новые программы, поддерживаемые данной операционной системой, расширяя, таким образом, его функциональность. С помощью кода класс можно описать так:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Smartphone</span> <span class="kd">extends</span> <span class="nc">CellPhone</span> <span class="o">{</span>

    <span class="kd">private</span> <span class="nc">String</span> <span class="n">operationSystem</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nf">Smartphone</span><span class="o">(</span><span class="kt">int</span> <span class="n">year</span><span class="o">,</span> <span class="kt">int</span> <span class="n">hour</span><span class="o">,</span> <span class="nc">String</span> <span class="n">operationSystem</span><span class="o">)</span> <span class="o">{</span>
        <span class="kd">super</span><span class="o">(</span><span class="n">year</span><span class="o">,</span> <span class="n">hour</span><span class="o">);</span>
        <span class="k">this</span><span class="o">.</span><span class="na">operationSystem</span> <span class="o">=</span> <span class="n">operationSystem</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">install</span><span class="o">(</span><span class="nc">String</span> <span class="n">program</span><span class="o">){</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Устанавливаю "</span> <span class="o">+</span> <span class="n">program</span> <span class="o">+</span> <span class="s">"для"</span> <span class="o">+</span> <span class="n">operationSystem</span><span class="o">);</span>
    <span class="o">}</span>

<span class="o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Как видите, для описания класса Smartphone мы создали совсем немного нового кода, но получили новый класс с новой функциональностью. Использование этого принципа ООП java позволяет значительно уменьшить объем кода, а значит, и облегчить работу программисту.</p>
</div>
<div class="paragraph">
<p><a href="#_ооп">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_что_такое_полиморфизм">12.5. Что такое <em>«полиморфизм»</em>?</h3>
<div class="paragraph">
<p><strong>Полиморфизм</strong>&#8201;&#8212;&#8201;это свойство системы использовать объекты с одинаковым интерфейсом без информации о типе и внутренней структуре объекта.</p>
</div>
<div class="paragraph">
<p>Преимуществом полиморфизма является то, что он помогает снижать сложность программ, разрешая использование одного и того же интерфейса для задания единого набора действий. Выбор же конкретного действия, в зависимости от ситуации, возлагается на компилятор языка программирования. Отсюда следует ключевая особенность полиморфизма - использование объекта производного класса, вместо объекта базового (потомки могут изменять родительское поведение, даже если обращение к ним будет производиться по ссылке родительского типа).</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>Любое обучение вождению не имело бы смысла, если бы человек, научившийся водить, скажем, ВАЗ 2106 не мог потом водить ВАЗ 2110 или BMW X3. С другой стороны, трудно представить человека, который смог бы нормально управлять автомобилем, в котором педаль газа находится левее педали тормоза, а вместо руля&#8201;&#8212;&#8201;джойстик.</p>
</div>
</blockquote>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>Всё дело в том, что основные элементы управления автомобиля имеют одну и ту же конструкцию, и принцип действия. Водитель точно знает, что для того, чтобы повернуть налево, он должен повернуть руль, независимо от того, есть там гидроусилитель или нет.
Если человеку надо доехать с работы до дома, то он сядет за руль автомобиля и будет выполнять одни и те же действия, независимо от того, какой именно тип автомобиля он использует. По сути, можно сказать, что все автомобили имеют один и тот же интерфейс, а водитель, абстрагируясь от сущности автомобиля, работает именно с этим интерфейсом. Если водителю предстоит ехать по немецкому автобану, он, вероятно выберет быстрый автомобиль с низкой посадкой, а если предстоит возвращаться из отдалённого маральника в Горном Алтае после дождя, скорее всего, будет выбран УАЗ с армейскими мостами. Но, независимо от того, каким образом будет реализовываться движение и внутреннее функционирование машины, интерфейс останется прежним.</p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p><em>Полиморфная переменная</em>, это переменная, которая может принимать значения разных типов, а <em>полиморфная функция</em>, это функция, у которой хотя бы один аргумент является полиморфной переменной.
Выделяют два вида полиморфных функций:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><em>ad hoc</em>, функция ведет себя по разному для разных типов аргументов (например, функция <code>draw()</code>&#8201;&#8212;&#8201;рисует по разному фигуры разных типов);</p>
</li>
<li>
<p><em>параметрический</em>, функция ведет себя одинаково для аргументов разных типов (например, функция <code>add()</code>&#8201;&#8212;&#8201;одинаково кладет в контейнер элементы разных типов).</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Принцип в ООП, когда программа может использовать объекты с одинаковым интерфейсом без информации о внутреннем устройстве объекта, называется полиморфизмом.</p>
</div>
<div class="paragraph">
<p>Пример:</p>
</div>
<div class="paragraph">
<p>Давайте представим, что нам в программе нужно описать пользователя, который может пользоваться любыми моделями телефона, чтобы позвонить другому пользователю. Вот как можно это сделать:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">User</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">name</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nf">User</span><span class="o">(</span><span class="nc">String</span> <span class="n">name</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="n">name</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">callAnotherUser</span><span class="o">(</span><span class="kt">int</span> <span class="n">number</span><span class="o">,</span> <span class="nc">AbstractPhone</span> <span class="n">phone</span><span class="o">)</span> <span class="o">{</span>
<span class="c1">// вот он полиморфизм - использование в коде абстактного типа AbstractPhone phone!</span>
        <span class="n">phone</span><span class="o">.</span><span class="na">call</span><span class="o">(</span><span class="n">number</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Теперь опишем различные модели телефонов. Одна из первых моделей телефонов:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">ThomasEdisonPhone</span> <span class="kd">extends</span> <span class="nc">AbstractPhone</span> <span class="o">{</span>

    <span class="kd">public</span> <span class="nf">ThomasEdisonPhone</span><span class="o">(</span><span class="kt">int</span> <span class="n">year</span><span class="o">)</span> <span class="o">{</span>
        <span class="kd">super</span><span class="o">(</span><span class="n">year</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">call</span><span class="o">(</span><span class="kt">int</span> <span class="n">outputNumber</span><span class="o">)</span> <span class="o">{</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Вращайте ручку"</span><span class="o">);</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Сообщите номер абонента, сэр"</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">ring</span><span class="o">(</span><span class="kt">int</span> <span class="n">inputNumber</span><span class="o">)</span> <span class="o">{</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Телефон звонит"</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Обычный стационарный телефон:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Phone</span> <span class="kd">extends</span> <span class="nc">AbstractPhone</span> <span class="o">{</span>

    <span class="kd">public</span> <span class="nf">Phone</span><span class="o">(</span><span class="kt">int</span> <span class="n">year</span><span class="o">)</span> <span class="o">{</span>
        <span class="kd">super</span><span class="o">(</span><span class="n">year</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">call</span><span class="o">(</span><span class="kt">int</span> <span class="n">outputNumber</span><span class="o">)</span> <span class="o">{</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Вызываю номер"</span> <span class="o">+</span> <span class="n">outputNumber</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">ring</span><span class="o">(</span><span class="kt">int</span> <span class="n">inputNumber</span><span class="o">)</span> <span class="o">{</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Телефон звонит"</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>И, наконец, крутой видеотелефон:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">VideoPhone</span> <span class="kd">extends</span> <span class="nc">AbstractPhone</span> <span class="o">{</span>

    <span class="kd">public</span> <span class="nf">VideoPhone</span><span class="o">(</span><span class="kt">int</span> <span class="n">year</span><span class="o">)</span> <span class="o">{</span>
        <span class="kd">super</span><span class="o">(</span><span class="n">year</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">call</span><span class="o">(</span><span class="kt">int</span> <span class="n">outputNumber</span><span class="o">)</span> <span class="o">{</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Подключаю видеоканал для абонента "</span> <span class="o">+</span> <span class="n">outputNumber</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">ring</span><span class="o">(</span><span class="kt">int</span> <span class="n">inputNumber</span><span class="o">)</span> <span class="o">{</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"У вас входящий видеовызов..."</span> <span class="o">+</span> <span class="n">inputNumber</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Создадим объекты в методе main() и протестируем метод callAnotherUser:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="nc">AbstractPhone</span> <span class="n">firstPhone</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ThomasEdisonPhone</span><span class="o">(</span><span class="mi">1879</span><span class="o">);</span>
<span class="nc">AbstractPhone</span> <span class="n">phone</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Phone</span><span class="o">(</span><span class="mi">1984</span><span class="o">);</span>
<span class="nc">AbstractPhone</span> <span class="n">videoPhone</span><span class="o">=</span><span class="k">new</span> <span class="nc">VideoPhone</span><span class="o">(</span><span class="mi">2018</span><span class="o">);</span>
<span class="nc">User</span> <span class="n">user</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">User</span><span class="o">(</span><span class="s">"Андрей"</span><span class="o">);</span>
<span class="n">user</span><span class="o">.</span><span class="na">callAnotherUser</span><span class="o">(</span><span class="mi">224466</span><span class="o">,</span><span class="n">firstPhone</span><span class="o">);</span>
<span class="c1">// Вращайте ручку</span>
<span class="c1">//Сообщите номер абонента, сэр</span>
<span class="n">user</span><span class="o">.</span><span class="na">callAnotherUser</span><span class="o">(</span><span class="mi">224466</span><span class="o">,</span><span class="n">phone</span><span class="o">);</span>
<span class="c1">//Вызываю номер 224466</span>
<span class="n">user</span><span class="o">.</span><span class="na">callAnotherUser</span><span class="o">(</span><span class="mi">224466</span><span class="o">,</span><span class="n">videoPhone</span><span class="o">);</span>
<span class="c1">//Подключаю видеоканал для абонента 224466</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Используя вызов одного и того же метода объекта user, мы получили различные результаты. Выбор конкретной реализации метода call внутри метода callAnotherUser производился динамически на основании конкретного типа вызывающего его объекта в процессе выполнения программы. В этом и заключается основное преимущество полиморфизма&#8201;&#8212;&#8201;выбор реализации в процессе выполнения программы.</p>
</div>
<div class="paragraph">
<p>В примерах классов телефонов, приведенных выше, мы использовали переопределение методов&#8201;&#8212;&#8201;прием, при котором изменяется реализация метода, определенная в базовом классе, без изменения сигнатуры метода. По сути, это является заменой метода, и именно новый метод, определенный в подклассе, вызывается при выполнении программы.</p>
</div>
<div class="paragraph">
<p>Обычно, при переопределении метода, используется аннотация @Override, которая подсказывает компилятору о необходимости проверить сигнатуры переопределяемого и переопределяющего методов.</p>
</div>
<div class="paragraph">
<p><a href="#_ооп">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_что_такое_абстракция">12.6. Что такое <em>«абстракция»</em>?</h3>
<div class="paragraph">
<p><em>Абстрагирование</em>&#8201;&#8212;&#8201;это способ выделить набор общих характеристик объекта, исключая из рассмотрения частные и незначимые. Соответственно, <strong>абстракция</strong>&#8201;&#8212;&#8201;это набор всех таких характеристик.</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>Представьте, что водитель едет в автомобиле по оживлённому участку движения. Понятно, что в этот момент он не будет задумываться о химическом составе краски автомобиля, особенностях взаимодействия шестерёнок в коробке передач или влияния формы кузова на скорость (разве что, автомобиль стоит в глухой пробке и водителю абсолютно нечем заняться). Однако, руль, педали, указатель поворота он будет использовать регулярно.</p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p>Пример:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="c1">// Abstract class</span>
<span class="kd">abstract</span> <span class="kd">class</span> <span class="nc">Animal</span> <span class="o">{</span>
    <span class="c1">// Abstract method (does not have a body)</span>
    <span class="kd">public</span> <span class="kd">abstract</span> <span class="kt">void</span> <span class="nf">animalSound</span><span class="o">();</span>

    <span class="c1">// Regular method</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">sleep</span><span class="o">()</span> <span class="o">{</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Zzz"</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="c1">// Subclass (inherit from Animal)</span>
<span class="kd">class</span> <span class="nc">Pig</span> <span class="kd">extends</span> <span class="nc">Animal</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">animalSound</span><span class="o">()</span> <span class="o">{</span>
        <span class="c1">// The body of animalSound() is provided here</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"The pig says: wee wee"</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="kd">class</span> <span class="nc">MyMainClass</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="nc">Pig</span> <span class="n">myPig</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Pig</span><span class="o">();</span> <span class="c1">// Create a Pig object</span>
        <span class="n">myPig</span><span class="o">.</span><span class="na">animalSound</span><span class="o">();</span>
        <span class="n">myPig</span><span class="o">.</span><span class="na">sleep</span><span class="o">();</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><a href="#_ооп">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_что_представляет_собой_обмен_сообщениями">12.7. Что представляет собой <em>«обмен сообщениями»</em>?</h3>
<div class="paragraph">
<p>Объекты взаимодействуют, посылая и получая сообщения. Сообщение&#8201;&#8212;&#8201;это запрос на выполнение действия, дополненный набором аргументов, которые могут понадобиться при выполнении действия. В ООП посылка сообщения (вызов метода)&#8201;&#8212;&#8201;это единственный путь передать управление объекту. Если объект должен «отвечать» на это сообщение, то у него должна иметься соответствующий данному сообщению метод. Так же объекты, используя свои методы, могут и сами посылать сообщения другим объектам. Обмен сообщениями реализуется с помощью динамических вызовов, что приводит к чрезвычайно позднему связыванию (extreme late binding).</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>Пусть требуется создать физическую модель, описывающую сталкивающиеся шары разных размеров. Традиционный подход к решению этой задачи примерно таков: определяется набор данных, описывающих каждый шар (например, его координаты, массу и ускорение); каждому шару присваивается уникальный идентификатор (например, организуется массив, значение индекса которого соответствует номеру шара), который позволит отличать каждый из шаров от всех других. Наконец, пишется подпрограмма с названием, скажем, <code>bounce</code>; эта процедура должна на основе номера шара и его начальных параметров соответствующим образом изменять данные, описывающие шар. В отличие от традиционного подхода объектно-ориентированная версия программы моделирует каждый из шаров посредством объекта. При этом объект, соответствующий конкретному шару, содержит не только его параметры, но и весь код, описывающий поведение шара при различных взаимодействиях. Так, каждый шар будет иметь собственный метод <code>bounce()</code>. Вместо того, чтобы вызывать подпрограмму <code>bounce</code> с аргументом, определяющим, скажем, шар №3, необходимо будет передать объекту «шар №3» сообщение, предписывающее ему выполнить столкновение.</p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p><a href="#_ооп">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_расскажите_про_основные_понятия_ооп_класс_объект_интерфейс">12.8. Расскажите про основные понятия ООП: <em>«класс»</em>, <em>«объект»</em>, <em>«интерфейс»</em>.</h3>
<div class="paragraph">
<p><strong>Класс</strong>&#8201;&#8212;&#8201;это способ описания сущности, определяющий состояние и поведение, зависящее от этого состояния, а также правила для взаимодействия с данной сущностью (контракт).</p>
</div>
<div class="paragraph">
<p>С точки зрения программирования класс можно рассматривать как набор данных (полей, атрибутов, членов класса) и функций для работы с ними (методов).</p>
</div>
<div class="paragraph">
<p>С точки зрения структуры программы, класс является сложным типом данных.</p>
</div>
<div class="paragraph">
<p><strong>Объект (экземпляр)</strong>&#8201;&#8212;&#8201;это отдельный представитель класса, имеющий конкретное состояние и поведение, полностью определяемое классом. Каждый объект имеет конкретные значения атрибутов и методы, работающие с этими значениями на основе правил, заданных в классе.</p>
</div>
<div class="paragraph">
<p><strong>Интерфейс</strong>&#8201;&#8212;&#8201;это набор методов класса, доступных для использования. Интерфейсом класса будет являться набор всех его публичных методов в совокупности с набором публичных атрибутов. По сути, интерфейс специфицирует класс, чётко определяя все возможные действия над ним.</p>
</div>
<div class="paragraph">
<p><a href="#_ооп">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_в_чем_заключаются_преимущества_и_недостатки_объектно_ориентированного_подхода_в_программировании">12.9. В чем заключаются преимущества и недостатки объектно-ориентированного подхода в программировании?</h3>
<div class="paragraph">
<p>Преимущества:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Объектная модель вполне естественна, поскольку в первую очередь ориентирована на человеческое восприятие мира, а не на компьютерную реализацию.</p>
</li>
<li>
<p>Классы позволяют проводить конструирование из полезных компонентов, обладающих простыми инструментами, что позволяет абстрагироваться от деталей реализации.</p>
</li>
<li>
<p>Данные и операции над ними образуют определенную сущность, и они не разносятся по всей программе, как нередко бывает в случае процедурного программирования, а описываются вместе. Локализация кода и данных улучшает наглядность и удобство сопровождения программного обеспечения.</p>
</li>
<li>
<p>Инкапсуляция позволяет привнести свойство модульности, что облегчает распараллеливание выполнения задачи между несколькими исполнителями и обновление версий отдельных компонентов.</p>
</li>
<li>
<p>Возможность создавать расширяемые системы.</p>
</li>
<li>
<p>Использование полиморфизма оказывается полезным при:</p>
<div class="ulist">
<ul>
<li>
<p>Обработке разнородных структур данных. Программы могут работать, не различая вида объектов, что существенно упрощает код. Новые виды могут быть добавлены в любой момент.</p>
</li>
<li>
<p>Изменении поведения во время исполнения. На этапе исполнения один объект может быть заменен другим, что позволяет легко, без изменения кода, адаптировать алгоритм в зависимости от того, какой используется объект.</p>
</li>
<li>
<p>Реализации работы с наследниками. Алгоритмы можно обобщить настолько, что они уже смогут работать более чем с одним видом объектов.</p>
</li>
<li>
<p>Возможности описать независимые от приложения части предметной области в виде набора универсальных классов, или фреймворка, который в дальнейшем будет расширен за счет добавления частей, специфичных для конкретного приложения.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Повторное использование кода:</p>
<div class="ulist">
<ul>
<li>
<p>Сокращается время на разработку, которое может быть отдано другим задачам.</p>
</li>
<li>
<p>Компоненты многоразового использования обычно содержат гораздо меньше ошибок, чем вновь разработанные, ведь они уже не раз подвергались проверке.</p>
</li>
<li>
<p>Когда некий компонент используется сразу несколькими клиентами, улучшения, вносимые в его код, одновременно оказывают положительное влияние и на множество работающих с ним программ.</p>
</li>
<li>
<p>Если программа опирается на стандартные компоненты, ее структура и пользовательский интерфейс становятся более унифицированными, что облегчает ее понимание и упрощает использование.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>Недостатки:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>В сложных иерархиях классов поля и методы обычно наследуются с разных уровней. И не всегда легко определить, какие поля и методы фактически относятся к данному классу.</p>
</li>
<li>
<p>Код для обработки сообщения иногда «размазан» по многим методам (иначе говоря, обработка сообщения требует не одного, а многих методов, которые могут быть описаны в разных классах).</p>
</li>
<li>
<p>Документирование классов - задача более трудная, чем это было в случае процедур и модулей. Поскольку любой метод может быть переопределен, в документации должно говориться не только о том, что делает данный метод, но и о том, в каком контексте он вызывается.</p>
</li>
<li>
<p>Неэффективность и неэкономное распределения памяти на этапе выполнения (по причине издержек на динамическое связывание и проверки типов на этапе выполнения).</p>
</li>
<li>
<p>Излишняя универсальность. Часто содержится больше методов, чем это реально необходимо текущей программе. А поскольку лишние методы не могут быть удалены, они становятся мертвым грузом.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a href="#_ооп">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_что_подразумевают_в_плане_принципов_ооп_выражения_является_и_имеет">12.10. Что подразумевают в плане принципов ООП выражения <em>«является»</em> и <em>«имеет»</em>?</h3>
<div class="paragraph">
<p><strong>«является»</strong> подразумевает наследование.
<strong>«имеет»</strong> подразумевает ассоциацию (агрегацию или композицию).</p>
</div>
<div class="paragraph">
<p><a href="#_ооп">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_в_чем_разница_между_композицией_и_агрегацией">12.11. В чем разница между <em>композицией</em> и <em>агрегацией</em>?</h3>
<div class="paragraph">
<p>Ассоциация обозначает связь между объектами. Композиция и агрегация&#8201;&#8212;&#8201;частные случаи ассоциации «часть-целое».</p>
</div>
<div class="paragraph">
<p>Агрегация предполагает, что объекты связаны взаимоотношением «part-of» (часть). Композиция более строгий вариант агрегации. Дополнительно к требованию «part-of» накладывается условие, что экземпляр «части» может входить только в одно целое (или никуда не входить), в то время как в случае агрегации экземпляр «части» может входить в несколько целых.</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>Например, книга состоит из страниц, и мы не можем вырвать страницу из книги и вложить в другую книгу. Страницы четко привязаны к конкретной книге, поэтому это композиция.
В тоже время мы можем взять и перенести книгу из одной библиотеки в другую - это уже агрегация.</p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p><a href="#_ооп">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_что_такое_статическое_и_динамическое_связывание">12.12. Что такое <em>статическое</em> и <em>динамическое связывание</em>?</h3>
<div class="paragraph">
<p>Присоединение вызова метода к телу метода называется связыванием. Если связывание проводится компилятором (компоновщиком) перед запуском программы, то оно называется <em>статическим</em> или <em>ранним связыванием (early binding)</em>.</p>
</div>
<div class="paragraph">
<p>В свою очередь, <em>позднее связывание (late binding)</em> это связывание, проводимое непосредственно во время выполнения программы, в зависимости от типа объекта. Позднее связывание также называют <em>динамическим (dynamic)</em> или <em>связыванием на стадии выполнения (runtime binding)</em>. В языках, реализующих позднее связывание, должен существовать механизм определения фактического типа объекта во время работы программы, для вызова подходящего метода. Иначе говоря, компилятор не знает тип объекта, но механизм вызова методов определяет его и вызывает соответствующее тело метода. Механизм позднего связывания зависит от конкретного языка, но нетрудно предположить, что для его реализации в объекты должна включаться какая-то дополнительная информация.</p>
</div>
<div class="paragraph">
<p>Для всех методов Java используется механизм позднего (динамического) связывания, если только метод не был объявлен как <code>final</code> (приватные методы являются <code>final</code> по умолчанию).</p>
</div>
<div class="paragraph">
<p><a href="#_ооп">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_источники_10">12.13. Источники</h3>
<div class="ulist">
<ul>
<li>
<p><a href="https://devcolibri.com/%d1%87%d1%82%d0%be-%d1%82%d0%b0%d0%ba%d0%be%d0%b5-%d0%be%d0%be%d0%bf-%d0%b8-%d1%81-%d1%87%d0%b5%d0%bc-%d0%b5%d0%b3%d0%be-%d0%b5%d0%b4%d1%8f%d1%82/">DevColibri</a></p>
</li>
<li>
<p><a href="https://habrahabr.ru/post/87119/">Хабрахабр</a></p>
</li>
<li>
<p><a href="https://ru.wikipedia.org/wiki/Объектно-ориентированное_программирование">Википедия</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a href="README.html">Вопросы для собеседования</a></p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_сериализация">13. Сериализация</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="#Что-такое-сериализация">Что такое <em>«сериализация»</em>?</a></p>
</li>
<li>
<p><a href="#Опишите-процесс-сериализациидесериализации-с-использованием-serializable">Опишите процесс сериализации/десериализации с использованием <code>Serializable</code>.</a></p>
</li>
<li>
<p><a href="#Как-изменить-стандартное-поведение-сериализациидесериализации">Как изменить стандартное поведение сериализации/десериализации?</a></p>
</li>
<li>
<p><a href="#Как-исключить-поля-из-сериализации">Как исключить поля из сериализации?</a></p>
</li>
<li>
<p><a href="#Что-обозначает-ключевое-слово-transient">Что обозначает ключевое слово <code>transient</code>?</a></p>
</li>
<li>
<p><a href="#Какое-влияние-оказывают-на-сериализуемость-модификаторы-полей-static-и-final">Какое влияние оказывают на сериализуемость модификаторы полей <code>static</code> и <code>final</code></a></p>
</li>
<li>
<p><a href="#Как-не-допустить-сериализацию">Как не допустить сериализацию?</a></p>
</li>
<li>
<p><a href="#Как-создать-собственный-протокол-сериализации">Как создать собственный протокол сериализации?</a></p>
</li>
<li>
<p><a href="#Какая-роль-поля-serialversionuid-в-сериализации">Какая роль поля <code>serialVersionUID</code> в сериализации?</a></p>
</li>
<li>
<p><a href="#Когда-стоит-изменять-значение-поля-serialversionuid">Когда стоит изменять значение поля <code>serialVersionUID</code>?</a></p>
</li>
<li>
<p><a href="#В-чем-проблема-сериализации-singleton">В чем проблема сериализации Singleton?</a></p>
</li>
<li>
<p><a href="#Какие-существуют-способы-контроля-за-значениями-десериализованного-объекта">Какие существуют способы контроля за значениями десериализованного объекта</a></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_что_такое_сериализация">13.1. Что такое <em>«сериализация»</em>?</h3>
<div class="paragraph">
<p><strong>Сериализация (Serialization)</strong> - процесс преобразования структуры данных в линейную последовательность байтов для дальнейшей передачи или сохранения. Сериализованные объекты можно затем восстановить (десериализовать).</p>
</div>
<div class="paragraph">
<p>В Java, согласно спецификации Java Object Serialization существует два стандартных способа сериализации: стандартная сериализация, через использование интерфейса <code>java.io.Serializable</code> и «расширенная» сериализация - <code>java.io.Externalizable</code>.</p>
</div>
<div class="paragraph">
<p>Сериализация позволяет в определенных пределах изменять класс. Вот наиболее важные изменения, с которыми спецификация Java Object Serialization может справляться автоматически:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>добавление в класс новых полей;</p>
</li>
<li>
<p>изменение полей из статических в нестатические;</p>
</li>
<li>
<p>изменение полей из транзитных в нетранзитные.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Обратные изменения (из нестатических полей в статические и из нетранзитных в транзитные) или удаление полей требуют определенной дополнительной обработки в зависимости от того, какая степень обратной совместимости необходима.</p>
</div>
<div class="paragraph">
<p><a href="#_сериализация">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_опишите_процесс_сериализациидесериализации_с_использованием_serializable">13.2. Опишите процесс сериализации/десериализации с использованием <code>Serializable</code>.</h3>
<div class="paragraph">
<p>При использовании Serializable применяется алгоритм сериализации, который с помощью рефлексии (Reflection API) выполняет:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>запись в поток метаданных о классе, ассоциированном с объектом (имя класса, идентификатор <code>SerialVersionUID</code>, идентификаторы полей класса);</p>
</li>
<li>
<p>рекурсивную запись в поток описания суперклассов до класса <code>java.lang.Object</code> (не включительно);</p>
</li>
<li>
<p>запись примитивных значений полей сериализуемого экземпляра, начиная с полей самого верхнего суперкласса;</p>
</li>
<li>
<p>рекурсивную запись объектов, которые являются полями сериализуемого объекта.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>При этом ранее сериализованные объекты повторно не сериализуются, что позволяет алгоритму корректно работать с циклическими ссылками.</p>
</div>
<div class="paragraph">
<p>Для выполнения десериализации под объект выделяется память, после чего его поля заполняются значениями из потока. Конструктор объекта при этом не вызывается. Однако при десериализации будет вызван конструктор без параметров родительского несериализуемого класса, а его отсутствие повлечёт ошибку десериализации.</p>
</div>
<div class="paragraph">
<p><a href="#_сериализация">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_как_изменить_стандартное_поведение_сериализациидесериализации">13.3. Как изменить стандартное поведение сериализации/десериализации?</h3>
<div class="ulist">
<ul>
<li>
<p>Реализовать интерфейс <code>java.io.Externalizable</code>, который позволяет применение пользовательской логики сериализации. Способ сериализации и десериализации описывается в методах <code>writeExternal()</code> и <code>readExternal()</code>. Во время десериализации вызывается конструктор без параметров, а потом уже на созданном объекте вызывается метод <code>readExternal</code>.</p>
</li>
<li>
<p>Если у сериализуемого объекта реализован один из следующих методов, то механизм сериализации будет использовать его, а не метод по умолчанию :</p>
<div class="ulist">
<ul>
<li>
<p><code>writeObject()</code> - запись объекта в поток;</p>
</li>
<li>
<p><code>readObject()</code> - чтение объекта из потока;</p>
</li>
<li>
<p><code>writeReplace()</code> - позволяет заменить себя экземпляром другого класса перед записью;</p>
</li>
<li>
<p><code>readResolve()</code> - позволяет заменить на себя другой объект после чтения.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p><a href="#_сериализация">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_как_исключить_поля_из_сериализации">13.4. Как исключить поля из сериализации?</h3>
<div class="paragraph">
<p>Для управления сериализацией при определении полей можно использовать ключевое слово <code>transient</code>, таким образом исключив поля из общего процесса сериализации.</p>
</div>
<div class="paragraph">
<p><a href="#_сериализация">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_что_обозначает_ключевое_слово_transient">13.5. Что обозначает ключевое слово <code>transient</code>?</h3>
<div class="paragraph">
<p>Поля класса, помеченные модификатором <code>transient</code>, не сериализуются.</p>
</div>
<div class="paragraph">
<p>Обычно в таких полях хранится промежуточное состояние объекта, которое, к примеру, проще вычислить. Другой пример такого поля - ссылка на экземпляр объекта, который не требует сериализации или не может быть сериализован.</p>
</div>
<div class="paragraph">
<p><a href="#_сериализация">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_какое_влияние_оказывают_на_сериализуемость_модификаторы_полей_static_и_final">13.6. Какое влияние оказывают на сериализуемость модификаторы полей <code>static</code> и <code>final</code></h3>
<div class="paragraph">
<p>При стандартной сериализации поля, имеющие модификатор static, не сериализуются. Соответственно, после десериализации это поле значения не меняет. При использовании реализации <code>Externalizable</code> сериализовать и десериализовать статическое поле можно, но не рекомендуется этого делать, т.к. это может сопровождаться трудноуловимыми ошибками.</p>
</div>
<div class="paragraph">
<p>Поля с модификатором <code>final</code> сериализуются как и обычные. За одним исключением&#8201;&#8212;&#8201;их невозможно десериализовать при использовании <code>Externalizable</code>, поскольку <code>final</code> поля должны быть инициализированы в конструкторе, а после этого в <code>readExternal()</code> изменить значение этого поля будет невозможно. Соответственно, если необходимо сериализовать объект с <code>final</code> полем необходимо использовать только стандартную сериализацию.</p>
</div>
<div class="paragraph">
<p><a href="#_сериализация">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_как_не_допустить_сериализацию">13.7. Как не допустить сериализацию?</h3>
<div class="paragraph">
<p>Чтобы не допустить автоматическую сериализацию можно переопределить <code>private</code> методы для создания исключительной ситуации <code>NotSerializableException</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="kd">private</span> <span class="kt">void</span> <span class="nf">writeObject</span><span class="o">(</span><span class="nc">ObjectOutputStream</span> <span class="n">out</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">IOException</span> <span class="o">{</span>
    <span class="k">throw</span> <span class="k">new</span> <span class="nf">NotSerializableException</span><span class="o">();</span>
<span class="o">}</span>

<span class="kd">private</span> <span class="kt">void</span> <span class="nf">readObject</span><span class="o">(</span><span class="nc">ObjectInputStream</span> <span class="n">in</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">IOException</span> <span class="o">{</span>
    <span class="k">throw</span> <span class="k">new</span> <span class="nf">NotSerializableException</span><span class="o">();</span>
<span class="o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Любая попытка записать или прочитать этот объект теперь приведет к возникновению исключительной ситуации.</p>
</div>
<div class="paragraph">
<p><a href="#_сериализация">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_как_создать_собственный_протокол_сериализации">13.8. Как создать собственный протокол сериализации?</h3>
<div class="paragraph">
<p>Для создания собственного протокола сериализации достаточно реализовать интерфейс <code>Externalizable</code>, который содержит два метода:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="kd">public</span> <span class="kt">void</span> <span class="nf">writeExternal</span><span class="o">(</span><span class="nc">ObjectOutput</span> <span class="n">out</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">IOException</span><span class="o">;</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">readExternal</span><span class="o">(</span><span class="nc">ObjectInput</span> <span class="n">in</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">IOException</span><span class="o">,</span> <span class="nc">ClassNotFoundException</span><span class="o">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><a href="#_сериализация">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_какая_роль_поля_serialversionuid_в_сериализации">13.9. Какая роль поля <code>serialVersionUID</code> в сериализации?</h3>
<div class="paragraph">
<p><code>serialVersionUID</code> используется для указания версии сериализованных данных.</p>
</div>
<div class="paragraph">
<p>Когда мы не объявляем <code>serialVersionUID</code> в нашем классе явно, среда выполнения Java делает это за нас, но этот процесс чувствителен ко многим метаданным класса включая количество полей, тип полей, модификаторы доступа полей, интерфейсов, которые реализованы в классе и пр.</p>
</div>
<div class="paragraph">
<p>Рекомендуется явно объявлять <code>serialVersionUID</code> т.к. при добавлении, удалении атрибутов класса динамически сгенерированное значение может измениться и в момент выполнения будет выброшено исключение <code>InvalidClassException</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="kt">long</span> <span class="n">serialVersionUID</span> <span class="o">=</span> <span class="mi">20161013L</span><span class="o">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><a href="#_сериализация">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_когда_стоит_изменять_значение_поля_serialversionuid">13.10. Когда стоит изменять значение поля <code>serialVersionUID</code>?</h3>
<div class="paragraph">
<p><code>serialVersionUID</code> нужно изменять при внесении в класс несовместимых изменений, например при удалении какого-либо его атрибута.</p>
</div>
<div class="paragraph">
<p><a href="#_сериализация">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_в_чем_проблема_сериализации_singleton">13.11. В чем проблема сериализации Singleton?</h3>
<div class="paragraph">
<p>Проблема в том что после десериализации мы получим другой объект. Таким образом, сериализация дает возможность создать Singleton еще раз, что недопустимо. Существует два способа избежать этого:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>явный запрет сериализации.</p>
</li>
<li>
<p>определение метода с сигнатурой <code>(default/public/private/protected/) Object readResolve() throws ObjectStreamException</code>, назначением которого станет возврат замещающего объекта вместо объекта, на котором он вызван.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a href="#_сериализация">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_какие_существуют_способы_контроля_за_значениями_десериализованного_объекта">13.12. Какие существуют способы контроля за значениями десериализованного объекта</h3>
<div class="paragraph">
<p>Если есть необходимость выполнения контроля за значениями десериализованного объекта, то можно использовать интерфейс <code>ObjectInputValidation</code> с переопределением метода <code>validateObject()</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="c1">// Если вызвать метод validateObject() после десериализации объекта, то будет вызвано исключение InvalidObjectException при значении возраста за пределами 39...60.</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Person</span> <span class="kd">implements</span> <span class="n">java</span><span class="o">.</span><span class="na">io</span><span class="o">.</span><span class="na">Serializable</span><span class="o">,</span>
                               <span class="n">java</span><span class="o">.</span><span class="na">io</span><span class="o">.</span><span class="na">ObjectInputValidation</span> <span class="o">{</span>
    <span class="o">...</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">validateObject</span><span class="o">()</span> <span class="kd">throws</span> <span class="nc">InvalidObjectException</span> <span class="o">{</span>
        <span class="k">if</span> <span class="o">((</span><span class="n">age</span> <span class="o">&lt;</span> <span class="mi">39</span><span class="o">)</span> <span class="o">||</span> <span class="o">(</span><span class="n">age</span> <span class="o">&gt;</span> <span class="mi">60</span><span class="o">))</span>
            <span class="k">throw</span> <span class="k">new</span> <span class="nf">InvalidObjectException</span><span class="o">(</span><span class="s">"Invalid age"</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Так же существуют способы подписывания и шифрования, позволяющие убедиться, что данные не были изменены:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>с помощью описания логики в <code>writeObject()</code> и <code>readObject()</code>.</p>
</li>
<li>
<p>поместить в оберточный класс <code>javax.crypto.SealedObject</code> и/или <code>java.security.SignedObject</code>. Данные классы являются сериализуемыми, поэтому при оборачивании объекта в <code>SealedObject</code> создается подобие «подарочной упаковки» вокруг исходного объекта. Для шифрования необходимо создать симметричный ключ, управление которым должно осуществляться отдельно. Аналогично, для проверки данных можно использовать класс <code>SignedObject</code>, для работы с которым также нужен симметричный ключ, управляемый отдельно.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a href="#_сериализация">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_источники_11">13.13. Источники</h3>
<div class="ulist">
<ul>
<li>
<p><a href="https://www.ibm.com/developerworks/ru/library/j-5things1/">IBM developerWorks</a></p>
</li>
<li>
<p><a href="http://java-online.ru/blog-serialization.xhtml">Java-online.ru</a></p>
</li>
<li>
<p><a href="http://ccfit.nsu.ru/~deviv/courses/oop/java_ser_rus.html">Изучите секреты Java Serialization API</a></p>
</li>
<li>
<p><a href="http://bit.ly/1xwRA2D">JavaRush</a></p>
</li>
<li>
<p><a href="http://www.skipy.ru/technics/serialization.html">Записки трезвого практика</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a href="README.html">Вопросы для собеседования</a></p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_servlets_jsp_jstl">14. Servlets, JSP, JSTL</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="#Что-такое-сервлет">Что такое <em>«сервлет»</em>?</a></p>
</li>
<li>
<p><a href="#В-чем-заключаются-преимущества-технологии-сервлетов-над-cgi-common-gateway-interface">В чем заключаются преимущества технологии сервлетов над CGI (Common Gateway Interface)?</a></p>
</li>
<li>
<p><a href="#Какова-структура-веб-проекта">Какова структура веб-проекта?</a></p>
</li>
<li>
<p><a href="#Что-такое-контейнер-сервлетов">Что такое <em>«контейнер сервлетов»</em>?</a></p>
</li>
<li>
<p><a href="#Зачем-нужны-сервера-приложений-если-есть-контейнеры-сервлетов">Зачем нужны сервера приложений, если есть контейнеры сервлетов?</a></p>
</li>
<li>
<p><a href="#Как-контейнер-сервлетов-управляет-жизненным-циклом-сервлета-когда-и-какие-методы-вызываются">Как контейнер сервлетов управляет жизненным циклом сервлета, когда и какие методы вызываются?</a></p>
</li>
<li>
<p><a href="#Что-такое-дескриптор-развертывания">Что такое <em>«дескриптор развертывания»</em>?</a></p>
</li>
<li>
<p><a href="#Какие-действия-необходимо-проделать-при-создании-сервлетов">Какие действия необходимо проделать при создании сервлетов?</a></p>
</li>
<li>
<p><a href="#В-каком-случае-требуется-переопределять-метод-service">В каком случае требуется переопределять метод <code>service()</code>?</a></p>
</li>
<li>
<p><a href="#Есть-ли-смысл-определять-для-сервлета-конструктор-Каким-образом-лучше-инициализировать-данные">Есть ли смысл определять для сервлета конструктор? Каким образом лучше инициализировать данные?</a></p>
</li>
<li>
<p><a href="#Почему-необходимо-переопределить-только-init-метод-без-аргументов">Почему необходимо переопределить только <code>init()</code> метод без аргументов?</a></p>
</li>
<li>
<p><a href="#Какие-наиболее-распространенные-задачи-выполняются-в-контейнере-сервлетов">Какие наиболее распространенные задачи выполняются в контейнере сервлетов?</a></p>
</li>
<li>
<p><a href="#Что-вы-знаете-о-сервлетных-фильтрах">Что вы знаете о <em>сервлетных фильтрах</em>?</a></p>
</li>
<li>
<p><a href="#Зачем-в-сервлетах-используются-различные-listener">Зачем в сервлетах используются различные <em>listener</em>?</a></p>
</li>
<li>
<p><a href="#Когда-стоит-использовать-фильтры-сервлетов-а-когда-слушателей">Когда стоит использовать фильтры сервлетов, а когда слушателей?</a></p>
</li>
<li>
<p><a href="#Как-реализовать-запуск-сервлета-одновременно-с-запуском-приложения">Как реализовать запуск сервлета одновременно с запуском приложения?</a></p>
</li>
<li>
<p><a href="#Как-обработать-в-приложении-исключения-выброшенные-другим-сервлетом">Как обработать в приложении исключения, выброшенные другим сервлетом?</a></p>
</li>
<li>
<p><a href="#Что-представляет-собой-servletconfig">Что представляет собой <code>ServletConfig</code>?</a></p>
</li>
<li>
<p><a href="#Что-представляет-собой-servletcontext">Что представляет собой <code>ServletContext</code>?</a></p>
</li>
<li>
<p><a href="#В-чем-отличия-servletcontext-и-servletconfig">В чем отличия <code>ServletContext</code> и <code>ServletConfig</code>?</a></p>
</li>
<li>
<p><a href="#Для-чего-нужен-интерфейс-servletresponse">Для чего нужен интерфейс <code>ServletResponse</code>?</a></p>
</li>
<li>
<p><a href="#Для-чего-нужен-интерфейс-servletrequest">Для чего нужен интерфейс <code>ServletRequest</code>?</a></p>
</li>
<li>
<p><a href="#Что-такое-request-dispatcher">Что такое <code>Request Dispatcher</code>?</a></p>
</li>
<li>
<p><a href="#Как-из-одного-сервлета-вызвать-другой-сервлет">Как из одного сервлета вызвать другой сервлет?</a></p>
</li>
<li>
<p><a href="#Чем-отличается-sendredirect-от-forward">Чем отличается <code>sendRedirect()</code> от <code>forward()</code>?</a></p>
</li>
<li>
<p><a href="#Для-чего-используются-атрибуты-сервлетов-и-как-происходит-работа-с-ними">Для чего используются атрибуты сервлетов и как происходит работа с ними?</a></p>
</li>
<li>
<p><a href="#Каким-образом-можно-допустить-в-сервлете-deadlock">Каким образом можно допустить в сервлете deadlock?</a></p>
</li>
<li>
<p><a href="#Как-получить-реальное-расположение-сервлета-на-сервере">Как получить реальное расположение сервлета на сервере?</a></p>
</li>
<li>
<p><a href="#Как-получить-информацию-о-сервере-из-сервлета">Как получить информацию о сервере из сервлета?</a></p>
</li>
<li>
<p><a href="#Как-получить-ip-адрес-клиента-на-сервере">Как получить IP адрес клиента на сервере?</a></p>
</li>
<li>
<p><a href="#Какие-классы-обертки-для-сервлетов-вы-знаете">Какие классы-обертки для сервлетов вы знаете?</a></p>
</li>
<li>
<p><a href="#В-чем-отличия-genericservlet-и-httpservlet">В чем отличия <code>GenericServlet</code> и <code>HttpServlet</code>?</a></p>
</li>
<li>
<p><a href="#Почему-httpservlet-класс-объявлен-как-абстрактный">Почему <code>HttpServlet</code> класс объявлен как абстрактный?</a></p>
</li>
<li>
<p><a href="#Какие-основные-методы-присутствуют-в-классе-httpservlet">Какие основные методы присутствуют в классе <code>HttpServlet</code>?</a></p>
</li>
<li>
<p><a href="#Стоит-ли-волноваться-о-многопоточной-безопасности-работая-с-сервлетами">Стоит ли волноваться о многопоточной безопасности работая с сервлетами?</a></p>
</li>
<li>
<p><a href="#Какой-метод-http-не-является-неизменяемым">Какой метод HTTP не является неизменяемым?</a></p>
</li>
<li>
<p><a href="#Какие-есть-методы-отправки-данных-с-клиента-на-сервер">Какие есть методы отправки данных с клиента на сервер?</a></p>
</li>
<li>
<p><a href="#В-чем-разница-между-методами-get-и-post">В чем разница между методами <code>GET</code> и <code>POST</code>?</a></p>
</li>
<li>
<p><a href="#В-чем-разница-между-printwriter-и-servletoutputstream">В чем разница между <code>PrintWriter</code> и <code>ServletOutputStream</code>?</a></p>
</li>
<li>
<p><a href="#Можно-ли-одновременно-использовать-в-сервлете-printwriter-и-servletoutputstream">Можно ли одновременно использовать в сервлете <code>PrintWriter</code> и <code>ServletOutputStream</code>?</a></p>
</li>
<li>
<p><a href="#Расскажите-об-интерфейсе-singlethreadmodel">Расскажите об интерфейсе <code>SingleThreadModel</code>.</a></p>
</li>
<li>
<p><a href="#Что-означает-url-encoding-Как-это-осуществить-в-java">Что означает <em>URL encoding</em>? Как это осуществить в Java?</a></p>
</li>
<li>
<p><a href="#Какие-различные-методы-управления-сессией-в-сервлетах-вы-знаете">Какие различные методы управления сессией в сервлетах вы знаете?</a></p>
</li>
<li>
<p><a href="#Что-такое-cookies">Что такое <em>cookies</em>?</a></p>
</li>
<li>
<p><a href="#Какие-методы-для-работы-с-cookies-предусмотрены-в-сервлетах">Какие методы для работы с cookies предусмотрены в сервлетах?</a></p>
</li>
<li>
<p><a href="#Что-такое-url-rewriting">Что такое <em>URL Rewriting</em>?</a></p>
</li>
<li>
<p><a href="#Зачем-нужны-и-чем-отличаются-методы-encodeurl-и-encoderedirecturl">Зачем нужны и чем отличаются методы <code>encodeURL()</code> и <code>encodeRedirectURL()</code>?</a></p>
</li>
<li>
<p><a href="#Что-такое-сессия">Что такое <em>«сессия»</em>?</a></p>
</li>
<li>
<p><a href="#Как-уведомить-объект-в-сессии-что-сессия-недействительна-или-закончилась">Как уведомить объект в сессии, что сессия недействительна или закончилась?</a></p>
</li>
<li>
<p><a href="#Какой-существует-эффективный-способ-удостоверится-что-все-сервлеты-доступны-только-для-пользователя-с-верной-сессией">Какой существует эффективный способ удостоверится, что все сервлеты доступны только для пользователя с верной сессией?</a></p>
</li>
<li>
<p><a href="#Как-мы-можем-обеспечить-transport-layer-security-для-нашего-веб-приложения">Как мы можем обеспечить <em>transport layer security</em> для нашего веб приложения?</a></p>
</li>
<li>
<p><a href="#Как-организовать-подключение-к-базе-данных-обеспечить-журналирование-в-сервлете">Как организовать подключение к базе данных, обеспечить журналирование в сервлете?</a></p>
</li>
<li>
<p><a href="#Какие-основные-особенности-появились-в-спецификации-servlet-3">Какие основные особенности появились в спецификации <em>Servlet 3</em>?</a></p>
</li>
<li>
<p><a href="#Какие-способы-аутентификации-доступны-сервлету">Какие способы аутентификации доступны сервлету?</a></p>
</li>
<li>
<p><a href="#Что-такое-java-server-pages-jsp">Что такое <em>Java Server Pages (JSP)</em>?</a></p>
</li>
<li>
<p><a href="#Зачем-нужен-jsp">Зачем нужен JSP?</a></p>
</li>
<li>
<p><a href="#Опишите-как-обрабатываются-jsp-страницы-начиная-от-запроса-к-серверу-заканчивая-ответом-пользователю">Опишите, как обрабатываются JSP страницы, начиная от запроса к серверу, заканчивая ответом пользователю.</a></p>
</li>
<li>
<p><a href="#Расскажите-об-этапах-фазах-жизненного-цикла-jsp">Расскажите об этапах (фазах) жизненного цикла JSP.</a></p>
</li>
<li>
<p><a href="#Расскажите-о-методах-жизненного-цикла-jsp">Расскажите о методах жизненного цикла JSP.</a></p>
</li>
<li>
<p><a href="#Какие-методы-жизненного-цикла-jsp-могут-быть-переопределены">Какие методы жизненного цикла JSP могут быть переопределены?</a></p>
</li>
<li>
<p><a href="#Как-можно-предотвратить-прямой-доступ-к-jsp-странице-из-браузера">Как можно предотвратить прямой доступ к JSP странице из браузера?</a></p>
</li>
<li>
<p><a href="#Какая-разница-между-динамическим-и-статическим-содержимым-jsp">Какая разница между <em>динамическим</em> и <em>статическим</em> содержимым JSP?</a></p>
</li>
<li>
<p><a href="#Как-закомментировать-код-в-jsp">Как закомментировать код в JSP?</a></p>
</li>
<li>
<p><a href="#Какие-существуют-основные-типы-тегов-jsp">Какие существуют основные типы тегов JSP?</a></p>
</li>
<li>
<p><a href="#Что-вы-знаете-о-действиях-jsp-action-tag-и-jsp-action-elements">Что вы знаете о действиях JSP (<em>Action tag</em> и <em>JSP Action Elements</em>).</a></p>
</li>
<li>
<p><a href="#Взаимодействие-jsp---сервлет---jsp">Взаимодействие <em>JSP - сервлет - JSP</em>.</a></p>
</li>
<li>
<p><a href="#Какие-области-видимости-переменных-существуют-в-jsp">Какие области видимости переменных существуют в JSP?</a></p>
</li>
<li>
<p><a href="#Какие-неявные-внутренние-объекты-и-методы-есть-на-jsp-странице">Какие неявные, внутренние объекты и методы есть на JSP странице?</a></p>
</li>
<li>
<p><a href="#Какие-неявные-объекты-не-доступны-в-обычной-jsp-странице">Какие неявные объекты не доступны в обычной JSP странице?</a></p>
</li>
<li>
<p><a href="#Что-вы-знаете-о-pagecontext-и-какие-преимущества-его-использования">Что вы знаете о <code>PageContext</code> и какие преимущества его использования?</a></p>
</li>
<li>
<p><a href="#Как-сконфигурировать-параметры-инициализации-для-jsp">Как сконфигурировать параметры инициализации для JSP?</a></p>
</li>
<li>
<p><a href="#Почему-не-рекомендуется-использовать-скриплеты-скриптовые-элементы-в-jsp">Почему не рекомендуется использовать скриплеты (скриптовые элементы) в JSP?</a></p>
</li>
<li>
<p><a href="#Можно-ли-определить-класс-внутри-jsp-страницы">Можно ли определить класс внутри JSP страницы?</a></p>
</li>
<li>
<p><a href="Что-вы-знаете-о-Языке-выражений-jsp-jsp-expression-language&.html#8212;&#8203;el">Что вы знаете о Языке выражений JSP (JSP Expression Language&#8201;&#8212;&#8201;EL)?</a></p>
</li>
<li>
<p><a href="#Какие-типы-el-операторов-вы-знаете">Какие типы EL операторов вы знаете?</a></p>
</li>
<li>
<p><a href="#Назовите-неявные-внутренние-объекты-jsp-el-и-их-отличия-от-объектов-jsp">Назовите неявные, внутренние объекты JSP EL и их отличия от объектов JSP.</a></p>
</li>
<li>
<p><a href="#Как-отключить-возможность-использования-el-в-jsp">Как отключить возможность использования EL в JSP?</a></p>
</li>
<li>
<p><a href="#Как-узнать-тип-http-метода-используя-jsp-el">Как узнать тип HTTP метода используя JSP EL?</a></p>
</li>
<li>
<p><a href="#Что-такое-jstl-jsp-standard-tag-library">Что такое <em>JSTL (JSP Standard tag library)</em>?</a></p>
</li>
<li>
<p><a href="#Из-каких-групп-тегов-состоит-библиотека-jstl">Из каких групп тегов состоит библиотека <em>JSTL</em>?</a></p>
</li>
<li>
<p><a href="#Какая-разница-между-cset-и-jspusebean">Какая разница между <code>&lt;c:set&gt;</code> и <code>&lt;jsp:useBean&gt;</code>?</a></p>
</li>
<li>
<p><a href="#Чем-отличается-cimport-от-jspinclude-и-директивы-include-">Чем отличается <code>&lt;c:import&gt;</code> от <code>&lt;jsp:include&gt;</code> и директивы <code>&lt;%@include %&gt;</code>?</a></p>
</li>
<li>
<p><a href="#Как-можно-расширить-функциональность-jsp">Как можно расширить функциональность JSP?</a></p>
</li>
<li>
<p><a href="#Что-вы-знаете-о-написании-пользовательских-jsp-тегов">Что вы знаете о написании пользовательских JSP тегов?</a></p>
</li>
<li>
<p><a href="#Приведите-пример-использования-собственных-тегов">Приведите пример использования собственных тегов.</a></p>
</li>
<li>
<p><a href="#Как-сделать-перенос-строки-в-html-средствами-jsp">Как сделать перенос строки в HTML средствами JSP?</a></p>
</li>
<li>
<p><a href="#Почему-не-нужно-конфигурировать-стандартные-jsp-теги-в-webxml">Почему не нужно конфигурировать стандартные JSP теги в <code>web.xml</code>?</a></p>
</li>
<li>
<p><a href="#Как-можно-обработать-ошибки-jsp-страниц">Как можно обработать ошибки JSP страниц?</a></p>
</li>
<li>
<p><a href="#Как-происходит-обработка-ошибок-с-помощью-jstl">Как происходит обработка ошибок с помощью JSTL?</a></p>
</li>
<li>
<p><a href="#Как-конфигурируется-jsp-в-дескрипторе-развертывания">Как конфигурируется JSP в дескрипторе развертывания.</a></p>
</li>
<li>
<p><a href="#Можно-ли-использовать-javascript-на-jsp-странице">Можно ли использовать Javascript на JSP странице?</a></p>
</li>
<li>
<p><a href="#Всегда-ли-создается-объект-сессии-на-jsp-странице-можно-ли-отключить-его-создание">Всегда ли создается объект сессии на JSP странице, можно ли отключить его создание?</a></p>
</li>
<li>
<p><a href="#Какая-разница-между-jspwriter-и-сервлетным-printwriter">Какая разница между <code>JSPWriter</code> и сервлетным <code>PrintWriter</code>?</a></p>
</li>
<li>
<p><a href="#Опишите-общие-практические-принципы-работы-с-jsp">Опишите общие практические принципы работы с JSP.</a></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_что_такое_сервлет">14.1. Что такое <em>«сервлет»</em>?</h3>
<div class="paragraph">
<p><strong>Сервлет</strong> является интерфейсом, реализация которого расширяет функциональные возможности сервера. Сервлет взаимодействует с клиентами посредством принципа запрос-ответ. Хотя сервлеты могут обслуживать любые запросы, они обычно используются для расширения веб-серверов.</p>
</div>
<div class="paragraph">
<p>Большинство необходимых для создания сервлетов классов и интерфейсов содержатся в пакетах <code>javax.servlet</code> и <code>javax.servlet.http</code>.</p>
</div>
<div class="paragraph">
<p>Основные методы сервлета:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>public void init(ServletConfig config) throws ServletException</code> запускается сразу после загрузки сервлета в память;</p>
</li>
<li>
<p><code>public ServletConfig getServletConfig()</code> возвращает ссылку на объект, который предоставляет доступ к информации о конфигурации сервлета;</p>
</li>
<li>
<p><code>public String getServletInfo()</code> возвращает строку, содержащую информацию о сервлете, например: автор и версия сервлета;</p>
</li>
<li>
<p><code>public void service(ServletRequest request, ServletResponse response) throws ServletException, java.io.IOException</code> вызывается для обработки каждого запроса;</p>
</li>
<li>
<p><code>public void destroy()</code> выполняется перед выгрузкой сервлета из памяти.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Текущая спецификация - Servlet 3.1 описана в JSR-340 и принята в 2013 году.</p>
</div>
<div class="paragraph">
<p><a href="#servlets-jsp-jstl">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_в_чем_заключаются_преимущества_технологии_сервлетов_над_cgi_common_gateway_interface">14.2. В чем заключаются преимущества технологии сервлетов над CGI (Common Gateway Interface)?</h3>
<div class="ulist">
<ul>
<li>
<p>Сервлеты предоставляют лучшую производительность обработки запросов и более эффективное использование памяти за счет использования преимущество многопоточности (на каждый запрос создается новая нить, что быстрее выделения памяти под новый объект для каждого запроса, как это происходит в CGI).</p>
</li>
<li>
<p>Сервлеты, как платформа и система являются независимыми. Таким образом веб-приложение, написанное с использованием сервлетов может быть запущена в любом контейнере сервлетов, реализующим этот стандарт и в любой операционной системе.</p>
</li>
<li>
<p>Использование сервлетов повышает надежность программы, т.к. контейнер сервлетов самостоятельно заботится о жизненном цикле сервлетов (а значит и за утечками памяти), безопасности и сборщике мусора.</p>
</li>
<li>
<p>Сервлеты относительно легки в изучении и поддержке, таким образом разработчику необходимо заботиться только о бизнес-логике приложения, а не внутренней реализации веб-технологий.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a href="#servlets-jsp-jstl">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_какова_структура_веб_проекта">14.3. Какова структура веб-проекта?</h3>
<div class="paragraph">
<p><code>src/main/java</code> Исходники приложения/библиотеки</p>
</div>
<div class="paragraph">
<p><code>src/main/resources</code> Ресурсные файлы приложения/библиотеки</p>
</div>
<div class="paragraph">
<p><code>src/main/filters</code> Файлы сервлетных фильтров</p>
</div>
<div class="paragraph">
<p><code>src/main/webapp</code> Исходники веб-приложения</p>
</div>
<div class="paragraph">
<p><code>src/test/java</code> Исходники тестов</p>
</div>
<div class="paragraph">
<p><code>src/test/resources</code> Ресурсные файлы тестов</p>
</div>
<div class="paragraph">
<p><code>src/test/filters</code> Тесты сервлетных фильтров</p>
</div>
<div class="paragraph">
<p><code>src/it</code> Интеграционные тесты</p>
</div>
<div class="paragraph">
<p><code>src/assembly</code> Описание сборки</p>
</div>
<div class="paragraph">
<p><code>src/site</code> Сайт</p>
</div>
<div class="paragraph">
<p><code>LICENSE.txt</code> Лицензия проекта</p>
</div>
<div class="paragraph">
<p><code>NOTICE.txt</code> Замечания и определения библиотек зависимостей.</p>
</div>
<div class="paragraph">
<p><code>README.txt</code> Описание проекта</p>
</div>
<div class="paragraph">
<p><a href="#servlets-jsp-jstl">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_что_такое_контейнер_сервлетов">14.4. Что такое <em>«контейнер сервлетов»</em>?</h3>
<div class="paragraph">
<p><strong>Контейнер сервлетов</strong>&#8201;&#8212;&#8201;программа, представляющая собой сервер, который занимается системной поддержкой сервлетов и обеспечивает их жизненный цикл в соответствии с правилами, определёнными в спецификациях. Может работать как полноценный самостоятельный веб-сервер, быть поставщиком страниц для другого веб-сервера, или интегрироваться в Java EE сервер приложений.</p>
</div>
<div class="paragraph">
<p>Контейнер сервлетов обеспечивает обмен данными между сервлетом и клиентами, берёт на себя выполнение таких функций, как создание программной среды для функционирующего сервлета, идентификацию и авторизацию клиентов, организацию сессии для каждого из них.</p>
</div>
<div class="paragraph">
<p>Наиболее известные реализации контейнеров сервлетов:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Apache Tomcat</p>
</li>
<li>
<p>Jetty</p>
</li>
<li>
<p>JBoss</p>
</li>
<li>
<p>WildFly</p>
</li>
<li>
<p>GlassFish</p>
</li>
<li>
<p>IBM WebSphere</p>
</li>
<li>
<p>Oracle Weblogic</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a href="#servlets-jsp-jstl">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_зачем_нужны_сервера_приложений_если_есть_контейнеры_сервлетов">14.5. Зачем нужны сервера приложений, если есть контейнеры сервлетов?</h3>
<div class="ulist">
<ul>
<li>
<p><strong>Пулы соединений с БД</strong></p>
<div class="ulist">
<ul>
<li>
<p>Возможность периодического тестирования доступности СУБД и обновления соединения в случае восстановления после сбоев</p>
</li>
<li>
<p>Замена прав доступа при подключении</p>
</li>
<li>
<p>Балансировка нагрузки между несколькими СУБД, определение доступность или недоступность того или иного узла</p>
</li>
<li>
<p>Защита пула соединений от некорректного кода в приложении, которое по недосмотру не возвращает соединения, просто отбирая его после какого-то таймаута.</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>JMS</strong></p>
<div class="ulist">
<ul>
<li>
<p>Доступность сервера очередей сообщений "из-коробки".</p>
</li>
<li>
<p>Возможность кластеризации очередей, т.е. доступность построения распределенных очередей, расположенных сразу на нескольких серверах, что существенно увеличивает масштабируемость и доступность приложения</p>
</li>
<li>
<p>Возможность миграции очередей - в случае падения одного из серверов, его очереди автоматически перемещаются на другой, сохраняя необработанные сообщения.</p>
</li>
<li>
<p>В некоторых серверах приложений поддерживается <em>Unit-of-Order</em> - гарантированный порядок обработки сообщений, удовлетворяющих некоторым критериям.</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>JTA</strong> Встроенная поддержка распределенных транзакций для обеспечения согласованности данных в разные СУБД или очереди.</p>
</li>
<li>
<p><strong>Безопасность</strong></p>
<div class="ulist">
<ul>
<li>
<p>Наличие множества провайдеров безопасности и аутентификации:</p>
<div class="ulist">
<ul>
<li>
<p>во встроенном или внешнем <em>LDAP-сервере</em></p>
</li>
<li>
<p>в базе данных</p>
</li>
<li>
<p>в различных <em>Internet-directory</em> (специализированных приложениях для управления правами доступа)</p>
</li>
</ul>
</div>
</li>
<li>
<p>Доступность <em>Single-Sign-On</em> (возможности разделения пользовательской сессии между приложениями) посредством <em>Security Assertion Markup Language (SAML) 1/2</em> или <em>Simple and Protected Negotiate (SPNEGO)</em> и <em>Kerberos</em>: один из серверов выступает в роли базы для хранения пользователей, все другие сервера при аутентификации пользователя обращаются к этой базе.</p>
</li>
<li>
<p>Возможность авторизации посредством протокола <em>eXtensible Access Control Markup Language (XACML)</em>, позволяющего описывать довольно сложные политики (например, приложение доступно пользователю только в рабочее время).</p>
</li>
<li>
<p>Кластеризация всего вышеперечисленного</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Масштабируемость и высокая доступность</strong> Для контейнера сервлетов обычно так же возможно настроить кластеризацию, но она будет довольно примитивной, так как в случае его использования имеются следующие ограничения:</p>
<div class="ulist">
<ul>
<li>
<p>Сложность передачи пользовательской сессии из одного <em>центра обработки данных (ЦоД)</em> в другой через Интернет</p>
</li>
<li>
<p>Отсутствие возможности эффективно настроить репликации сессий на большом (состоящем из 40-50 экземпляров серверов) кластере</p>
</li>
<li>
<p>Невозможность обеспечения миграции экземпляров приложения на другой сервер</p>
</li>
<li>
<p>Недоступность механизмов автоматического мониторинга и реакции на ошибки</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Управляемость</strong></p>
<div class="ulist">
<ul>
<li>
<p>Присутствие единого центра управления, т.н. <em>AdminServer</em> и аналога <em>NodeManager</em>&#8217;а, обеспечивающего</p>
<div class="ulist">
<ul>
<li>
<p>Возможность одновременного запуска нескольких экземпляров сервера</p>
</li>
<li>
<p>Просмотр состояния запущенных экземпляров сервера, обработчиков той или иной очереди, на том или ином сервере, количества соединений с той или иной БД</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Административный канал и развертывание в промышленном режиме</strong> Некоторые сервера приложений позволяют включить так называемый "административный канал" - отдельный порт, запросы по которому имеют приоритет.</p>
<div class="ulist">
<ul>
<li>
<p>Просмотр состояния (выполняющихся транзакций, потоков, очередей) в случае недоступности ("зависания") сервера</p>
</li>
<li>
<p>Обновление приложений "на-лету", без простоя:</p>
<div class="ulist">
<ul>
<li>
<p>добавление на сервер новой версии приложения в "закрытом" режиме, пока пользователи продолжают работать со предыдущей</p>
</li>
<li>
<p>тестирование корректности развертывания новой версии</p>
</li>
<li>
<p>"скрытый" перевод на использование новой версии всех пользователей</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p><a href="#servlets-jsp-jstl">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_как_контейнер_сервлетов_управляет_жизненным_циклом_сервлета_когда_и_какие_методы_вызываются">14.6. Как контейнер сервлетов управляет жизненным циклом сервлета, когда и какие методы вызываются?</h3>
<div class="paragraph">
<p>Контейнер сервлетов управляет четырьмя фазами жизненного цикла сервлета:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Загрузка класса сервлета&#8201;&#8212;&#8201;когда контейнер получает запрос для сервлета, то происходит загрузка класса сервлета в память и вызов его конструктора без параметров.</p>
</li>
<li>
<p>Инициализация класса сервлета&#8201;&#8212;&#8201;после того как класс загружен контейнер инициализирует объект <code>ServletConfig</code> для этого сервлета и внедряет его через <code>init()</code> метод. Это и есть место где сервлет класс преобразуется из обычного класса в сервлет.</p>
</li>
<li>
<p>Обработка запросов&#8201;&#8212;&#8201;после инициализации сервлет готов к обработке запросов. Для каждого запроса клиента сервлет контейнер порождает новый поток и вызывает метод <code>service()</code> путем передачи ссылки на объекты ответа и запроса.</p>
</li>
<li>
<p>Удаление - когда контейнер останавливается или останавливается приложение, то контейнер сервлетов уничтожает классы сервлетов путем вызова <code>destroy()</code> метода.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Таким образом, сервлет создаётся при первом обращении к нему и живёт на протяжении всего времени работы приложения (в отличии от объектов классов, которые уничтожаются сборщиком мусора после того, как они уже не используются) и весь жизненный цикл сервлета можно описать как последовательность вызова методов:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>public void init(ServletConfig config)</code>&#8201;&#8212;&#8201;используется контейнером для инициализации сервлета. Вызывается один раз за время жизни сервлета.</p>
</li>
<li>
<p><code>public void service(ServletRequest request, ServletResponse response)</code>&#8201;&#8212;&#8201;вызывается для каждого запроса. Метод не может быть вызван раньше выполнения <code>init()</code> метода.</p>
</li>
<li>
<p><code>public void destroy()</code>&#8201;&#8212;&#8201;вызывается для уничтожения сервлета (один раз за время жизни сервлета).</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a href="#servlets-jsp-jstl">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_что_такое_дескриптор_развертывания">14.7. Что такое <em>«дескриптор развертывания»</em>?</h3>
<div class="paragraph">
<p>Дескриптор развертывания&#8201;&#8212;&#8201;это конфигурационный файл артефакта, который будет развернут в контейнере сервлетов. В спецификации Java Platform, Enterprise Edition дескриптор развертывания описывает то, как компонент, модуль или приложение (такое, как веб-приложение или приложение предприятия) должно быть развернуто.</p>
</div>
<div class="paragraph">
<p>Этот конфигурационный файл указывает параметры развертывания для модуля или приложения с определенными настройками, параметры безопасности и описывает конкретные требования к конфигурации. Для синтаксиса файлов дескриптора развертывания используется язык XML.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="xml"><span class="cp">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;</span>
<span class="nt">&lt;web-app</span> <span class="na">xmlns=</span><span class="s">"http://java.sun.com/xml/ns/j2ee"</span>
    <span class="na">xmlns:xsi=</span><span class="s">"http://www.w3.org/2001/XMLSchema-instance"</span>
    <span class="na">xsi:schemaLocation=</span><span class="s">"http://java.sun.com/xml/ns/j2ee http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd"</span>
    <span class="na">version=</span><span class="s">"2.4"</span><span class="nt">&gt;</span>

    <span class="nt">&lt;display-name&gt;</span>Display name.<span class="nt">&lt;/display-name&gt;</span>
    <span class="nt">&lt;description&gt;</span>Description text.<span class="nt">&lt;/description&gt;</span>

    <span class="nt">&lt;servlet&gt;</span>
        <span class="nt">&lt;servlet-name&gt;</span>ExampleServlet<span class="nt">&lt;/servlet-name&gt;</span>
        <span class="nt">&lt;servlet-class&gt;</span>xyz.company.ExampleServlet<span class="nt">&lt;/servlet-class&gt;</span>
        <span class="nt">&lt;load-on-startup&gt;</span>1<span class="nt">&lt;/load-on-startup&gt;</span>
        <span class="nt">&lt;init-param&gt;</span>
            <span class="nt">&lt;param-name&gt;</span>configuration<span class="nt">&lt;/param-name&gt;</span>
            <span class="nt">&lt;param-value&gt;</span>default<span class="nt">&lt;/param-value&gt;</span>
        <span class="nt">&lt;/init-param&gt;</span>
    <span class="nt">&lt;/servlet&gt;</span>

    <span class="nt">&lt;servlet-mapping&gt;</span>
        <span class="nt">&lt;servlet-name&gt;</span>ExampleServlet<span class="nt">&lt;/servlet-name&gt;</span>
        <span class="nt">&lt;url-pattern&gt;</span>/example<span class="nt">&lt;/url-pattern&gt;</span>
    <span class="nt">&lt;/servlet-mapping&gt;</span>

    <span class="nt">&lt;servlet&gt;</span>
        <span class="nt">&lt;servlet-name&gt;</span>ExampleJSP<span class="nt">&lt;/servlet-name&gt;</span>
        <span class="nt">&lt;jsp-file&gt;</span>/sample/Example.jsp<span class="nt">&lt;/jsp-file&gt;</span>
    <span class="nt">&lt;/servlet&gt;</span>

    <span class="nt">&lt;context-param&gt;</span>
        <span class="nt">&lt;param-name&gt;</span>myParam<span class="nt">&lt;/param-name&gt;</span>
        <span class="nt">&lt;param-value&gt;</span>the value<span class="nt">&lt;/param-value&gt;</span>
    <span class="nt">&lt;/context-param&gt;</span>
<span class="nt">&lt;/web-app&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Для веб-приложений дескриптор развертывания должен называться <code>web.xml</code> и находиться в директории <code>WEB-INF</code>, в корне веб-приложения. Этот файл является стандартным дескриптором развертывания, определенным в спецификации. Также есть и другие типы дескрипторов, такие, как файл дескриптора развертывания <code>sun-web.xml</code>, содержащий специфичные для <em>Sun GlassFish Enterprise Server</em> данные для развертывания именно для этого сервера приложений или файл <code>application.xml</code> в директории <code>META-INF</code> для приложений <em>J2EE</em>.</p>
</div>
<div class="paragraph">
<p><a href="#servlets-jsp-jstl">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_какие_действия_необходимо_проделать_при_создании_сервлетов">14.8. Какие действия необходимо проделать при создании сервлетов?</h3>
<div class="paragraph">
<p>Чтобы создать сервлет <code>ExampleServlet</code>, необходимо описать его в дескрипторе развёртывания:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="xml"><span class="nt">&lt;servlet-mapping&gt;</span>
    <span class="nt">&lt;servlet-name&gt;</span>ExampleServlet<span class="nt">&lt;/servlet-name&gt;</span>
    <span class="nt">&lt;url-pattern&gt;</span>/example<span class="nt">&lt;/url-pattern&gt;</span>
<span class="nt">&lt;/servlet-mapping&gt;</span>
<span class="nt">&lt;servlet&gt;</span>
    <span class="nt">&lt;servlet-name&gt;</span>ExampleServlet<span class="nt">&lt;/servlet-name&gt;</span>
    <span class="nt">&lt;servlet-class&gt;</span>xyz.company.ExampleServlet<span class="nt">&lt;/servlet-class&gt;</span>
    <span class="nt">&lt;init-param&gt;</span>
        <span class="nt">&lt;param-name&gt;</span>config<span class="nt">&lt;/param-name&gt;</span>
        <span class="nt">&lt;param-value&gt;</span>default<span class="nt">&lt;/param-value&gt;</span>
    <span class="nt">&lt;/init-param&gt;</span>
<span class="nt">&lt;/servlet&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Затем создать класс <code>xyz.company.ExampleServlet</code> путём наследования от <code>HttpServlet</code> и реализовать логику его работы в методе <code>service()</code> или методах <code>doGet()</code>/<code>doPost()</code>.</p>
</div>
<div class="paragraph">
<p><a href="#servlets-jsp-jstl">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_в_каком_случае_требуется_переопределять_метод_service">14.9. В каком случае требуется переопределять метод <code>service()</code>?</h3>
<div class="paragraph">
<p>Метод <code>service()</code> переопределяется, когда необходимо, чтобы сервлет обрабатывал все запросы (и <code>GET</code>, и <code>POST</code>) в одном методе.</p>
</div>
<div class="paragraph">
<p>Когда контейнер сервлетов получает запрос клиента, то происходит вызов метода <code>service()</code>, который в зависимости от поступившего запроса вызывает или метод <code>doGet()</code> или метод <code>doPost()</code>.</p>
</div>
<div class="paragraph">
<p><a href="#servlets-jsp-jstl">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_есть_ли_смысл_определять_для_сервлета_конструктор_каким_образом_лучше_инициализировать_данные">14.10. Есть ли смысл определять для сервлета конструктор? Каким образом лучше инициализировать данные?</h3>
<div class="paragraph">
<p>Большого смысла определять для сервлета конструктор нет, т.к. инициализировать данные лучше не в конструкторе, а переопределив метод <code>init()</code>, в котором имеется возможность доступа к параметрам инициализации сервлета через использование объекта <code>ServletConfig</code>.</p>
</div>
<div class="paragraph">
<p><a href="#servlets-jsp-jstl">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_почему_необходимо_переопределить_только_init_метод_без_аргументов">14.11. Почему необходимо переопределить только <code>init()</code> метод без аргументов?</h3>
<div class="paragraph">
<p>Метод <code>init()</code> переопределяется, если необходимо инициализировать какие-то данные до того как сервлет начнет обрабатывать запросы.</p>
</div>
<div class="paragraph">
<p>При переопределении метода <code>init(ServletConfig config)</code>, первым должен быть вызван метод <code>super(config)</code>, который обеспечит вызов метода <code>init(ServletConfig config)</code> суперкласса. <code>GenericServlet</code> предоставляет другой метод <code>init()</code> без параметров, который будет вызываться в конце метода <code>init(ServletConfig config)</code>.</p>
</div>
<div class="paragraph">
<p>Необходимо использовать переопределенный метод <code>init()</code> без параметров для инициализации данных во избежание каких-либо проблем, например ошибку, когда вызов <code>super()</code> не указан в переопределенном <code>init(ServletConfig config)</code>.</p>
</div>
<div class="paragraph">
<p><a href="#servlets-jsp-jstl">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_какие_наиболее_распространенные_задачи_выполняются_в_контейнере_сервлетов">14.12. Какие наиболее распространенные задачи выполняются в контейнере сервлетов?</h3>
<div class="ulist">
<ul>
<li>
<p>Поддержка обмена данными. Контейнер сервлетов предоставляет легкий способ обмена данными между веб клиентом (браузером) и сервлетом. Благодаря контейнеру нет необходимости создавать слушателя сокета на сервере для отслеживания запросов от клиента, а также разбирать запрос и генерировать ответ. Все эти важные и комплексные задачи решаются с помощью контейнера и разработчик может сосредоточиться на бизнес логике приложения.</p>
</li>
<li>
<p>Управление жизненным циклом сервлетов и ресурсов. Начиная от загрузки сервлета в память, инициализации, внедрения методов и заканчивая уничтожением сервлета. Контейнер так же предоставляет дополнительные утилиты, например JNDI, для управления пулом ресурсов.</p>
</li>
<li>
<p>Поддержка многопоточности. Контейнер самостоятельно создает новую нить для каждого запроса и предоставляет ей запрос и ответ для обработки. Таким образом сервлет не инициализируется заново для каждого запроса и тем самым сохраняет память и уменьшает время до обработки запроса.</p>
</li>
<li>
<p>Поддержка JSP. JSP классы не похожи на стандартные классы джавы, но контейнер сервлетов преобразует каждую JSP в сервлет и далее управляется контейнером как обычным сервлетом.</p>
</li>
<li>
<p>Различные задачи. Контейнер сервлетов управляет пулом ресурсов, памятью приложения, сборщиком мусора. Предоставляются возможности настройки безопасности и многое другое.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a href="#servlets-jsp-jstl">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_что_вы_знаете_о_сервлетных_фильтрах">14.13. Что вы знаете о <em>сервлетных фильтрах</em>?</h3>
<div class="paragraph">
<p><strong>Сервлетный фильтр</strong> - это Java-код, пригодный для повторного использования и позволяющий преобразовать содержание HTTP-запросов, HTTP-ответов и информацию, содержащуюся в заголовках HTML. Сервлетный фильтр занимается предварительной обработкой запроса, прежде чем тот попадает в сервлет, и/или последующей обработкой ответа, исходящего из сервлета.</p>
</div>
<div class="paragraph">
<p>Сервлетные фильтры могут:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>перехватывать инициацию сервлета прежде, чем сервлет будет инициирован;</p>
</li>
<li>
<p>определить содержание запроса прежде, чем сервлет будет инициирован;</p>
</li>
<li>
<p>модифицировать заголовки и данные запроса, в которые упаковывается поступающий запрос;</p>
</li>
<li>
<p>модифицировать заголовки и данные ответа, в которые упаковывается получаемый ответ;</p>
</li>
<li>
<p>перехватывать инициацию сервлета после обращения к сервлету.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Сервлетный фильтр может быть конфигурирован так, что он будет работать с одним сервлетом или группой сервлетов. Основой для формирования фильтров служит интерфейс <code>javax.servlet.Filter</code>, который реализует три метода:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>void init(FilterConfig config) throws ServletException</code>;</p>
</li>
<li>
<p><code>void destroy()</code>;</p>
</li>
<li>
<p><code>void doFilter(ServletRequest request, ServletResponse response, FilterChain chain) throws IOException, ServletException</code>;</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Метод <code>init()</code> вызывается прежде, чем фильтр начинает работать,и настраивает конфигурационный объект фильтра. Метод <code>doFilter()</code> выполняет непосредственно работу фильтра. Таким образом, сервер вызывает <code>init()</code> один раз, чтобы запустить фильтр в работу, а затем вызывает <code>doFilter()</code> столько раз, сколько запросов будет сделано непосредственно к данному фильтру. После того, как фильтр заканчивает свою работу, вызывается метод <code>destroy()</code>.</p>
</div>
<div class="paragraph">
<p>Интерфейс <code>FilterConfig</code> содержит метод для получения имени фильтра, его параметров инициации и контекста активного в данный момент сервлета. С помощью своего метода <code>doFilter()</code> каждый фильтр получает текущий запрос <code>request</code> и ответ <code>response</code>, а также <code>FilterChain</code>, содержащий список фильтров, предназначенных для обработки. В <code>doFilter()</code> фильтр может делать с запросом и ответом всё, что ему захочется - собирать данные или упаковывать объекты для придания им нового поведения. Затем фильтр вызывает <code>chain.doFilter()</code>, чтобы передать управление следующему фильтру. После возвращения этого вызова фильтр может по окончании работы своего метода <code>doFilter()</code> выполнить дополнительную работу над полученным ответом. К примеру, сохранить регистрационную информацию об этом ответе.</p>
</div>
<div class="paragraph">
<p>После того, как класс-фильтр откомпилирован, его необходимо установить в контейнер и <em>«приписать» (map)</em> к одному или нескольким сервлетам. Объявление и подключение фильтра отмечается в дескрипторе развёртывания <code>web.xml</code> внутри элементов <code>&lt;filter&gt;</code> и <code>&lt;filter-mapping&gt;</code>. Для подключение фильтра к сервлету необходимо использовать вложенные элементы <code>&lt;filter-name&gt;</code> и <code>&lt;servlet-name&gt;</code>.</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>Объявление класс-фильтра <code>FilterConnect</code> с именем <code>FilterName</code>:</p>
</div>
</blockquote>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="xml">  <span class="nt">&lt;filter&gt;</span>
        <span class="nt">&lt;filter-name&gt;</span>FilterName<span class="nt">&lt;/filter-name&gt;</span>
        <span class="nt">&lt;filter-class&gt;</span>FilterConnect<span class="nt">&lt;/filter-class&gt;</span>
        <span class="nt">&lt;init-param&gt;</span>
                <span class="c">&lt;!--- фильтр имеет параметр инициализации `active`, которому присваивается значение `true`. --&gt;</span>
                <span class="nt">&lt;param-name&gt;</span>active<span class="nt">&lt;/param-name&gt;</span>
                <span class="nt">&lt;param-value&gt;</span>true<span class="nt">&lt;/param-true&gt;</span>
        <span class="nt">&lt;/init-param&gt;</span>
  <span class="nt">&lt;/filter&gt;</span></code></pre>
</div>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>Подключение фильтра <code>FilterName</code> к сервлету <code>ServletName</code>:</p>
</div>
</blockquote>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="xml">  <span class="nt">&lt;filter-mapping&gt;</span>
        <span class="nt">&lt;filter-name&gt;</span>FilterName<span class="nt">&lt;/filter-name&gt;</span>
        <span class="nt">&lt;servlet-name&gt;</span>ServletName<span class="nt">&lt;/servlet-name&gt;</span>
  <span class="nt">&lt;/filter-mapping&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Для связи фильтра со страницами HTML или группой сервлетов необходимо использовать тег <code>&lt;url-pattern&gt;</code>:</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>Подключение фильтра <code>FilterName</code> ко всем вызовам .html страниц</p>
</div>
</blockquote>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="xml">  <span class="nt">&lt;filter-mapping&gt;</span>
          <span class="nt">&lt;filter-name&gt;</span>FilterName<span class="nt">&lt;/filter-name&gt;</span>
          <span class="nt">&lt;url-pattern&gt;</span>*.html<span class="nt">&lt;/url-pattern&gt;</span>
  <span class="nt">&lt;/filter-mapping&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Порядок, в котором контейнер строит цепочку фильтров для запроса определяется следующими правилами:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>цепочка, определяемая <code>&lt;url-pattern&gt;</code>, выстраивается в том порядке, в котором встречаются соответствующие описания фильтров в <code>web.xml</code>;</p>
</li>
<li>
<p>последовательность сервлетов, определенных с помощью <code>&lt;servlet-name&gt;</code>, также выполняется в той последовательности, в какой эти элементы встречаются в дескрипторе развёртывания <code>web.xml</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a href="#servlets-jsp-jstl">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_зачем_в_сервлетах_используются_различные_listener">14.14. Зачем в сервлетах используются различные <em>listener</em>?</h3>
<div class="paragraph">
<p><strong>Listener (слушатель)</strong> работает как триггер, выполняя определённые действия при наступлении какого-либо события в жизненном цикле сервлета.</p>
</div>
<div class="paragraph">
<p>Слушатели, разделённые по области видимости (scope):</p>
</div>
<div class="ulist">
<ul>
<li>
<p><em>Request</em>:</p>
<div class="ulist">
<ul>
<li>
<p><code>ServletRequestListener</code> используется для того, чтобы поймать момент создания и уничтожения запроса;</p>
</li>
<li>
<p><code>ServletRequestAttributeListener</code> используется для прослушивания событий, происходящих с атрибутами запроса.</p>
</li>
</ul>
</div>
</li>
<li>
<p><em>Context</em>:</p>
<div class="ulist">
<ul>
<li>
<p><code>ServletContextListener</code> позволяет поймать момент, когда контекст инициализируется либо уничтожается;</p>
</li>
<li>
<p><code>ServletContextAttributeListener</code> используется для прослушивании событий, происходящих с атрибутами в контексте.</p>
</li>
</ul>
</div>
</li>
<li>
<p><em>Session</em>:</p>
<div class="ulist">
<ul>
<li>
<p><code>HttpSessionListener</code> позволяет поймать момент создания и уничтожения сессии;</p>
</li>
<li>
<p><code>HttpSessionAttributeListener</code> используется при прослушивании событий происходящих с атрибутами в сессии;</p>
</li>
<li>
<p><code>HttpSessionActivationListener</code> используется в случае, если происходит миграция сессии между различными JVM в распределённых приложениях;</p>
</li>
<li>
<p><code>HttpSessionBindingListener</code> так же используется для прослушивания событий, происходящих с атрибутами в сессии. Разница между <code>HttpSessionAttributeListener</code> и <code>HttpSessionBindingListener</code> слушателями: первый декларируется в <code>web.xml</code>; экземпляр класса создается контейнером автоматически в единственном числе и применяется ко всем сессиям; второй: экземпляр класса должен быть создан и закреплён за определённой сессией «вручную», количество экземпляров также регулируется самостоятельно.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>Подключение слушателей:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="xml"><span class="nt">&lt;web-app&gt;</span>
    ...
    <span class="nt">&lt;listener&gt;</span>
        <span class="nt">&lt;listener-class&gt;</span>xyz.company.ExampleListener<span class="nt">&lt;/listener-class&gt;</span>
    <span class="nt">&lt;/listener&gt;</span>
    ...
<span class="nt">&lt;/web-app&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><code>HttpSessionBindingListener</code> подключается в качестве атрибута непосредственно в сессию, т.е., чтобы его подключить необходимо:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>создать экземпляр класса, реализующего этот интерфейс;</p>
</li>
<li>
<p>положить созданный экземпляр в сессию при помощи <code>setAttribute(String, Object)</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a href="#servlets-jsp-jstl">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_когда_стоит_использовать_фильтры_сервлетов_а_когда_слушателей">14.15. Когда стоит использовать фильтры сервлетов, а когда слушателей?</h3>
<div class="paragraph">
<p>Следует использовать фильтры, если необходимо обрабатывать входящие или исходящие данные (например: для аутентификации, преобразования формата, компрессии, шифрования и т.д.), в случае, когда необходимо реагировать на события - лучше применять слушателей.</p>
</div>
<div class="paragraph">
<p><a href="#servlets-jsp-jstl">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_как_реализовать_запуск_сервлета_одновременно_с_запуском_приложения">14.16. Как реализовать запуск сервлета одновременно с запуском приложения?</h3>
<div class="paragraph">
<p>Контейнер сервлетов обычно загружает сервлет по первому запросу клиента.</p>
</div>
<div class="paragraph">
<p>Если необходимо загрузить сервлет прямо на старте приложения (например если загрузка сервлета происходит длительное время) следует использовать элемент <code>&lt;load-on-startup&gt;</code> в дескрипторе или аннотацию <code>@loadOnStartup</code> в коде сервлета, что будет указывать на необходимость загрузки сервлета при запуске.</p>
</div>
<div class="paragraph">
<p>Если целочисленное значение этого параметра отрицательно, то сервлет будет загружен при запросе клиента. В противном случае - загрузится на старте приложения, при этом, чем число меньше, тем раньше в очереди на загрузку он окажется.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="xml"><span class="nt">&lt;servlet&gt;</span>
    <span class="nt">&lt;servlet-name&gt;</span>ExampleServlet<span class="nt">&lt;/servlet-name&gt;</span>
    <span class="nt">&lt;servlet-class&gt;</span>xyz.company.ExampleServlet<span class="nt">&lt;/servlet-class&gt;</span>
    <span class="nt">&lt;load-on-startup&gt;</span>1<span class="nt">&lt;/load-on-startup&gt;</span>
<span class="nt">&lt;/servlet&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><a href="#servlets-jsp-jstl">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_как_обработать_в_приложении_исключения_выброшенные_другим_сервлетом">14.17. Как обработать в приложении исключения, выброшенные другим сервлетом?</h3>
<div class="paragraph">
<p>Когда приложение выбрасывет исключение контейнер сервлетов обрабатывает его и создаёт ответ в формате HTML. Это аналогично тому, что происходит при кодах ошибок вроде 404, 403 и т.д.</p>
</div>
<div class="paragraph">
<p>В дополнении к этому существует возможность написания собственных сервлетов для обработки исключений и ошибок с указанием их в дескрипторе развертывания:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="xml"><span class="nt">&lt;error-page&gt;</span>
    <span class="nt">&lt;error-code&gt;</span>404<span class="nt">&lt;/error-code&gt;</span>
    <span class="nt">&lt;location&gt;</span>/AppExceptionHandler<span class="nt">&lt;/location&gt;</span>
<span class="nt">&lt;/error-page&gt;</span>

<span class="nt">&lt;error-page&gt;</span>
    <span class="nt">&lt;exception-type&gt;</span>javax.servlet.ServletException<span class="nt">&lt;/exception-type&gt;</span>
    <span class="nt">&lt;location&gt;</span>/AppExceptionHandler<span class="nt">&lt;/location&gt;</span>
<span class="nt">&lt;/error-page&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Основная задача таких сервлетов - обработать ошибку/исключение и сформировать понятный ответ пользователю. Например, предоставить ссылку на главную страницу или же описание ошибки.</p>
</div>
<div class="paragraph">
<p><a href="#servlets-jsp-jstl">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_что_представляет_собой_servletconfig">14.18. Что представляет собой <code>ServletConfig</code>?</h3>
<div class="paragraph">
<p>Интерфейс <code>javax.servlet.ServletConfig</code> используется для передачи сервлету конфигурационной информации. Каждый сервлет имеет свой собственный экземпляр объекта <code>ServletConfig</code>, создаваемый контейнером сервлетов.</p>
</div>
<div class="paragraph">
<p>Для установки параметров конфигурации используются параметры <code>init-param</code> в <code>web.xml</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="xml"><span class="nt">&lt;servlet&gt;</span>
    <span class="nt">&lt;servlet-name&gt;</span>ExampleServlet<span class="nt">&lt;/servlet-name&gt;</span>
    <span class="nt">&lt;servlet-class&gt;</span>xyz.company.ExampleServlet<span class="nt">&lt;/servlet-class&gt;</span>
    <span class="nt">&lt;init-param&gt;</span>
        <span class="nt">&lt;param-name&gt;</span>exampleParameter<span class="nt">&lt;/param-name&gt;</span>
        <span class="nt">&lt;param-value&gt;</span>parameterValue<span class="nt">&lt;/param-value&gt;</span>
    <span class="nt">&lt;/init-param&gt;</span>
<span class="nt">&lt;/servlet&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>или аннотации <code>@WebInitParam</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="nd">@WebServlet</span><span class="o">(</span>
    <span class="n">urlPatterns</span> <span class="o">=</span> <span class="s">"/example"</span><span class="o">,</span>
    <span class="n">initParams</span> <span class="o">=</span> <span class="o">{</span>
        <span class="nd">@WebInitParam</span><span class="o">(</span><span class="n">name</span> <span class="o">=</span> <span class="s">"exampleParameter"</span><span class="o">,</span> <span class="n">value</span> <span class="o">=</span> <span class="s">"parameterValue"</span><span class="o">)</span>
    <span class="o">}</span>
<span class="o">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">ExampleServlet</span> <span class="kd">extends</span> <span class="nc">HttpServlet</span> <span class="o">{</span>
    <span class="c1">//...</span>
<span class="o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Для получения <code>ServletConfig</code> сервлета используется метод <code>getServletConfig()</code>.</p>
</div>
<div class="paragraph">
<p><a href="#servlets-jsp-jstl">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_что_представляет_собой_servletcontext">14.19. Что представляет собой <code>ServletContext</code>?</h3>
<div class="paragraph">
<p>Уникальный (в рамках веб-приложения) объект <code>ServletContext</code> реализует интерфейс <code>javax.servlet.ServletContext</code> и предоставляет сервлетам доступ к параметрам этого веб-приложения.  Для предоставления доступа используется элемент <code>&lt;context-param&gt;</code> в <code>web.xml</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="xml"><span class="nt">&lt;web-app&gt;</span>
    ...
    <span class="nt">&lt;context-param&gt;</span>
        <span class="nt">&lt;param-name&gt;</span>exampleParameter<span class="nt">&lt;/param-name&gt;</span>
        <span class="nt">&lt;param-value&gt;</span>parameterValue<span class="nt">&lt;/param-value&gt;</span>
    <span class="nt">&lt;/context-param&gt;</span>
    ...
<span class="nt">&lt;/web-app&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Объект <code>ServletContext</code> можно получить с помощью метода <code>getServletContext()</code> у интерфейса <code>ServletConfig</code>. Контейнеры сервлетов так же могут предоставлять контекстные объекты, уникальные для группы сервлетов. Каждая из групп будет связана со своим набором URL-путей хоста. В спецификации Servlet 3 <code>ServletContext</code> был расширен и теперь предоставляет возможности программного добавления слушателей и фильтров в приложение. Так же у этого интерфейса имеется множество полезных методов таких как 	<code>getServerInfo()</code>, <code>getMimeType()</code>, <code>getResourceAsStream()</code> и т.д.</p>
</div>
<div class="paragraph">
<p><a href="#servlets-jsp-jstl">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_в_чем_отличия_servletcontext_и_servletconfig">14.20. В чем отличия <code>ServletContext</code> и <code>ServletConfig</code>?</h3>
<div class="ulist">
<ul>
<li>
<p><code>ServletConfig</code> уникален для сервлета, а <code>ServletContext</code> - для приложения;</p>
</li>
<li>
<p><code>ServletConfig</code> используется для предоставления параметров инициализации конкретному сервлету, а <code>ServletContext</code> для предоставления параметров инициализации для всех сервлетов приложения;</p>
</li>
<li>
<p>для <code>ServletConfig</code> возможности модифицировать атрибуты отсутствуют, атрибуты в объекте <code>ServletContext</code> можно изменять.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a href="#servlets-jsp-jstl">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_для_чего_нужен_интерфейс_servletresponse">14.21. Для чего нужен интерфейс <code>ServletResponse</code>?</h3>
<div class="paragraph">
<p>Интерфейс <code>ServletResponse</code> используется для отправки данных клиенту. Все методы данного инструмента служат именно этой цели:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>String getCharacterEncoding()</code> - возвращает MIME тип кодировки (к примеру - UTF8), в которой будет выдаваться информация;</p>
</li>
<li>
<p><code>void setLocale(Locale locale)</code>/<code>Locale getLocale()</code> - указывают на язык используемый в документе;</p>
</li>
<li>
<p><code>ServletOutputStream getOutputStream()</code>/<code>PrintWriter getWriter()</code> - возвращают потоки вывода данных;</p>
</li>
<li>
<p><code>void setContentLength(int len)</code> - устанавливает значение поля HTTP заголовка <em>Content-Length</em>;</p>
</li>
<li>
<p><code>void setContentType(String type)</code> - устанавливает значение поля HTTP заголовка <em>Content-Type</em>.</p>
</li>
<li>
<p><code>void reset()</code> - позволяет сбросить HTTP заголовок к значениям по-умолчанию, если он ещё не был отправлен</p>
</li>
<li>
<p>и др.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a href="#servlets-jsp-jstl">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_для_чего_нужен_интерфейс_servletrequest">14.22. Для чего нужен интерфейс <code>ServletRequest</code>?</h3>
<div class="paragraph">
<p>Интерфейс <code>ServletRequest</code> используется для получения параметров соединения, запроса, а также заголовков, входящего потока данных и т.д.</p>
</div>
<div class="paragraph">
<p><a href="#servlets-jsp-jstl">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_что_такое_request_dispatcher">14.23. Что такое <code>Request Dispatcher</code>?</h3>
<div class="paragraph">
<p>Интерфейс <code>RequestDispatcher</code> используется для передачи запроса другому ресурсу, при этом существует возможность добавления данных, полученных из этого ресурса к собственному ответу сервлета. Так же этот интерфейс используется для внутренней коммуникации между сервлетами в одном контексте.</p>
</div>
<div class="paragraph">
<p>В интерфейсе объявлено два метода:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>void forward(ServletRequest var1, ServletResponse var2)</code>&#8201;&#8212;&#8201;передает запрос из сервлета к другому ресурсу (сервлету, JSP или HTML файлу) на сервере.</p>
</li>
<li>
<p><code>void include(ServletRequest var1, ServletResponse var2)</code>&#8201;&#8212;&#8201;включает контент ресурса (сервлет, JSP или HTML страница) в ответ.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Доступ к интерфейсу можно получить с помощью метода интерфейса <code>ServletContext</code> - <code>RequestDispatcher getRequestDispatcher(String path)</code>, где путь начинающийся с <code>/</code>, интерпретируется относительно текущего корневого пути контекста.</p>
</div>
<div class="paragraph">
<p><a href="#servlets-jsp-jstl">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_как_из_одного_сервлета_вызвать_другой_сервлет">14.24. Как из одного сервлета вызвать другой сервлет?</h3>
<div class="paragraph">
<p>Для вызова сервлета из того же приложения необходимо использовать механизм внутренней коммуникации сервлетов (<em>inter-servlet communication mechanisms</em>) через вызовы методов <code>RequestDispatcher</code>:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>forward()</code> - передаёт выполнение запроса в другой сервлет;</p>
</li>
<li>
<p><code>include()</code> - предоставляет возможность включить результат работы другого сервлета в возвращаемый ответ.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Если необходимо вызывать сервлет принадлежащий другому приложению, то использовать <code>RequestDispatcher</code> уже не получится, т.к. он определен только для текущего приложения. Для подобных целей необходимо использовать метод <code>ServletResponse</code> - <code>sendRedirect()</code> которому предоставляется полный URL другого сервлета. Для передачи данных между сервлетами можно использовать <code>cookies</code>.</p>
</div>
<div class="paragraph">
<p><a href="#servlets-jsp-jstl">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_чем_отличается_sendredirect_от_forward">14.25. Чем отличается <code>sendRedirect()</code> от <code>forward()</code>?</h3>
<div class="paragraph">
<p><strong><code>forward()</code></strong>:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Выполняется на стороне сервера;</p>
</li>
<li>
<p>Запрос перенаправляется на другой ресурс в пределах того же сервера;</p>
</li>
<li>
<p>Не зависит от протокола клиентского запроса, так как обеспечивается контейнером сервлетов;</p>
</li>
<li>
<p>Нельзя применять для внедрения сервлета в другой контекст;</p>
</li>
<li>
<p>Клиент не знает о фактически обрабатываемом ресурсе и URL в строке остается прежним;</p>
</li>
<li>
<p>Выполняется быстрее метода <code>sendRedirect()</code>;</p>
</li>
<li>
<p>Определён в интерфейсе <code>RequestDispatcher</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong><code>sendRedirect()</code></strong>:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Выполняется на стороне клиента;</p>
</li>
<li>
<p>Клиенту возвращается ответ <code>302 (redirect)</code> и запрос перенаправляется на другой сервер;</p>
</li>
<li>
<p>Может использоваться только с клиентами HTTP;</p>
</li>
<li>
<p>Разрешается применять для внедрения сервлета в другой контекст;</p>
</li>
<li>
<p>URL адрес изменяется на адрес нового ресурса;</p>
</li>
<li>
<p>Медленнее <code>forward()</code> т.к. требует создания нового запроса;</p>
</li>
<li>
<p>Определён в интерфейсе <code>HttpServletResponse</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a href="#servlets-jsp-jstl">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_для_чего_используются_атрибуты_сервлетов_и_как_происходит_работа_с_ними">14.26. Для чего используются атрибуты сервлетов и как происходит работа с ними?</h3>
<div class="paragraph">
<p>Атрибуты сервлетов используются для внутренней коммуникации сервлетов.</p>
</div>
<div class="paragraph">
<p>В веб-приложении существует возможность работы с атрибутами используя методы <code>setAttribute()</code>, <code>getAttribute()</code>, <code>removeAttribute()</code>, <code>getAttributeNames()</code>, которые предоставлены интерфейсами <code>ServletRequest</code>, <code>HttpSession</code> и <code>ServletContext</code> (для областей видимости <em>request</em>, <em>session</em>, <em>context</em> соответственно).</p>
</div>
<div class="paragraph">
<p><a href="#servlets-jsp-jstl">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_каким_образом_можно_допустить_в_сервлете_deadlock">14.27. Каким образом можно допустить в сервлете deadlock?</h3>
<div class="paragraph">
<p>Можно получить блокировку, например, допустив циклические вызовы метода <code>doPost()</code> в методе <code>doGet()</code> и метода <code>doGet()</code> в методе <code>doPost()</code>.</p>
</div>
<div class="paragraph">
<p><a href="#servlets-jsp-jstl">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_как_получить_реальное_расположение_сервлета_на_сервере">14.28. Как получить реальное расположение сервлета на сервере?</h3>
<div class="paragraph">
<p>Реальный путь к расположению сервлета на сервере можно получить из объекта <code>ServletContext</code>:</p>
</div>
<div class="paragraph">
<p><code>getServletContext().getRealPath(request.getServletPath())</code>.</p>
</div>
<div class="paragraph">
<p><a href="#servlets-jsp-jstl">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_как_получить_информацию_о_сервере_из_сервлета">14.29. Как получить информацию о сервере из сервлета?</h3>
<div class="paragraph">
<p>Информацию о сервере можно получить из объекта <code>ServletContext</code>:</p>
</div>
<div class="paragraph">
<p><code>getServletContext().getServerInfo()</code>.</p>
</div>
<div class="paragraph">
<p><a href="#servlets-jsp-jstl">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_как_получить_ip_адрес_клиента_на_сервере">14.30. Как получить IP адрес клиента на сервере?</h3>
<div class="paragraph">
<p>IP адрес клиента можно получить вызвав <code>request.getRemoteAddr()</code>.</p>
</div>
<div class="paragraph">
<p><a href="#servlets-jsp-jstl">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_какие_классы_обертки_для_сервлетов_вы_знаете">14.31. Какие классы-обертки для сервлетов вы знаете?</h3>
<div class="paragraph">
<p>Собственные обработчики <code>ServletRequest</code> и <code>ServletResponse</code> можно реализовать, добавив новые или переопределив существующие методы у классов-обёрток <code>ServletRequestWrapper</code> (<code>HttpServletRequestWrapper</code>) и <code>ServletResponseWrapper</code> (<code>HttpServletRequestWrapper</code>).</p>
</div>
<div class="paragraph">
<p><a href="#servlets-jsp-jstl">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_в_чем_отличия_genericservlet_и_httpservlet">14.32. В чем отличия <code>GenericServlet</code> и <code>HttpServlet</code>?</h3>
<div class="paragraph">
<p>Абстрактный класс <code>GenericServlet</code>&#8201;&#8212;&#8201;независимая от используемого протокола реализация интерфейса <code>Servlet</code>, а абстрактный класс <code>HttpServlet</code> в свою очередь расширяет <code>GenericServlet</code> для протокола HTTP..</p>
</div>
<div class="paragraph">
<p><a href="#servlets-jsp-jstl">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_почему_httpservlet_класс_объявлен_как_абстрактный">14.33. Почему <code>HttpServlet</code> класс объявлен как абстрактный?</h3>
<div class="paragraph">
<p>Класс <code>HTTPServlet</code> предоставляет лишь общую реализацию сервлета для HTTP протокола. Реализация ключевых методов <code>doGet()</code> и <code>doPost()</code>, содержащих основную бизнес-логику перекладывается на разработчика и по умолчанию возвращает <code>HTTP 405 Method Not Implemented error</code>.</p>
</div>
<div class="paragraph">
<p><a href="#servlets-jsp-jstl">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_какие_основные_методы_присутствуют_в_классе_httpservlet">14.34. Какие основные методы присутствуют в классе <code>HttpServlet</code>?</h3>
<div class="ulist">
<ul>
<li>
<p><code>doGet()</code> - для обработки HTTP запросов <code>GET</code>;</p>
</li>
<li>
<p><code>doPost()</code> - для обработки HTTP запросов <code>POST</code>;</p>
</li>
<li>
<p><code>doPut()</code> - для обработки HTTP запросов <code>PUT</code>;</p>
</li>
<li>
<p><code>doDelete()</code> - для обработки HTTP запросов <code>DELETE</code>;</p>
</li>
<li>
<p><code>doHead()</code> - для обработки HTTP запросов <code>HEAD</code>;</p>
</li>
<li>
<p><code>doOptions()</code> - для обработки HTTP запросов <code>OPTIONS</code>;</p>
</li>
<li>
<p><code>doTrace()</code> - для обработки HTTP запросов <code>TRACE</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a href="#servlets-jsp-jstl">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_стоит_ли_волноваться_о_многопоточной_безопасности_работая_с_сервлетами">14.35. Стоит ли волноваться о многопоточной безопасности работая с сервлетами?</h3>
<div class="paragraph">
<p>Методы <code>init()</code> и <code>destroy()</code> вызываются один раз за жизненный цикл сервлета&#8201;&#8212;&#8201;поэтому по поводу них беспокоиться не стоит.</p>
</div>
<div class="paragraph">
<p>Методы <code>doGet()</code>, <code>doPost()</code>, <code>service()</code> вызываются на каждый запрос клиента и т.к. сервлеты используют многопоточность, то здесь задумываться о потокобезопасной работе обязательно. При этом правила использования многопоточности остаются теми же: локальные переменные этих методов будут созданы отдельно для каждого потока, а при использовании глобальных разделяемых ресурсов необходимо использовать синхронизацию или другие приёмы многопоточного программирования.</p>
</div>
<div class="paragraph">
<p><a href="#servlets-jsp-jstl">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_какой_метод_http_не_является_неизменяемым">14.36. Какой метод HTTP не является неизменяемым?</h3>
<div class="paragraph">
<p>HTTP метод называется неизменяемым, если он на один и тот же запрос всегда возвращает одинаковый результат. HTTP методы <code>GET</code>, <code>PUT</code>, <code>DELETE</code>, <code>HEAD</code> и <code>OPTIONS</code> являются неизменяемыми, поэтому необходимо реализовывать приложение так, чтобы эти методы возвращали одинаковый результат постоянно. К изменяемым методам относится метод <code>POST</code>, который и используется для реализации чего-либо, что изменяется при каждом запросе.</p>
</div>
<div class="paragraph">
<p>К примеру, для доступа к статической HTML странице используется метод <code>GET</code>, т.к. он всегда возвращает одинаковый результат. При необходимости сохранять какую-либо информацию, например в базе данных, нужно использовать <code>POST</code> метод.</p>
</div>
<div class="paragraph">
<p><a href="#servlets-jsp-jstl">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_какие_есть_методы_отправки_данных_с_клиента_на_сервер">14.37. Какие есть методы отправки данных с клиента на сервер?</h3>
<div class="ulist">
<ul>
<li>
<p><code>GET</code> - используется для запроса содержимого указанного ресурса, изображения или гипертекстового документа. Вместе с запросом могут передаваться дополнительные параметры как часть URI, значения могут выбираться из полей формы или передаваться непосредственно через URL. При этом запросы кэшируются и имеют ограничения на размер. Этот метод является основным методом взаимодействия браузера клиента и веб-сервера.</p>
</li>
<li>
<p><code>POST</code> - используется для передачи пользовательских данных в содержимом HTTP-запроса на сервер. Пользовательские данные упакованы в тело запроса согласно полю заголовка Content-Type и/или включены в URI запроса. При использовании метода POST под URI подразумевается ресурс, который будет обрабатывать запрос.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a href="#servlets-jsp-jstl">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_в_чем_разница_между_методами_get_и_post">14.38. В чем разница между методами <code>GET</code> и <code>POST</code>?</h3>
<div class="ulist">
<ul>
<li>
<p><code>GET</code> передает данные серверу используя URL, тогда как <code>POST</code> передает данные, используя тело HTTP запроса. Длина URL ограничена 1024 символами, это и будет верхним ограничением для данных, которые можно отослать через <code>GET</code>. <code>POST</code> может отправлять гораздо большие объемы данных. Лимит устанавливается web-server и составляет обычно около 2 Mb.</p>
</li>
<li>
<p>Передача данных методом <code>POST</code> более безопасна, чем методом <code>GET</code>, так как секретные данные (например пароль) не отображаются напрямую в web-клиенте пользователя, в отличии от URL, который виден почти всегда. Иногда это преимущество превращается в недостаток - вы не сможете послать данные за кого-то другого.</p>
</li>
<li>
<p><code>GET</code>метод является неизменяемым, тогда как <code>POST</code>&#8201;&#8212;&#8201;изменяемый.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a href="#servlets-jsp-jstl">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_в_чем_разница_между_printwriter_и_servletoutputstream">14.39. В чем разница между <code>PrintWriter</code> и <code>ServletOutputStream</code>?</h3>
<div class="paragraph">
<p><code>PrintWriter</code>&#8201;&#8212;&#8201;класс для работы с символьным потоком, экземпляр которого можно получить через метод <code>ServletResponse</code> <code>getWriter()</code>;</p>
</div>
<div class="paragraph">
<p><code>ServletOutputStream</code>&#8201;&#8212;&#8201;класс для работы байтовым потоком. Для получения его экземпляра используется метод <code>ServletResponse</code> <code>getOutputStream()</code>.</p>
</div>
<div class="paragraph">
<p><a href="#servlets-jsp-jstl">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_можно_ли_одновременно_использовать_в_сервлете_printwriter_и_servletoutputstream">14.40. Можно ли одновременно использовать в сервлете <code>PrintWriter</code> и <code>ServletOutputStream</code>?</h3>
<div class="paragraph">
<p>Так сделать не получится, т.к. при попытке одновременного вызова <code>getWriter()</code> и <code>getOutputStream()</code> будет выброшено исключение <code>java.lang.IllegalStateException</code> с сообщением, что уже был вызван другой метод.</p>
</div>
<div class="paragraph">
<p><a href="#servlets-jsp-jstl">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_расскажите_об_интерфейсе_singlethreadmodel">14.41. Расскажите об интерфейсе <code>SingleThreadModel</code>.</h3>
<div class="paragraph">
<p>Интерфейс <code>SingleThreadModel</code> является маркерным - в нем не объявлен ни один метод, однако, если сервлет реализует этот интерфейс, то метод <code>service()</code> этого сервлета гарантированно не будет одновременно выполняться в двух потоках. Контейнер сервлетов либо синхронизирует обращения к единственному экземпляру, либо обеспечивает поддержку пула экземпляров и перенаправление запроса свободному сервлету.
Другими словами, контейнер гарантирует отсутствие конфликтов при одновременном обращении к переменным или методам экземпляра сервлета. Однако существуют также и другие разделяемые ресурсы, которые даже при использовании этого интерфейса, остаются всё так же доступны обработчикам запросов в других потоках. Т.о. пользы от использования этого интерфейса немного и в спецификации Servlet 2.4 он был объявлен <code>deprecated</code>.</p>
</div>
<div class="paragraph">
<p><a href="#servlets-jsp-jstl">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_что_означает_url_encoding_как_это_осуществить_в_java">14.42. Что означает <em>URL encoding</em>? Как это осуществить в Java?</h3>
<div class="paragraph">
<p><strong>URL Encoding</strong>&#8201;&#8212;&#8201;процесс преобразования данных в форму CGI (Common Gateway Interface), не содержащую пробелов и нестандартных символов, которые заменяются в процессе кодирования на специальные escape-символы. В Java для кодирования строки используется метод <code>java.net.URLEncoder.encode(String str, String unicode)</code>. Обратная операция декодирования возможна через использование метода <code>java.net.URLDecoder.decode(String str, String unicode)</code>.</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p><code>Hello мир!</code> преобразовывается в <code>Hello%20%D0%BC%D0%B8%D1%80!</code>.</p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p><a href="#servlets-jsp-jstl">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_какие_различные_методы_управления_сессией_в_сервлетах_вы_знаете">14.43. Какие различные методы управления сессией в сервлетах вы знаете?</h3>
<div class="paragraph">
<p>При посещении клиентом Web-ресурса и выполнении вариантов запросов, контекстная информация о клиенте не хранится. В протоколе HTTP нет возможностей для сохранения и изменения информации о предыдущих посещениях клиента. Сеанс (сессия)&#8201;&#8212;&#8201;соединение между клиентом и сервером, устанавливаемое на определенное время, за которое клиент может отправить на сервер сколько угодно запросов. Сеанс устанавливается непосредственно между клиентом и Web-сервером. Каждый клиент устанавливает с сервером свой собственный сеанс. Сеансы используются для обеспечения хранения данных во время нескольких запросов Web-страницы или на обработку информации, введенной в пользовательскую форму в результате нескольких HTTP-соединений (например, клиент совершает несколько покупок в интернет-магазине; студент отвечает на несколько тестов в системе дистанционного обучения).</p>
</div>
<div class="paragraph">
<p>Существует несколько способов обеспечения уникального идентификатора сессии:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>User Authentication</strong>&#8201;&#8212;&#8201;Предоставление учетных данных самим пользователем в момент аутентификации. Переданная таким образом информация в дальнейшем используется для поддержания сеанса. Это метод не будет работать, если пользователь вошёл в систему одновременно из нескольких мест.</p>
</li>
<li>
<p><strong>HTML Hidden Field</strong>&#8201;&#8212;&#8201;Присвоение уникального значения скрытому полю HTML страницы, в момент когда пользователь начинает сеанс. Этот метод не может быть использован со ссылками, потому что нуждается в подтверждении формы со скрытым полем каждый раз во время формирования запроса. Кроме того, это не безопасно, т.к. существует возможность простой подмены такого идентификатора.</p>
</li>
<li>
<p><strong>URL Rewriting</strong>&#8201;&#8212;&#8201;Добавление идентификатора сеанса как параметра URL. Достаточно утомительная операция, потому что требует постоянного отслеживания этого идентификатора при каждом запросе или ответе.</p>
</li>
<li>
<p><strong>Cookies</strong>&#8201;&#8212;&#8201;Использование небольших фрагментов данных, отправленных web-сервером и хранимых на устройстве пользователя. Данный метод не будет работать, если клиент отключает использование cookies.</p>
</li>
<li>
<p><strong>Session Management API</strong>&#8201;&#8212;&#8201;Использование специального API для отслеживания сеанса, построенный на основе и на методах, описанных выше и который решает частные проблемы перечисленных способов:</p>
<div class="ulist">
<ul>
<li>
<p>Чаще всего недостаточно просто отслеживать сессию, необходимо ещё и сохранять какие-либо дополнительные данные о ней, которые могут потребоваться при обработке последующих запросов. Осуществление такого поведения требует много дополнительных усилий.</p>
</li>
<li>
<p>Все вышеперечисленные методы не являются универсальными: для каждого из них можно подобрать конкретный сценарий, при котором они не будут работать.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p><a href="#servlets-jsp-jstl">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_что_такое_cookies">14.44. Что такое <em>cookies</em>?</h3>
<div class="paragraph">
<p><strong>Сookies («куки»)</strong>&#8201;&#8212;&#8201;небольшой фрагмент данных, отправленный web-сервером и хранимый на устройстве пользователя. Всякий раз при попытке открыть страницу сайта, web-клиент пересылает соответствующие этому сайту cookies web-серверу в составе HTTP-запроса. Применяется для сохранения данных на стороне пользователя и на практике обычно используется для:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>аутентификации пользователя;</p>
</li>
<li>
<p>хранения персональных предпочтений и настроек пользователя;</p>
</li>
<li>
<p>отслеживания состояния сеанса доступа пользователя;</p>
</li>
<li>
<p>ведения разнообразной статистики.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a href="#servlets-jsp-jstl">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_какие_методы_для_работы_с_cookies_предусмотрены_в_сервлетах">14.45. Какие методы для работы с cookies предусмотрены в сервлетах?</h3>
<div class="paragraph">
<p>Servlet API предоставляет поддержку cookies через класс <code>javax.servlet.http.Cookie</code>:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Для получения массива cookies из запроса необходимо воспользоваться методом <code>HttpServletRequest.getCookies()</code>. Методов для добавления cookies в <code>HttpServletRequest</code> не предусмотрено.</p>
</li>
<li>
<p>Для добавления cookie в ответ используется <code>HttpServletResponse.addCookie(Cookie c)</code>. Метода получения cookies в <code>HttpServletResponse</code> отсутствует.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a href="#servlets-jsp-jstl">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_что_такое_url_rewriting">14.46. Что такое <em>URL Rewriting</em>?</h3>
<div class="paragraph">
<p><strong>URL Rewriting</strong> - специальная перезапись (перекодирование) оригинального URL. Данный механизм может использоваться для управления сессией в сервлетах, когда <em>cookies</em> отключены.</p>
</div>
<div class="paragraph">
<p><a href="#servlets-jsp-jstl">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_зачем_нужны_и_чем_отличаются_методы_encodeurl_и_encoderedirecturl">14.47. Зачем нужны и чем отличаются методы <code>encodeURL()</code> и <code>encodeRedirectURL()</code>?</h3>
<div class="paragraph">
<p><code>HttpServletResponse.encodeURL()</code> предоставляет способ преобразования URL в HTML гиперссылку с преобразованием спецсимволов и пробелов, а так же добавления <em>session id</em> к URL. Такое поведение аналогично <code>java.net.URLEncoder.encode()</code>, но с добавлением дополнительного параметра <code>jsessionid</code> в конец URL.</p>
</div>
<div class="paragraph">
<p>Метод <code>HttpServletResponse.encodeRedirectURL()</code> преобразует URL для последующего использования в методе <code>sendRedirect()</code>.</p>
</div>
<div class="paragraph">
<p>Таким образом для HTML гиперссылок при <em>URL rewriting</em> необходимо использовать <code>encodeURL()</code>, а для URL при перенаправлении - <code>encodeRedirectUrl()</code>.</p>
</div>
<div class="paragraph">
<p><a href="#servlets-jsp-jstl">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_что_такое_сессия">14.48. Что такое <em>«сессия»</em>?</h3>
<div class="paragraph">
<p><strong>Сессия</strong>  - это сеанс связи между клиентом и сервером, устанавливаемый на определенное время. Сеанс устанавливается непосредственно между клиентом и веб-сервером в момент получения первого запроса к веб-приложению. Каждый клиент устанавливает с сервером свой собственный сеанс, который сохраняется до окончания работы с приложением.</p>
</div>
<div class="paragraph">
<p><a href="#servlets-jsp-jstl">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_как_уведомить_объект_в_сессии_что_сессия_недействительна_или_закончилась">14.49. Как уведомить объект в сессии, что сессия недействительна или закончилась?</h3>
<div class="paragraph">
<p>Чтобы быть уверенным в том, что объект будет оповещён о прекращении сессии, нужно реализовать интерфейс <code>javax.servlet.http.HttpSessionBindingListener</code>. Два метода этого интерфейса: <code>valueBound()</code> и <code>valueUnbound()</code> используются при добавлении объекта в качестве атрибута к сессии и при уничтожении сессии соответственно.</p>
</div>
<div class="paragraph">
<p><a href="#servlets-jsp-jstl">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_какой_существует_эффективный_способ_удостоверится_что_все_сервлеты_доступны_только_для_пользователя_с_верной_сессией">14.50. Какой существует эффективный способ удостоверится, что все сервлеты доступны только для пользователя с верной сессией?</h3>
<div class="paragraph">
<p>Сервлет фильтры используются для перехвата всех запросов между контейнером сервлетов и сервлетом. Поэтому логично использовать соответствующий фильтр для проверки необходимой информации (например валидности сессии) в запросе.</p>
</div>
<div class="paragraph">
<p><a href="#servlets-jsp-jstl">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_как_мы_можем_обеспечить_transport_layer_security_для_нашего_веб_приложения">14.51. Как мы можем обеспечить <em>transport layer security</em> для нашего веб приложения?</h3>
<div class="paragraph">
<p>Для обеспечения <em>transport layer security</em> необходимо настроить поддержку SSL сервлет контейнера. Как это сделать зависит от конкретной реализации сервлет-контейнера.</p>
</div>
<div class="paragraph">
<p><a href="#servlets-jsp-jstl">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_как_организовать_подключение_к_базе_данных_обеспечить_журналирование_в_сервлете">14.52. Как организовать подключение к базе данных, обеспечить журналирование в сервлете?</h3>
<div class="paragraph">
<p>При работе с большим количеством подключений к базе данных рекомендуется инициализировать их в <em>servlet context listener</em>, а также установить в качестве атрибута контекста для возможности использования другими сервлетами.</p>
</div>
<div class="paragraph">
<p>Журналирование подключается к сервлету стандартным для логгера способом (например для <em>log4j</em> это может быть property-файл или XML-конфигурация) , а далее эта информация используется при настройке соответствующего <em>context listener</em>.</p>
</div>
<div class="paragraph">
<p><a href="#servlets-jsp-jstl">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_какие_основные_особенности_появились_в_спецификации_servlet_3">14.53. Какие основные особенности появились в спецификации <em>Servlet 3</em>?</h3>
<div class="ulist">
<ul>
<li>
<p><strong>Servlet Annotations</strong>. До Servlet 3 вся конфигурация содержалась в <code>web.xml</code>, что приводило к ошибкам и неудобству при работе с большим количестве сервлетов. Примеры аннотаций: <code>@WebServlet</code>, <code>@WebInitParam</code>, <code>@WebFilter</code>, <code>@WebListener</code>.</p>
</li>
<li>
<p><strong>Web Fragments</strong>. Одностраничное веб приложение может содержать множество модулей: все модули прописываются в <code>fragment.xml</code> в папке <code>META-INF\</code>. Это позволяет разделять веб приложение на отдельные модули, собранные как .jar-файлы в отдельной <code>lib\</code> директории.</p>
</li>
<li>
<p><strong>Динамическое добавление веб компонентов</strong>. Появилась возможность программно добавлять фильтры и слушатели, используя <code>ServletContext</code> объект. Для этого применяются методы <code>addServlet()</code>, <code>addFilter()</code>, <code>addListener()</code>. Используя это нововведение стало доступным построение динамической системы, в которой необходимый объект будет создан и вызван только по необходимости.</p>
</li>
<li>
<p><strong>Асинхронное выполнение</strong>. Поддержка асинхронной обработки позволяет передать выполнение запроса в другой поток без удержания всего сервера занятым.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a href="#servlets-jsp-jstl">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_какие_способы_аутентификации_доступны_сервлету">14.54. Какие способы аутентификации доступны сервлету?</h3>
<div class="paragraph">
<p>Спецификация сервлетов определяет четыре типа проверки подлинности:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>HTTP Basic Authentication</strong> - <code>BASIC</code>. При доступе к закрытым ресурсам появится окно, которое попросит ввести данные для аутентификации.</p>
</li>
<li>
<p><strong>Form Based Login</strong> - <code>FORM</code>. Используется собственная html форма:</p>
</li>
<li>
<p><strong>HTTP Digest Authentication</strong> - <code>DIGEST</code>. Цифровая аутентификация с шифрованием.</p>
</li>
<li>
<p><strong>HTTPS Authentication</strong> - <code>CLIENT-CERT</code>. Аутентификация с помощью клиентского сертификата.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="xml"><span class="nt">&lt;login-config&gt;</span>
    <span class="nt">&lt;auth-method&gt;</span>FORM<span class="nt">&lt;/auth-method&gt;</span>
    <span class="nt">&lt;form-login-config&gt;</span>
        <span class="nt">&lt;form-login-page&gt;</span>/login.html<span class="nt">&lt;/form-login-page&gt;</span>
        <span class="nt">&lt;form-error-page&gt;</span>/error.html<span class="nt">&lt;/form-error-page&gt;</span>
    <span class="nt">&lt;/form-login-config&gt;</span>
<span class="nt">&lt;/login-config&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><a href="#servlets-jsp-jstl">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_что_такое_java_server_pages_jsp">14.55. Что такое <em>Java Server Pages (JSP)</em>?</h3>
<div class="paragraph">
<p><strong>JSP (JavaServer Pages)</strong>&#8201;&#8212;&#8201;платформонезависимая переносимая и легко расширяемая технология разработки веб-приложений, позволяющая веб-разработчикам создавать содержимое, которое имеет как статические, так и динамические компоненты. Страница JSP содержит текст двух типов: статические исходные данные, которые могут быть оформлены в одном из текстовых форматов HTML, SVG, WML, или XML, и <em>JSP-элементы</em>, которые конструируют динамическое содержимое. Кроме этого могут использоваться <em>библиотеки JSP-тегов</em>, а также <em>EL (Expression Language)</em>, для внедрения Java-кода в статичное содержимое JSP-страниц.</p>
</div>
<div class="paragraph">
<p>Код JSP-страницы транслируется в Java-код сервлета с помощью компилятора JSP-страниц <em>Jasper</em>, и затем компилируется в байт-код JVM.</p>
</div>
<div class="paragraph">
<p>JSP-страницы загружаются на сервере и управляются Java EE Web Application. Обычно такие страницы упакованы в файловые архивы .war и .ear.</p>
</div>
<div class="paragraph">
<p><a href="#servlets-jsp-jstl">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_зачем_нужен_jsp">14.56. Зачем нужен JSP?</h3>
<div class="paragraph">
<p>JSP расширяет технологию сервлетов обеспечивая возможность создания динамических страницы с HTML подобным синтаксисом.</p>
</div>
<div class="paragraph">
<p>Хотя создание представлений поддерживается и в сервлетах, но большая часть любой веб-страницы является статической, поэтому код сервлета в таком случае получается чересчур перегруженным, замусоренным и поэтому при его написании легко допустить ошибку.</p>
</div>
<div class="paragraph">
<p>Еще одним преимуществом JSP является горячее развертывание - возможность заменить одну страницу на другую непосредственно в контейнере без необходимости перекомпилировать весь проект или перезапускать сервер.</p>
</div>
<div class="paragraph">
<p>Однако рекомендуется избегать написания серьёзной бизнес-логики в JSP и использовать страницу только в качестве представления.</p>
</div>
<div class="paragraph">
<p><a href="#servlets-jsp-jstl">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_опишите_как_обрабатываются_jsp_страницы_начиная_от_запроса_к_серверу_заканчивая_ответом_пользователю">14.57. Опишите, как обрабатываются JSP страницы, начиная от запроса к серверу, заканчивая ответом пользователю.</h3>
<div class="paragraph">
<p>Когда пользователь переходит по ссылке на страницу <code>page.jsp</code>, он отправляет http-запрос на сервер <code>GET /page.jsp</code>. Затем, на основе этого запроса и текста самой страницы, сервер генерирует java-класс, компилирует его и выполняет полученный сервлет, формирующий ответ пользователю в виде представления этой страницы, который сервер и перенаправляет обратно пользователю.</p>
</div>
<div class="paragraph">
<p><a href="#servlets-jsp-jstl">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_расскажите_об_этапах_фазах_жизненного_цикла_jsp">14.58. Расскажите об этапах (фазах) жизненного цикла JSP.</h3>
<div class="paragraph">
<p>Если посмотреть код внутри созданной JSP страницы, то он будет выглядеть как HTML и не будет похож на java класс. Конвертацией JSP страниц в HTML код занимается контейнер, который так же создает и сервлет для использования в веб приложении.</p>
</div>
<div class="paragraph">
<p>Жизненный цикл JSP состоит из нескольких фаз, которыми руководит JSP контейнер:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Translation</strong>&#8201;&#8212;&#8201;проверка и парсинг кода JSP страницы для создания кода сервлета.</p>
</li>
<li>
<p><strong>Compilation</strong>&#8201;&#8212;&#8201;компиляция исходного кода сервлета.</p>
</li>
<li>
<p><strong>Class Loading</strong>&#8201;&#8212;&#8201;загрузка скомпилированного класса в память.</p>
</li>
<li>
<p><strong>Instantiation</strong>&#8201;&#8212;&#8201;внедрение конструктора без параметра загруженного класса для инициализации в памяти.</p>
</li>
<li>
<p><strong>Initialization</strong>&#8201;&#8212;&#8201;вызов <code>init()</code> метода объекта JSP класса и инициализация конфигурации сервлета с первоначальными параметрами, которые указаны в дескрипторе развертывания (<code>web.xml</code>). После этой фазы JSP способен обрабатывать запросы клиентов. Обычно эти фазы происходят после первого запроса клиента (т.е. ленивая загрузка), но можно настроить загрузку и инициализацию JSP на старте приложения по аналогии с сервлетами.</p>
</li>
<li>
<p><strong>Request Processing</strong>&#8201;&#8212;&#8201;длительный жизненный цикл обработки запросов клиента JSP страницей. Обработка является многопоточной и аналогична сервлетам&#8201;&#8212;&#8201;для каждого запроса создается новый поток, объекты <code>ServletRequest</code> и <code>ServletResponse</code>, происходит выполнение сервис методов.</p>
</li>
<li>
<p><strong>Destroy</strong>&#8201;&#8212;&#8201;последняя фаза жизненного цикла JSP, на которой её класс удаляется из памяти. Обычно это происходит при выключении сервера или выгрузке приложения.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a href="#servlets-jsp-jstl">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_расскажите_о_методах_жизненного_цикла_jsp">14.59. Расскажите о методах жизненного цикла JSP.</h3>
<div class="paragraph">
<p>Контейнер сервлетов (например, Tomcat, GlassFish) создает из JSP-страницы класс сервлета, наследующего свойства интерфейса <code>javax.servlet.jsp.HttpJspBase</code> и включающего следующие методы:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>jspInit()</code>&#8201;&#8212;&#8201;метод объявлен в JSP странице и реализуется с помощью контейнера. Этот метод вызывается один раз в жизненном цикле JSP для того, чтобы инициализировать конфигурационные параметры указанные в дескрипторе развертывания. Этот метод можно переопределить с помощью определения элемента <em>JSP scripting</em> и указания необходимых параметров для инициализации;</p>
</li>
<li>
<p><code>_jspService()</code>&#8201;&#8212;&#8201;метод переопределяется контейнером автоматически и соответствует непосредственно коду JSP, описанному на странице. Этот метод определен в интерфейсе <code>HttpJspPage</code>, его имя начинается с нижнего подчеркивания и он отличается от других методов жизненного цикла тем, что его невозможно переопределить;</p>
</li>
<li>
<p><code>jspDestroy()</code>&#8201;&#8212;&#8201;метод вызывается контейнером для удаления объекта из памяти (на последней фазе жизненного цикла JSP - Destroy). Метод вызывается только один раз и доступен для переопределения, предоставляя возможность освободить ресурсы, которые были созданы в <code>jspInit()</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a href="#servlets-jsp-jstl">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_какие_методы_жизненного_цикла_jsp_могут_быть_переопределены">14.60. Какие методы жизненного цикла JSP могут быть переопределены?</h3>
<div class="paragraph">
<p>Возможно переопределить лишь <code>jspInit()</code> и <code>jspDestroy()</code> методы.</p>
</div>
<div class="paragraph">
<p><a href="#servlets-jsp-jstl">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_как_можно_предотвратить_прямой_доступ_к_jsp_странице_из_браузера">14.61. Как можно предотвратить прямой доступ к JSP странице из браузера?</h3>
<div class="paragraph">
<p>Прямой доступ к директории <code>/WEB-INF/</code> из веб-приложения отсутствует. Поэтому JSP-страницы можно расположить внутри этой папки и тем самым запретить доступ к странице из браузера. Однако, по аналогии с описанием сервлетов, будет необходимо настроить дескриптор развертывания:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="xml"><span class="nt">&lt;servlet&gt;</span>
    <span class="nt">&lt;servlet-name&gt;</span>Example<span class="nt">&lt;/servlet-name&gt;</span>
    <span class="nt">&lt;jsp-file&gt;</span>/WEB-INF/example.jsp<span class="nt">&lt;/jsp-file&gt;</span>
    <span class="nt">&lt;init-param&gt;</span>
        <span class="nt">&lt;param-name&gt;</span>exampleParameter<span class="nt">&lt;/param-name&gt;</span>
        <span class="nt">&lt;param-value&gt;</span>parameterValue<span class="nt">&lt;/param-value&gt;</span>
    <span class="nt">&lt;/init-param&gt;</span>
<span class="nt">&lt;/servlet&gt;</span>

<span class="nt">&lt;servlet-mapping&gt;</span>
    <span class="nt">&lt;servlet-name&gt;</span>Example<span class="nt">&lt;/servlet-name&gt;</span>
    <span class="nt">&lt;url-pattern&gt;</span>/example.jsp<span class="nt">&lt;/url-pattern&gt;</span>
<span class="nt">&lt;/servlet-mapping&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><a href="#servlets-jsp-jstl">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_какая_разница_между_динамическим_и_статическим_содержимым_jsp">14.62. Какая разница между <em>динамическим</em> и <em>статическим</em> содержимым JSP?</h3>
<div class="paragraph">
<p>Статическое содержимое JSP (HTML, код JavaScript, изображения и т.д.) не изменяется в процессе работы веб приложения.</p>
</div>
<div class="paragraph">
<p>Динамические ресурсы созданы для того, чтобы отображать свое содержимое в зависимости от пользовательских действий. Обычно они представлены в виде выражений EL (Expression Language), библиотек JSP-тегов и пр.</p>
</div>
<div class="paragraph">
<p><a href="#servlets-jsp-jstl">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_как_закомментировать_код_в_jsp">14.63. Как закомментировать код в JSP?</h3>
<div class="ulist">
<ul>
<li>
<p><code>&lt;!—- HTML комментарий; отображается на странице JSP —-&gt;</code> такие комментарии будут видны клиенту при просмотре кода страницы.</p>
</li>
<li>
<p><code>&lt;%—- JSP комментарий; не отображается на странице JSP —-%&gt;</code> такие комментарии описываются в созданном сервлете и не посылаются клиенту. Для любых комментариев по коду или отладочной информации необходимо использовать именно такой тип комментариев.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a href="#servlets-jsp-jstl">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_какие_существуют_основные_типы_тегов_jsp">14.64. Какие существуют основные типы тегов JSP?</h3>
<div class="ulist">
<ul>
<li>
<p><em>Выражение JSP</em>: <code>&lt;%= expression %&gt;</code> - выражение, которое будет обработано с перенаправлением результата на вывод;</p>
</li>
<li>
<p><em>Скриплет JSP</em>: <code>&lt;% code %&gt;</code> - код, добавляемый в метод <code>service()</code>.</p>
</li>
<li>
<p><em>Объявление JSP</em>: <code>&lt;%! code %&gt;</code> - код, добавляемый в тело класса сервлета вне метода <code>service()</code>.</p>
</li>
<li>
<p><em>Директива JSP page</em>: <code>&lt;%@ page att="value" %&gt;</code> - директивы для контейнера сервлетов с информацией о параметрах.</p>
</li>
<li>
<p><em>Директива JSP include</em>: <code>&lt;%@ include file="url" %&gt;</code> - файл в локальной системе, подключаемый при трансляции JSP в сервлет.</p>
</li>
<li>
<p><em>Комментарий JSP</em>: <code>&lt;%-- comment --%&gt;</code> - комментарий; игнорируется при трансляции JSP страницы в сервлет.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a href="#servlets-jsp-jstl">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_что_вы_знаете_о_действиях_jsp_action_tag_и_jsp_action_elements">14.65. Что вы знаете о действиях JSP (<em>Action tag</em> и <em>JSP Action Elements</em>).</h3>
<div class="paragraph">
<p><strong>Action tag</strong> и <strong>JSP Action Elements</strong> предоставляют методы работы с Java Beans, подключения ресурсов, проброса запросов и создания динамических XML элементов. Такие элементы всегда начинаются с записи <code>jsp:</code> и используются непосредственно внутри страницы JSP без необходимости подключения сторонних библиотек или дополнительных настроек.</p>
</div>
<div class="paragraph">
<p>Наиболее часто используемыми JSP Action Elements являются:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>jsp:include</code>: <code>&lt;jsp:include page="относительный URL" flush="true"/&gt;</code> - подключить файл при запросе страницы. Если необходимо, чтобы файл подключался в процессе трансляции страницы, то используется директива <code>page</code> совместно с атрибутом <code>include</code>;</p>
</li>
<li>
<p><code>jsp:useBean</code>: <code>&lt;jsp:useBean att=значение*/&gt;</code> или <code>&lt;jsp:useBean att=значение*&gt;...&lt;/jsp:useBean&gt;</code> - найти или создать Java bean;</p>
</li>
<li>
<p><code>jsp:setProperty</code>: <code>&lt;jsp:setProperty att=значение*/&gt;</code> - установить свойства Java bean, или явно, или указанием на соответствующее значение, передаваемое при запросе;</p>
</li>
<li>
<p><code>jsp:forward</code>: <code>&lt;jsp:forward page="относительный URL"/&gt;</code> - передать запрос другой странице;</p>
</li>
<li>
<p><code>jsp:plugin</code>: <code>&lt;jsp:plugin attribute="значение"*&gt;...&lt;/jsp:plugin&gt;</code> - сгенерировать (в зависимости от типа браузера) тэги <code>OBJECT</code> или <code>EMBED</code> для апплета, использующего технологию Java Plugin.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a href="#servlets-jsp-jstl">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_взаимодействие_jsp_сервлет_jsp">14.66. Взаимодействие <em>JSP - сервлет - JSP</em>.</h3>
<div class="paragraph">
<p><em>«JSP - сервлет - JSP»</em> архитектура построения приложений носит название <em>MVC (Model/View/Controller)</em>:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><em>Model</em> - классы данных и бизнес-логики;</p>
</li>
<li>
<p><em>View</em> - страницы JSP;</p>
</li>
<li>
<p><em>Controller</em> - сервлеты.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a href="#servlets-jsp-jstl">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_какие_области_видимости_переменных_существуют_в_jsp">14.67. Какие области видимости переменных существуют в JSP?</h3>
<div class="paragraph">
<p>Область видимости объектов определяется тем контекстом, в который помещается данный объект. В зависимости от той или иной области действия так же определяется время существования объекта.</p>
</div>
<div class="paragraph">
<p>В JSP предусмотрены следующие области действия переменных (объектов):</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>request</code> область действия запроса - объект будет доступен на текущей JSP странице, странице пересылки (при использовании <code>jsp:forward</code>) или на включаемой странице (при использовании <code>jsp:include</code>);</p>
</li>
<li>
<p><code>session</code> область действия сессии - объект будет помещен в сеанс пользователя, будет доступен на всех JSP страницах и будет существовать пока существует сессия пользователя, или он не будет из нее принудительно удален.</p>
</li>
<li>
<p><code>application</code> область действия приложения - объект будет доступен для всех пользователей на всех JSP страницах и будет существовать на протяжении всей работы приложения или пока не будет удален принудительно и контекста приложения.</p>
</li>
<li>
<p><code>page</code> область действия страницы - объект будет доступен только на той странице, где он определен. На включаемых (<code>jsp:include</code>) и переадресуемых (<code>jsp:forward</code>) страницах данный объект уже не будет доступен.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Таким образом, чтобы объект был доступен всем JSP страницам, необходимо указать область видимости <code>application</code> или <code>session</code>, в зависимости от того требуется ли доступ к объекту всем пользователям или только текущему.</p>
</div>
<div class="paragraph">
<p>Для указания требуемой области действия при определении объекта на JSP странице используется атрибут scope тега <code>jsp:useBean</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>&lt;jsp:useBean id="myBean" class="ru.javacore.MyBean" scope="session"/&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>Если не указывать атрибут <code>scope</code>, то по умолчанию задается область видимости страницы <code>page</code></p>
</div>
<div class="paragraph">
<p><a href="#servlets-jsp-jstl">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_какие_неявные_внутренние_объекты_и_методы_есть_на_jsp_странице">14.68. Какие неявные, внутренние объекты и методы есть на JSP странице?</h3>
<div class="paragraph">
<p><strong>JSP implicit objects (неявные объекты)</strong> создаются контейнером при конвертации JSP страницы в код сервлета для помощи разработчикам. Эти объекты можно использовать напрямую в скриптлетах для передачи информации в сервис методы, однако мы не можем использовать неявные объекты в JSP Declaration, т.к. такой код пойдет на уровень класса.</p>
</div>
<div class="paragraph">
<p>Существует 9 видов неявных объектов, которые можно использовать прямо на JSP странице. Семь из них объявлены как локальные переменные в начале <code>_jspService()</code> метода, а два оставшихся могут быть использованы как аргументы метода <code>_jspService()</code>.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>out Object</code> :</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre>&lt;strong&gt;Current Time is&lt;/strong&gt;: &lt;% out.print(new Date()); %&gt;&lt;br&gt;</pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>request Object</code> :</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre>&lt;strong&gt;Request User-Agent&lt;/strong&gt;: &lt;%=request.getHeader("User-Agent") %&gt;&lt;br&gt;</pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>response Object</code> :</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre>&lt;strong&gt;Response&lt;/strong&gt;: &lt;%response.addCookie(new Cookie("Test","Value")); %&gt;</pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>config Object</code> :</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre>&lt;strong&gt;User init param value&lt;/strong&gt;: &lt;%=config.getInitParameter("User") %&gt;&lt;br&gt;</pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>application Object</code> :</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre>&lt;strong&gt;User context param value&lt;/strong&gt;: &lt;%=application.getInitParameter("User") %&gt;&lt;br&gt;</pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>session Object</code> :</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre>&lt;strong&gt;User Session ID&lt;/strong&gt;: &lt;%=session.getId() %&gt;&lt;br&gt;</pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>pageContext Object</code> :</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre>&lt;% pageContext.setAttribute("Test", "Test Value"); %&gt;
&lt;strong&gt;PageContext attribute&lt;/strong&gt;: {Name="Test",Value="&lt;%=pageContext.getAttribute("Test") %&gt;"}&lt;br&gt;</pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>page Object</code> :</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre>&lt;strong&gt;Generated Servlet Name&lt;/strong&gt;: &lt;%=page.getClass().getName() %&gt;</pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>exception Object</code> :</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre>&lt;strong&gt;Exception occured&lt;/strong&gt;: &lt;%=exception %&gt;&lt;br&gt;</pre>
</div>
</div>
<div class="paragraph">
<p><a href="#servlets-jsp-jstl">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_какие_неявные_объекты_не_доступны_в_обычной_jsp_странице">14.69. Какие неявные объекты не доступны в обычной JSP странице?</h3>
<div class="paragraph">
<p>Неявный объект исключений JSP недоступен в обычных JSP страницах и используется на страницах ошибок JSP (<em>errorpage</em>) только для того, чтобы перехватить исключение, выброшенное JSP страницей и далее предоставить какую-либо полезную информацию клиенту.</p>
</div>
<div class="paragraph">
<p><a href="#servlets-jsp-jstl">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_что_вы_знаете_о_pagecontext_и_какие_преимущества_его_использования">14.70. Что вы знаете о <code>PageContext</code> и какие преимущества его использования?</h3>
<div class="paragraph">
<p>Неявный объект JSP - экземпляр класса <code>javax.servlet.jsp.PageContext</code> предоставляет доступ ко всем пространствам имён, ассоциированным с JSP-страницей, а также к различным её атрибутам.
Остальные неявные объекты добавляются к <code>pageContext</code> автоматически.</p>
</div>
<div class="paragraph">
<p>Класс <code>PageContext</code> это абстрактный класс, а его экземпляр можно получить через вызов метода <code>JspFactory.getPageContext()</code>, и освободить через вызов метода <code>JspFactory.releasePageContext()</code>.</p>
</div>
<div class="paragraph">
<p><code>PageContext</code> обладает следующим набором особенностей и возможностей:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>единый API для обслуживания пространств имён различных областей видимости;</p>
</li>
<li>
<p>несколько удобных API для доступа к различным <code>public</code>-объектам;</p>
</li>
<li>
<p>механизм получения <code>JspWriter</code> для вывода;</p>
</li>
<li>
<p>механизм обслуживания использования сессии страницей;</p>
</li>
<li>
<p>механизм экспонирования («показа») атрибутов директивы <code>page</code> среде скриптинга;</p>
</li>
<li>
<p>механизмы направления или включения текущего запроса в другие компоненты приложения;</p>
</li>
<li>
<p>механизм обработки процессов исключений на страницах ошибок <em>errorpage</em>;</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a href="#servlets-jsp-jstl">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_как_сконфигурировать_параметры_инициализации_для_jsp">14.71. Как сконфигурировать параметры инициализации для JSP?</h3>
<div class="paragraph">
<p>Параметры инициализации для JSP задаются в <code>web.xml</code> файле аналогично сервлетам - элементами <code>servlet</code> и <code>servlet-mapping</code>. Единственным отличием будет указание местонахождения JSP страницы:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="xml"><span class="nt">&lt;servlet&gt;</span>
    <span class="nt">&lt;servlet-name&gt;</span>Example<span class="nt">&lt;/servlet-name&gt;</span>
    <span class="nt">&lt;jsp-file&gt;</span>/WEB-INF/example.jsp<span class="nt">&lt;/jsp-file&gt;</span>
    <span class="nt">&lt;init-param&gt;</span>
        <span class="nt">&lt;param-name&gt;</span>exampleParameter<span class="nt">&lt;/param-name&gt;</span>
        <span class="nt">&lt;param-value&gt;</span>parameterValue<span class="nt">&lt;/param-value&gt;</span>
    <span class="nt">&lt;/init-param&gt;</span>
<span class="nt">&lt;/servlet&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><a href="#servlets-jsp-jstl">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_почему_не_рекомендуется_использовать_скриплеты_скриптовые_элементы_в_jsp">14.72. Почему не рекомендуется использовать скриплеты (скриптовые элементы) в JSP?</h3>
<div class="paragraph">
<p>JSP страницы используются в основном  для целей отображения представления (<em>view</em>), а вся бизнес-логика (<em>controller</em>) и модель (<em>model</em>) должны быть реализованы в сервлетах или классах-моделях. Обязанность JSP страницы - создание HTML ответа из переданных через атрибуты параметров. Большая часть JSP содержит HTML код, а для того, чтобы помочь верстальщикам понять JSP код страницы предоставляется функционал элементов <em>action</em>, <em>JSP EL</em>, <em>JSP Standart Tag Library</em>. Именно их и необходимо использовать вместо скриптлетов для создания моста между (JSP)HTML и (JSP)Java частями.</p>
</div>
<div class="paragraph">
<p><a href="#servlets-jsp-jstl">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_можно_ли_определить_класс_внутри_jsp_страницы">14.73. Можно ли определить класс внутри JSP страницы?</h3>
<div class="paragraph">
<p>Определить класс внутри JSP страницы можно, но это считается плохой практикой:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="o">&lt;%!</span>
<span class="kd">private</span> <span class="kd">static</span> <span class="kd">class</span> <span class="nc">ExampleOne</span> <span class="o">{</span>
  <span class="c1">//...</span>
<span class="o">}</span>
<span class="o">%&gt;</span>

<span class="o">&lt;%</span>
<span class="kd">private</span> <span class="kd">class</span> <span class="nc">ExampleTwo</span> <span class="o">{</span>
  <span class="c1">//...</span>
<span class="o">}</span>
<span class="o">%&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><a href="#servlets-jsp-jstl">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_что_вы_знаете_о_языке_выражений_jsp_jsp_expression_languageel">14.74. Что вы знаете о Языке выражений JSP (JSP Expression Language&#8201;&#8212;&#8201;EL)?</h3>
<div class="paragraph">
<p><strong>JSP Expression Language (EL)</strong>&#8201;&#8212;&#8201;скриптовый язык выражений, который позволяет получить доступ к Java компонентам (JavaBeans) из JSP. Начиная с JSP 2.0 используется внутри JSP тегов для отделения Java кода от JSP для обеспечения лёгкого доступа к Java компонентам, уменьшая при этом количество кода Java в JSP-страницах, или даже полностью исключая его.</p>
</div>
<div class="paragraph">
<p>Развитие EL происходило с целью сделать его более простым для дизайнеров, которые имеют минимальные познания в языке программирования Java. До появления языка выражений, JSP имел несколько специальных тегов таких как скриптлеты (англ.), выражения и т. п. которые позволяли записывать Java код непосредственно на странице. С использованием языка выражений веб-дизайнер должен знать только то, как организовать вызов соответствующих java-методов.</p>
</div>
<div class="paragraph">
<p>Язык выражений JSP 2.0 включает:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Создание и изменение переменных.</p>
</li>
<li>
<p>Управление потоком выполнения программы: ветвление, выполнение различных типов итераций и т.д.</p>
</li>
<li>
<p>Упрощенное обращение к встроенным JSP-объектам.</p>
</li>
<li>
<p>Возможность создавать собственные функции.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Язык выражений используется внутри конструкции <code>${ ... }</code>. Подобная конструкция может размещаться либо отдельно, либо в правой части выражения установки атрибута тега.</p>
</div>
<div class="paragraph">
<p><a href="#servlets-jsp-jstl">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_какие_типы_el_операторов_вы_знаете">14.75. Какие типы EL операторов вы знаете?</h3>
<div class="paragraph">
<p>Операторы в EL поддерживают наиболее часто используемые манипуляции данными.</p>
</div>
<div class="paragraph">
<p>Типы операторов:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Стандартные операторы отношения: <code>==</code> (или <code>eq</code>), <code>!=</code> (или <code>neq</code>), <code>&lt;</code> (или <code>lt</code>), <code>&gt;</code> (или <code>gt</code>), <code>&lt;=</code> (или <code>le</code>), <code>&gt;=</code> (или <code>ge</code>).</p>
</li>
<li>
<p>Арифметические операторы: <code>+</code>, <code>–</code>, <code>*</code>, <code>/</code> (или <code>div</code>), <code>%</code> (или <code>mod</code>).</p>
</li>
<li>
<p>Логические операторы: <code>&amp;&amp;</code> (или <code>and</code>), <code>||</code> (или <code>or</code>), <code>!</code> (или <code>not</code>).</p>
</li>
<li>
<p>Оператор <code>empty</code>&#8201;&#8212;&#8201;используется для проверки переменной на <code>null</code>, или «пустое значение», который зависит от типа проверяемого объекта. Например, нулевая длина для строки или нулевой размер для коллекции.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a href="#servlets-jsp-jstl">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_назовите_неявные_внутренние_объекты_jsp_el_и_их_отличия_от_объектов_jsp">14.76. Назовите неявные, внутренние объекты JSP EL и их отличия от объектов JSP.</h3>
<div class="paragraph">
<p>Язык выражений JSP предоставляет множество неявных объектов, которые можно использовать для получения атрибутов в различных областях видимости (scopes) и для значений параметров. Важно отметить, что они отличаются от неявных объектов JSP и содержат атрибуты в заданной области видимости. Наиболее часто использующийся implicit object в JSP EL и JSP page&#8201;&#8212;&#8201;это объект pageContext. Ниже представлена таблица неявных объектов JSP EL.</p>
</div>
<div class="paragraph">
<p><a href="#servlets-jsp-jstl">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_как_отключить_возможность_использования_el_в_jsp">14.77. Как отключить возможность использования EL в JSP?</h3>
<div class="paragraph">
<p>Для игнорирования выполнения языка выражений на странице существует два способа:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>использовать директиву <code>&lt;%@ page isELIgnored = «true» %&gt;</code>,</p>
</li>
<li>
<p>настроить <code>web.xml</code> (лучше подходит для отключения EL сразу на нескольких страницах):</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="xml"><span class="nt">&lt;jsp-config&gt;</span>
    <span class="nt">&lt;jsp-property-group&gt;</span>
        <span class="nt">&lt;url-pattern&gt;</span>*.jsp<span class="nt">&lt;/url-pattern&gt;</span>
        <span class="nt">&lt;el-ignored&gt;</span>true<span class="nt">&lt;/el-ignored&gt;</span>
    <span class="nt">&lt;/jsp-property-group&gt;</span>
<span class="nt">&lt;/jsp-config&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><a href="#servlets-jsp-jstl">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_как_узнать_тип_http_метода_используя_jsp_el">14.78. Как узнать тип HTTP метода используя JSP EL?</h3>
<div class="paragraph">
<p><code>${pageContext.request.method}</code>.</p>
</div>
<div class="paragraph">
<p><a href="#servlets-jsp-jstl">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_что_такое_jstl_jsp_standard_tag_library">14.79. Что такое <em>JSTL (JSP Standard tag library)</em>?</h3>
<div class="paragraph">
<p><strong>JavaServer Pages Standard Tag Library, JSTL, Стандартная библиотека тегов JSP</strong>&#8201;&#8212;&#8201;расширение спецификации JSP (конечный результат <em>JSR 52</em>), добавляющее библиотеку JSP тегов для общих нужд, таких как разбор XML данных, условная обработка, создание циклов и поддержка интернационализации.</p>
</div>
<div class="paragraph">
<p>JSTL является альтернативой такому виду встроенной в JSP логики, как <em>скриплеты</em> (прямые вставки Java кода). Использование стандартизованного множества тегов предпочтительнее, поскольку получаемый код легче поддерживать и проще отделять бизнес-логику от логики отображения.</p>
</div>
<div class="paragraph">
<p>Для использования JSTL тегов необходимо:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>подключить зависимости, например в <code>pom.xml</code>:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="xml"><span class="nt">&lt;dependency&gt;</span>
    <span class="nt">&lt;groupId&gt;</span>jstl<span class="nt">&lt;/groupId&gt;</span>
    <span class="nt">&lt;artifactId&gt;</span>jstl<span class="nt">&lt;/artifactId&gt;</span>
    <span class="nt">&lt;version&gt;</span>1.2<span class="nt">&lt;/version&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>
<span class="nt">&lt;dependency&gt;</span>
    <span class="nt">&lt;groupId&gt;</span>taglibs<span class="nt">&lt;/groupId&gt;</span>
    <span class="nt">&lt;artifactId&gt;</span>standard<span class="nt">&lt;/artifactId&gt;</span>
    <span class="nt">&lt;version&gt;</span>1.1.2<span class="nt">&lt;/version&gt;</span>
<span class="nt">&lt;/dependency&gt;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>указать пространство имен основных тегов JSTL через указание на JSP странице код:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre>&lt;%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %&gt;
&lt;%@ taglib uri="http://java.sun.com/jsp/jstl/fmt" prefix="fmt" %&gt;
&lt;%@ taglib uri="http://java.sun.com/jsp/jstl/sql" prefix="sql" %&gt;
&lt;%@ taglib uri="http://java.sun.com/jsp/jstl/xml" prefix="x" %&gt;
&lt;%@ taglib uri="http://java.sun.com/jsp/jstl/functions" prefix="fn" %&gt;</pre>
</div>
</div>
<div class="paragraph">
<p><a href="#servlets-jsp-jstl">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_из_каких_групп_тегов_состоит_библиотека_jstl">14.80. Из каких групп тегов состоит библиотека <em>JSTL</em>?</h3>
<div class="paragraph">
<p>Группы тегов JSTL согласно их функциональности:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><em>Core Tags</em> предоставляют возможности итерации, обработки исключений, URL, <em>forward</em>, <em>redirect response</em> и т.д.</p>
</li>
<li>
<p><em>Formatting Tags</em> и <em>Localization Tags</em> предоставляют возможности по форматированию чисел, дат и поддержки <em>i18n</em> локализации и <em>resource bundles</em>.</p>
</li>
<li>
<p><em>SQL Tags</em>&#8201;&#8212;&#8201;поддержка работы с базами данных.</p>
</li>
<li>
<p><em>XML Tags</em> используются для работы с XML документами: парсинга, преобразования данных, выполнения выражений <em>XPath</em> и т.д..</p>
</li>
<li>
<p><em>JSTL Functions Tags</em> предоставляет набор функций, которые позволяют выполнять различные операции со строками и т.п. Например, по конкатенации или разбиению строк.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a href="#servlets-jsp-jstl">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_какая_разница_между_cset_и_jspusebean">14.81. Какая разница между <code>&lt;c:set&gt;</code> и <code>&lt;jsp:useBean&gt;</code>?</h3>
<div class="paragraph">
<p>Оба тега создают и помещают экземпляры в заданную область видимости, но <code>&lt;jsp:useBean&gt;</code> только создаёт экземпляр конкретного типа, а <code>&lt;c:set&gt;</code>, создав экземпляр, позволяет дополнительно извлекать значение, например, из параметров запроса, сессии и т. д.</p>
</div>
<div class="paragraph">
<p><a href="#servlets-jsp-jstl">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_чем_отличается_cimport_от_jspinclude_и_директивы_include">14.82. Чем отличается <code>&lt;c:import&gt;</code> от <code>&lt;jsp:include&gt;</code> и директивы <code>&lt;%@include %&gt;</code>?</h3>
<div class="paragraph">
<p>По сравнению с action-тегом <code>&lt;jsp:include&gt;</code> и директивой <code>&lt;%@include %&gt;</code> тег <code>&lt;c:import&gt;</code> обеспечивает более совершенное включение динамических ресурсов, т.к. получает доступ к источнику, чтение информации из которого происходит непосредственно без буферизации и контент включается в исходную JSP построчно.</p>
</div>
<div class="paragraph">
<p><a href="#servlets-jsp-jstl">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_как_можно_расширить_функциональность_jsp">14.83. Как можно расширить функциональность JSP?</h3>

</div>
<div class="sect2">
<h3 id="_что_вы_знаете_о_написании_пользовательских_jsp_тегов">14.84. Что вы знаете о написании пользовательских JSP тегов?</h3>

</div>
<div class="sect2">
<h3 id="_приведите_пример_использования_собственных_тегов">14.85. Приведите пример использования собственных тегов.</h3>
<div class="paragraph">
<p>JSP можно расширить с помощью создания собственных тегов с необходимой функциональностью, которые можно добавить в библиотеку тегов на страницу JSP указав необходимое пространство имен.</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>/WEB-INF/exampleTag.tld</p>
</div>
</blockquote>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="xml"><span class="cp">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="nt">&lt;taglib</span> <span class="na">version=</span><span class="s">"2.1"</span> <span class="na">xmlns=</span><span class="s">"http://java.sun.com/xml/ns/j2ee"</span>
    <span class="na">xmlns:xsi=</span><span class="s">"http://www.w3.org/2001/XMLSchema-instance"</span>
    <span class="na">xsi:schemaLocation=</span><span class="s">"http://java.sun.com/xml/ns/j2ee web-jsptaglibrary_2_1.xsd"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;tlib-version&gt;</span>1.0<span class="nt">&lt;/tlib-version&gt;</span>
    <span class="nt">&lt;short-name&gt;</span>example<span class="nt">&lt;/short-name&gt;</span>
    <span class="nt">&lt;uri&gt;</span>/WEB-INF/exampleTag<span class="nt">&lt;/uri&gt;</span>
    <span class="nt">&lt;tag&gt;</span>
        <span class="nt">&lt;name&gt;</span>exampleTag<span class="nt">&lt;/name&gt;</span>
        <span class="nt">&lt;tag-class&gt;</span>xyz.company.ExampleTag<span class="nt">&lt;/tag-class&gt;</span>
        <span class="nt">&lt;body-content&gt;</span>empty<span class="nt">&lt;/body-content&gt;</span>
        <span class="nt">&lt;info&gt;</span>The example tag displays Hello World!<span class="nt">&lt;/info&gt;</span>
    <span class="nt">&lt;/tag&gt;</span>
<span class="nt">&lt;/taglib&gt;</span></code></pre>
</div>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>xyz.company.ExampleServlet.java</p>
</div>
</blockquote>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="kn">package</span> <span class="nn">xyz.company</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">java.io.IOException</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">javax.servlet.jsp.JspException</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javax.servlet.jsp.tagext.TagSupport</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">ExampleTag</span> <span class="kd">extends</span> <span class="nc">TagSupport</span><span class="o">{</span>
    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="kt">long</span> <span class="n">serialVersionUID</span> <span class="o">=</span> <span class="mi">1L</span><span class="o">;</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">int</span> <span class="nf">doStartTag</span><span class="o">()</span> <span class="kd">throws</span> <span class="nc">JspException</span> <span class="o">{</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="n">pageContext</span><span class="o">.</span><span class="na">getOut</span><span class="o">().</span><span class="na">print</span><span class="o">(</span><span class="s">"Hello World!"</span><span class="o">);</span>
        <span class="o">}</span> <span class="k">catch</span><span class="o">(</span><span class="nc">IOException</span> <span class="n">ioException</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">throw</span> <span class="k">new</span> <span class="nf">JspException</span><span class="o">(</span><span class="s">"Error: "</span> <span class="o">+</span> <span class="n">ioException</span><span class="o">.</span><span class="na">getMessage</span><span class="o">());</span>
        <span class="o">}</span>
        <span class="k">return</span> <span class="no">SKIP_BODY</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre>
</div>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>exampleTag.jsp</p>
</div>
</blockquote>
</div>
<div class="listingblock">
<div class="content">
<pre>&lt;%@ taglib uri="/WEB-INF/exampleTag.tld" prefix="example"%&gt;
&lt;%@ page session="false" pageEncoding="UTF-8"%&gt;
&lt;html&gt;
&lt;head&gt;
&lt;title&gt;Example Tag&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;h1&gt;Example Tag&lt;/h1&gt;
    &lt;p&gt;&lt;example:exampleTage /&gt;&lt;p&gt;
&lt;/body&gt;
&lt;/html&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>Также в пользовательских тегах существует возможность задать входные параметры. Например, существует необходимость отформатировать каким-либо стилем очень длинное число. Для этого можно использовать собственный тег по типу:</p>
</div>
<div class="paragraph">
<p><code>&lt;mytags:formatNumber number="123456.789" format="<mark>,</mark># #.00"/&gt;</code></p>
</div>
<div class="paragraph">
<p>Используя входные параметры, число должно быть преобразовано на JSP странице в таком виде <code>123,456.79</code> согласно шаблону. Т.к. JSTL не предоставляет такой функциональности, необходимо создать пользовательский тег для получения необходимого результата.</p>
</div>
<div class="paragraph">
<p><a href="#servlets-jsp-jstl">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_как_сделать_перенос_строки_в_html_средствами_jsp">14.86. Как сделать перенос строки в HTML средствами JSP?</h3>
<div class="paragraph">
<p>Для переноса строки можно использовать тег <code>c:out</code> и атрибут <code>escapeXml</code>, который отключает обработку HTML элементов. В этом случае браузер получит следующий код в виде строки и обработает элемент <code>&lt;br&gt;</code> как требуется:</p>
</div>
<div class="paragraph">
<p><code>&lt;c:out value="&lt;br&gt; creates a new line in HTML" escapeXml="true"&gt;&lt;/c:out&gt;</code></p>
</div>
<div class="paragraph">
<p><a href="#servlets-jsp-jstl">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_почему_не_нужно_конфигурировать_стандартные_jsp_теги_в_web_xml">14.87. Почему не нужно конфигурировать стандартные JSP теги в <code>web.xml</code>?</h3>
<div class="paragraph">
<p>Стандартные теги JSP не конфигурируются в <code>web.xml</code>, потому что tld файлы уже находятся внутри каталога <code>/META-INF/</code> в jar файлах JSTL.</p>
</div>
<div class="paragraph">
<p>Когда контейнер загружает веб-приложение и находит tld файлы в в jar файле в директории <code>/META-INF/</code>, то он автоматически настраивает их для непосредственного использования на JSP страницах. Остается только задать пространство имен на JSP странице.</p>
</div>
<div class="paragraph">
<p><a href="#servlets-jsp-jstl">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_как_можно_обработать_ошибки_jsp_страниц">14.88. Как можно обработать ошибки JSP страниц?</h3>
<div class="paragraph">
<p>Для обработки исключений выброшенных на JSP странице достаточно лишь задать страницу ошибки JSP и при её создании установить значение <em>page directive attribute</em> <code>isErrorPage</code> в значение <code>true</code>. Таким образом будет предоставлен доступ к неявным объектам исключений в JSP и появится возможность передавать собственные, более информативные сообщения об ошибках клиенту. При этом настройка дескриптора развертывания выглядит так:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="xml"><span class="nt">&lt;error-page&gt;</span>
     <span class="nt">&lt;error-code&gt;</span>404<span class="nt">&lt;/error-code&gt;</span>
     <span class="nt">&lt;location&gt;</span>/error.jsp<span class="nt">&lt;/location&gt;</span>
<span class="nt">&lt;/error-page&gt;</span>

<span class="nt">&lt;error-page&gt;</span>
     <span class="nt">&lt;exception-type&gt;</span>java.lang.Throwable<span class="nt">&lt;/exception-type&gt;</span>
     <span class="nt">&lt;location&gt;</span>/error.jsp<span class="nt">&lt;/location&gt;</span>
<span class="nt">&lt;/error-page&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><a href="#servlets-jsp-jstl">к оглавлению</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_как_происходит_обработка_ошибок_с_помощью_jstl">14.89. Как происходит обработка ошибок с помощью JSTL?</h3>
<div class="paragraph">
<p>Для перехвата и обработки исключений в служебных методах класса служат JSTL Core Tags <code>c:catch</code> и <code>c:if</code>.</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>Тег <code>c:catch</code> перехватывает исключение и обертывает его в переменную <code>exception</code>, доступную для обработки в теге <code>c:if</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code>____+++&lt;c:catch var="exception"&gt;+++&lt;% int x = 42/0;%&gt;+++&lt;/c:catch&gt;++++++&lt;c:if test="${exception ne null}"&gt;+++Exception is : $\{exception} +
Exception Message: ${exception.message}+++&lt;/c:if&gt;+++

----

Обратите внимание что используется язык выражений JSP EL в теге `c:if`.

[к оглавлению](#servlets-jsp-jstl)

## Как конфигурируется JSP в дескрипторе развертывания.
Для настройки различных параметров JSP страниц используется элемент `jsp-config`, который отвечает за:

+ управление элементами скриптлетов на странице;
+ управления выполнением в языке выражений;
+ определение шаблона URL для encoding;
+ определение размера буфера, который используется для объектов на странице;
+ обозначение групп ресурсов, соответствующих шаблону URL, которые должны быть обработаны как XML документ.

```xml
&lt;jsp-config&gt;
    &lt;taglib&gt;
        &lt;taglib-uri&gt;http://company.xyz/jsp/tlds/customtags&lt;/taglib-uri&gt;
        &lt;taglib-location&gt;/WEB-INF/exampleTag.tld&lt;/taglib-location&gt;
    &lt;/taglib&gt;
&lt;/jsp-config&gt;
----

&lt;&lt;servlets-jsp-jstl,к оглавлению&gt;&gt;

== Можно ли использовать Javascript на JSP странице?

Да, это возможно. Несмотря на то, что JSP это серверная технология, на выходе она всё равно создает `HTML` страницу, на которую можно добавлять Javascript и CSS.

&lt;&lt;servlets-jsp-jstl,к оглавлению&gt;&gt;

== Всегда ли создается объект сессии на JSP странице, можно ли отключить его создание?

Jsp-страница, по умолчанию, всегда создает сессию. Используя директиву `page` с атрибутом `session` можно изменить это поведение:

`&lt;%@ page session ="false" %&gt;`

&lt;&lt;servlets-jsp-jstl,к оглавлению&gt;&gt;

== Какая разница между `JSPWriter` и сервлетным `PrintWriter`?

`PrintWriter` является объектом отвечающим за запись содержания ответа на запрос. `JspWriter` использует объект `PrintWriter` для буферизации. Когда буфер заполняется или сбрасывается, `JspWriter` использует объект `PrintWriter` для записи содержания в ответ.

&lt;&lt;servlets-jsp-jstl,к оглавлению&gt;&gt;

== Опишите общие практические принципы работы с JSP.

Хорошей практикой работы с технологией JSP является соблюдение следующих правил:

* Следует избегать использования элементов скриптлетов на странице. Если элементы _action_, _JSTL_, _JSP EL_ не удовлетворяют потребностям, то желательно написать собственный тег.
* Рекомендуется использовать разные виды комментариев: так JSP комментарии необходимы для уровня кода и отладки, т.к. они не будут показаны клиенту.
* Не стоит размещать какой-либо бизнес логики внутри JSP страницы. Страницы должны использоваться только для создания ответов клиенту.
* Для повышения производительности лучше отключать создание сессии на странице, когда это не требуется.
* Директивы `taglib`, `page` в начале JSP страницы улучшают читабельность кода.
* Следует правильно использовать директиву `include` и элемент `jsp:include action`. Первая используется для статических ресурсов, а второй для динамических ресурсов времени выполнения.
* Обработку исключений нужно производить с помощью страниц ошибок. Это помогает избегать запуска специальных служебных методов и может повысить производительность.
* Использующиеся CSS и JavaScript должны быть разнесены в разные файлы и подключаться в начале страницы.
* В большинстве случаев JSTL должно хватать для всех нужд. Если это не так, то в начале следует проанализировать логику своего приложения, и попробовать перенести выполнения кода в сервлет, а далее с помощью установки атрибутов использовать на JSP странице только результат.

&lt;&lt;servlets-jsp-jstl,к оглавлению&gt;&gt;

== Источники

* http://javastudy.ru/interview/jee-servlet-api-questions/[javastudy.ru]
* http://www.java2ee.ru/servlets/[java2ee.ru]
* http://java-online.ru/jsp-questions.xhtml[Java-online]
* http://www.codenet.ru/webmast/java/jsp.php[Codenet]
* https://articles.javatalks.ru/articles/24[JavaTalks Articles]

xref:README.adoc[Вопросы для собеседования]


= SQL

* &lt;&lt;Что-такое-sql,Что такое _«SQL»_?&gt;&gt;
* &lt;&lt;Какие-существуют-операторы-sql,Какие существуют операторы SQL?&gt;&gt;
* &lt;&lt;Что-означает-null-в-sql,Что означает `NULL` в SQL?&gt;&gt;
* &lt;&lt;Что-такое-временная-таблица-Для-чего-она-используется,Что такое _«временная таблица»_? Для чего она используется?&gt;&gt;
* &lt;&lt;Что-такое-представление-view-и-для-чего-оно-применяется,Что такое _«представление» (view)_ и для чего оно применяется?&gt;&gt;
* &lt;&lt;Каков-общий-синтаксис-оператора-select,Каков общий синтаксис оператора `SELECT`?&gt;&gt;
* &lt;&lt;Что-такое-join,Что такое `JOIN`?&gt;&gt;
* &lt;&lt;Какие-существуют-типы-join,Какие существуют типы `JOIN`?&gt;&gt;
* &lt;&lt;Что-лучше-использовать-join-или-подзапросы,Что лучше использовать `JOIN` или подзапросы?&gt;&gt;
* &lt;&lt;Для-чего-используется-оператор-having,Для чего используется оператор `HAVING`?&gt;&gt;
* &lt;&lt;В-чем-различие-между-операторами-having-и-where,В чем различие между операторами `HAVING` и `WHERE`?&gt;&gt;
* &lt;&lt;Для-чего-используется-оператор-order-by,Для чего используется оператор `ORDER BY`?&gt;&gt;
* &lt;&lt;Для-чего-используется-оператор-group-by,Для чего используется оператор `GROUP BY`?&gt;&gt;
* &lt;&lt;Как-group-by-обрабатывает-значение-null,Как `GROUP BY` обрабатывает значение `NULL`?&gt;&gt;
* &lt;&lt;В-чем-разница-между-операторами-group-by-и-distinct,В чем разница между операторами `GROUP BY` и `DISTINCT`?&gt;&gt;
* &lt;&lt;Перечислите-основные-агрегатные-функции,Перечислите основные агрегатные функции.&gt;&gt;
* &lt;&lt;В-чем-разница-между-count-и-countcolumn,В чем разница между `COUNT(*)` и `+COUNT({column})+`?&gt;&gt;
* &lt;&lt;Что-делает-оператор-exists,Что делает оператор `EXISTS`?&gt;&gt;
* &lt;&lt;Для-чего-используются-операторы-in-between-like,Для чего используются операторы `IN`, `BETWEEN`, `LIKE`?&gt;&gt;
* &lt;&lt;Для-чего-применяется-ключевое-слово-union,Для чего применяется ключевое слово `UNION`?&gt;&gt;
* &lt;&lt;Какие-ограничения-на-целостность-данных-существуют-в-sql,Какие ограничения на целостность данных существуют в SQL?&gt;&gt;
* &lt;&lt;Какие-отличия-между-ограничениями-primary-и-unique,Какие отличия между ограничениями `PRIMARY` и `UNIQUE`?&gt;&gt;
* &lt;&lt;Может-ли-значение-в-столбце-на-который-наложено-ограничение-foreign-key-равняться-null,Может ли значение в столбце, на который наложено ограничение `FOREIGN KEY`, равняться `NULL`?&gt;&gt;
* &lt;&lt;Как-создать-индекс,Как создать индекс?&gt;&gt;
* &lt;&lt;Что-делает-оператор-merge,Что делает оператор `MERGE`?&gt;&gt;
* &lt;&lt;В-чем-отличие-между-операторами-delete-и-truncate,В чем отличие между операторами `DELETE` и `TRUNCATE`?&gt;&gt;
* &lt;&lt;Что-такое-хранимая-процедура,Что такое _«хранимая процедура»_?&gt;&gt;
* &lt;&lt;Что-такое-триггер,Что такое _«триггер»_?&gt;&gt;
* &lt;&lt;Что-такое-курсор,Что такое _«курсор»_?&gt;&gt;
* &lt;&lt;Опишите-разницу-типов-данных-datetime-и-timestamp,Опишите разницу типов данных `DATETIME` и `TIMESTAMP`.&gt;&gt;
* &lt;&lt;Для-каких-числовых-типов-недопустимо-использовать-операции-сложениявычитания,Для каких числовых типов недопустимо использовать операции сложения/вычитания?&gt;&gt;
* &lt;&lt;Какое-назначение-у-операторов-pivot-и-unpivot-в-transact-sql,Какое назначение у операторов `PIVOT` и `UNPIVOT` в Transact-SQL?&gt;&gt;
* &lt;&lt;Расскажите-об-основных-функциях-ранжирования-в-transact-sql,Расскажите об основных функциях ранжирования в Transact-SQL.&gt;&gt;
* &lt;&lt;Для-чего-используются-операторы-intersect-except-в-transact-sql,Для чего используются операторы `INTERSECT`, `EXCEPT` в Transact-SQL?&gt;&gt;
* &lt;&lt;Напишите-запрос,Напишите запрос...&gt;&gt;

== Что такое _«SQL»_?

SQL, Structured query language («язык структурированных запросов») -- формальный непроцедурный язык программирования, применяемый для создания, модификации и управления данными в произвольной реляционной базе данных, управляемой соответствующей системой управления базами данных (СУБД).

&lt;&lt;sql,к оглавлению&gt;&gt;

== Какие существуют операторы SQL?

*операторы определения данных (Data Definition Language, DDL)*:

* `CREATE` создает объект БД (базу, таблицу, представление, пользователя и т. д.),
* `ALTER` изменяет объект,
* `DROP` удаляет объект;

*операторы манипуляции данными (Data Manipulation Language, DML)*:

* `SELECT` выбирает данные, удовлетворяющие заданным условиям,
* `INSERT` добавляет новые данные,
* `UPDATE` изменяет существующие данные,
* `DELETE` удаляет данные;

*операторы определения доступа к данным (Data Control Language, DCL)*:

* `GRANT` предоставляет пользователю (группе) разрешения на определенные операции с объектом,
* `REVOKE` отзывает ранее выданные разрешения,
* `DENY` задает запрет, имеющий приоритет над разрешением;

*операторы управления транзакциями (Transaction Control Language, TCL)*:

* `COMMIT` применяет транзакцию,
* `ROLLBACK` откатывает все изменения, сделанные в контексте текущей транзакции,
* `SAVEPOINT` разбивает транзакцию на более мелкие.

&lt;&lt;sql,к оглавлению&gt;&gt;

== Что означает `NULL` в SQL?

`NULL` - специальное значение (псевдозначение), которое может быть записано в поле таблицы базы данных. NULL соответствует понятию «пустое поле», то есть «поле, не содержащее никакого значения».

`NULL` означает отсутствие, неизвестность информации. Значение `NULL` не является значением в полном смысле слова: по определению оно означает отсутствие значения и не принадлежит ни одному типу данных. Поэтому `NULL` не равно ни логическому значению `FALSE`, ни _пустой строке_, ни `0`. При сравнении `NULL` с любым значением будет получен результат `NULL`, а не `FALSE` и не `0`. Более того, `NULL` не равно `NULL`!

&lt;&lt;sql,к оглавлению&gt;&gt;

== Что такое _«временная таблица»_? Для чего она используется?

*Временная таблица* - это объект базы данных, который хранится и управляется системой базы данных на временной основе. Они могут быть локальными или глобальными. Используется для сохранения результатов вызова хранимой процедуры, уменьшение числа строк при соединениях, агрегирование данных из различных источников или как замена курсоров и параметризованных представлений.

&lt;&lt;sql,к оглавлению&gt;&gt;

== Что такое _«представление» (view)_ и для чего оно применяется?

*Представление*, View - виртуальная таблица, представляющая данные одной или более таблиц альтернативным образом.

В действительности представление -- всего лишь результат выполнения оператора `SELECT`, который хранится в структуре памяти, напоминающей SQL таблицу. Они работают в запросах и операторах DML точно также как и основные таблицы, но не содержат никаких собственных данных. Представления значительно расширяют возможности управления данными. Это способ дать публичный доступ к некоторой (но не всей) информации в таблице.

&lt;&lt;sql,к оглавлению&gt;&gt;

== Каков общий синтаксис оператора `SELECT`?

`SELECT` - оператор DML SQL, возвращающий набор данных (выборку) из базы данных, удовлетворяющих заданному условию. Имеет следующую структуру:

[,sql]
----
SELECT
       [DISTINCT | DISTINCTROW | ALL]
       select_expression,...
   FROM table_references
     [WHERE where_definition]
     [GROUP BY {unsigned_integer | column | formula}]
     [HAVING where_definition]
     [ORDER BY {unsigned_integer | column | formula} [ASC | DESC], ...]
----

&lt;&lt;sql,к оглавлению&gt;&gt;

== Что такое `JOIN`?

*JOIN* - оператор языка SQL, который является реализацией операции соединения реляционной алгебры. Предназначен для обеспечения выборки данных из двух таблиц и включения этих данных в один результирующий набор.

Особенностями операции соединения являются следующее:

* в схему таблицы-результата входят столбцы обеих исходных таблиц (таблиц-операндов), то есть схема результата является «сцеплением» схем операндов;
* каждая строка таблицы-результата является «сцеплением» строки из одной таблицы-операнда со строкой второй таблицы-операнда;
* при необходимости соединения не двух, а нескольких таблиц, операция соединения применяется несколько раз (последовательно).

[,sql]
----
SELECT
  field_name [,... n]
FROM
  Table1
  {INNER | {LEFT | RIGHT | FULL} OUTER | CROSS } JOIN
  Table2
    {ON &lt;condition&gt; | USING (field_name [,... n])}
----

&lt;&lt;sql,к оглавлению&gt;&gt;

== Какие существуют типы `JOIN`?

*(INNER) JOIN*
Результатом объединения таблиц являются записи, общие для левой и правой таблиц. Порядок таблиц для оператора не важен, поскольку оператор является симметричным.

*LEFT (OUTER) JOIN*
Производит выбор всех записей первой таблицы и соответствующих им записей второй таблицы. Если записи во второй таблице не найдены, то вместо них подставляется пустой результат (`NULL`). Порядок таблиц для оператора важен, поскольку оператор не является симметричным.

*RIGHT (OUTER) JOIN*
`LEFT JOIN` с операндами, расставленными в обратном порядке. Порядок таблиц для оператора важен, поскольку оператор не является симметричным.

*FULL (OUTER) JOIN*
Результатом объединения таблиц являются все записи, которые присутствуют в таблицах. Порядок таблиц для оператора не важен, поскольку оператор является симметричным.

*CROSS JOIN (декартово произведение)*
При выборе каждая строка одной таблицы объединяется с каждой строкой второй таблицы, давая тем самым все возможные сочетания строк двух таблиц. Порядок таблиц для оператора не важен, поскольку оператор является симметричным.

&lt;&lt;sql,к оглавлению&gt;&gt;

== Что лучше использовать `JOIN` или подзапросы?

Обычно лучше использовать `JOIN`, поскольку в большинстве случаев он более понятен и лучше оптимизируется СУБД (но 100% этого гарантировать нельзя). Так же `JOIN` имеет заметное преимущество над подзапросами в случае, когда список выбора `SELECT` содержит столбцы более чем из одной таблицы.

Подзапросы лучше использовать в случаях, когда нужно вычислять агрегатные значения и использовать их для сравнений во внешних запросах.

&lt;&lt;sql,к оглавлению&gt;&gt;

== Для чего используется оператор `HAVING`?

`HAVING` используется для фильтрации результата `GROUP BY` по заданным логическим условиям.

&lt;&lt;sql,к оглавлению&gt;&gt;

== В чем различие между операторами `HAVING` и `WHERE`?

Основное отличие 'WHERE' от 'HAVING' заключается в том, что 'WHERE' сначала выбирает строки, а затем группирует их и вычисляет агрегатные функции (таким образом, она отбирает строки для вычисления агрегатов), тогда как 'HAVING' отбирает строки групп после группировки и вычисления агрегатных функций. Как следствие, предложение 'WHERE' не должно содержать агрегатных функций; не имеет смысла использовать агрегатные функции для определения строк для вычисления агрегатных функций. Предложение 'HAVING', напротив, всегда содержит агрегатные функции. (Строго говоря, вы можете написать предложение 'HAVING', не используя агрегаты, но это редко бывает полезно. То же самое условие может работать более эффективно на стадии 'WHERE'.)

&lt;&lt;sql,к оглавлению&gt;&gt;

== Для чего используется оператор `ORDER BY`?

*ORDER BY* упорядочивает вывод запроса согласно значениям в том или ином количестве выбранных столбцов. Многочисленные столбцы упорядочиваются один внутри другого. Возможно определять возрастание `ASC` или убывание `DESC` для каждого столбца. По умолчанию установлено - возрастание.

&lt;&lt;sql,к оглавлению&gt;&gt;

== Для чего используется оператор `GROUP BY`?

`GROUP BY` используется для агрегации записей результата по заданным признакам-атрибутам.

&lt;&lt;sql,к оглавлению&gt;&gt;

== Как `GROUP BY` обрабатывает значение `NULL`?

При использовании `GROUP BY` все значения `NULL` считаются равными.

&lt;&lt;sql,к оглавлению&gt;&gt;

== В чем разница между операторами `GROUP BY` и `DISTINCT`?

`DISTINCT` указывает, что для вычислений используются только уникальные значения столбца. `NULL` считается как отдельное значение.
`GROUP BY` создает отдельную группу для всех возможных значений (включая значение `NULL`).

Если нужно удалить только дубликаты лучше использовать `DISTINCT`, `GROUP BY` лучше использовать для определения групп записей, к которым могут применяться агрегатные функции.

&lt;&lt;sql,к оглавлению&gt;&gt;

== Перечислите основные агрегатные функции.

*Агрегатных функции* - функции, которые берут группы значений и сводят их к одиночному значению.

SQL предоставляет несколько агрегатных функций:

`COUNT` - производит подсчет записей, удовлетворяющих условию запроса;
`SUM` - вычисляет арифметическую сумму всех значений колонки;
`AVG` - вычисляет среднее арифметическое всех значений;
`MAX` - определяет наибольшее из всех выбранных значений;
`MIN` - определяет наименьшее из всех выбранных значений.

&lt;&lt;sql,к оглавлению&gt;&gt;

== В чем разница между `COUNT(*)` и `+COUNT({column})+`?

`COUNT (*)` подсчитывает количество записей в таблице, не игнорируя значение NULL, поскольку эта функция оперирует записями, а не столбцами.

`+COUNT ({column})+` подсчитывает количество значений в `+{column}+`. При подсчете количества значений столбца эта форма функции `COUNT` не принимает во внимание значение `NULL`.

&lt;&lt;sql,к оглавлению&gt;&gt;

== Что делает оператор `EXISTS`?

`EXISTS` берет подзапрос, как аргумент, и оценивает его как `TRUE`, если подзапрос возвращает какие-либо записи и `FALSE`, если нет.

&lt;&lt;sql,к оглавлению&gt;&gt;

== Для чего используются операторы `IN`, `BETWEEN`, `LIKE`?

`IN` - определяет набор значений.

[,sql]
----
SELECT * FROM Persons WHERE name IN ('Ivan','Petr','Pavel');
----

`BETWEEN` определяет диапазон значений. В отличие от `IN`, `BETWEEN` чувствителен к порядку, и первое значение в предложении должно быть первым по алфавитному или числовому порядку.

[,sql]
----
SELECT * FROM Persons WHERE age BETWEEN 20 AND 25;
----

`LIKE` применим только к полям типа `CHAR` или `VARCHAR`, с которыми он используется чтобы находить подстроки. В качестве условия используются _символы шаблонизации (wildkards_) - специальные символы, которые могут соответствовать чему-нибудь:

* `_` замещает любой одиночный символ. Например, `'b_t'` будет соответствовать словам `'bat'` или `'bit'`, но не будет соответствовать `'brat'`.
* `%` замещает последовательность любого числа символов. Например `'%p%t'` будет соответствовать словам `'put'`, `'posit'`, или `'opt'`, но не `'spite'`.

[,sql]
----
SELECT * FROM UNIVERSITY WHERE NAME LIKE '%o';
----

&lt;&lt;sql,к оглавлению&gt;&gt;

== Для чего применяется ключевое слово `UNION`?

В языке SQL ключевое слово `UNION` применяется для объединения результатов двух SQL-запросов в единую таблицу, состоящую из схожих записей. Оба запроса должны возвращать одинаковое число столбцов и совместимые типы данных в соответствующих столбцах. Необходимо отметить, что `UNION` сам по себе не гарантирует порядок записей. Записи из второго запроса могут оказаться в начале, в конце или вообще перемешаться с записями из первого запроса. В случаях, когда требуется определенный порядок, необходимо использовать `ORDER BY`.

&lt;&lt;sql,к оглавлению&gt;&gt;

== Какие ограничения на целостность данных существуют в SQL?

`PRIMARY KEY` - набор полей (1 или более), значения которых образуют уникальную комбинацию и используются для однозначной идентификации записи в таблице. Для таблицы может быть создано только одно такое ограничение. Данное ограничение используется для обеспечения целостности сущности, которая описана таблицей.

`CHECK` используется для ограничения множества значений, которые могут быть помещены в данный столбец. Это ограничение используется для обеспечения целостности предметной области, которую описывают таблицы в базе.

`UNIQUE` обеспечивает отсутствие дубликатов в столбце или наборе столбцов.

`FOREIGN KEY` защищает от действий, которые могут нарушить связи между таблицами. `FOREIGN KEY` в одной таблице указывает на `PRIMARY KEY` в другой. Поэтому данное ограничение нацелено на то, чтобы не было записей `FOREIGN KEY`, которым не отвечают записи `PRIMARY KEY`.

&lt;&lt;sql,к оглавлению&gt;&gt;

== Какие отличия между ограничениями `PRIMARY` и `UNIQUE`?

По умолчанию ограничение `PRIMARY` создает кластерный индекс на столбце, а `UNIQUE` - некластерный. Другим отличием является то, что `PRIMARY` не разрешает `NULL` записей, в то время как `UNIQUE` разрешает одну (а в некоторых СУБД несколько) `NULL` запись.

&lt;&lt;sql,к оглавлению&gt;&gt;

== Может ли значение в столбце, на который наложено ограничение `FOREIGN KEY`, равняться `NULL`?

Может, если на данный столбец не наложено ограничение `NOT NULL`.

&lt;&lt;sql,к оглавлению&gt;&gt;

== Как создать индекс?

Индекс можно создать либо с помощью выражения `CREATE INDEX`:

[,sql]
----
CREATE INDEX index_name ON table_name (column_name)
----

либо указав ограничение целостности в виде уникального `UNIQUE` или первичного `PRIMARY` ключа в операторе создания таблицы `CREATE TABLE`.

&lt;&lt;sql,к оглавлению&gt;&gt;

== Что делает оператор `MERGE`?

`MERGE` позволяет осуществить слияние данных одной таблицы с данными другой таблицы. При слиянии таблиц проверяется условие, и если оно истинно, то выполняется `UPDATE`, а если нет - `INSERT`. При этом изменять поля таблицы в секции `UPDATE`, по которым идет связывание двух таблиц, нельзя.

&lt;&lt;sql,к оглавлению&gt;&gt;

== В чем отличие между операторами `DELETE` и `TRUNCATE`?

`DELETE` - оператор DML, удаляет записи из таблицы, которые удовлетворяют критерию `WHERE` при этом задействуются триггеры, ограничения и т.д.

`TRUNCATE` - DDL оператор (удаляет таблицу и создает ее заново. Причем если на эту таблицу есть ссылки `FOREGIN KEY` или таблица используется в репликации, то пересоздать такую таблицу не получится).

&lt;&lt;sql,к оглавлению&gt;&gt;

== Что такое _«хранимая процедура»_?

*Хранимая процедура* -- объект базы данных, представляющий собой набор SQL-инструкций, который хранится на сервере. Хранимые процедуры очень похожи на обыкновенные процедуры языков высокого уровня, у них могут быть входные и выходные параметры и локальные переменные, в них могут производиться числовые вычисления и операции над символьными данными, результаты которых могут присваиваться переменным и параметрам. В хранимых процедурах могут выполняться стандартные операции с базами данных (как DDL, так и DML). Кроме того, в хранимых процедурах возможны циклы и ветвления, то есть в них могут использоваться инструкции управления процессом исполнения.

Хранимые процедуры позволяют повысить производительность, расширяют возможности программирования и поддерживают функции безопасности данных. В большинстве СУБД при первом запуске хранимой процедуры она компилируется (выполняется синтаксический анализ и генерируется план доступа к данным) и в дальнейшем её обработка осуществляется быстрее.

&lt;&lt;sql,к оглавлению&gt;&gt;

== Что такое _«триггер»_?

*Триггер (trigger)* -- это хранимая процедура особого типа, которую пользователь не вызывает непосредственно, а исполнение которой обусловлено действием по модификации данных: добавлением, удалением или изменением данных в заданной таблице реляционной базы данных. Триггеры применяются для обеспечения целостности данных и реализации сложной бизнес-логики. Триггер запускается сервером автоматически и все производимые им модификации данных рассматриваются как выполняемые в транзакции, в которой выполнено действие, вызвавшее срабатывание триггера. Соответственно, в случае обнаружения ошибки или нарушения целостности данных может произойти откат этой транзакции.

Момент запуска триггера определяется с помощью ключевых слов `BEFORE` (триггер запускается до выполнения связанного с ним события) или `AFTER` (после события). В случае, если триггер вызывается до события, он может внести изменения в модифицируемую событием запись. Кроме того, триггеры могут быть привязаны не к таблице, а к представлению (VIEW). В этом случае с их помощью реализуется механизм «обновляемого представления». В этом случае ключевые слова `BEFORE` и `AFTER` влияют лишь на последовательность вызова триггеров, так как собственно событие (удаление, вставка или обновление) не происходит.

&lt;&lt;sql,к оглавлению&gt;&gt;

== Что такое _«курсор»_?

*Курсор* -- это объект базы данных, который позволяет приложениям работать с записями «по-одной», а не сразу с множеством, как это делается в обычных SQL командах.

Порядок работы с курсором такой:

* Определить курсор (`DECLARE`)
* Открыть курсор (`OPEN`)
* Получить запись из курсора (`FETCH`)
* Обработать запись...
* Закрыть курсор (`CLOSE`)
* Удалить ссылку курсора (`DEALLOCATE`). Когда удаляется последняя ссылка курсора, SQL освобождает структуры данных, составляющие курсор.

&lt;&lt;sql,к оглавлению&gt;&gt;

== Опишите разницу типов данных `DATETIME` и `TIMESTAMP`.

`DATETIME` предназначен для хранения целого числа: `YYYYMMDDHHMMSS`. И это время не зависит от временной зоны, настроенной на сервере.
Размер: 8 байт

`TIMESTAMP` хранит значение равное количеству секунд, прошедших с полуночи 1 января 1970 года по усреднённому времени Гринвича. При получении из базы отображается с учётом часового пояса. Размер: 4 байта

&lt;&lt;sql,к оглавлению&gt;&gt;

== Для каких числовых типов недопустимо использовать операции сложения/вычитания?

В качестве операндов операций сложения и вычитания нельзя использовать числовой тип `BIT`.

&lt;&lt;sql,к оглавлению&gt;&gt;

== Какое назначение у операторов `PIVOT` и `UNPIVOT` в Transact-SQL?

`PIVOT` и `UNPIVOT` являются нестандартными реляционными операторами, которые поддерживаются Transact-SQL.

Оператор `PIVOT` разворачивает возвращающее табличное значение выражение, преобразуя уникальные значения одного столбца выражения в несколько выходных столбцов, а также, в случае необходимости, объединяет оставшиеся повторяющиеся значения столбца и отображает их в выходных данных. Оператор `UNPIVOT` производит действия, обратные `PIVOT`, преобразуя столбцы возвращающего табличное значение выражения в значения столбца.

&lt;&lt;sql,к оглавлению&gt;&gt;

== Расскажите об основных функциях ранжирования в Transact-SQL.

Ранжирующие функции - это функции, которые возвращают значение для каждой записи группы в результирующем наборе данных. На практике они могут быть использованы, например, для простой нумерации списка, составления рейтинга или постраничной навигации.

К примеру, у нас имеется набор данных следующего вида:

image::images/SQL/image.png[ ]

`ROW_NUMBER` -- функция нумерации в Transact-SQL, которая возвращает просто номер записи.

Например, запрос

[,sql]
----
SELECT Studentname,
       Subject,
       Marks,
       ROW_NUMBER() OVER(ORDER BY Marks) RowNumber
FROM ExamResult;
----

Вернёт набор данных следующего вида:

image::images/SQL/row_number-sql-rank-function.png[ ]

А запрос вида

[,sql]
----
SELECT Studentname,
       Subject,
       Marks,
       ROW_NUMBER() OVER(ORDER BY Marks desc) RowNumber
FROM ExamResult;
----

Вернёт набор

image::images/SQL/row_number-example.png[ ]

`RANK` возвращает ранг каждой записи. В данном случае, в отличие от `ROW_NUMBER`, идет уже анализ значений и в случае нахождения одинаковых возвращает одинаковый ранг с пропуском следующего.

Например:

[,sql]
----
SELECT Studentname,
       Subject,
       Marks,
       RANK() OVER(PARTITION BY Studentname ORDER BY Marks DESC) Rank
FROM ExamResult
ORDER BY Studentname,
         Rank;
----

Результат:

image::images/SQL/ranksql-rank-function.png[ ]

Ещё пример:

[,sql]
----
SELECT Studentname,
       Subject,
       Marks,
       RANK() OVER(ORDER BY Marks DESC) Rank
FROM ExamResult
ORDER BY Rank;
----

Результат:

image::images/SQL/output-of-rank-function-for-similar-values.png[ ]

`DENSE_RANK` так же возвращает ранг каждой записи, но в отличие от `RANK` в случае нахождения одинаковых значений возвращает ранг без пропуска следующего.

Например:

[,sql]
----
SELECT Studentname,
       Subject,
       Marks,
       DENSE_RANK() OVER(ORDER BY Marks DESC) Rank
FROM ExamResult
ORDER BY Rank;
----

Результат:

image::images/SQL/dense_ranksql-rank-function.png[ ]

Ещё пример:

[,sql]
----
SELECT Studentname,
       Subject,
       Marks,
       DENSE_RANK() OVER(PARTITION BY Subject ORDER BY Marks DESC) Rank
FROM ExamResult
ORDER BY Studentname,
         Rank;
----

Результат:

image::images/SQL/output-of-dense_rank-function.png[ ]

Ну, и на последок, продемонстрируем разницу между `DENSE_RANK` и `RANK`:

[,sql]
----
SELECT Studentname,
       Subject,
       Marks,
       RANK() OVER(PARTITION BY StudentName ORDER BY Marks ) Rank
FROM ExamResult
ORDER BY Studentname,
         Rank;
----

[,sql]
----
SELECT Studentname,
       Subject,
       Marks,
       DENSE_RANK() OVER(PARTITION BY StudentName ORDER BY Marks ) Rank
FROM ExamResult
ORDER BY Studentname,
         Rank;
----

image::images/SQL/difference-between-rank-and-dense_rank.png[ ]

image::images/SQL/difference-between-rank-and-dense_rank-functio.png[ ]

`NTILE` -- функция Transact-SQL, которая делит результирующий набор на группы по определенному столбцу.

Например:

[,sql]
----
SELECT *,
       NTILE(2) OVER(
       ORDER BY Marks DESC) Rank
FROM ExamResult
ORDER BY rank;
----

Результат:

image::images/SQL/ntilen-sql-rank-function.png[ ]

Пример 2:

[,sql]
----
SELECT *,
       NTILE(3) OVER(
       ORDER BY Marks DESC) Rank
FROM ExamResult
ORDER BY rank;
----

Результат:

image::images/SQL/ntilen-function-with-partition.png[ ]

Пример 3:

[,sql]
----
SELECT *,
       NTILE(2) OVER(PARTITION  BY subject ORDER BY Marks DESC) Rank
FROM ExamResult
ORDER BY subject, rank;
----

Результат:

image::images/SQL/output-of-ntilen-function-with-partition.png[ ]

&lt;&lt;sql,к оглавлению&gt;&gt;

== Для чего используются операторы `INTERSECT`, `EXCEPT` в Transact-SQL?

Оператор `EXCEPT` возвращает уникальные записи из левого входного запроса, которые не выводятся правым входным запросом.

Оператор `INTERSECT` возвращает уникальные записи, выводимые левым и правым входными запросами.

&lt;&lt;sql,к оглавлению&gt;&gt;

== Напишите запрос...

[,sql]
----
CREATE TABLE table (
  id BIGINT(20) NOT NULL AUTO_INCREMENT,
  created TIMESTAMP NOT NULL DEFAULT 0,
  PRIMARY KEY (id)
);
----

Требуется написать запрос, который вернет максимальное значение `id` и значение `created` для этого `id`:

[,sql]
----
SELECT id, created FROM table where id = (SELECT MAX(id) FROM table);
----

'''

[,sql]
----
CREATE TABLE track_downloads (
  download_id BIGINT(20) NOT NULL AUTO_INCREMENT,
  track_id INT NOT NULL,
  user_id BIGINT(20) NOT NULL,
  download_time TIMESTAMP NOT NULL DEFAULT 0,
  PRIMARY KEY (download_id)
);
----

Напишите SQL-запрос, возвращающий все пары `(download_count, user_count)`, удовлетворяющие следующему условию: `user_count` -- общее ненулевое число пользователей, сделавших ровно `download_count` скачиваний `19 ноября 2010 года`:

[,sql]
----
SELECT DISTINCT download_count, COUNT(*) AS user_count
FROM (
    SELECT COUNT(*) AS download_count
    FROM track_downloads WHERE download_time="2010-11-19"
    GROUP BY user_id)
AS download_count
GROUP BY download_count;
----

&lt;&lt;sql,к оглавлению&gt;&gt;

== Источники

* https://ru.wikipedia.org/wiki/SQL[Википедия]
* http://www.quizful.net/interview/sql[Quizful]

xref:README.adoc[Вопросы для собеседования]


= Тестирование

* &lt;&lt;Что-такое-модульное-тестирование,Что такое _«модульное тестирование»_?&gt;&gt;
* &lt;&lt;Что-такое-интеграционное-тестирование,Что такое _«интеграционное тестирование»_?&gt;&gt;
* &lt;&lt;Чем-интеграционное-тестирование-отличается-от-модульного,Чем интеграционное тестирование отличается от модульного?&gt;&gt;
* &lt;&lt;Какие-существуют-виды-тестовых-объектов,Какие существуют виды тестовых объектов?&gt;&gt;
* &lt;&lt;Чем-stub-отличается-от-mock,Чем _stub_ отличается от _mock_?&gt;&gt;
* &lt;&lt;Что-такое-фикстуры,Что такое _«фикстуры»_?&gt;&gt;
* &lt;&lt;Какие-аннотации-фикстур-существуют-в-junit,Какие аннотации фикстур существуют в JUnit?&gt;&gt;
* &lt;&lt;Для-чего-в-junit-используется-аннотация-ignore,Для чего в JUnit используется аннотация `@Ignore`?&gt;&gt;

== Что такое _«модульное тестирование»_?

*Модульное/компонентное тестирование (unit testing)* - процесс в программировании, позволяющий проверить на корректность отдельные модули исходного кода программы. Идея состоит в том, чтобы писать тесты для каждой нетривиальной функции или метода. Это позволяет достаточно быстро проверить, не привело ли очередное изменение кода к регрессии, то есть к появлению ошибок в уже оттестированных местах программы, а также облегчает обнаружение и устранение таких ошибок.

Модульные тесты можно условно поделить на две группы:

* _тесты состояния (state based)_, проверяющие что вызываемый метод объекта отработал корректно, проверяя состояние тестируемого объекта после вызова метода.
* _тесты взаимодействия (interaction tests)_, в которых тестируемый объект производит манипуляции с другими объектами. Применяются, когда требуется удостовериться, что тестируемый объект корректно взаимодействует с другими объектами.

&lt;&lt;Тестирование,к оглавлению&gt;&gt;

== Что такое _«интеграционное тестирование»_?

*Интеграционное тестирование (integration testing)* -- это тестирование, проверяющие работоспособность двух или более модулей системы в совокупности -- то есть нескольких объектов как единого блока. В тестах взаимодействия же тестируется конкретный, определенный объект и то, как именно он взаимодействует с внешними зависимостями.

&lt;&lt;Тестирование,к оглавлению&gt;&gt;

== Чем интеграционное тестирование отличается от модульного?

С технологической точки зрения интеграционное тестирование является количественным развитием модульного, поскольку так же, как и модульное тестирование, оперирует интерфейсами модулей и подсистем и требует создания тестового окружения, включая заглушки на месте отсутствующих модулей. Основная разница между модульным и интеграционным тестированием состоит в целях, то есть в типах обнаруживаемых дефектов, которые, в свою очередь, определяют стратегию выбора входных данных и методов анализа.</code></pre>
</div>
</div>
</blockquote>
</div>
<div class="paragraph">
<p>Допустим, есть класс, который при определенных условиях взаимодействует с web-сервисом через зависимый объект. И нам надо проверить, что определенный метод зависимого объекта действительно вызывается. Если в качестве зависимого класса передать:</p>
</div>
<div class="quoteblock">
<blockquote>

</blockquote>
</div>
<div class="ulist">
<ul>
<li>
<p>реальный класс, работающий с web-сервисом, то это будет интеграционное тестирование.</p>
</li>
</ul>
</div>
<div class="quoteblock">
<blockquote>

</blockquote>
</div>
<div class="ulist">
<ul>
<li>
<p>заглушку, то это будет тестирование состояния.</p>
</li>
</ul>
</div>
<div class="quoteblock">
<blockquote>

</blockquote>
</div>
<div class="ulist">
<ul>
<li>
<p>шпиона, а в конце теста проверить, что определенный метод зависимого объекта действительно был вызван, то это будет тест взаимодействия.</p>
</li>
</ul>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p><a href="#Тестирование">к оглавлению</a></p>
</div>
<div class="paragraph">
<p>== Какие существуют виды тестовых объектов?</p>
</div>
<div class="paragraph">
<p><strong>пустышка (dummy)</strong> - объект, который обычно передается в тестируемый класс в качестве параметра, но не имеет поведения: с ним ничего не происходит и никакие его методы не вызываются.</p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p>Примером dummy-объектов являются new object(), null, «Ignored String» и т.д.</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p><strong>фальшивка (fake object)</strong> применяется в основном для ускорения запуска ресурсоёмких тестов и является заменой тяжеловесного внешнего зависимого объекта его легковесной реализацией.</p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p>Основные примеры&#8201;&#8212;&#8201;эмулятор базы данных (fake database) или фальшивый web-сервис.</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p><strong>заглушка (test stub)</strong> используется для получения данных из внешней зависимости, подменяя её. При этом заглушка игнорирует все данные, поступающие из тестируемого объекта, возвращая заранее определённый результат.</p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p>Тестируемый объект использует чтение из конфигурационного файла? Тогда передаем ему заглушку <code>ConfigFileStub</code> возвращающую тестовые строки конфигурации без обращения к файловой системе.</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p><strong>шпион (test spy)</strong> - разновидность заглушки, которая умеет протоколировать сделанные к ней обращения из тестируемой системы, чтобы проверить их правильность в конце теста. При этом фиксируется количество, состав и содержание параметров вызовов.</p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p>Если существует необходимость проверки, что определённый метод тестируемого класса вызывался ровно 1 раз, то шпион - именно то, что нам нужно.</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p><strong>фикция (mock object)</strong> похож на <em>шпиона</em>, но обладает расширенной функциональностью, заранее заданными поведением и реакцией на вызовы.</p>
</div>
<div class="paragraph">
<p><a href="#Тестирование">к оглавлению</a></p>
</div>
<div class="paragraph">
<p>== Чем <em>stub</em> отличается от <em>mock</em>?</p>
</div>
<div class="paragraph">
<p><em>stub</em> используется как заглушка сервисов, методов, классов и т.д. с заранее запрограммированным ответом на вызовы.</p>
</div>
<div class="paragraph">
<p><em>mock</em> использует подмену результатов вызова, проверяет сам факт взаимодействия, протоколирует и контролирует его.</p>
</div>
<div class="paragraph">
<p><a href="#Тестирование">к оглавлению</a></p>
</div>
<div class="paragraph">
<p>== Что такое <em>«фикстуры»</em>?</p>
</div>
<div class="paragraph">
<p><strong>Фикстуры (fixtures)</strong> - состояние среды тестирования, которое требуется для успешного выполнения теста. Основная задача фикстур заключается в подготовке тестового окружения с заранее фиксированным/известным состоянием, чтобы гарантировать повторяемость процесса тестирования.</p>
</div>
<div class="paragraph">
<p><a href="#Тестирование">к оглавлению</a></p>
</div>
<div class="paragraph">
<p>== Какие аннотации фикстур существуют в JUnit?</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>@BeforeClass</code> - определяет код, который должен единожды выполниться перед запуском набора тестовых методов.</p>
</li>
<li>
<p><code>@AfterClass</code> - код, выполняемый один раз после исполнения набора тестовых методов.</p>
</li>
<li>
<p><code>@Before</code> - определяет код, который должен выполняться каждый раз перд запуском любого тестовым методом.</p>
</li>
<li>
<p><code>@After</code> - код, выполняемый каждый раз после исполнения любого тестового метода.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a href="#Тестирование">к оглавлению</a></p>
</div>
<div class="paragraph">
<p>== Для чего в JUnit используется аннотация <code>@Ignore</code>?</p>
</div>
<div class="paragraph">
<p><code>@Ignore</code> указывает JUnit на необходимость пропустить данный тестовый метод.</p>
</div>
<div class="paragraph">
<p><a href="#Тестирование">к оглавлению</a></p>
</div>
<div class="paragraph">
<p>== Источники</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://ru.wikipedia.org/wiki/Тестирование_программного_обеспечения">Википедия</a></p>
</li>
<li>
<p><a href="https://habrahabr.ru/post/116372/">Хабрахабр</a></p>
</li>
<li>
<p><a href="http://www.intuit.ru/department/se/testing/5/2.html">Интуит</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a href="README.html">Вопросы для собеседования</a></p>
</div>
<div class="paragraph">
<p>= UML</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#Что-такое-uml">Что такое <em>UML</em>?</a></p>
</li>
<li>
<p><a href="#Что-такое-диаграмма-нотация-и-метамодель-в-uml">Что такое <em>«диаграмма»</em>, <em>«нотация»</em> и <em>«метамодель»</em> в UML?</a></p>
</li>
<li>
<p><a href="#Какие-существуют-типы-диаграмм">Какие существуют типы диаграмм?</a></p>
</li>
<li>
<p><a href="#Какие-виды-отношений-существуют-в-структурной-диаграмме-классов">Какие виды отношений существуют в структурной диаграмме классов?</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>== Что такое <em>UML</em>?</p>
</div>
<div class="paragraph">
<p><strong>UML</strong>&#8201;&#8212;&#8201;это унифицированный графический язык моделирования для описания, визуализации, проектирования и документирования объектно-ориентированных систем. UML призван поддерживать процесс моделирования на основе объектно-ориентированного подхода, организовывать взаимосвязь концептуальных и программных понятий, отражать проблемы масштабирования сложных систем.</p>
</div>
<div class="paragraph">
<p>Отличительной особенностью UML является то, что словарь этого языка образуют графические элементы. Каждому графическому символу соответствует конкретная семантика, поэтому модель, созданная одним человеком, может однозначно быть понята другим человеком или программным средством, интерпретирующим UML. Отсюда, в частности, следует, что модель системы, представленная на UML, может автоматически быть переведена на объектно-ориентированный язык программирования, то есть, при наличии хорошего инструментального средства визуального моделирования, поддерживающего UML, построив модель, мы получим и заготовку программного кода, соответствующего этой модели.</p>
</div>
<div class="paragraph">
<p><a href="#uml">к оглавлению</a></p>
</div>
<div class="paragraph">
<p>== Что такое <em>«диаграмма»</em>, <em>«нотация»</em> и <em>«метамодель»</em> в UML?</p>
</div>
<div class="paragraph">
<p><strong>Диаграмма</strong> - графическое представление совокупности элементов модели в форме связного графа, вершинам и ребрам (дугам) которого приписывается определенная семантика</p>
</div>
<div class="paragraph">
<p><strong>Нотация</strong>&#8201;&#8212;&#8201;совокупность символов и правила их применения, используются для представления понятий и связей между ними.
Нотация диаграммы определяет способ представления, ассоциации, множественности. Причем эти понятия должны быть точно определены.</p>
</div>
<div class="paragraph">
<p><strong>Метамодель</strong>&#8201;&#8212;&#8201;диаграмма, определяющая нотацию.
Метамодель помогает понять, что такое хорошо организованная, т.е. синтаксически правильная, модель.</p>
</div>
<div class="paragraph">
<p><a href="#uml">к оглавлению</a></p>
</div>
<div class="paragraph">
<p>== Какие существуют типы диаграмм?</p>
</div>
<div class="paragraph">
<p>== Структурные диаграммы:</p>
</div>
<div class="paragraph">
<p><strong>классов (Class diagram)</strong> описывает структуру системы, демонстрирующая классы системы, их атрибуты, методы и зависимости между классами.</p>
</div>
<div class="paragraph">
<p><strong>объектов (Object diagram)</strong> демонстрирует полный или частичный снимок моделируемой системы в заданный момент времени. На диаграмме объектов отображаются экземпляры классов (объекты) системы с указанием текущих значений их атрибутов и связей между объектами.</p>
</div>
<div class="paragraph">
<p><strong>компонентов (Component diagram)</strong> показывает разбиение программной системы на структурные компоненты и связи (зависимости) между компонентами.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>развёртывания/размещения (Deployment diagram)</strong> служит для моделирования работающих узлов и артефактов, развёрнутых на них.</p>
</li>
<li>
<p><strong>пакетов (Package diagram)</strong> используется для организации элементов в группы по какому-либо признаку с целью упрощения структуры и организации работы с моделью системы.</p>
</li>
<li>
<p><strong>профилей (Profile diagram)</strong> действует на уровне метамодели и показывает стереотип класса или пакета.</p>
</li>
<li>
<p><strong>композитной/составной структуры (Composite structure diagram)</strong> демонстрирует внутреннюю структуру класса и, по возможности, взаимодействие элементов (частей) его внутренней структуры.</p>
<div class="ulist">
<ul>
<li>
<p><strong>кооперации (Collaboration diagram)</strong> показывает роли и взаимодействие классов в рамках кооперации.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>== Диаграммы поведения:</p>
</div>
<div class="paragraph">
<p><strong>деятельности (Activity diagram)</strong> показывает разложение некоторой деятельности на её составные части. Под деятельностью понимается спецификация исполняемого поведения в виде координированного последовательного и параллельного выполнения подчинённых элементов&#8201;&#8212;&#8201;вложенных видов деятельности и отдельных действий, соединённых между собой потоками, которые идут от выходов одного узла к входам другого. Диаграммы деятельности используются при моделировании бизнес-процессов, технологических процессов, последовательных и параллельных вычислений.</p>
</div>
<div class="paragraph">
<p><strong>состояний/автомата/конечного автомата (State Machine diagram)</strong> представляет конечный автомат с простыми состояниями, переходами и композитными состояниями. Конечный автомат (State machine)&#8201;&#8212;&#8201;спецификация последовательности состояний, через которые проходит объект или взаимодействие в ответ на события своей жизни, а также ответные действия объекта на эти события. Конечный автомат прикреплён к исходному элементу (классу, кооперации или методу) и служит для определения поведения его экземпляров.</p>
</div>
<div class="paragraph">
<p><strong>вариантов использования/прецедентов (Use case diagram)</strong> отражает отношения существующие между актёрами и вариантами использования. Основная задача&#8201;&#8212;&#8201;представлять собой единое средство, дающее возможность заказчику, конечному пользователю и разработчику совместно обсуждать функциональность и поведение системы.</p>
</div>
<div class="paragraph">
<p><strong>взаимодействия (Interaction diagram)</strong>:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>коммуникации (Communication diagram)</strong> изображает взаимодействия между частями композитной структуры или ролями кооперации при этом явно указываются отношения между элементами (объектами), а время как отдельное измерение не используется (применяются порядковые номера вызовов).</p>
</li>
<li>
<p><strong>последовательности (Sequence diagram)</strong> показывает взаимодействия объектов, упорядоченные по времени их проявления.</p>
</li>
<li>
<p><strong>обзора взаимодействия (Interaction overview diagram)</strong>&#8201;&#8212;&#8201;разновидность диаграммы деятельности, включающая фрагменты диаграммы последовательности и конструкции потока управления.</p>
</li>
<li>
<p><strong>синхронизации (Timing diagram)</strong>&#8201;&#8212;&#8201;альтернативное представление диаграммы последовательности, явным образом показывающее изменения состояния на линии жизни с заданной шкалой времени. Может быть полезна в приложениях реального времени.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a href="#uml">к оглавлению</a></p>
</div>
<div class="paragraph">
<p>== Какие виды отношений существуют в структурной диаграмме классов?</p>
</div>
<div class="paragraph">
<p>== Взаимосвязи классов</p>
</div>
<div class="paragraph">
<p><strong>Обобщение (Generalization)</strong> показывает, что один из двух связанных классов (подтип) является частной формой другого (супертипа), который называется обобщением первого. На практике это означает, что любой экземпляр подтипа является также экземпляром супертипа. Обобщение также известно как <em>наследование</em>, <em>«is a» взаимосвязь</em> или <em>отношение «является»</em>.</p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p>«Табурет» является подтипом «Мебели».</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p><strong>Реализация (Implementation)</strong>&#8201;&#8212;&#8201;отношение между двумя элементами модели, в котором один элемент (клиент) реализует поведение, заданное другим (поставщиком). Реализация&#8201;&#8212;&#8201;отношение целое-часть. Поставщик, как правило является абстрактным классом или классом-интерфейсом.</p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p>«Кровать» реализует поведение «Мебели для сна»</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>== Взаимосвязи объектов классов</p>
</div>
<div class="paragraph">
<p><strong>Зависимость (Dependency)</strong> обозначает такое отношение между классами, что изменение спецификации класса-поставщика может повлиять на работу зависимого класса, но не наоборот.</p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p>«Расписание занятий» имеет зависимость от «Списка предметов». При изменении списка предметов расписание занятий будет вынуждено изменится. Однако изменение расписания занятий никак не влияет на список предметов.</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p><strong>Ассоциация (Association)</strong> показывает, что объекты одной сущности (класса) связаны с объектами другой сущности таким образом, что можно перемещаться от объектов одного класса к другому. Является общим случаем композиции и агрегации.</p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p>«Студент» и «Университет» имеют ассоциацию т.к. студент может учиться в университете и этой ассоциации можно присвоить имя «учится в».</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p><strong>Агрегация (Aggregation)</strong>&#8201;&#8212;&#8201;это разновидность ассоциации в отношении между целым и его частями. Как тип ассоциации агрегация может быть именованной. Одно отношение агрегации не может включать более двух классов (контейнер и содержимое). Агрегация встречается, когда один класс является коллекцией или контейнером других. Причём по умолчанию, агрегацией называют агрегацию по ссылке, то есть, когда время существования содержащихся классов не зависит от времени существования содержащего их класса. Если контейнер будет уничтожен, то его содержимое&#8201;&#8212;&#8201;нет.</p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p>«Студент» не является неотъемлемой частью «Группы», но в то же время, группа состоит из студентов, поэтому следует использовать агрегацию.</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p><strong>Композиция (Composition)</strong>&#8201;&#8212;&#8201;более строгий вариант агрегации. Известна также как агрегация по значению. Композиция имеет жёсткую зависимость времени существования экземпляров класса контейнера и экземпляров содержащихся классов. Если контейнер будет уничтожен, то всё его содержимое будет также уничтожено.</p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p>«Факультет» является частью «Университета» и факультет без университета существовать не может, следовательно здесь подходит композиция.</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>== #Общие взаимосвязи</p>
</div>
<div class="paragraph">
<p><strong>Зависимость</strong>&#8201;&#8212;&#8201;это слабая форма отношения использования, при котором изменение в спецификации одного влечёт за собой изменение другого, причём обратное не обязательно. Возникает, когда объект выступает, например, в форме параметра или локальной переменной. Существует несколько именованных вариантов. Зависимость может быть между экземплярами, классами или экземпляром и классом.</p>
</div>
<div class="paragraph">
<p><strong>Уточнение отношений</strong> имеет отношение к уровню детализации. Один пакет уточняет другой, если в нём содержатся те же самые элементы, но в более подробном представлении.</p>
</div>
<div class="paragraph">
<p><strong>Мощность/кратность/мультипликатор отношения</strong> означает число связей между каждым экземпляром класса (объектом) в начале линии с экземпляром класса в её конце. Различают следующие типичные случаи:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-center valign-top">нотация</th>
<th class="tableblock halign-center valign-top">объяснение</th>
<th class="tableblock halign-center valign-top">пример</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">0..1</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">Ноль или один экземпляр</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">кошка имеет или не имеет хозяина</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">Обязательно один экземпляр</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">у кошки одна мать</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">0..* или *</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">Ноль или более экземпляров</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">у кошки могут быть, а может и не быть котят</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">1..*</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">Один или более экземпляров</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">у кошки есть хотя бы одно место, где она спит</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><a href="#uml">к оглавлению</a></p>
</div>
<div class="paragraph">
<p>== Источники</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://ru.wikipedia.org/wiki/UML">Википедия</a></p>
</li>
<li>
<p><a href="http://www.informicus.ru/">Информикус</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a href="README.html">Вопросы для собеседования</a></p>
</div>
<div class="paragraph">
<p>= Основы Web</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#Что-такое-www">Что такое <em>WWW</em>?</a></p>
</li>
<li>
<p><a href="#Что-такое-w3c">Что такое <em>W3C</em>?</a></p>
</li>
<li>
<p><a href="#Какие-существуют-уровни-модели-osi">Какие существуют уровни модели <em>OSI</em>?</a></p>
</li>
<li>
<p><a href="#Что-такое-tcpip">Что такое <em>TCP/IP</em>?</a></p>
</li>
<li>
<p><a href="#Что-такое-udp">Что такое <em>UDP</em>?</a></p>
</li>
<li>
<p><a href="#Чем-отличаются-tcp-и-udp">Чем отличаются <em>TCP</em> и <em>UDP</em>?</a></p>
</li>
<li>
<p><a href="#Что-такое-протокол-передачи-данных-Какие-протоколы-вы-знаете">Что такое протокол передачи данных? Какие протоколы вы знаете?</a></p>
</li>
<li>
<p><a href="#Что-такое-http-и-https-Чем-они-отличаются">Что такое <em>HTTP</em> и <em>HTTPS</em>? Чем они отличаются?</a></p>
</li>
<li>
<p><a href="#Что-такое-ftp">Что такое <em>FTP</em>?</a></p>
</li>
<li>
<p><a href="#Чем-отличаются-методы-get-и-post">Чем отличаются методы <em>GET</em> и <em>POST</em>?</a></p>
</li>
<li>
<p><a href="#Что-такое-mime-тип">Что такое <em>MIME тип</em>?</a></p>
</li>
<li>
<p><a href="#Что-такое-web-server">Что такое <em>Web server</em>?</a></p>
</li>
<li>
<p><a href="#Что-такое-web-application">Что такое <em>Web application</em>?</a></p>
</li>
<li>
<p><a href="#Что-такое-application-server">Что такое <em>Application server</em>?</a></p>
</li>
<li>
<p><a href="#Чем-отличаются-web-server-и-application-server">Чем отличаются <em>Web server</em> и <em>Application server</em>?</a></p>
</li>
<li>
<p><a href="#Что-такое-ajax-Как-принципиально-устроена-эта-технология">Что такое <em>AJAX</em>? Как принципиально устроена эта технология?</a></p>
</li>
<li>
<p><a href="#Что-такое-websocket">Что такое <em>WebSocket</em>?</a></p>
</li>
<li>
<p><a href="#Что-такое-json">Что такое <em>JSON</em>?</a></p>
</li>
<li>
<p><a href="#Что-такое-json-схема">Что такое <em>JSON схема</em>?</a></p>
</li>
<li>
<p><a href="#Что-такое-cookies">Что такое <em>cookies</em>?</a></p>
</li>
<li>
<p><a href="#Что-такое-сессия">Что такое <em>«сессия»</em>?</a></p>
</li>
<li>
<p><a href="#Что-такое-авторизация-и-аутентификация-Чем-они-отличаются">Что такое <em>«авторизация»</em> и <em>«аутентификация»</em>? Чем они отличаются?</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>== Что такое <em>WWW</em>?</p>
</div>
<div class="paragraph">
<p><strong>WWW, World Wide Web (Всемирная паутина)</strong>&#8201;&#8212;&#8201;распределённая система, предоставляющая доступ к связанным между собой документам, расположенным на различных компьютерах, подключённых к Интернету. Для обозначения этого термина также используют слово <em>web</em>.</p>
</div>
<div class="paragraph">
<p><a href="#Основы-web">к оглавлению</a></p>
</div>
<div class="paragraph">
<p>== Что такое <em>W3C</em>?</p>
</div>
<div class="paragraph">
<p><strong>W3C, World Wide Web Consortium (Консорциум Всемирной паутины)</strong>&#8201;&#8212;&#8201;организация, разрабатывающая и внедряющая технологические стандарты для WWW.</p>
</div>
<div class="paragraph">
<p>W3C разрабатывает для Интернета единые принципы и стандарты, называемые <em>«рекомендациями» (W3C Recommendations)</em>, которые затем внедряются производителями программ и оборудования. Таким образом достигается совместимость между программными продуктами и аппаратурой различных компаний.</p>
</div>
<div class="paragraph">
<p><a href="#Основы-web">к оглавлению</a></p>
</div>
<div class="paragraph">
<p>== Какие существуют уровни модели <em>OSI</em>?</p>
</div>
<div class="paragraph">
<p>| # |                  Уровень (layer)                 |               Тип данных (PDU)            |                          Функции                         |          Примеры           |
|--:|----------------------------------|:----------------------------:|---------------------------------------|:------------------:|
| 7 | Прикладной (application)                         |                      -                    | Доступ к сетевым службам                                 | HTTP, FTP                  |
| 6 | Представительский (представления) (presentation) |                      -                    | Представление и шифрование данных                        | ASCII, JPEG                |
| 5 | Сеансовый (session)                              |                      -                    | Управление сеансом связи                                 | RPC, PAP                   |
| 4 | Транспортный (transport)                         | Сегменты(segment) / Дейтаграммы(datagram) | Прямая связь между конечными пунктами и надежность       | TCP, UDP                   |
| 3 | Сетевой (network)                                |              Пакеты (packet)              | Определение маршрута и логическая адресация              | IP, AppleTalk              |
| 2 | Канальный (data link)                            |         Биты (bit) / Кадры (frame)        | Физическая адресация                                     | Ethernet, IEEE 802.2, L2TP |
| 1 | Физический (physical)                            |                  Биты (bit)               | Работа со средой передачи, сигналами и двоичными данными | USB, витая пара            |</p>
</div>
<div class="paragraph">
<p><a href="#Основы-web">к оглавлению</a></p>
</div>
<div class="paragraph">
<p>== Что такое <em>TCP/IP</em>?</p>
</div>
<div class="paragraph">
<p><strong>TCP/IP</strong> - это два основных сетевых протокола Internet. Часто это название используют и для обозначения сетей, работающих на их основе.</p>
</div>
<div class="paragraph">
<p><strong>IP (Internet Protocol)</strong> - маршрутизируемый протокол, отвечающий за IP-адресацию, маршрутизацию, фрагментацию и восстановление пакетов. В его задачу входит продвижение пакета между сетями&#8201;&#8212;&#8201;от одного маршрутизатора до другого и тех пор, пока пакет не попадет в сеть назначения. В отличие от протоколов прикладного и транспортного уровней, протокол IP разворачивается не только на хостах, но и на всех шлюзах (маршрутизаторах). Этот протокол работает без установления соединения и без гарантированной доставки.</p>
</div>
<div class="paragraph">
<p>В настоящее время используются следующие две версии протокола IP:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><em>IPv6</em>&#8201;&#8212;&#8201;IP-адрес имеет разрядность 128 бит и записывается в виде восьми 16-битных полей, с использованием шестнадцатеричной системы счисления и с возможностью сокращения двух и более последовательных нулевых полей до <code>::</code>, например: <code>2001:db8:42::1337:cafe</code></p>
</li>
<li>
<p><em>IPv4</em>&#8201;&#8212;&#8201;IP-адрес имеет разрядность 32 бита и записывается в виде четырех десятичных чисел в диапазоне 0 &#8230;&#8203; 255 через точку, например: <code>192.0.2.34</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>TCP (Transfer Control Protocol)</strong> - протокол, обеспечивающий надежную, требующую логического соединения связь между двумя компьютерами. Отвечает за установление соединения, упорядочивание посылаемых пакетов и восстановление пакетов, потерянных в процессе передачи.</p>
</div>
<div class="paragraph">
<p>Стек протоколов <em>TCP/IP</em> включает в себя четыре уровня:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><em>канальный уровень (link layer)</em> - например Ethernet, IEEE 802.11 Wireless Ethernet, физическая среда и принципы кодирования информации</p>
</li>
<li>
<p><em>сетевой уровень (Internet layer)</em> - например IP</p>
</li>
<li>
<p><em>транспортный уровень (transport layer)</em> - например TCP, UDP</p>
</li>
<li>
<p><em>прикладной уровень (application layer)</em> - например HTTP, FTP, DNS</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>TCP-соединение двух узлов начинается с <em>handshake (рукопожатия)</em>:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Узел <em>A</em> посылает узлу <em>B</em> специальный пакет <code>SYN</code>&#8201;&#8212;&#8201;приглашение к соединению</p>
</li>
<li>
<p><em>B</em> отвечает пакетом <code>SYN-ACK</code>&#8201;&#8212;&#8201;согласием об установлении соединения</p>
</li>
<li>
<p><em>A</em> посылает пакет <code>ACK</code>&#8201;&#8212;&#8201;подтверждение, что согласие получено</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>После этого <em>TCP соединение</em> считается установленным и приложения, работающие в этих узлах, могут посылать друг другу пакеты с данными.</p>
</div>
<div class="paragraph">
<p>В заголовке <em>TCP/IP</em> пакета указывается:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>IP-адрес отправителя</p>
</li>
<li>
<p>IP-адрес получателя</p>
</li>
<li>
<p>Номер порта</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a href="#Основы-web">к оглавлению</a></p>
</div>
<div class="paragraph">
<p>== Что такое <em>UDP</em>?</p>
</div>
<div class="paragraph">
<p><strong>UDP, User Datagram Protocol (Протокол пользовательских датаграмм)</strong>&#8201;&#8212;&#8201;протокол, который обеспечивает доставку без требований соединения с удаленным модулем UDP и обязательного подтверждения получения.</p>
</div>
<div class="paragraph">
<p>К заголовку IP-пакета UDP добавляет всего четыре поля по 2 байта каждое:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><em>поле порта источника (source port)</em></p>
</li>
<li>
<p><em>поле порта пункта назначения (destination port)</em></p>
</li>
<li>
<p><em>поле длины (length)</em></p>
</li>
<li>
<p><em>поле контрольной суммы (checksum)</em></p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Поля «порт источника» и «контрольная сумма» не являются обязательными для использования в IPv4. В IPv6 необязательно только поле «порт отправителя».</p>
</div>
<div class="paragraph">
<p>UDP используется <em>DNS</em>, <em>SNMP</em>, <em>DHCP</em> и другими приложениями.</p>
</div>
<div class="paragraph">
<p><a href="#Основы-web">к оглавлению</a></p>
</div>
<div class="paragraph">
<p>== Чем отличаются <em>TCP</em> и <em>UDP</em>?</p>
</div>
<div class="paragraph">
<p><strong>TCP</strong>&#8201;&#8212;&#8201;ориентированный на соединение протокол, что означает необходимость «рукопожатия» для установки соединения между двумя хостами. Как только соединение установлено, пользователи могут отправлять данные в обоих направлениях.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><em>Надёжность</em>&#8201;&#8212;&#8201;TCP управляет подтверждением, повторной передачей и тайм-аутом сообщений. Производятся многочисленные попытки доставить сообщение. Если оно потеряется на пути, сервер вновь запросит потерянную часть. В TCP нет ни пропавших данных, ни (в случае многочисленных тайм-аутов) разорванных соединений.</p>
</li>
<li>
<p><em>Упорядоченность</em>&#8201;&#8212;&#8201;если два сообщения последовательно отправлены, первое сообщение достигнет приложения-получателя первым. Если участки данных приходят в неверном порядке, TCP отправляет неупорядоченные данные в буфер до тех пор, пока все данные не могут быть упорядочены и переданы приложению.</p>
</li>
<li>
<p><em>Тяжеловесность</em>&#8201;&#8212;&#8201;TCP необходимо три пакета для установки соединения перед тем, как отправить данные. TCP следит за надёжностью и перегрузками.</p>
</li>
<li>
<p><em>Потоковость</em>&#8201;&#8212;&#8201;данные читаются как поток байтов, не передается никаких особых обозначений для границ сообщения или сегментов.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>UDP</strong>&#8201;&#8212;&#8201;более простой, основанный на сообщениях протокол без установления соединения. Протоколы такого типа не устанавливают выделенного соединения между двумя хостами. Связь достигается путём передачи информации в одном направлении от источника к получателю без проверки готовности или состояния получателя.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><em>Ненадёжность</em>&#8201;&#8212;&#8201;когда сообщение посылается, неизвестно, достигнет ли оно своего назначения&#8201;&#8212;&#8201;оно может потеряться по пути. Нет таких понятий как подтверждение, повторная передача, тайм-аут.</p>
</li>
<li>
<p><em>Неупорядоченность</em>&#8201;&#8212;&#8201;если два сообщения отправлены одному получателю, то порядок их достижения цели не может быть предугадан.</p>
</li>
<li>
<p><em>Легковесность</em>&#8201;&#8212;&#8201;никакого упорядочивания сообщений, никакого отслеживания соединений и т. д. Это лишь транспортный уровень.</p>
</li>
<li>
<p><em>Датаграммы</em>&#8201;&#8212;&#8201;пакеты посылаются по отдельности и проверяются на целостность только если они прибыли. Пакеты имеют определенные границы, которые соблюдаются после получения, то есть операция чтения на получателе выдаст сообщение таким, каким оно было изначально послано.</p>
</li>
<li>
<p><em>Отсутствие контроля перегрузок</em>&#8201;&#8212;&#8201;для приложений с большой пропускной способностью существует шанс вызвать коллапс перегрузок, если только они не реализуют меры контроля на прикладном уровне.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a href="#Основы-web">к оглавлению</a></p>
</div>
<div class="paragraph">
<p>== Что такое протокол передачи данных? Какие протоколы вы знаете?</p>
</div>
<div class="paragraph">
<p><strong>Протокол передачи данных</strong>&#8201;&#8212;&#8201;набор соглашений интерфейса логического уровня, которые определяют обмен данными между различными программами. Эти соглашения задают единообразный способ передачи сообщений и обработки ошибок при взаимодействии программного обеспечения разнесённой в пространстве аппаратуры, соединённой тем или иным интерфейсом.</p>
</div>
<div class="paragraph">
<p>Наиболее известные протоколы передачи данных:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>HTTP (Hyper Text Transfer Protocol)</p>
</li>
<li>
<p>FTP (File Transfer Protocol)</p>
</li>
<li>
<p>POP3 (Post Office Protocol)</p>
</li>
<li>
<p>SMTP (Simple Mail Transfer Protocol)</p>
</li>
<li>
<p>TELNET (TErminaL NETwork)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a href="#Основы-web">к оглавлению</a></p>
</div>
<div class="paragraph">
<p>== Что такое <em>HTTP</em> и <em>HTTPS</em>? Чем они отличаются?</p>
</div>
<div class="paragraph">
<p><strong>HTTP, HyperText Transfer Protocol (Протокол передачи гипертекста)</strong>&#8201;&#8212;&#8201;протокол прикладного уровня передачи данных.</p>
</div>
<div class="paragraph">
<p>Основой HTTP является технология «клиент-сервер»:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><em>Потребители (клиенты)</em>, которые инициируют соединение и посылают запрос;</p>
</li>
<li>
<p><em>Поставщики (серверы)</em>, которые ожидают соединения для получения запроса, производят необходимые действия и возвращают обратно сообщение с результатом.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Для идентификации ресурсов HTTP использует глобальные URI.</p>
</div>
<div class="paragraph">
<p>HTTP не сохраняет своего состояния. Это означает отсутствие сохранения промежуточного состояния между парами «запрос-ответ».</p>
</div>
<div class="paragraph">
<p>Структура протокола:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><em>Стартовая строка (starting line)</em>&#8201;&#8212;&#8201;определяет тип сообщения;</p>
</li>
<li>
<p><em>Заголовки (headers)</em>&#8201;&#8212;&#8201;характеризуют тело сообщения, параметры передачи и прочие сведения;</p>
</li>
<li>
<p><em>Тело сообщения (message body)</em>&#8201;&#8212;&#8201;непосредственно данные сообщения. Обязательно должно отделяться от заголовков пустой строкой.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Заголовки и тело сообщения могут отсутствовать, но стартовая строка является обязательным элементом, так как указывает на тип запроса/ответа.</p>
</div>
<div class="paragraph">
<p><strong>HTTPS, HyperText Transfer Protocol Secure</strong>&#8201;&#8212;&#8201;расширение протокола HTTP, поддерживающее шифрование. Данные, передаваемые по протоколу HTTPS, «упаковываются» в криптографический протокол SSL или TLS, что обеспечивает защиту от атак, основанных на прослушивании сетевого соединения (при условии, что будут использоваться шифрующие средства и сертификат сервера проверен и ему доверяют).</p>
</div>
<div class="paragraph">
<p><strong>Различия <em>HTTP</em> и <em>HTTPS</em></strong>:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>HTTPS является расширением HTTP.</p>
</li>
<li>
<p>HTTP использует не зашифрованное соединение. Соединение по HTTPS поддерживает шифрование.</p>
</li>
<li>
<p>Работа по HTTP быстрей и менее ресурсоёмко, т.к. шифрование HTTPS требует дополнительных затрат.</p>
</li>
<li>
<p>Порты по умолчанию: в случае HTTP это TCP-порт <code>80</code>, для HTTPS - TCP-порт <code>443</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a href="#Основы-web">к оглавлению</a></p>
</div>
<div class="paragraph">
<p>== Что такое <em>FTP</em>?</p>
</div>
<div class="paragraph">
<p><strong>FTP, File Transfer Protocol (Протокол передачи файлов)</strong>&#8201;&#8212;&#8201;протокол передачи файлов между компьютерами в сети TCP. С его помощью можно подключаться к FTP-серверам, просматривать содержимое их каталогов и загружать файлы с сервера или на сервер. Протокол построен на архитектуре «клиент-сервер» и использует разные сетевые соединения для передачи команд и данных между клиентом и сервером.</p>
</div>
<div class="paragraph">
<p>По умолчанию использует TCP-порт <code>21</code>.</p>
</div>
<div class="paragraph">
<p><a href="#Основы-web">к оглавлению</a></p>
</div>
<div class="paragraph">
<p>== Чем отличаются методы <em>GET</em> и <em>POST</em>?</p>
</div>
<div class="paragraph">
<p><strong>GET</strong> передает данные серверу, используя URL, тогда как <strong>POST</strong> передает данные, используя тело HTTP запроса. Длина URL ограничена 1024 символами, это и будет верхним ограничением для данных, которые можно отослать через GET. POST может отправлять гораздо большие объемы данных. Лимит устанавливается web-server и составляет обычно около 2 Mb.</p>
</div>
<div class="paragraph">
<p>Передача данных методом POST более безопасна, чем методом GET, так как секретные данные (например пароль) не отображаются напрямую в web-клиенте пользователя, в отличии от URL, который виден почти всегда. Иногда это преимущество превращается в недостаток - вы не сможете послать данные за кого-то другого.</p>
</div>
<div class="paragraph">
<p><a href="#Основы-web">к оглавлению</a></p>
</div>
<div class="paragraph">
<p>== Что такое <em>MIME тип</em>?</p>
</div>
<div class="paragraph">
<p><strong>MIME, Multipurpose Internet Mail Extension (Многоцелевые расширения Интернет-почты)</strong>&#8201;&#8212;&#8201;спецификация для передачи по сети файлов различного типа: изображений, музыки, текстов, видео, архивов и др. В HTML указание MIME-типа используется при  передаче данных форм и вставки на страницу различных объектов.</p>
</div>
<div class="paragraph">
<p><a href="#Основы-web">к оглавлению</a></p>
</div>
<div class="paragraph">
<p>== Что такое <em>Web server</em>?</p>
</div>
<div class="paragraph">
<p><strong>Web server (Веб-сервер)</strong>&#8201;&#8212;&#8201;сервер, принимающий HTTP-запросы от клиентов и выдающий им HTTP-ответы. Так называют как программное обеспечение, выполняющее функции web-сервера, так и непосредственно компьютер, на котором это программное обеспечение работает.</p>
</div>
<div class="paragraph">
<p>Web-серверы могут иметь различные дополнительные функции, например:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>автоматизация работы web-страниц;</p>
</li>
<li>
<p>ведение журнала обращений пользователей к ресурсам;</p>
</li>
<li>
<p>аутентификация и авторизация пользователей;</p>
</li>
<li>
<p>поддержка динамически генерируемых страниц;</p>
</li>
<li>
<p>поддержка HTTPS для защищённых соединений с клиентами.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Наиболее известные web-серверы:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Apache</p>
</li>
<li>
<p>Microsoft IIS</p>
</li>
<li>
<p>nginx</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a href="#Основы-web">к оглавлению</a></p>
</div>
<div class="paragraph">
<p>== Что такое <em>Web application</em>?</p>
</div>
<div class="paragraph">
<p><strong>Web application (Веб-приложение)</strong> - клиент-серверное приложение, в котором клиентом выступает браузер, а сервером&#8201;&#8212;&#8201;web-сервер. Логика web application распределена между сервером и клиентом, хранение данных осуществляется, преимущественно, на сервере, а обмен информацией происходит по сети. Одним из преимуществ такого подхода является тот факт, что клиенты не зависят от конкретной операционной системы пользователя, поэтому web application является кроссплатформенным сервисом.</p>
</div>
<div class="paragraph">
<p><a href="#Основы-web">к оглавлению</a></p>
</div>
<div class="paragraph">
<p>== Что такое <em>Application server</em>?</p>
</div>
<div class="paragraph">
<p><strong>Application Server (Сервер приложений)</strong>&#8201;&#8212;&#8201;программа, представляющая собой сервер, который занимается системной поддержкой приложений и обеспечивает их жизненный цикл в соответствии с правилами, определёнными в спецификациях. Может работать как полноценный самостоятельный web-сервер или быть поставщиком страниц для другого web-сервера. Обеспечивает обмен данными между приложениями и клиентами, берёт на себя выполнение таких функций, как создание программной среды для функционирующего приложения, идентификацию и авторизацию клиентов, организацию сессии для каждого из них.</p>
</div>
<div class="paragraph">
<p>Наиболее известные серверы приложений Java:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Apache Tomcat</p>
</li>
<li>
<p>Jetty</p>
</li>
<li>
<p>JBoss</p>
</li>
<li>
<p>GlassFish</p>
</li>
<li>
<p>IBM WebSphere</p>
</li>
<li>
<p>Oracle Weblogic</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a href="#Основы-web">к оглавлению</a></p>
</div>
<div class="paragraph">
<p>== Чем отличаются <em>Web server</em> и <em>Application server</em>?</p>
</div>
<div class="paragraph">
<p>Понятие web server относится скорее к способу передачи данных (конкретно, по протоколу HTTP), в то время как понятие Application server относится к способу выполнения этих самых приложений (конкретно, удаленная обработка запросов клиентов при помощи каких-то программ, размещенных на сервере). Эти понятия нельзя ставить в один ряд. Они обозначают разные признаки программы. Какие-то программы удовлетворяют только одному признаку, какие-то - нескольким сразу.</p>
</div>
<div class="paragraph">
<p>Apache Tomcat умеет выполнять приложения? Да, значит он является application server. Apache Tomcat умеет отдавать данные по HTTP? - Да. Следовательно он является web server.</p>
</div>
<div class="paragraph">
<p>Возьмите какую-нибудь базу данных, в которой на хранимых процедурах описана сложная логика и можно в ответ на SQL-запросы отправлять даже sms. Такую базу данных можно назвать application server, но web server - уже нет, потому что все это не работает с клиентом по HTTP протоколу.</p>
</div>
<div class="paragraph">
<p>Возьмите чистый Apache, в котором не включены никакие модули для поддержки языков программирования. Он умеет отдавать только статичные файлы и картинки по протоколу HTTP. Это web server, но не application server. Включите модуль для поддержки PHP и разместите там программу на PHP, которая делает запросы к базе данных и динамически формирует страницы. Теперь Apache стал и application server.</p>
</div>
<div class="paragraph">
<p><a href="#Основы-web">к оглавлению</a></p>
</div>
<div class="paragraph">
<p>== Что такое <em>AJAX</em>? Как принципиально устроена эта технология?</p>
</div>
<div class="paragraph">
<p><strong>AJAX, Asynchronous Javascript and XML (Асинхронный Javascript и XML)</strong>&#8201;&#8212;&#8201;подход к построению интерактивных пользовательских интерфейсов web-приложений, заключающийся в «фоновом» обмене данными браузера и web-сервера. В результате, при обновлении данных web-страница не перезагружается полностью и web-приложения становятся быстрее и удобнее.</p>
</div>
<div class="paragraph">
<p>При использовании AJAX:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Пользователь заходит на web-страницу и взаимодействует с каким-нибудь её элементом.</p>
</li>
<li>
<p>Скрипт на языке JavaScript определяет, какая информация необходима для обновления страницы.</p>
</li>
<li>
<p>Браузер отправляет соответствующий запрос на web-сервер.</p>
</li>
<li>
<p>Web-сервер возвращает только ту часть документа, на которую пришёл запрос.</p>
</li>
<li>
<p>Скрипт вносит изменения с учётом полученной информации (без полной перезагрузки страницы).</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>AJAX базируется на двух основных принципах:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>использование технологии динамического обращения к серверу «на лету» (без перезагрузки страницы полностью) через динамическое создание:</p>
<div class="ulist">
<ul>
<li>
<p><em>дочерних фреймов</em>;</p>
</li>
<li>
<p><em>тега `&lt;script&gt;`</em>;</p>
</li>
<li>
<p><em>тега `&lt;img&gt;`</em>.</p>
</li>
</ul>
</div>
</li>
<li>
<p>использование <em>DHTML</em> для динамического изменения содержания страницы;</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>AJAX не является самостоятельной технологией, это концепция использования нескольких смежных технологий:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><em>(X)HTML</em>, <em>CSS</em> для подачи и стилизации информации;</p>
</li>
<li>
<p><em>DOM-модель</em>, операции над которой производятся Javascript на стороне клиента, для обеспечения динамического отображения и взаимодействия с информацией;</p>
</li>
<li>
<p><em>XMLHttpRequest</em> или другой транспорт (<em>IFrame</em>, <em>SCRIPT-тег</em>, <em>&#8230;&#8203;</em>) для асинхронного обмена данными с web-сервером;</p>
</li>
<li>
<p><em>JSON</em> или любой другой подходящий формат (<em>форматированный HTML</em>, <em>текст</em>, <em>XML</em>, <em>&#8230;&#8203;</em>) для обмена данными.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a href="#Основы-web">к оглавлению</a></p>
</div>
<div class="paragraph">
<p>== Что такое <em>WebSocket</em>?</p>
</div>
<div class="paragraph">
<p><strong>WebSocket</strong>&#8201;&#8212;&#8201;протокол полнодуплексной связи поверх TCP-соединения, предназначенный для обмена сообщениями между браузером и web-сервером в режиме реального времени.</p>
</div>
<div class="paragraph">
<p>Протокол <em>WebSocket</em> определяет две URI схемы</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>ws:</code> - нешифрованное соединение</p>
</li>
<li>
<p><code>wss:</code> - шифрованное соединение</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a href="#Основы-web">к оглавлению</a></p>
</div>
<div class="paragraph">
<p>== Что такое <em>JSON</em>?</p>
</div>
<div class="paragraph">
<p><strong>JSON, JavaScript Object Notation</strong>&#8201;&#8212;&#8201;текстовый формат обмена данными, основанный на JavaScript.</p>
</div>
<div class="paragraph">
<p>JSON представляет собой (в закодированном виде) одну из двух структур:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><em>Набор пар «ключ:значение»</em>;</p>
</li>
<li>
<p><em>Упорядоченный набор значений</em>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Ключом может быть только строка (регистрозависимая: имена с буквами в разных регистрах считаются разными).</p>
</div>
<div class="paragraph">
<p>В качестве значений могут быть использованы:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><em>Объект</em>&#8201;&#8212;&#8201;неупорядоченное множество пар «ключ:значение», заключённое в фигурные скобки <code>{ }</code>. Ключ описывается строкой, между ним и значением стоит символ <code>:</code>. Пары ключ-значение отделяются друг от друга запятыми;</p>
</li>
<li>
<p><em>Массив (одномерный)</em>&#8201;&#8212;&#8201;упорядоченное множество значений. Массив заключается в квадратные скобки <code>[ ]</code>. Значения разделяются запятыми.</p>
</li>
<li>
<p><em>Число</em>;</p>
</li>
<li>
<p><em>Литералы</em> <code>true</code>, <code>false</code> и <code>null</code>;</p>
</li>
<li>
<p><em>Строка</em>&#8201;&#8212;&#8201;упорядоченное множество из нуля или более символов Unicode, заключенное в кавычки <code>" "</code>. Символы могут быть указаны с использованием escape-последовательностей, начинающихся с обратной косой черты <code>\</code>, или записаны шестнадцатеричным кодом в кодировке UTF-8 в виде <code>\uFFFF</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a href="#Основы-web">к оглавлению</a></p>
</div>
<div class="paragraph">
<p>== Что такое <em>JSON схема</em>?</p>
</div>
<div class="paragraph">
<p><strong>JSON Schema</strong>&#8201;&#8212;&#8201;один из языков описания структуры JSON-документа, используя синтаксис JSON.</p>
</div>
<div class="paragraph">
<p>Это самоописательный язык: при его использовании для обработки данных и описания их допустимости могут использоваться одни и те же инструменты сериализации/десериализации.</p>
</div>
<div class="paragraph">
<p><a href="#Основы-web">к оглавлению</a></p>
</div>
<div class="paragraph">
<p>== Что такое <em>cookies</em>?</p>
</div>
<div class="paragraph">
<p><strong>Сookies («куки»)</strong>&#8201;&#8212;&#8201;небольшой фрагмент данных, отправленный web-сервером и хранимый на устройстве пользователя. Всякий раз при попытке открыть страницу сайта, web-клиент пересылает соответствующие этому сайту cookies web-серверу в составе HTTP-запроса. Применяется для сохранения данных на стороне пользователя и на практике обычно используется для:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>аутентификации пользователя;</p>
</li>
<li>
<p>хранения персональных предпочтений и настроек пользователя;</p>
</li>
<li>
<p>отслеживания состояния сеанса доступа пользователя;</p>
</li>
<li>
<p>ведения разнообразной статистики.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a href="#Основы-web">к оглавлению</a></p>
</div>
<div class="paragraph">
<p>== Что такое <em>«сессия»</em>?</p>
</div>
<div class="paragraph">
<p><strong>Сессия</strong>&#8201;&#8212;&#8201;промежуток времени между первым и последним запросами, которые пользователь отправляет со своего устройства на сервер сайта. Завершается сессия в случае, если со стороны пользователя не поступало запросов в течение определенного промежутка времени или же при обрыве связи.</p>
</div>
<div class="paragraph">
<p><a href="#Основы-web">к оглавлению</a></p>
</div>
<div class="paragraph">
<p>== Что такое <em>«авторизация»</em> и <em>«аутентификация»</em>? Чем они отличаются?</p>
</div>
<div class="paragraph">
<p><strong>Аутентификация</strong> - это проверка соответствия субъекта и того, за кого он пытается себя выдать, с помощью некой уникальной информации (отпечатки пальцев, цвет радужки, голос и тд.), в простейшем случае - с помощью имени входа и пароля.</p>
</div>
<div class="paragraph">
<p><strong>Авторизация</strong> - это проверка и определение полномочий на выполнение некоторых действий (например, чтение файла) в соответствии с ранее выполненной аутентификацией.</p>
</div>
<div class="paragraph">
<p>Очевидно, что это разные понятия, но при этом без первого не может быть второго и наоборот. То есть имея разрешение на работу, вы не сможете оказаться на рабочем месте без предъявления пропуска, равно как и нет смысла в демонстрации пропуска, если вы не планируете работать. Именно тот факт, что одного не бывает без другого, и вызывает у людей заблуждение, что это одно и то же.</p>
</div>
<div class="paragraph">
<p><a href="#Основы-web">к оглавлению</a></p>
</div>
<div class="paragraph">
<p>== Источники</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://ru.wikipedia.org/">Википедия</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a href="README.html">Вопросы для собеседования</a></p>
</div>
<div class="paragraph">
<p>= XML</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#Что-такое-xml">Что такое <em>XML</em>?</a></p>
</li>
<li>
<p><a href="#Что-такое-dtd">Что такое <em>DTD</em>?</a></p>
</li>
<li>
<p><a href="#Чем-well-formed-xml-отличается-от-valid-xml">Чем <em>well-formed XML</em> отличается от <em>valid XML</em>?</a></p>
</li>
<li>
<p><a href="#Что-такое-пространство-имен-в-xml">Что такое «<em>пространство имен</em>» в XML?</a></p>
</li>
<li>
<p><a href="#Что-такое-xsd-В-чём-его-преимущества-перед-xml-dtd">Что такое XSD? В чём его преимущества перед XML DTD?</a></p>
</li>
<li>
<p><a href="#Какие-типы-существуют-в-xsd">Какие типы существуют в XSD?</a></p>
</li>
<li>
<p><a href="#Какие-вы-знаете-методы-чтения-xml-Опишите-сильные-и-слабые-стороны-каждого-метода">Какие вы знаете методы чтения XML? Опишите сильные и слабые стороны каждого метода.</a></p>
</li>
<li>
<p><a href="#Когда-следует-использовать-dom-а-когда-sax-stax-анализаторы">Когда следует использовать <em>DOM</em>, а когда <em>SAX</em>, <em>StAX</em> анализаторы?</a>?</p>
</li>
<li>
<p><a href="#Какие-вы-знаете-способы-записи-xml">Какие вы знаете способы записи XML?</a></p>
</li>
<li>
<p><a href="#Что-такое-jaxp">Что такое <em>JAXP</em>?</a></p>
</li>
<li>
<p><a href="#Что-такое-xslt">Что такое <em>XSLT</em>?</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>== Что такое <em>XML</em>?</p>
</div>
<div class="paragraph">
<p><strong>XML, eXtensible Markup Language (расширяемый язык разметки)</strong> - язык с простым формальным синтаксисом, хорошо приспособленный для создания и обработки документов программами и одновременно удобный для чтения и создания документов человеком.</p>
</div>
<div class="paragraph">
<p>XML расширяем, он не фиксирует разметку, используемую в документах, и разработчик волен создавать разметку в соответствии с потребностями конкретной области, будучи ограниченным лишь синтаксическими правилами языка.</p>
</div>
<div class="paragraph">
<p><a href="#xml">к оглавлению</a></p>
</div>
<div class="paragraph">
<p>== Что такое <em>DTD</em>?</p>
</div>
<div class="paragraph">
<p><strong>DTD, Document Type Definition (определение типа документа)</strong>&#8201;&#8212;&#8201;это заранее определённый свод правил, задающий связи между элементами и атрибутами.</p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p>Например, DTD для HTML гласит, что тэг <code>DIV</code> должен быть внутри тэга <code>BODY</code> и может встречаться многократно, <code>TITLE</code>&#8201;&#8212;&#8201;в <code>HEAD</code> и всего один раз, а <code>SCRIPT</code>&#8201;&#8212;&#8201;и там, и там сколь угодно раз.</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>DTD обычно описывается непосредственно в документе в виде строки-формулировки, начинающейся с <code>&lt;!DOCTYPE ... &gt;</code> или отдельном файле.</p>
</div>
<div class="paragraph">
<p><a href="#xml">к оглавлению</a></p>
</div>
<div class="paragraph">
<p>== Чем <em>well-formed XML</em> отличается от <em>valid XML</em>?</p>
</div>
<div class="paragraph">
<p>В зависимости от уровня соответствия стандартам документ может быть «well-formed» («правильно построенный»), либо «valid» («действительный»).</p>
</div>
<div class="paragraph">
<p>Основные признаки <em>well-formed XML</em> следуют из формального описания стандарта:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Документ имеет ровно один корневой элемент, в котором лежат все остальные. То есть, <code>&lt;document&gt;...&lt;/document&gt;&lt;appendix&gt;...&lt;/appendix&gt;</code> - это не XML-документ.</p>
</li>
<li>
<p>Все открытые теги обязаны быть закрыты. HTML, например, допускает не закрывать многие теги (<code>&lt;p&gt;</code>, <code>&lt;body&gt;</code>, <code>&lt;li&gt;</code>, <code>&lt;td&gt;</code> и многие другие). В XML так делать нельзя.</p>
</li>
<li>
<p>Для одиночных тегов (типа <code>&lt;br&gt;</code>) , чтобы отличать их от открывающих, предусмотрена специальная запись: <code>&lt;br/&gt;</code>. Но можно написать и полностью <code>&lt;br&gt;&lt;/br&gt;</code>.</p>
</li>
<li>
<p>Имена тегов регистрозависимые. Если вы открываете тег <code>&lt;SiteDescription&gt;</code>, то его надо закрывать именно таким же, <code>&lt;/sitedescription&gt;</code> не допускается.</p>
</li>
<li>
<p>Теги не могут нарушать вложенность. Вот такого не должно быть: <code>&lt;em&gt;&lt;b&gt;...&lt;/em&gt;&lt;/b&gt;</code>.</p>
</li>
<li>
<p>Все атрибуты тегов обязаны быть заключены в двойные кавычки (<code>"</code>).</p>
</li>
<li>
<p>Есть три символа - <code>&lt;</code>, <code>&gt;</code> и <code>&amp;</code>, которые обязаны быть экранированы везде с помощью <code>&amp;lt;</code>, <code>&amp;gt;</code> и <code>&amp;amp;</code>. Внутри атрибутов надо экранировать еще и двойную кавычку с помощью <code>&amp;quot;</code>.</p>
</li>
<li>
<p>Все символы в документе обязаны соответствовать заявленной кодировке.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Документ является <em>valid</em>, если он сформирован с соблюдением всех синтаксических правил корректности конкретного XML, т.е. соответствует <em>DTD</em>.</p>
</div>
<div class="paragraph">
<p><strong><em>well-formed XML</em> - корректен синтаксически (может быть разобран парсером), а <em>valid XML</em> - корректен как синтаксически так и семантически (удовлетворяет правилам заранее описанных словаря и грамматики (DTD)).</strong></p>
</div>
<div class="paragraph">
<p><a href="#xml">к оглавлению</a></p>
</div>
<div class="paragraph">
<p>== Что такое «<em>пространство имен</em>» в XML?</p>
</div>
<div class="paragraph">
<p><strong>Пространство имён XML (XML namespace)</strong> - это идентифицируемая с помощью ссылки URI коллекция имен, используемых в XML документах для обозначения типов элементов и именования атрибутов. Пространство имен XML отличается от тех «пространств имен», которые обычно используются в компьютерных дисциплинах, тем, что в варианте для XML оно имеет внутреннюю структуру, и, с математической точки зрения, набором не является.</p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p>Пространства имён объявляются с помощью XML атрибута <code>xmlns</code>, значением которого должен быть <em>URI</em> и префикса, однозначно идентифицирующего пространство имён каждого элемента.</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>Все имена элементов в пределах пространства имён должны быть уникальны.</p>
</div>
<div class="paragraph">
<p>В общем случае пространство имён XML не требует, чтобы был определён его словарь.</p>
</div>
<div class="paragraph">
<p>XML-документ может содержать имена элементов и атрибутов из нескольких словарей XML. В каждом словаре задано своё пространство имён&#8201;&#8212;&#8201;так разрешается проблема неоднозначности имён элементов и атрибутов.</p>
</div>
<div class="paragraph">
<p><a href="#xml">к оглавлению</a></p>
</div>
<div class="paragraph">
<p>== Что такое XSD? В чём его преимущества перед XML DTD?</p>
</div>
<div class="paragraph">
<p><strong>XSD, XML Schema Definition, XML Schema (XML схема)</strong>&#8201;&#8212;&#8201;язык описания структуры XML-документа. В частности, XML Schema описывает:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><em>словарь</em> - имена элементов и атрибутов;</p>
</li>
<li>
<p><em>модель содержания</em> - взаимосвязи между элементами и атрибутами, а также их</p>
</li>
<li>
<p><em>структуру</em> документа;</p>
</li>
<li>
<p>используемые <em>типы данных</em>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Преимущества XSD перед DTD</strong> заключаются в следующем:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>DTD, в отличии от XSD, не является XML и имеет свой собственный синтаксис. В связи с этим могут возникать разнообразные проблемы с кодировкой и верификацией XML-документов.</p>
</li>
<li>
<p>При использовании XSD XML-парсер может проверить не только правильность синтаксиса XML документа, но также его структуру, модель содержания и типы данных. В XML DTD существует лишь один тип данных&#8201;&#8212;&#8201;строка и если, например, в числовом поле будет текст, то документ всё же сможет пройти верификацию, так как XML DTD не сможет проверить тип данных.</p>
</li>
<li>
<p>Нельзя поставить в соответствие одному XML документу больше одного DTD. А следовательно, и верифицировать документ можно лишь одним DTD описанием. XSD расширяем, и позволяет подключать несколько словарей для описания типовых задач.</p>
</li>
<li>
<p>XSD обладает встроенными средствами документирования, позволяющими создавать самодостаточные документы, не требующие дополнительного описания.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a href="#xml">к оглавлению</a></p>
</div>
<div class="paragraph">
<p>== Какие типы существуют в XSD?</p>
</div>
<div class="paragraph">
<p><strong>Простой тип</strong> - это определение типа для значения, которое может использоваться в качестве содержимого элемента или атрибута. Этот тип данных не может содержать элементы или иметь атрибуты.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="xsd">&lt;xsd:element name='price' type='xsd:decimal'/&gt;
...
&lt;price&gt;45.50&lt;/price&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Сложный тип</strong> - это определение типа для элементов, которые могут содержать атрибуты и другие элементы.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="xsd">&lt;xsd:element name='price'&gt;
    &lt;xsd:complexType base='xsd:decimal'&gt;
        &lt;xsd:attribute name='currency' type='xsd:string'/&gt;
    &lt;/xsd:complexType&gt;
&lt;/xsd:element&gt;
...
&lt;price currency='US'&gt;45.50&lt;/price&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p><a href="#xml">к оглавлению</a></p>
</div>
<div class="paragraph">
<p>== Какие вы знаете методы чтения XML? Опишите сильные и слабые стороны каждого метода.</p>
</div>
<div class="paragraph">
<p><strong>DOM (Document Object Model)</strong> - <em>объектный</em> - считывает XML, воссоздавая его в памяти в виде объектной структуры при этом XML документ представляется в виде набора тегов&#8201;&#8212;&#8201;узлов. Каждый узел может иметь неограниченное количество дочерних узлов. Каждый дочерний тоже может содержать несколько уровней потомков или не содержать их вовсе. Таким образом в итоге получается некое дерево.</p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p>➖ Низкая скорость работы.</p>
</div>
<div class="quoteblock">
<blockquote>

</blockquote>
</div>
<div class="paragraph">
<p>➖ Расходует много памяти.</p>
</div>
<div class="quoteblock">
<blockquote>

</blockquote>
</div>
<div class="paragraph">
<p>➕ Прост в программировании.</p>
</div>
<div class="quoteblock">
<blockquote>

</blockquote>
</div>
<div class="paragraph">
<p>➕ Если в XML много объектов с перекрёстными ссылками друг на друга, достаточно дважды пройтись по документу: первый раз создать объекты без ссылок и заполнить словарь «название-объект», второй раз&#8201;&#8212;&#8201;восстановить ссылки.</p>
</div>
<div class="quoteblock">
<blockquote>

</blockquote>
</div>
<div class="paragraph">
<p>➕ При ошибке в XML в памяти остаётся полусозданная структура XML, которая будет автоматически уничтожена.</p>
</div>
<div class="quoteblock">
<blockquote>

</blockquote>
</div>
<div class="paragraph">
<p>➕ Пригоден как для чтения так и для записи.</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p><strong>SAX (Simple API for XML)</strong> <em>событийный</em> - читает XML документ, реагируя на появляющиеся события (открывающий или закрывающий тег, строку, атрибут) вызовом предоставляемых приложением обработчиков событий. При этом, в отличии от DOM, не сохраняет документ в памяти.</p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p>➕ Высокая скорость работы</p>
</div>
<div class="quoteblock">
<blockquote>

</blockquote>
</div>
<div class="paragraph">
<p>➕ Расходует мало памяти.</p>
</div>
<div class="quoteblock">
<blockquote>

</blockquote>
</div>
<div class="paragraph">
<p>➗ Довольно сложен в программировании.</p>
</div>
<div class="quoteblock">
<blockquote>

</blockquote>
</div>
<div class="paragraph">
<p>➖ Если в XML много объектов с перекрёстными ссылками друг на друга, надо организовать временное хранение строковых ссылок, чтобы потом, когда документ будет считан, преобразовать в указатели.</p>
</div>
<div class="quoteblock">
<blockquote>

</blockquote>
</div>
<div class="paragraph">
<p>➖ При ошибке в XML в памяти остаётся полусозданная структура предметной отрасли; программист должен своими руками корректно уничтожить её.</p>
</div>
<div class="quoteblock">
<blockquote>

</blockquote>
</div>
<div class="paragraph">
<p>➖ Пригоден только для чтения.</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p><strong>StAX (Stream API for XML)</strong> <em>потоковый</em> - состоящий из двух наборов API для обработки XML, которые обеспечивают разные уровни абстракции. API с использованием курсора позволяет приложениям работать с XML как с потоком лексем (или событий); приложение может проверить статус анализатора и получить информацию о последней проанализированной лексеме, а затем перейти к следующей. Второй, высокоуровневый API, использующий итераторы событий, позволяет приложению обрабатывать XML как серию объектов событий, каждый из которых взаимодействует с фрагментом XML-структуры приложения. Всё, что требуется от приложения - это определить тип синтаксически разобранного события, отнести его к соответствующему конкретному типу и использовать соответствующие методы для получения информации, относящейся к событию.</p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p>➗ Сохраняет преимущества, которые есть в SAX по сравнению с DOM.</p>
</div>
<div class="quoteblock">
<blockquote>

</blockquote>
</div>
<div class="paragraph">
<p>➕ Не основан на обратных вызовах обработчиков, приложению не придется обслуживать эмулированное состояние анализатора, как это происходит при использовании SAX.</p>
</div>
<div class="quoteblock">
<blockquote>

</blockquote>
</div>
<div class="paragraph">
<p>➖ Пригоден только для чтения.</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p><a href="#xml">к оглавлению</a></p>
</div>
<div class="paragraph">
<p>== Когда следует использовать <em>DOM</em>, а когда <em>SAX</em>, <em>StAX</em> анализаторы?</p>
</div>
<div class="paragraph">
<p>DOM - естественный выбор, когда объектом предметной области является сам XML: когда нужно знать и иметь возможность изменять структуру документа, а также в случае многократного использования информации из документа.</p>
</div>
<div class="paragraph">
<p>Для быстрого одноразового чтения оптимальным является использование SAX или StAX.</p>
</div>
<div class="paragraph">
<p><a href="#xml">к оглавлению</a></p>
</div>
<div class="paragraph">
<p>== Какие вы знаете способы записи XML?</p>
</div>
<div class="paragraph">
<p><strong>Прямая запись</strong> - пишет XML тег за тегом, атрибут за атрибутом.</p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p>➕ Высокая скорость работы.</p>
</div>
<div class="quoteblock">
<blockquote>

</blockquote>
</div>
<div class="paragraph">
<p>➕ Экономия памяти: при использовании не создаётся промежуточных объектов.</p>
</div>
<div class="quoteblock">
<blockquote>

</blockquote>
</div>
<div class="paragraph">
<p>➖ Пригоден только для записи.</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p><strong>Запись DOM (Document Object Model)</strong> - создаёт полную структуру XML и только потом записывает её.</p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p>➖ Низкая скорость работы.</p>
</div>
<div class="quoteblock">
<blockquote>

</blockquote>
</div>
<div class="paragraph">
<p>➖ Не оптимальный расход памяти.</p>
</div>
<div class="quoteblock">
<blockquote>

</blockquote>
</div>
<div class="paragraph">
<p>➕ Пригоден как для записи, так и для чтения.</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p><a href="#xml">к оглавлению</a></p>
</div>
<div class="paragraph">
<p>== Что такое <em>JAXP</em>?</p>
</div>
<div class="paragraph">
<p><strong>JAXP, The Java API for XML Processing (Java API для обработки XML)</strong>&#8201;&#8212;&#8201;набор API, упрощающих обработку XML данных в программах написанных на Java. Содержит реализации  DOM, SAX и StAX парсеров, поддерживает XSLT и возможность работать с DTD.</p>
</div>
<div class="paragraph">
<p><a href="#xml">к оглавлению</a></p>
</div>
<div class="paragraph">
<p>== Что такое <em>XSLT</em>?</p>
</div>
<div class="paragraph">
<p><strong>XSLT, eXtensible Stylesheet Language Transformations</strong>&#8201;&#8212;&#8201;язык преобразования XML-документов.</p>
</div>
<div class="paragraph">
<p>XSLT создавался для применения в <em>XSL (eXtensible Stylesheet Language)</em> - языке стилей для XML. Во время XSL-преобразования XSLT-процессор считывает XML-документ и таблицу(ы) стилей XSLT. На основе инструкций, которые процессор находит в таблице(ах) стилей XSLT, он вырабатывает новый XML-документ или его фрагмент.</p>
</div>
<div class="paragraph">
<p><a href="#xml">к оглавлению</a></p>
</div>
<div class="paragraph">
<p>== Источники</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://ru.wikipedia.org/wiki/XML">Википедия</a></p>
</li>
<li>
<p><a href="http://citforum.ru/internet/xnamsps/index.shtml#ns-decl">CIT Forum</a></p>
</li>
<li>
<p><a href="http://www.quizful.net/interview/java/xml-and-parsers">Quizful</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a href="README.html">Вопросы для собеседования</a></p>
</div>
</blockquote>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2022-08-20 03:29:06 UTC
</div>
</div>
</body>
</html>